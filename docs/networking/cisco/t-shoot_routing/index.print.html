<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.124.1">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="description" content="Problem Isolation Using the ping Command
functions as part of Layer 3, as a control protocol to assist IP by helping manage the IP network functions.
Ping options
The name or IP address of the destination,
how many times the command should send an echo request,
how long the command should wait (timeout) for an echo reply,
how big to make the packets, and many other options.
Extended ping allows R1’s ping command to use R1’s LAN IP address from within subnet 172.">
    <meta name="author" content="David">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Troubleshooting Routing - Perfect Dark Mode">
    <meta name="twitter:description" content="Problem Isolation Using the ping Command
functions as part of Layer 3, as a control protocol to assist IP by helping manage the IP network functions.
Ping options
The name or IP address of the destination,
how many times the command should send an echo request,
how long the command should wait (timeout) for an echo reply,
how big to make the packets, and many other options.
Extended ping allows R1’s ping command to use R1’s LAN IP address from within subnet 172.">
    <meta property="og:url" content="http://perfectdarkmode.com/networking/cisco/t-shoot_routing/">
    <meta property="og:site_name" content="Perfect Dark Mode">
    <meta property="og:title" content="Troubleshooting Routing - Perfect Dark Mode">
    <meta property="og:description" content="Problem Isolation Using the ping Command
functions as part of Layer 3, as a control protocol to assist IP by helping manage the IP network functions.
Ping options
The name or IP address of the destination,
how many times the command should send an echo request,
how long the command should wait (timeout) for an echo reply,
how big to make the packets, and many other options.
Extended ping allows R1’s ping command to use R1’s LAN IP address from within subnet 172.">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Networking">
    <meta property="article:published_time" content="2023-11-06T06:20:36-07:00">
    <meta property="article:modified_time" content="2023-11-06T06:20:36-07:00">
    <meta itemprop="name" content="Troubleshooting Routing - Perfect Dark Mode">
    <meta itemprop="description" content="Problem Isolation Using the ping Command
functions as part of Layer 3, as a control protocol to assist IP by helping manage the IP network functions.
Ping options
The name or IP address of the destination,
how many times the command should send an echo request,
how long the command should wait (timeout) for an echo reply,
how big to make the packets, and many other options.
Extended ping allows R1’s ping command to use R1’s LAN IP address from within subnet 172.">
    <meta itemprop="datePublished" content="2023-11-06T06:20:36-07:00">
    <meta itemprop="dateModified" content="2023-11-06T06:20:36-07:00">
    <meta itemprop="wordCount" content="739">
    <title>Troubleshooting Routing - Perfect Dark Mode</title>
    <link href="http://perfectdarkmode.com/networking/cisco/t-shoot_routing/" rel="canonical" type="text/html" title="Troubleshooting Routing - Perfect Dark Mode">
    <link href="/networking/cisco/t-shoot_routing/index.xml" rel="alternate" type="application/rss+xml" title="Troubleshooting Routing - Perfect Dark Mode">
    <link href="/images/favicon.png?1714996895" rel="icon" type="image/png">
    <link href="/css/fontawesome-all.min.css?1714996897" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1714996897" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1714996897" rel="stylesheet">
    <link href="/css/auto-complete.css?1714996897" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1714996897" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1714996897" rel="stylesheet">
    <link href="/css/fonts.css?1714996897" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1714996897" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1714996897" rel="stylesheet">
    <link href="/css/theme-git.css?1714996897" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-relearn-dark.css?1714996897" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/variant.css?1714996897" rel="stylesheet">
    <link href="/css/print.css?1714996897" rel="stylesheet" media="print">
    <link href="/css/format-print.css?1714996897" rel="stylesheet">
    <script src="/js/variant.js?1714996897"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='http:\/\/perfectdarkmode.com';
      window.index_js_url="/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'git' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
  </head>
  <body class="mobile-support print" data-url="/networking/cisco/t-shoot_routing/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-back" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="history.back()" type="button" title=""><i class="fa-fw fas fa-chevron-left"></i></button>
            </div>



          </div>
          <span class="topbar-breadcrumbs highlightable">
            Troubleshooting Routing
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-about" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://perfectdarkmode.com/about/" target="_blank" title=""><i class="fa-fw fas fa-address-card"></i> <span class="title">About</span></a>
            </div>
            <div class="topbar-button topbar-button-now" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://perfectdarkmode.com/now/" target="_blank" title=""><i class="fa-fw fas fa-play"></i> <span class="title">Now</span></a>
            </div>
            <div class="topbar-button topbar-button-recommended" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://perfectdarkmode.com/recommended/" target="_blank" title=""><i class="fa-fw fas fa-thumbs-up"></i> <span class="title">Recommended</span></a>
            </div>
            <div class="topbar-button topbar-button-booknotes" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://perfectdarkmode.com/booknotes/" target="_blank" title=""><i class="fa-fw fas fa-file"></i> <span class="title">Book Notes</span></a>
            </div>
            <div class="topbar-button topbar-button-contact" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://perfectdarkmode.com/contact/" target="_blank" title=""><i class="fa-fw fas fa-envelope"></i> <span class="title">Contact</span></a>
            </div>






          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="troubleshooting-routing">Troubleshooting Routing</h1>

<p>Problem Isolation Using the ping Command</p>
<p>functions as part of Layer 3, as a control protocol to assist IP by helping manage the IP network functions.</p>
<p>Ping options</p>
<p>The name or IP address of the destination,</p>
<p>how many times the command should send an echo request,</p>
<p>how long the command should wait (timeout) for an echo reply,</p>
<p>how big to make the packets, and many other options.</p>
<p>Extended ping allows R1’s ping command to use R1’s LAN IP address from within subnet 172.16.1.0/24.</p>
<p>This same command could have been issued from the command line as ping 172.16.2.101 source 172.16.1.1.</p>
<p>R1# ping</p>
<p>Protocol [ip]:</p>
<p>Target IP address: 172.16.2.101</p>
<p>Repeat count [5]:</p>
<p>Datagram size [100]:</p>
<p>Timeout in seconds [2]:</p>
<p>Extended commands [n]: y</p>
<p>Source address or interface: 172.16.1.1</p>
<p>Type of service [0]:</p>
<p>Set DF bit in IP header? [no]:</p>
<p>Validate reply data? [no]:</p>
<p>Data pattern [0xABCD]:</p>
<p>Loose, Strict, Record, Timestamp, Verbose[none]:</p>
<p>Sweep range of sizes [n]:</p>
<p>Type escape sequence to abort.</p>
<p>Sending 5, 100-byte ICMP Echos to 172.16.2.101, timeout is 2 seconds:</p>
<p>Packet sent with a source address of 172.16.1.1</p>
<p>!!!!!</p>
<p>Success rate is 100 percent (5/5), round-trip min/avg/max = 1/2/4 ms</p>
<p>Problems to test. ( ping from router or from host?)</p>
<ul>
<li>IP ACLs that discard packets based on host A’s IP address but allow packets that match the router’s IP address</li>
<li>LAN switch port security that filters A’s frames (based on A’s MAC address)</li>
<li>IP routes on routers that happen to match host A’s 172.16.1.51 address, with different routes that match R1’s 172.16.1.1 address</li>
<li>Problems with host A’s default router setting</li>
</ul>
<p>If the ping works, it confirms the following, which rules out some potential issues:</p>
<p>The host with address 172.16.1.51 replied.</p>
<p>The LAN can pass unicast frames from R1 to host 172.16.1.51 and vice versa.</p>
<p>You can reasonably assume that the switches learned the MAC addresses of the router and the host, adding those to the MAC address tables.</p>
<p>Host A and Router R1 completed the ARP process and list each other in their respective Address Resolution Protocol (ARP) tables.</p>
<ul>
<li>IP addressing problem: Host A could be statically configured with the wrong IP address.</li>
<li>DHCP problems: If you are using Dynamic Host Configuration Protocol (DHCP), many problems could exist. </li>
<li>VLAN trunking problems: The router could be configured for 802.1Q trunking, when the switch is not (or vice versa).</li>
<li>LAN problems: A wide variety of issues could exist with the Layer 2 switches, preventing any frames from flowing between host A and the router.</li>
</ul>
<p>Testing LAN Neighbors with Extended Ping</p>
<p>an extended ping can test the host’s default router setting. Both tests can be useful, especially for problem isolation, because</p>
<ul>
<li>If a standard ping of a local LAN host works…</li>
<li>But an extended ping of the same LAN host fails…</li>
<li>The problem likely relates somehow to the host’s default router setting.</li>
</ul>
<p>Testing WAN Neighbors with Standard Ping</p>
<p>A successful ping of the IP address on the other end of an Ethernet WAN link that sits between two routers confirms several specific facts, such as the following:</p>
<p>Both routers’ WAN interfaces are in an up/up state.</p>
<p>The Layer 1 and 2 features of the link work.</p>
<p>The routers believe that the neighboring router’s IP address is in the same subnet.</p>
<p>Inbound ACLs on both routers do not filter the incoming packets, respectively.</p>
<p>The remote router is configured with the expected IP address (172.16.4.2 in this case).</p>
<p>Using Ping with Names and with IP Addresses</p>
<p>Problem Isolation Using the traceroute Command</p>
<p>ping vs Tracert</p>
<ul>
<li>Both send messages in the network to test connectivity.</li>
<li>Both rely on other devices to send back a reply.</li>
<li>Both have wide support on many different operating systems.</li>
<li>Both can use a hostname or an IP address to identify the destination.</li>
<li>On routers, both have a standard and extended version, allowing better testing of the reverse route.</li>
</ul>
<p>Standard and Extended traceroute</p>
<p>a standard traceroute command chooses an IP address based on the outgoing interface for the packet sent by the command. So, in this example, the packets sent by R1 come from source IP address 172.16.4.1, R1’s G0/0/0 IP address.</p>
<p>Host OS traceroute commands usually create ICMP echo requests. The Cisco IOS traceroute command instead creates IP packets with a UDP header. This bit of information may seem trivial at this point. However, note that an ACL may actually filter the traffic from a host’s traceroute messages but not the router traceroute command, or vice versa.</p>
<p>Telnet and SSH</p>

            <footer class="footline">
            </footer>
          </article>

        </div>
      </main>
    </div>
    <script src="/js/clipboard.min.js?1714996897" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1714996897" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/d3/d3-color.min.js?1714996897" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1714996897" defer></script>
    <script src="/js/d3/d3-drag.min.js?1714996897" defer></script>
    <script src="/js/d3/d3-ease.min.js?1714996897" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1714996897" defer></script>
    <script src="/js/d3/d3-selection.min.js?1714996897" defer></script>
    <script src="/js/d3/d3-timer.min.js?1714996897" defer></script>
    <script src="/js/d3/d3-transition.min.js?1714996897" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1714996897" defer></script>
    <script src="/js/js-yaml.min.js?1714996897" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/theme.js?1714996897" defer></script>
  </body>
</html>
