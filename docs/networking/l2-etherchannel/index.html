<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.124.1">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="Layer 2 Etherchannel Manual Layer 2 EtherChannel Add the correct channel-group configuration command to each physical interface on each switch, all with the on keyword, and all with the same number. The on keyword tells the switches to place a physical interface into an EtherChannel, and The number identifies the PortChannel interface number that the interface should be a part of. EtherChannel, PortChannel, and Channel-group basically mean the same thing. channel-group number on the neighboring switch can differ.">
    <meta name="author" content="David">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="Layer 2 Etherchannel Manual Layer 2 EtherChannel Add the correct channel-group configuration command to each physical interface on each switch, all with the on keyword, and all with the same number. The on keyword tells the switches to place a physical interface into an EtherChannel, and The number identifies the PortChannel interface number that the interface should be a part of. EtherChannel, PortChannel, and Channel-group basically mean the same thing. channel-group number on the neighboring switch can differ.">
    <meta property="og:url" content="http://perfectdarkmode.com/networking/l2-etherchannel/">
    <meta property="og:site_name" content="Perfect Dark Mode">
    <meta property="og:description" content="Layer 2 Etherchannel Manual Layer 2 EtherChannel Add the correct channel-group configuration command to each physical interface on each switch, all with the on keyword, and all with the same number. The on keyword tells the switches to place a physical interface into an EtherChannel, and The number identifies the PortChannel interface number that the interface should be a part of. EtherChannel, PortChannel, and Channel-group basically mean the same thing. channel-group number on the neighboring switch can differ.">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Networking">
    <meta itemprop="description" content="Layer 2 Etherchannel Manual Layer 2 EtherChannel Add the correct channel-group configuration command to each physical interface on each switch, all with the on keyword, and all with the same number. The on keyword tells the switches to place a physical interface into an EtherChannel, and The number identifies the PortChannel interface number that the interface should be a part of. EtherChannel, PortChannel, and Channel-group basically mean the same thing. channel-group number on the neighboring switch can differ.">
    <meta itemprop="wordCount" content="647">
    <title></title>
    <link href="/css/fontawesome-all.min.css?1718926403" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1718926403" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1718926403" rel="stylesheet">
    <link href="/css/auto-complete.css?1718926403" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1718926403" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1718926403" rel="stylesheet">
    <link href="/css/fonts.css?1718926403" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1718926403" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1718926403" rel="stylesheet">
    <link href="/css/theme-amoled.css?1718926403" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-relearn-dark.css?1718926403" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/variant.css?1718926403" rel="stylesheet">
    <link href="/css/print.css?1718926403" rel="stylesheet" media="print">
    <script src="/js/variant.js?1718926403"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='http:\/\/perfectdarkmode.com';
      window.index_js_url="/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'amoled' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-23N4FSG0HM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-23N4FSG0HM');
</script>

  </head>
  <body class="mobile-support html" data-url="/networking/l2-etherchannel/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-back" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="history.back()" type="button" title=""><i class="fa-fw fas fa-chevron-left"></i></button>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"><nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#manual-layer-2-etherchannel">Manual Layer 2 EtherChannel</a></li>
        <li><a href="#dynamic-etherchannels">Dynamic EtherChannels</a></li>
        <li><a href="#matching-physical-interface-settings">Matching Physical Interface Settings</a></li>
        <li><a href="#etherchannel-load-distribution">Etherchannel Load Distribution</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-about" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/about/" title=""><i class="fa-fw fas fa-address-card"></i> <span class="title">About</span></a>
            </div>

            <div class="topbar-button topbar-button-now" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/now/" title=""><i class="fa-fw fas fa-play"></i> <span class="title">Now</span></a>
            </div>

            <div class="topbar-button topbar-button-recommended" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/recommended/" title=""><i class="fa-fw fas fa-thumbs-up"></i> <span class="title">Recommended</span></a>
            </div>

            <div class="topbar-button topbar-button-booknotes" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/booknotes/" title=""><i class="fa-fw fas fa-file"></i> <span class="title">Book Notes</span></a>
            </div>

            <div class="topbar-button topbar-button-contact" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/contact/" title=""><i class="fa-fw fas fa-envelope"></i> <span class="title">Contact</span></a>
            </div>






          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id=""></h1>

<h1 id="layer-2-etherchannel">Layer 2 Etherchannel</h1>
<h3 id="manual-layer-2-etherchannel">Manual Layer 2 EtherChannel</h3>
<ul>
<li>Add the correct channel-group configuration command to each physical interface on each switch, all with the on keyword, and all with the same number.</li>
<li>The on keyword tells the switches to place a physical interface into an EtherChannel, and</li>
<li>The number identifies the PortChannel interface number that the interface should be a part of.</li>
<li>EtherChannel, PortChannel, and Channel-group basically mean the same thing.</li>
<li>channel-group number on the neighboring switch can differ.</li>
<li>&ldquo;Po1&rdquo; is short for PortChannel1</li>
<li>Channel-group command cannot override the channel-protocol command</li>
</ul>
<p>Create the port channel:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>int port-channel 1</code></pre></div><p>Add an Ip address to the port channel:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>ip address 10.0.0.5 255.255.255.0</code></pre></div><p>Add the channel-group to each interface that should be in the channel:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>channel-group 1 mode on</code></pre></div><p>Display port channel status:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>show etherchannel </code></pre></div><h3 id="dynamic-etherchannels">Dynamic EtherChannels</h3>
<p>Cisco switches also support two different configuration options that then use a dynamic protocol to negotiate whether a particular link becomes part of an EtherChannel or not. Basically, the configuration enables a protocol for a particular channel-group number. At that point, the switch can use the protocol to send messages to/from the neighboring switch and discover whether their configuration settings pass all checks. If a given physical link passes, the link is added to the EtherChannel and used; if not, it is placed in a down state, and not used, until the configuration inconsistency can be resolved.</p>
<h4 id="port-aggregation-protocol-pagp-cisco">Port Aggregation Protocol (PAgP) (Cisco)</h4>
<ul>
<li>support 8 links in a channel</li>
<li>uses &ldquo;desirable&rdquo; and &ldquo;auto&rdquo;</li>
<li>At least one of the two sides must be set to &ldquo;desirable&rdquo;</li>
</ul>
<h4 id="link-aggregation-control-protocol-lacp">Link Aggregation Control Protocol (LACP)</h4>
<ul>
<li>Support 16 links in a channel</li>
<li>Only 8 can be active at a time</li>
<li>inactive ports wait for any of the active ports to fail</li>
<li>Uses &ldquo;active&rdquo; and &ldquo;passive&rdquo;</li>
<li>At least one of the two sides must be set to &ldquo;active&rdquo;</li>
</ul>
<p>negotiate so that only links that pass the configuration checks are actually used in an EtherChannel.</p>
<p>To configure either protocol, a switch uses the channel-group configuration commands on each switch, but with a keyword that either means “use this protocol and begin negotiations” or “use this protocol and wait for the other switch to begin negotiations.”</p>
<p>Note:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>Do not use the on parameter on one end, and either auto or desirable (or for LACP, active or passive) on the neighboring switch. The on option uses neither PAgP nor LACP, so a configuration that uses on, with PAgP or LACP options on the other end, would prevent the EtherChannel from working.</code></pre></div><p>Show port channel 1 information:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>show etherchannel 1 port-channel</code></pre></div><h3 id="matching-physical-interface-settings">Matching Physical Interface Settings</h3>
<ul>
<li>Physical port configuration must match other ports in the channel or it will not be used.</li>
<li>Switches either use PAgP or LACP (if already in use) or use Cisco Discovery Protocol (CDP) if using manual configuration to check neighbors</li>
<li>All settings except the STP settings must match.</li>
<li>Shutdown/no shutdown the port channel interface to recover from err-disabled state. (This restarts the physical interfaces as well)</li>
</ul>
<p>Things that must match:</p>
<ul>
<li>Speed</li>
<li>Duplex</li>
<li>Access or Trunk setting</li>
<li>VLAN for access ports</li>
<li>Allowed VLAN list for trunk ports</li>
<li>Native VLAN for trunk ports</li>
<li>STP interface settings</li>
</ul>
<h3 id="etherchannel-load-distribution">Etherchannel Load Distribution</h3>
<ul>
<li>MAC addresses of the PortChannel interfaces are used instead of the physical ports.</li>
<li>The switch must decide out which specific physical port to use to forward the frame. (EtherChannel load distribution or load balancing)</li>
<li>MAC or IP based load balancing methods depending on the switch</li>
<li>Messages in a single application flow use the same link in the channel</li>
<li>integrates ASIC so that load distribution works as quick as forwarding any other frame</li>
<li>Uses all the active links in the EtherChannel, adjusting to the addition and removal of active links over time.</li>
<li>Balance the traffic across active links.</li>
<li>Balanced based on low order bits</li>
</ul>
<p>Define which method is used for load balancing:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>port-channel load-balance method</code></pre></div><p>Test which ports specific types of traffic would use based on source/destination mac address:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>test etherchannel load-balance </code></pre></div>
            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation showVisitedLinks">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<img src="/images/perfectlogo.png" alt="perfect dark mode">

        </div>

        <search>
          <div class="searchbox default-animation">
            <i class="fas fa-search" title="Search (CTRL+ALT+f)"></i>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </search>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/js/auto-complete.js?1718926403" defer></script>
        <script src="/js/lunr/lunr.min.js?1718926403" defer></script>
        <script src="/js/lunr/lunr.stemmer.support.min.js?1718926403" defer></script>
        <script src="/js/lunr/lunr.multi.min.js?1718926403" defer></script>
        <script src="/js/lunr/lunr.en.min.js?1718926403" defer></script>
        <script src="/js/search.js?1718926403" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <ul>
          <li><a class="padding" href="/"><i class="fa-fw fas fa-home"></i> Home</a></li>
        </ul>
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-topics">
          <ul class="enlarge morespace collapsible-menu">
          <li data-nav-id="/linux/" class=""><a class="padding" href="/linux/">Linux<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/networking/" class="parent "><a class="padding" href="/networking/">Networking<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-ec0ce2ce30f7ea4f73b681ec6981b84f" class="morespace collapsible-menu">
          <li data-nav-id="/networking/l2-etherchannel/" class="active"><a class="padding" href="/networking/l2-etherchannel/"><i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/tools/" class=""><a class="padding" href="/tools/">Tools<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/writing/" class=""><a class="padding" href="/writing/">Writing<i class="fa-fw fas fa-check read-icon"></i></a></li>
          </ul>
        </div>
        <div id="R-shortcuts">
          <div class="nav-title padding">More</div>
          <ul class="space">
            <li><a class="padding" href="https://github.com/perfectdarkmode1"><i class='fab fa-fw fa-github'></i> GitHub</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-language"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = this.querySelector( this.value ).dataset.url;">
                      <option id="R-select-language-en" value="#R-select-language-en" data-url="/networking/l2-etherchannel/" lang="en-us" selected></option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-paint-brush"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-select-variant-amoled" value="amoled" selected>Amoled</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks showVisitedLinks">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-history"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter">
	    <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
          </div>
        </div>
      </div>
    </aside>
    <script src="/js/clipboard.min.js?1718926403" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1718926403" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/d3/d3-color.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-drag.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-ease.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-selection.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-timer.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-transition.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1718926403" defer></script>
    <script src="/js/js-yaml.min.js?1718926403" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/theme.js?1718926403" defer></script>
  </body>
</html>
