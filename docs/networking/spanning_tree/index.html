<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.124.1">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="Spanning Tree Protocol Prevents loops in a network. Loops can create Broadcast storms, Mac table instability, and Multiple frame transmission. Broadcast Storms Switch receives a broadcast frame. Switch transmits that frame out of all ports. The broadcast frames will keep being received on each switch then broadcasted again. Mac Table instability Broadcast storm is causing broadcast packets going in and out of every port, the Switch has to keep updating the source mac address of those packets.">
    <meta name="author" content="David">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="Spanning Tree Protocol Prevents loops in a network. Loops can create Broadcast storms, Mac table instability, and Multiple frame transmission. Broadcast Storms Switch receives a broadcast frame. Switch transmits that frame out of all ports. The broadcast frames will keep being received on each switch then broadcasted again. Mac Table instability Broadcast storm is causing broadcast packets going in and out of every port, the Switch has to keep updating the source mac address of those packets.">
    <meta property="og:url" content="http://perfectdarkmode.com/networking/spanning_tree/">
    <meta property="og:site_name" content="Perfect Dark Mode">
    <meta property="og:description" content="Spanning Tree Protocol Prevents loops in a network. Loops can create Broadcast storms, Mac table instability, and Multiple frame transmission. Broadcast Storms Switch receives a broadcast frame. Switch transmits that frame out of all ports. The broadcast frames will keep being received on each switch then broadcasted again. Mac Table instability Broadcast storm is causing broadcast packets going in and out of every port, the Switch has to keep updating the source mac address of those packets.">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Networking">
    <meta itemprop="description" content="Spanning Tree Protocol Prevents loops in a network. Loops can create Broadcast storms, Mac table instability, and Multiple frame transmission. Broadcast Storms Switch receives a broadcast frame. Switch transmits that frame out of all ports. The broadcast frames will keep being received on each switch then broadcasted again. Mac Table instability Broadcast storm is causing broadcast packets going in and out of every port, the Switch has to keep updating the source mac address of those packets.">
    <meta itemprop="wordCount" content="701">
    <title></title>
    <link href="/css/fontawesome-all.min.css?1718926403" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1718926403" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1718926403" rel="stylesheet">
    <link href="/css/auto-complete.css?1718926403" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1718926403" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1718926403" rel="stylesheet">
    <link href="/css/fonts.css?1718926403" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1718926403" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1718926403" rel="stylesheet">
    <link href="/css/theme-amoled.css?1718926403" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-relearn-dark.css?1718926403" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/variant.css?1718926403" rel="stylesheet">
    <link href="/css/print.css?1718926403" rel="stylesheet" media="print">
    <script src="/js/variant.js?1718926403"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='http:\/\/perfectdarkmode.com';
      window.index_js_url="/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'amoled' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-23N4FSG0HM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-23N4FSG0HM');
</script>

  </head>
  <body class="mobile-support html" data-url="/networking/spanning_tree/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-back" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="history.back()" type="button" title=""><i class="fa-fw fas fa-chevron-left"></i></button>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"><nav class="TableOfContents">
  <ul>
    <li><a href="#broadcast-storms">Broadcast Storms</a></li>
    <li><a href="#mac-table-instability">Mac Table instability</a></li>
    <li><a href="#multiple-frame-transmission">Multiple frame transmission</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-about" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/about/" title=""><i class="fa-fw fas fa-address-card"></i> <span class="title">About</span></a>
            </div>

            <div class="topbar-button topbar-button-now" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/now/" title=""><i class="fa-fw fas fa-play"></i> <span class="title">Now</span></a>
            </div>

            <div class="topbar-button topbar-button-recommended" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/recommended/" title=""><i class="fa-fw fas fa-thumbs-up"></i> <span class="title">Recommended</span></a>
            </div>

            <div class="topbar-button topbar-button-booknotes" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/booknotes/" title=""><i class="fa-fw fas fa-file"></i> <span class="title">Book Notes</span></a>
            </div>

            <div class="topbar-button topbar-button-contact" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/contact/" title=""><i class="fa-fw fas fa-envelope"></i> <span class="title">Contact</span></a>
            </div>






          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id=""></h1>

<h1 id="spanning-tree-protocol">Spanning Tree Protocol</h1>
<ul>
<li>Prevents loops in a network.</li>
<li>Loops can create Broadcast storms, Mac table instability, and Multiple frame transmission.</li>
</ul>
<h2 id="broadcast-storms">Broadcast Storms</h2>
<ol>
<li>Switch receives a broadcast frame.</li>
<li>Switch transmits that frame out of all ports.</li>
<li>The broadcast frames will keep being received on each switch then broadcasted again.</li>
</ol>
<h2 id="mac-table-instability">Mac Table instability</h2>
<ol>
<li>Broadcast storm is causing broadcast packets going in and out of every port, the</li>
<li>Switch has to keep updating the source mac address of those packets.</li>
</ol>
<h2 id="multiple-frame-transmission">Multiple frame transmission</h2>
<p>Issues can be cause when multiples of the same frame are received on a port.</p>
<p>Spanning tree must build a topology so it can figure out if there is a loop in the network, and pick which port(s) to block to stop any network loops.</p>
<p>Spanning tree controls all ports in the network and puts them in different port “states”. These states help spanning tree learn the network topology and decide which ports to forward or block. This process is called convergence. Convergence happens whenever spanning tree realizes that there has been a change in the network. (a new switch is added or a link goes down.)The port states are Blocking, Listening, Learning, Forwarding and Disabled.</p>
<p>Blocking</p>
<p>• Stable state</p>
<p>• Mac addresses are not learned on this port</p>
<p>• Port does not forward any fram</p>
<p>Listening</p>
<p>• Removes old or “stale” mac address entries from this port if no frames are recieved for that mac address while it is in this state.</p>
<p>• Transitory state that is temporary while spanning tree converges.</p>
<p>• A port in this state does not forward any frames.</p>
<p>• Incoming frames mac addresses are not learned.</p>
<p>Learning</p>
<p>• Incoming mac addresses on this port are now learned.</p>
<p>• A port in this state does not forward any frames.</p>
<p>• Also a port in a transitory state.</p>
<p>Disabled</p>
<p>• Stable</p>
<p>• Mac addresses are not learned on this port</p>
<p>• Port does not forward any frames</p>
<p>How spanning tree decides.</p>
<p>To build out the topology, spanning tree elects designated ports and root ports and determines the lowest cost path to the root bridge. (root cost)</p>
<p>Cost is based on the operating speed of the link. Here are the cost values STP uses based on the speed of the link.</p>
<p>These are the cisco defaults:</p>
<p>10 Mbps = 100</p>
<p>100 Mbps = 19</p>
<p>1 gbps = 4</p>
<p>10 gbps = 2</p>
<p>100 gbps = N/A</p>
<p>1 tbps = N/A</p>
<p>You can change the values to a newer form with:</p>
<p># spanning-tree pathcost method long</p>
<p>Which changes the values to:</p>
<p>10 Mbps = 2,000,000</p>
<p>100 Mbps = 200,000</p>
<p>1 gbps = 20,000</p>
<p>10 gbps = 2,000</p>
<p>100 gbps = 200</p>
<p>1 tbps = 20</p>
<p>Designated ports and root ports</p>
<p>Spanning tree sends Hello BPDUs to determine the spanning tree topology. A port that sends forwards hello bpdus is called a designated port. A port that receives hello bpdus is called a designated port.</p>
<p>Hello BPDU</p>
<p>Hello bpdu contains a switches Bridge ID, the root bridge ID, the senders root cost. (cost to the root bridge), and the root switches timer values.</p>
<p>Bridge ID (BID)</p>
<p>Has an 8 byte value that is different on each switch. A 2-byte priority field. And a 6 byte system ID that is based on the mac address</p>
<p>Root Bridge ID</p>
<p>The Bridge ID of the switch that the sender thinks is currently the root switch.</p>
<p>Root Switches Timer Values</p>
<p>Hello Timer = How often Hello bpdus are sent</p>
<p>MaxAge Timer = The max time that spanning tree will wait not getting a hello bpdu before it reconverges the network.</p>
<p>Forward Delay Timer = How long a port stays in the listening and learning states.</p>
<p>Root Cost</p>
<p>The cost between the sender and the root bridge</p>
<p>Spanning tree elects a root bridge then decides the best path to the root bridge from all of the other switches. If there are multiple paths to the root bridge, then the worst path is blocked. All ports on the root bridge are set to a forwarding state.</p>
<p>The other switches elect a port that has the lowest cost path to the root bridge. These ports are called root ports. Root ports are always in a forwarding state.</p>

            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation showVisitedLinks">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<img src="/images/perfectlogo.png" alt="perfect dark mode">

        </div>

        <search>
          <div class="searchbox default-animation">
            <i class="fas fa-search" title="Search (CTRL+ALT+f)"></i>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </search>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/js/auto-complete.js?1718926403" defer></script>
        <script src="/js/lunr/lunr.min.js?1718926403" defer></script>
        <script src="/js/lunr/lunr.stemmer.support.min.js?1718926403" defer></script>
        <script src="/js/lunr/lunr.multi.min.js?1718926403" defer></script>
        <script src="/js/lunr/lunr.en.min.js?1718926403" defer></script>
        <script src="/js/search.js?1718926403" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <ul>
          <li><a class="padding" href="/"><i class="fa-fw fas fa-home"></i> Home</a></li>
        </ul>
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-topics">
          <ul class="enlarge morespace collapsible-menu">
          <li data-nav-id="/linux/" class=""><a class="padding" href="/linux/">Linux<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/networking/" class="parent "><a class="padding" href="/networking/">Networking<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-ec0ce2ce30f7ea4f73b681ec6981b84f" class="morespace collapsible-menu">
          <li data-nav-id="/networking/spanning_tree/" class="active"><a class="padding" href="/networking/spanning_tree/"><i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/tools/" class=""><a class="padding" href="/tools/">Tools<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/writing/" class=""><a class="padding" href="/writing/">Writing<i class="fa-fw fas fa-check read-icon"></i></a></li>
          </ul>
        </div>
        <div id="R-shortcuts">
          <div class="nav-title padding">More</div>
          <ul class="space">
            <li><a class="padding" href="https://github.com/perfectdarkmode1"><i class='fab fa-fw fa-github'></i> GitHub</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-language"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = this.querySelector( this.value ).dataset.url;">
                      <option id="R-select-language-en" value="#R-select-language-en" data-url="/networking/spanning_tree/" lang="en-us" selected></option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-paint-brush"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-select-variant-amoled" value="amoled" selected>Amoled</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks showVisitedLinks">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-history"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter">
	    <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
          </div>
        </div>
      </div>
    </aside>
    <script src="/js/clipboard.min.js?1718926403" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1718926403" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/d3/d3-color.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-drag.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-ease.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-selection.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-timer.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-transition.min.js?1718926403" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1718926403" defer></script>
    <script src="/js/js-yaml.min.js?1718926403" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/theme.js?1718926403" defer></script>
  </body>
</html>
