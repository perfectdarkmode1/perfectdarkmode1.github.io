<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.124.1">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="description" content="">
    <meta name="author" content="David">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Networking - Perfect Dark Mode">
    <meta property="og:url" content="http://perfectdarkmode.com/networking/">
    <meta property="og:site_name" content="Perfect Dark Mode">
    <meta property="og:title" content="Networking - Perfect Dark Mode">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="Networking - Perfect Dark Mode">
    <meta itemprop="dateModified" content="2023-11-06T06:20:36-07:00">
    <title>Networking - Perfect Dark Mode</title>
    <link href="http://perfectdarkmode.com/networking/" rel="canonical" type="text/html" title="Networking - Perfect Dark Mode">
    <link href="/networking/index.xml" rel="alternate" type="application/rss+xml" title="Networking - Perfect Dark Mode">
    <link href="/images/favicon.png?1715876280" rel="icon" type="image/png">
    <link href="/css/fontawesome-all.min.css?1715876283" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1715876283" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1715876283" rel="stylesheet">
    <link href="/css/auto-complete.css?1715876283" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1715876283" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1715876283" rel="stylesheet">
    <link href="/css/fonts.css?1715876283" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1715876283" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1715876283" rel="stylesheet">
    <link href="/css/theme-zen-dark.css?1715876283" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-relearn-dark.css?1715876283" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/variant.css?1715876283" rel="stylesheet">
    <link href="/css/print.css?1715876283" rel="stylesheet" media="print">
    <link href="/css/format-print.css?1715876283" rel="stylesheet">
    <script src="/js/variant.js?1715876283"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..';
      window.relearn.relBaseUri='..';
      window.relearn.absBaseUri='http:\/\/perfectdarkmode.com';
      window.index_js_url="/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'zen-dark' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
  </head>
  <body class="mobile-support print" data-url="/networking/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-back" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="history.back()" type="button" title=""><i class="fa-fw fas fa-chevron-left"></i></button>
            </div>



          </div>
          <span class="topbar-breadcrumbs highlightable">
            Networking
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-about" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://perfectdarkmode.com/about/" target="_blank" title=""><i class="fa-fw fas fa-address-card"></i> <span class="title">About</span></a>
            </div>
            <div class="topbar-button topbar-button-now" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://perfectdarkmode.com/now/" target="_blank" title=""><i class="fa-fw fas fa-play"></i> <span class="title">Now</span></a>
            </div>
            <div class="topbar-button topbar-button-recommended" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://perfectdarkmode.com/recommended/" target="_blank" title=""><i class="fa-fw fas fa-thumbs-up"></i> <span class="title">Recommended</span></a>
            </div>
            <div class="topbar-button topbar-button-booknotes" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://perfectdarkmode.com/booknotes/" target="_blank" title=""><i class="fa-fw fas fa-file"></i> <span class="title">Book Notes</span></a>
            </div>
            <div class="topbar-button topbar-button-contact" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://perfectdarkmode.com/contact/" target="_blank" title=""><i class="fa-fw fas fa-envelope"></i> <span class="title">Contact</span></a>
            </div>






          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable chapter narrow" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">Chapter 2</div>

<h1 id="networking">Networking</h1>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Networking</h1>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="cisco-cli-basics">Cisco CLI Basics</h1>

<h2 id="commands">Commands</h2>
<p>Tell the system to reboot IOS:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>reload</code></pre></div><hr>
<h2 id="keyboard-shortcuts">Keyboard Shortcuts</h2>
<hr>
<table>
<thead>
<tr>
<th>Key</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td>up arrow/Ctrl+P</td>
<td>Recently used commands (previous)</td>
</tr>
<tr>
<td>Down arrow/Ctrl+N</td>
<td>Recently used commands (next)</td>
</tr>
<tr>
<td>Left arrow/Ctrl+B</td>
<td>Move cursor back</td>
</tr>
<tr>
<td>Right Arrow/Ctrl+F</td>
<td>Move cursor forward</td>
</tr>
<tr>
<td>Back Space</td>
<td>Delete</td>
</tr>
</tbody>
</table>
<p>Debug</p>
<ul>
<li>Tells user details about the operation of the switch</li>
</ul>
<p>Navigation</p>
<p>End or Ctrl+Z</p>
<ul>
<li>Global Config &gt; Enable Mode</li>
</ul>
<p>Exit</p>
<ul>
<li>Line or VLAN modes &gt; Global config</li>
</ul>
<p>Memory</p>
<p>RAM</p>
<ul>
<li>Stores Running config</li>
</ul>
<p>Flash Memory</p>
<ul>
<li>Chip or removable memory</li>
<li>Stores Cisco IOS images</li>
<li>Default IOS location for booting</li>
<li>Store backup config files</li>
</ul>
<p>ROM</p>
<ul>
<li>Stores Bootstrap</li>
</ul>
<p>NVRAM</p>
<ul>
<li>stores initial or startup config</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="cisco-cml-vmware-guide">Cisco CML VMWARE Guide</h1>

<p>You can find a detailed installation guide here <a href="https://developer.cisco.com/docs/modeling-labs/#!system-requirements" rel="external" target="_blank" title="https://developer.cisco.com/docs/modeling-labs/#!system-requirements">https://developer.cisco.com/docs/modeling-labs/#!system-requirements</a></p>
<p>Sign up for CML <a href="https://www.cisco.com/c/en/us/products/cloud-systems-management/modeling-labs/index.html" rel="external" target="_blank" title="https://www.cisco.com/c/en/us/products/cloud-systems-management/modeling-labs/index.html">https://www.cisco.com/c/en/us/products/cloud-systems-management/modeling-labs/index.html</a></p>
<p>Install VMWare Player <a href="https://www.vmware.com/products/workstation-player/workstation-player-evaluation.html" rel="external" target="_blank" title="https://www.vmware.com/products/workstation-player/workstation-player-evaluation.html">https://www.vmware.com/products/workstation-player/workstation-player-evaluation.html</a></p>
<p>Set up is pretty easy, just go through the installer. Leave all defaults.</p>
<p>Set up for non-commercial use</p>
<p>Download CML files <a href="https://software.cisco.com/download/home/286290254/type/286290305/release/CML-Personal%202.2.3" rel="external" target="_blank" title="https://software.cisco.com/download/home/286290254/type/286290305/release/CML-Personal%202.2.3">https://software.cisco.com/download/home/286290254/type/286290305/release/CML-Personal 2.2.3</a></p>
<p>.ova and .iso</p>
<p>And copy your license key from your account page <a href="https://learningnetworkstore.cisco.com/myaccount" rel="external" target="_blank" title="https://learningnetworkstore.cisco.com/myaccount">https://learningnetworkstore.cisco.com/myaccount</a></p>
<p>Open and import the .ova</p>
<p>Go into your vm settings and make sure you provide enough RAM and CPU, also add the iso file here.</p>
<p>Also select connect at power on</p>
<p>Note: Intel VT or AMD-V must be enabled in your BIOS for this setup to work</p>
<p>I also had to use NAT to get this to work.</p>
<p>Power on your VM</p>
<p>Once loaded, your screen should look like this:</p>
<p>Click inside of the vm and press enter to continue</p>
<p>Press tab to highlight &ldquo;Accept EULA&rdquo; and press enter</p>
<p>Press enter to continue</p>
<p>Note the navigation commands and press enter again</p>
<p>Define CML and Linux root username and passwords</p>
<p>Press enter to use DHCP to get an IP address</p>
<p>Press okay</p>
<p>You should now be here:</p>
<p>Note the HTTPs address and enter it into your browser</p>
<p>Add the license from earlier:</p>
<p><a href="https://www.ryadel.com/en/resize-extend-disk-partition-unallocated-disk-space-linux-centos-rhel-ubuntu-debian/" rel="external" target="_blank" title="https://www.ryadel.com/en/resize-extend-disk-partition-unallocated-disk-space-linux-centos-rhel-ubuntu-debian/">https://www.ryadel.com/en/resize-extend-disk-partition-unallocated-disk-space-linux-centos-rhel-ubuntu-debian/</a></p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="cisco-devnet-sandbox-setup">Cisco Devnet Sandbox Setup</h1>

<p>Max reservation time: 4 hours</p>
<p>Sandbox user reserves the CML Sandbox and receives software VPN access information and credentials via email at the start of the reservation. (For more information, see the next tab called &ldquo;VPN Access&rdquo;.) Once connected via software VPN the developer can access the Sandbox&rsquo;s resources with the details below.</p>
<p>AFTER you&rsquo;ve established a VPN connection:</p>
<p>Cisco Modeling Labs Server</p>
<p>Address: 10.10.20.161</p>
<p>Username: developer</p>
<p>Password: C1sco12345</p>
<p>HTTPS Port for CML GUI/API: 443</p>
<p>Example Connection: <a href="https://10.10.20.161" rel="external" target="_blank" title="https://10.10.20.161">https://10.10.20.161</a></p>
<p>SSH Port for Console Connections: 22</p>
<p>Simulated Hosts and Network Devices</p>
<p>By default CML nodes will use credentials of cisco cisco</p>
<p>For detailed addressing and credential details for the sample simulation, please see the Network Devices tab</p>
<p>Devbox</p>
<p>SSH Port: 22</p>
<p>RDP Port: 3389</p>
<p>Establishing a VPN connection</p>
<p>download and install Cisco&rsquo;s AnyConnect VPN Client software</p>
<p><a href="https://developer.cisco.com/site/sandbox/anyconnect/" rel="external" target="_blank" title="https://developer.cisco.com/site/sandbox/anyconnect/">https://developer.cisco.com/site/sandbox/anyconnect/</a></p>
<p>Install guide</p>
<p><a href="https://devnetsandbox.cisco.com/Docs/VPN_Access/AnyConnect_Installation_Guide.pdf" rel="external" target="_blank" title="https://devnetsandbox.cisco.com/Docs/VPN_Access/AnyConnect_Installation_Guide.pdf">https://devnetsandbox.cisco.com/Docs/VPN_Access/AnyConnect_Installation_Guide.pdf</a></p>
<p><a href="#R-image-35e3f413b915fb506318065acd4e8493" class="lightbox-link"><img alt="Pasted image 20230120133647.png" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/networking/cisco/ccnp_devnet_sandbox_setup/Pasted%20image%2020230120133647.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-35e3f413b915fb506318065acd4e8493"><img alt="Pasted image 20230120133647.png" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/networking/cisco/ccnp_devnet_sandbox_setup/Pasted%20image%2020230120133647.png"></a>
When your Lab reservation begins, you will receive several emails communicating important information about the status of your Lab.</p>
<p>The first email is sent to you from the Lab provisioning automation engine, and indicates that resources in your Lab are in the process of being provisioned and tested. Your Lab is NOT READY yet, but this email will give an estimate of when your Lab will be available.</p>
<p>The second email will be sent to you when your Lab is fully provisioned, tested and READY for you to connect. In this email you&rsquo;ll find the information required by AnyConnect to establish a VPN connection to your Lab (Network IP Address, VPN Username, VPN Password).</p>
<p>How to connect to vpn</p>
<p><a href="https://devnetsandbox.cisco.com/Docs/VPN_Access/AnyConnect_Connection_Guide.pdf" rel="external" target="_blank" title="https://devnetsandbox.cisco.com/Docs/VPN_Access/AnyConnect_Connection_Guide.pdf">https://devnetsandbox.cisco.com/Docs/VPN_Access/AnyConnect_Connection_Guide.pdf</a></p>
<p>Click reserve</p>
<p>You will get an email saying that the setup will last about 10 minutes</p>
<p>Follow email instructions to connect to the vpn</p>
<p>then go to the ip address in the setup guide 10.10.20.161</p>
<p>here is their sample network</p>
<p><a href="#R-image-f135c75b351601044b1bee6cc630ba0d" class="lightbox-link"><img alt="Pasted image 20230120133730.png" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/networking/cisco/ccnp_devnet_sandbox_setup/Pasted%20image%2020230120133730.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f135c75b351601044b1bee6cc630ba0d"><img alt="Pasted image 20230120133730.png" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/networking/cisco/ccnp_devnet_sandbox_setup/Pasted%20image%2020230120133730.png"></a></p>
<p>Linux install</p>
<p><a href="#R-image-c4002ea8515a1c33ddb72b2d221cec83" class="lightbox-link"><img alt="Pasted image 20230120133747.png" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/networking/cisco/ccnp_devnet_sandbox_setup/Pasted%20image%2020230120133747.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c4002ea8515a1c33ddb72b2d221cec83"><img alt="Pasted image 20230120133747.png" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/networking/cisco/ccnp_devnet_sandbox_setup/Pasted%20image%2020230120133747.png"></a></p>
<p>To get to a switch console:</p>
<ul>
<li>select the switch</li>
<li>select consol</li>
<li>Enable password is cisco</li>
<li>Default user is cisco</li>
</ul>
<p>Credentials for sample lab devices</p>
<p><a href="#R-image-bf66c58efdda13096e9506abe765f7ed" class="lightbox-link"><img alt="Pasted image 20230120133835.png" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/networking/cisco/ccnp_devnet_sandbox_setup/Pasted%20image%2020230120133835.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-bf66c58efdda13096e9506abe765f7ed"><img alt="Pasted image 20230120133835.png" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/networking/cisco/ccnp_devnet_sandbox_setup/Pasted%20image%2020230120133835.png"></a></p>
<p>Component</p>
<p>Type</p>
<p>IP Address</p>
<p>Method</p>
<p>Credentials</p>
<p>internet-host01</p>
<p>Linux</p>
<p>10.10.20.182</p>
<p>SSH</p>
<p>cisco / cisco</p>
<p>internet-rtr01</p>
<p>IOS XE</p>
<p>10.10.20.181</p>
<p>TELNET</p>
<p>cisco / cisco</p>
<p>edge-firewall01</p>
<p>ASA</p>
<p>10.10.20.171</p>
<p>TELNET</p>
<p>cisco / cisco</p>
<p>edge-sw01</p>
<p>IOS</p>
<p>10.10.20.172</p>
<p>TELNET</p>
<p>cisco / cisco</p>
<p>core-rtr01</p>
<p>IOS XR</p>
<p>10.10.20.173</p>
<p>TELNET</p>
<p>cisco / cisco</p>
<p>core-rtr02</p>
<p>IOS XR</p>
<p>10.10.20.174</p>
<p>TELNET</p>
<p>cisco / cisco</p>
<p>dist-rtr01</p>
<p>IOS XE</p>
<p>10.10.20.175</p>
<p>TELNET</p>
<p>cisco / cisco</p>
<p>dist-rtr02</p>
<p>IOS XE</p>
<p>10.10.20.176</p>
<p>TELNET</p>
<p>cisco / cisco</p>
<p>dist-sw01</p>
<p>NX-OS</p>
<p>10.10.20.177</p>
<p>TELNET</p>
<p>cisco / cisco</p>
<p>dist-sw02</p>
<p>NX-OS</p>
<p>10.10.20.178</p>
<p>TELNET</p>
<p>cisco / cisco</p>
<p>inside-host01</p>
<p>Linux</p>
<p>10.10.20.179</p>
<p>SSH</p>
<p>cisco / cisco</p>
<p>inside-host02</p>
<p>Linux</p>
<p>10.10.20.180</p>
<p>VNC</p>
<p>cisco / cisco</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="cisco-to-juniper-cheat-sheet">Cisco to Juniper Cheat Sheet</h1>

<h2 id="basic-cli-and-systems-management">Basic CLI and Systems Management</h2>
<p>Commands</p>
<p>clock set  &gt; set date<br>
reload  &gt; request system reboot<br>
show history  &gt; show cli history<br>
show logging  &gt;  show log messages | last
show processes  &gt; show system processes<br>
show running config  &gt; show configuration<br>
show users  &gt; show system users<br>
show version  &gt; show version | show chassis hardware <br>
trace  &gt; traceroute</p>
<h2 id="switching-commands">Switching Commands</h2>
<p>show ethernet-switching interfaces<br>
show spanning-tree  &gt; show spanning-tree bridge<br>
show mac address-table  &gt; show ethernet-switching table</p>
<h2 id="ospf-commands">OSPF Commands</h2>
<p>show ip ospf database  &gt; show ospf database<br>
show ip ospf interface  &gt; show ospf interface<br>
show ip ospf neighbor  &gt; show ospf neighbor</p>
<h2 id="routing-protocol-independent-commands">Routing Protocol-Independent Commands</h2>
<p>clear arp-cache  &gt; clear arp<br>
show arp  &gt; show arp<br>
show ip route  &gt; show route<br>
show ip route summary  &gt; show route summary<br>
show route-map  &gt; show policy | policy-name<br>
show tcp  &gt; show system connections</p>
<h2 id="interface-commands">Interface Commands</h2>
<p>clear counters  &gt; clear interface statistics<br>
show interfaces  &gt; show interfaces<br>
show interfaces detail  &gt; show interfaces extensive<br>
show ip interface brief  &gt; show interfaces terse</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="cisco-vlan-lab">Cisco VLAN Lab</h1>

<p>This lab covers some basic LAN setup. Real world networks are a lot bigger than this but once you can configure these things. Troubleshooting and setting up bigger networks will be less challenging.</p>
<p>Here are the settings to configure:</p>
<ul>
<li>VLAN setup using VTP</li>
<li>Trunking using DTP</li>
<li>Router on a stick</li>
<li>Spanning Tree</li>
<li>Etherchannel</li>
</ul>
<p>Your goal with this lab is to configure all of the settings above and verify using show commands. And test your working network with pings between all of the PCs. Finally, you will download a broken version of the lab and use your troubleshooting skills to fix it.</p>
<p>The PCs have all been configured with IP addresses and default gateways for their respective VLANs.</p>
<p>Packet Tracer files for this lab</p>
<p>Set up trunk ports on all switches using DTP</p>
<p>You&rsquo;ll need to set up trunk ports using dtp between all of the switches. Switch1s port connecting to router1 should also be a trunk link. Then verify the trunk connections.</p>
<p>Each interface you see here should be a trunk port.</p>
<p>Set all used ports on switch1 to &ldquo;dynamic desirable&rdquo;. Later we will disable DTP and manually set up the trunk links.</p>
<p>switch1 (config) # int ra fa0/1-6<br>
switch1 (config-if-range) # switchport mode dynamic desirable</p>
<p>Verify trunk links on switches 3-5 leading to switch1</p>
<p>You should see trunks connecting to switch1 since dtp is set to &ldquo;dynamic auto&rdquo; by default on the other switches.</p>
<p>switch3 # show interfaces trunk</p>
<p>Remove the dynamic desirable command</p>
<p>All of that work you did to get the trunks up using DTP? Let&rsquo;s start all over and configure them manually instead.</p>
<p>You know.. just for fun.</p>
<p>switch1 (config-if) # no switchport dynamic desirable</p>
<p>Manually Configure Trunks</p>
<p>DTP is usually disabled for security purposes. So we will configure the trunks manually.</p>
<p>Designate trunk ports with 802.1q encapsulation</p>
<p>Depending on the switch, you may or may not have to do this.</p>
<p>switch3 (config-int) # switchport trunk encapsulation dot1q</p>
<p>Set switch port mode to trunk</p>
<p>switch1 # interface range fa0/1-6<br>
switch1 (config-if) # switchport mode trunk</p>
<p>Disable dtp</p>
<p>switch1 (config-if) # switchport nonegotiate</p>
<p>Show switchport info on a single interface</p>
<p>switch1 # show interfaces fa0/4 switchport</p>
<p>Use VTP to Populate VLANs</p>
<p>VTP is not on the current CCNA exam objectives. However, I&rsquo;ve seen this in the real world so it&rsquo;s good to know how it works and how to configure it.</p>
<p>I&rsquo;ve heard that you may see questions on the exam about VTP anyway.</p>
<p>Set up VLANs on switch1</p>
<p>This lab uses VLAN 10, 20, and 30 in networks that match their respective VLAN number. With VLAN 100 being an unused VLAN for security.</p>
<ul>
<li>VLAN 10: 10.0.0.0 /24</li>
<li>VLAN 20: 20.0.0.0 /24</li>
<li>VLAN 30: 30.0.0.0 /24</li>
<li>VLAN 100: NA</li>
</ul>
<p>switch 1 (config) # vlan 10<br>
switch 1 (config) # vlan 20<br>
switch 1 (config) # vlan 30<br>
switch 1 (config) # vlan 100</p>
<p>Set switch1 to VTP mode &ldquo;server&rdquo;</p>
<p>switch1 (config) # vtp mode server</p>
<p>Set the VTP domain name</p>
<p>switch1 (config) # vtp domain cisco</p>
<p>Set the other switches to VTP &ldquo;client&rdquo; mode</p>
<p>switch2 (config) # vtp mode client</p>
<p>Confirm VTP settings</p>
<p>switch2 # show vtp status</p>
<p>Confirm VLANs are set up on all switches</p>
<p>switch2 # show vlan brief</p>
<p>Disable VTP on all switches</p>
<p>switch1 (config) # vtp mode transparent</p>
<p>Final VLAN Pieces</p>
<p>Now that your trunks and VLANs are configured. You can assign some ports to the VLANs. Then block the unused VLAN 100 on all of your trunk links.</p>
<p>Set up access ports connected to PCs</p>
<p>Set the switchport type to &ldquo;access&rdquo;. Then assign that access port to it&rsquo;s respective VLAN.</p>
<p>switch3 (config-int) # switchport mode access<br>
switch3 (config-int) # switchport access vlan 10</p>
<p>Remove VLAN 100 from all trunks</p>
<p>switch1 (config-int) # switchport trunk allowed vlan remove 100</p>
<p>Create a Router on a Stick</p>
<p>Make sure interface gi0/0 does not have an ip address</p>
<p>router1 # show ip interface brief</p>
<p>Create subinterfaces on router and assign ip addresses to them</p>
<ul>
<li>gi0/1.10</li>
<li>gi0/1.20</li>
<li>gi0/1.30</li>
</ul>
<p>router1 # interface gi0/1.10<br>
router1 (config-if) # ip address 10.0.0.1 255.255.255.0<br>
router1 (config-if) # encapsulation dot1q 10</p>
<p>Set port on opposing switch to trunk mode</p>
<p>You&rsquo;ll need to make sure the switch1 port connecting to router1 is a trunk link. This is so that all VLANs can travel to router1 for routing.</p>
<p>The PCs are already configured to use router1 as their default gateway. Assuming you configure the subinterfaces with the .1 ip address for their respective VLANS</p>
<p>Spanning Tree Protocol</p>
<p>This is a very simplified Spanning Tree lab. Leave a comment if you&rsquo;d like a more detailed one in the future.</p>
<p>Optimize spanning tree for best path</p>
<p>You&rsquo;ll want to make switch1 the root bridge for Spanning Tree. To do this, make switch1 have the lowest priority. Or manually set it as the root bridge with the &ldquo;primary&rdquo; command.</p>
<p>This setting should be configured for each VLAN.</p>
<p>Set the priority to change the root bridge</p>
<p>switch1 (config) # spanning-tree vlan 10 priority 24,576</p>
<p>Change the root bridge with the primary command</p>
<p>This will set the switches priority from 32,868 to 24,586. (24,576 + 10 for VLAN 10) The lowest priority will win the root election.</p>
<p>switch1 (config) # spanning-tree vlan 10 root primary</p>
<p>View spanning tree information</p>
<p>switch1 # show spanning-tree</p>
<p>View STP information on a specific VLAN</p>
<p>switch1 # show spanning-tee vlan 10</p>
<p>Show summary of Spanning Tree</p>
<p>switch1 # show spanning-tree summary</p>
<p>Enable PortFast on access ports for switches 3-5</p>
<p>You can set each interface manually. Or you can enable portfast on all non trunking ports with the &ldquo;default&rdquo; option.</p>
<p>switch3 (config-if) # spanning-tree portfast</p>
<p>Enable BPDU Guard on all interfaces with PortFast</p>
<p>switch3 (config-if) # spanning-tree bpduguard enable</p>
<p>Etherchannel (Layer 2)</p>
<p>ou&rsquo;ll need to make sure that all of the Etherchannel ports are either in access mode or trunk mode. It cannot be a mix of both. Also, I had an error (twice) in Packet Tracer where the P01 interface was stuck on STP listening mode. It would not resolve until I reset Packet Tracer.</p>
<p>Keep in mind when troubleshooting errors that Packet Tracer can be buggy. Your issue may be with PT software and not the IOS configuration.</p>
<p>Set up an Etherchannel using PAGP</p>
<p>switch1 (config-if) # channel-group 1 mode desirable</p>
<p>switch2 (config-if) # channel-group 1 mode desirable/ auto</p>
<p>Set up an Etherchannel using LACP</p>
<p>switch1 (conf-if) # channel-group 1 mode active</p>
<p>switch2 (config-if) # channel-group 1 mode active/ passive</p>
<p>View Etherchannel info</p>
<p>switch1 # show etherchannel 1 port-channel</p>
<p>View Etherchannel summary</p>
<p>switch1 # show etherchannel summary</p>
<p>Modify Etherchannel load distribution</p>
<p>switch1 # port-channel load-balance dst-ip</p>
<p>Show Etherchannel load balance information</p>
<p>switch1 # show etherchannel load-balance</p>
<p>Port Security</p>
<p>Implement port security and add an unauthorized device.</p>
<p>View port security details</p>
<p>switch3 # show port-security interface fa 0/3</p>
<p>Enable port security</p>
<p>Switch ports must be not be set as dynamic. Set them manually as access ports instead.</p>
<p>switch3 (config-if-range) # switchport mode access<br>
switch3 (config-if-range) # switchport port-security</p>
<p>Using the sticky command</p>
<p>switch3 (config-if-range) # switchport port-security mac-address sticky</p>
<p>Set the maximum allowed mac addresses on a port to 2</p>
<p>switch3 (config-if-range) # switchport port-security maximum 2</p>
<p>Set port violation to &ldquo;protect&rdquo;</p>
<p>switch3 (config-if-range) # switchport port-security violation protect</p>
<p>Set port violation to &ldquo;restrict&rdquo;</p>
<p>switch3 (config-if-range) # switchport port-security violation restrict</p>
<p>Set port violation to &ldquo;shutdown&rdquo;</p>
<p>switch3 (config-if-range) # switchport port-security violation shutdown</p>
<p>Set port security to a single mac-address</p>
<p>switch3 (config-if-range) # switchport port-security mac-address aa.bb.cc.dd.ee.ff</p>
<p>Shutdown unused ports</p>
<p>switch3 (config-if-range) # Shutdown</p>
<p>Place unused ports into an unused vlan</p>
<p>switch3 (config-if-range) # switchport access vlan 100</p>
<p>Bring an interface back up from an &ldquo;err-disabled&rdquo; state</p>
<p>This is optional. To get a port to an err-disabled state, you&rsquo;ll have to plug in an unauthorized PC if using a static mac-address. Or if you are using the maximum allowed option, plug too many PCs into a single port. Either via hub or by unplugging the PCs and plugging new ones in a few times.</p>
<p>switch3 (config-if) # shutdown<br>
switch3 (config-if) # no shutdown</p>
<p>Show port security Info</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="classfull-ipv4">Classfull IPv4</h1>

<p>Table 12-2 IPv4 Address Classes Based on First Octet Values</p>
<p>Class      First Octet Values      Purpose</p>
<p>A            1–126                         Unicast (large networks)</p>
<p>B            128–191                     Unicast (medium-sized networks)</p>
<p>C            192–223                     Unicast (small networks)</p>
<p>D            224–239                     Multicast</p>
<p>E            240–255                     Reserved (formerly experimental)</p>
<p>address ranges of all addresses that begin with 0 and all addresses that begin with 127 are reserved</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="device-management">Device Management</h1>

<p>Quick Commands</p>
<h1 id="basic-device-management">Basic Device Management</h1>
<h2 id="ssh">SSH</h2>
<div class="highlight wrap-code"><pre tabindex="0"><code>crypto key generate rsa modulus (modulus value)</code></pre></div><div class="highlight wrap-code"><pre tabindex="0"><code>show ip ssh</code></pre></div><div class="highlight wrap-code"><pre tabindex="0"><code>show ssh</code></pre></div><h2 id="dhcp">DHCP</h2>
<div class="highlight wrap-code"><pre tabindex="0"><code>ip address dhcp</code></pre></div><div class="highlight wrap-code"><pre tabindex="0"><code>show dhcp lease</code></pre></div><div class="highlight wrap-code"><pre tabindex="0"><code>show interfaces vlan 1</code></pre></div><div class="highlight wrap-code"><pre tabindex="0"><code>show ip default-gateway</code></pre></div><h2 id="history">History</h2>
<div class="highlight wrap-code"><pre tabindex="0"><code>show history</code></pre></div><div class="highlight wrap-code"><pre tabindex="0"><code>terminal history size x</code></pre></div><div class="highlight wrap-code"><pre tabindex="0"><code>history size x</code></pre></div><h2 id="logging-and-domain-lookup">Logging and Domain Lookup</h2>
<div class="highlight wrap-code"><pre tabindex="0"><code>no logging console</code></pre></div><div class="highlight wrap-code"><pre tabindex="0"><code>no ip domain-lookup</code></pre></div><div class="highlight wrap-code"><pre tabindex="0"><code>exec timeout (minutes)</code></pre></div><p>data plane</p>
<ul>
<li>work a switch does to forward frames generated by the devices connected to the switch</li>
</ul>
<p>control plane</p>
<ul>
<li>configuration and processes that control and change the choices made by the switch’s data plane</li>
</ul>
<p>management plane</p>
<ul>
<li>deals with managing the device itself, rather than controlling what the device is doing</li>
</ul>
<p>SSH</p>
<p>crypto key generate rsa modulus modulus-value</p>
<ul>
<li>(Use at least a 768-bit key to support SSH version 2.)</li>
</ul>
<p>show ip ssh</p>
<ul>
<li>lists status information about the SSH server</li>
</ul>
<p> show ssh</p>
<ul>
<li>lists information about each SSH client currently connected into the switch</li>
</ul>
<p>Switch DHCP</p>
<p> ip address dhcp</p>
<p>Show dhcp lease</p>
<p>show interfaces vlan 1</p>
<p>show ip default-gateway</p>
<p>show history</p>
<ul>
<li>lists the commands currently held in the history buffer.</li>
</ul>
<p>terminal history size x</p>
<ul>
<li>allows a single user to set the size of their history buffer</li>
<li>just for this one login session</li>
</ul>
<p>history size x</p>
<ul>
<li>console or vty line configuration mode</li>
<li>sets the default number of commands saved in the history buffer for the users of the console or vty lines</li>
</ul>
<p>Logging and domain lookup</p>
<p>no logging console</p>
<p>logging console</p>
<p>exec-timeout minutes seconds</p>
<ul>
<li>line subcommand</li>
<li>enables you to set the length of that inactivity timer.</li>
<li>In the lab (but not in production), you might want to use the special value of 0 minutes and 0 seconds meaning “never time out.”</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="device-management-protocols">Device Management Protocols</h1>

<p>2.0 Network Access</p>
<p>2.3 Configure and verify Layer 2 discovery protocols (Cisco Discovery Protocol and LLDP)</p>
<p>4.0 IP Services</p>
<p>4.2 Configure and verify NTP operating in a client and server mode</p>
<p>4.5 Describe the use of syslog features including facilities and levels</p>
<h1 id="system-message-logging-syslog">System Message Logging (Syslog)</h1>
<p>Sending Messages in Real Time to Current Users</p>
<ul>
<li>
<p>Telnet and SSH users, the device requires a two-step process before the user sees the messages.</p>
</li>
<li>
<p>global configuration setting—logging monitor—tells IOS to enable the sending of log messages to all logged users.</p>
</li>
<li>
<p>must also issue the terminal monitor EXEC command during the login session, which tells IOS that this terminal session would like to receive log messages.
ogging console<br>
Console<br>
logging monitor</p>
</li>
<li>
<p>IOS -<br>
terminal monitor<br>
(NO Messages)<br>
Figure 9-1 IOS Processing for Log Messages to Current Users &ldquo;&gt;</p>
</li>
</ul>
<p>Storing Log Messages for Later Review</p>
<p>two primary means to keep a copy</p>
<ul>
<li>can store copies of the log messages in RAM by virtue of the logging buffered global configuration command.</li>
</ul>
<p>any user can come back later and see the old log messages by using the show logging EXEC command.</p>
<p>store log messages centrally to a syslog server.</p>
<p>syslog protocol - a UDP protocol to send messages to a syslog server for storage</p>
<p>To configure a router or switch to send log messages to a syslog server, add the logging host {address | hostname } global command</p>
<p><a href="#R-image-04363ff3a00d7a6a04104c00c7a96e3e" class="lightbox-link"><img alt="Pasted image 20230120151144.png" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/networking/cisco/device_management_protocols/Pasted%20image%2020230120151144.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-04363ff3a00d7a6a04104c00c7a96e3e"><img alt="Pasted image 20230120151144.png" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/networking/cisco/device_management_protocols/Pasted%20image%2020230120151144.png"></a></p>
<p>Log Message Format</p>
<p>*Dec 18 17:10:15.079: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to down</p>
<p>A timestamp: *Dec 18 17:10:15.079</p>
<p>The facility on the router that generated the message: %LINEPROTO</p>
<p>The severity level: 5</p>
<p>A mnemonic for the message: UPDOWN</p>
<p>The description of the message: Line protocol on Interface FastEthernet0/0, changed state to down</p>
<p>you can at least toggle on and off the use of the timestamp (which is included by default) and a log message sequence number (which is not enabled by default). Example 9-1 reverses those defaults by turning off timestamps and turning on sequence numbers.</p>
<p>Example 9-1 Disabling Timestamps and Enabling Sequence Numbers in Log
Wessages
Click here to view code image
Rl(config)# no service timestamps
Rl(config)# service sequence-numbers
Rl(config)# end
000011: %SYS-5-CONFIG I: Configured from console by console</p>
<p>Log Message Severity Levels</p>
<p>the lower the number, the more severe the event that caused the message.</p>
<p><a href="#R-image-8eb93489d7078b0ebd1cd17dbf5cbcf5" class="lightbox-link"><img alt="Keyword\nEmergency\nAlert\nCritical\nError\nWarning\nNotification\nInformational\nDebug\nNumeral\n2\n3\n4\n5\n6\n7\nDescription\nSystem unusable\nImmediate action required\nCritical Event (Highest Of 3)\nError Event (Middle Of 3)\nWarning Event (Lowest Of 3)\nNormal, More Important\nNormal, Less Important\nRequested by User Debug\nImpactful\nNormal\nDebug\nFigure 9-3 Syslog Message Severity Levels by Keyword and Numeral" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///980bce15-c623-489b-bd14-11e70f4fffc2" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8eb93489d7078b0ebd1cd17dbf5cbcf5"><img alt="Keyword\nEmergency\nAlert\nCritical\nError\nWarning\nNotification\nInformational\nDebug\nNumeral\n2\n3\n4\n5\n6\n7\nDescription\nSystem unusable\nImmediate action required\nCritical Event (Highest Of 3)\nError Event (Middle Of 3)\nWarning Event (Lowest Of 3)\nNormal, More Important\nNormal, Less Important\nRequested by User Debug\nImpactful\nNormal\nDebug\nFigure 9-3 Syslog Message Severity Levels by Keyword and Numeral" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///980bce15-c623-489b-bd14-11e70f4fffc2"></a></p>
<p>last level in the figure is used for messages requested by the debug command</p>
<p>Table 9-2 summarizes the configuration commands used to enable logging and to set the severity level for each type.</p>
<p>For example, the command logging console 4 causes IOS to send severity level 0–4 messages to the console</p>
<p><a href="#R-image-43036b322cb79e54f03f7d6c6748063a" class="lightbox-link"><img alt="Table 9-2 How to Configure Logging Message Levels for Each Log Service\nKey\nTopic\nService\nConsole\nMonitor\nBuffered\nSyslog\nTo Enable Logging\nlogging console\nlogging monitor\nlogging buffered\nlogging host address I\nhostname\nTo Set Message Levels\nlogging console level-name I level-\nnumber\nlogging monitor level-name I\nlevel-number\nlogging buffered level-name I\nlevel-number\nlogging trap level-name I level-\nnumber" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///b598183b-1e6d-47a2-bd46-61cdb8416e46" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-43036b322cb79e54f03f7d6c6748063a"><img alt="Table 9-2 How to Configure Logging Message Levels for Each Log Service\nKey\nTopic\nService\nConsole\nMonitor\nBuffered\nSyslog\nTo Enable Logging\nlogging console\nlogging monitor\nlogging buffered\nlogging host address I\nhostname\nTo Set Message Levels\nlogging console level-name I level-\nnumber\nlogging monitor level-name I\nlevel-number\nlogging buffered level-name I\nlevel-number\nlogging trap level-name I level-\nnumber" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///b598183b-1e6d-47a2-bd46-61cdb8416e46"></a></p>
<p>Configuring and Verifying System Logging</p>
<p><a href="#R-image-0d89f581e513e681d6990b48f2b0cd0d" class="lightbox-link"><img alt="172.16.1.0/24\n172.16.1.1\nGO/I\nRI\n17216.21\nGO/2\n172.162.2\n172.16.3.0/24\nSW2\n172.16.3.9\nFigure 9-4 Sample Network Used in Logging Examples" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///441c47eb-3766-4f0d-8251-7181b1dd2aee" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0d89f581e513e681d6990b48f2b0cd0d"><img alt="172.16.1.0/24\n172.16.1.1\nGO/I\nRI\n17216.21\nGO/2\n172.162.2\n172.16.3.0/24\nSW2\n172.16.3.9\nFigure 9-4 Sample Network Used in Logging Examples" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///441c47eb-3766-4f0d-8251-7181b1dd2aee"></a></p>
<p><a href="#R-image-9970571a08f03546107fa1799a7f8052" class="lightbox-link"><img alt="Example 9-2 Syslog Configuration on RI\nClick here to view code image\nlogging\nlogging\nlogging\nlogging\nlogging\nconsole 7\nmonitor debug\nbuffered 4\nhost 172.16.3.9\ntrap warning" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///89cbe1a2-0745-46e2-923a-30bb5f816e43" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9970571a08f03546107fa1799a7f8052"><img alt="Example 9-2 Syslog Configuration on RI\nClick here to view code image\nlogging\nlogging\nlogging\nlogging\nlogging\nconsole 7\nmonitor debug\nbuffered 4\nhost 172.16.3.9\ntrap warning" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///89cbe1a2-0745-46e2-923a-30bb5f816e43"></a></p>
<p>the example configures the same message level at the console and for terminal monitoring (level 7, or debug), and the same level for both buffered and logging to the syslog server (level 4, or warning). The levels may be set using the numeric severity level or the name as shown earlier in Figure 9-3.</p>
<p>show logging command confirms those same configuration settings and also lists the log messages per the logging buffered configuration.</p>
<p><a href="#R-image-99dd3bdf4459d54016b8f15d8ed5c702" class="lightbox-link"><img alt="Example 9-3 Viewing the Configured Log Settings per the Earlier Example\nClick here to view code image\nRl# show logging\nSyslog logging: enabled (0 messages dropped,\nNo Active Message Discriminator.\nNo Inactive Message Discriminator.\n3 messages rate-limited\nConsole logging: level debugging, 45 messages logged, xml disabl\nfiltering disabled\nMonitor logging: level debugging, 0 messages logged, xml disable\nfiltering disabled\nBuffer logging: level warnings, e messages logged, xml disabled,\nfiltering disabled\nException Logging: size (8192 bytes)\nCount and timestamp logging messages:\nPersistent logging: disabled\ndisabled" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///09d59061-71bc-43e6-a415-cca2e3f9e5a8" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-99dd3bdf4459d54016b8f15d8ed5c702"><img alt="Example 9-3 Viewing the Configured Log Settings per the Earlier Example\nClick here to view code image\nRl# show logging\nSyslog logging: enabled (0 messages dropped,\nNo Active Message Discriminator.\nNo Inactive Message Discriminator.\n3 messages rate-limited\nConsole logging: level debugging, 45 messages logged, xml disabl\nfiltering disabled\nMonitor logging: level debugging, 0 messages logged, xml disable\nfiltering disabled\nBuffer logging: level warnings, e messages logged, xml disabled,\nfiltering disabled\nException Logging: size (8192 bytes)\nCount and timestamp logging messages:\nPersistent logging: disabled\ndisabled" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///09d59061-71bc-43e6-a415-cca2e3f9e5a8"></a></p>
<p><a href="#R-image-9bdd9b2916779c0ff7a43012977fa6fb" class="lightbox-link"><img alt="No active filter modules.\nTrap logging: level warnings, e message lines logged\nLogging to 172.16.3.9 (udp port 514, audit disabled,\nlink up),\n0 message lines logged,\n0 message lines rate-limited,\n0 message lines dropped-by-MD,\nxml disabled, sequence number disabled\nfiltering disabled\nLogging Source-Interface:\nLog Buffer (8192 bytes):\nVRF Name:" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///b920da0f-adeb-4912-8aeb-78422dee63af" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9bdd9b2916779c0ff7a43012977fa6fb"><img alt="No active filter modules.\nTrap logging: level warnings, e message lines logged\nLogging to 172.16.3.9 (udp port 514, audit disabled,\nlink up),\n0 message lines logged,\n0 message lines rate-limited,\n0 message lines dropped-by-MD,\nxml disabled, sequence number disabled\nfiltering disabled\nLogging Source-Interface:\nLog Buffer (8192 bytes):\nVRF Name:" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///b920da0f-adeb-4912-8aeb-78422dee63af"></a></p>
<p>If any log messages had been buffered, the actual log messages would be listed at the end of the command</p>
<p>clear out the old messages from the log with the clear logging EXEC command.</p>
<dl>
<dt>![Rl# configure terminal</dt>
<dt>Enter configuration commands,</dt>
<dt>RI (config)# interface gø/l</dt>
<dt>RI (config-if)# shutdown</dt>
<dt>RI</dt>
<dt>one per line.</dt>
<dt>End with CNTL/Z.</dt>
<dt>*Oct 21 %LINK-5-CHANGED: Interface GigabitEthernetO/1,</dt>
<dt>*Oct 21 %LINEPROTO-5-UPDOWN: Line protocol on Interfac</dt>
<dt>RI (config-if)# no shutdown</dt>
<dt>RI</dt>
<dt>*Oct 21</dt>
<dd>%LINK-3-UPDOWN: Interface GigabitEthernetØ/1,
*Oct 21 %LINEPROTO-5-UPDOWN: Line protocol on Interfac
RI (config-if)# AZ
*Oct 21</dd>
<dd>%SYS-5-CONFIG I: Configured from console by co
Rl# show logging
! Skipping about 20 lines, the same lines in Example 9-3,
until the
Log Buffer (8192 bytes) :
*Oct 21 %LINK-3-UPDOWN:
Interface GigabitEthernetØ/1,](blob:file:///50a65acc-0691-4338-a954-5e888ca303e9)</dd>
</dl>
<p>The debug Command and Log Messages</p>
<p>debug EXEC command gives the network engineer a way to ask IOS to monitor for certain internal events, with that monitoring process continuing over time, so that IOS can issue log messages when those events occur</p>
<p>debug remains active until some user issues the no debug command with the same parameters, disabling the debug.</p>
<p><a href="#R-image-c7ba56b8bdb8006fe2baf26f71af8eed" class="lightbox-link"><img alt="Example 9-5 Using debug ip ospf hello from RI&rsquo;s Console\nClick here to view code image\nRl# debug ip ospf hello\nOSPF\n*Aug\n*Aug\n*Aug\nhello\nIS on\n10 OSPF-I HELLO GiØ/1:\n10 OSPF-I HELLO GiØ/2:\n10 OSPF-I HELLO GiØ/2:\ndebuggi ng\nSend hello to 224.Ø.Ø.5 area\nRcv hello from 2.2.2.2 area\nSend hello to 224.0.0.5 area" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///0a51c53d-835e-4dcd-ae27-8ad10d86b942" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c7ba56b8bdb8006fe2baf26f71af8eed"><img alt="Example 9-5 Using debug ip ospf hello from RI&rsquo;s Console\nClick here to view code image\nRl# debug ip ospf hello\nOSPF\n*Aug\n*Aug\n*Aug\nhello\nIS on\n10 OSPF-I HELLO GiØ/1:\n10 OSPF-I HELLO GiØ/2:\n10 OSPF-I HELLO GiØ/2:\ndebuggi ng\nSend hello to 224.Ø.Ø.5 area\nRcv hello from 2.2.2.2 area\nSend hello to 224.0.0.5 area" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///0a51c53d-835e-4dcd-ae27-8ad10d86b942"></a></p>
<p>anyone logged in with SSH at the time Example 9-4’s output was gathered would not have seen the output, even with the logging monitor debug command configured on router R1, without first issuing a terminal monitor command.</p>
<p>all enabled debug options use router CPU, which can cause problems for the router. You can monitor CPU use with the show process cpu command</p>
<p>use caution when using debug commands carefully on production devices.</p>
<p>the more CLI users that receive debug messages, the more CPU that is consumed.</p>
<h2 id="network-time-protocol-ntp">Network Time Protocol (NTP)</h2>
<p>Devices send timestamps to each other with NTP messages, continually exchanging messages, with one device changing its clock to match the other, eventually synchronizing the clocks.</p>
<p>How NTP defines the sources of time data (reference clocks) and how good each time source is (stratum).</p>
<p>Setting the Time and Timezone</p>
<p>NTP works best if you set the device clock to a reasonably close time before enabling the NTP client function with the ntp server command</p>
<p>I should set the time to 8:52 p.m., set the correct date and timezone, and even tell the device to adjust for daylight savings time—and then enable NTP</p>
<p>Example 9-7 shows how to set the date, time, timezone, and daylight savings time.</p>
<p><a href="#R-image-0621e370d6d04bb3bd603f55bcb2cc3d" class="lightbox-link"><img alt="Example 9-7 Setting the Date/Time with clock set, Plus Timezone/DST\nClick here to view code image\nRl# configure terminal\nEnter configuration commands, one per line. End with CNTL/Z.\nRI (config)# clock timezone EST -5\nRI clock summer-time EDT recurring\nRI (config)# AZ\nclock set 21 October 2ø15\n*Oct 21 me: %SYS-6-CLOCKUPDATE:\nSystem clock has been upda\nRl# show clock\nEDT Wed\nOct 21 2015" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///12712855-da00-4f5f-9301-b908790790c9" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0621e370d6d04bb3bd603f55bcb2cc3d"><img alt="Example 9-7 Setting the Date/Time with clock set, Plus Timezone/DST\nClick here to view code image\nRl# configure terminal\nEnter configuration commands, one per line. End with CNTL/Z.\nRI (config)# clock timezone EST -5\nRI clock summer-time EDT recurring\nRI (config)# AZ\nclock set 21 October 2ø15\n*Oct 21 me: %SYS-6-CLOCKUPDATE:\nSystem clock has been upda\nRl# show clock\nEDT Wed\nOct 21 2015" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///12712855-da00-4f5f-9301-b908790790c9"></a></p>
<p>You should set the first two commands before setting the time of day with the clock set EXEC command because the two configuration commands impact the time that is set.</p>
<p>chose EDT because it is the acronym for daylight savings time in that same EST time zone. Finally, the recurring keyword tells the router to spring forward an hour and fall back an hour automatically over the years.</p>
<p>clock set EXEC command</p>
<p>uses a time syntax with a 24-hour format, not with a 12-hour format plus a.m./p.m.).</p>
<p>The show clock command (issued seconds later) lists that time, but also notes the time as EDT, rather than UTC time.</p>
<p>Basic NTP Configuration</p>
<p>two ntp configuration commands</p>
<p>ntp master {stratum-level}: NTP server mode—the device acts only as an NTP server, and not as an NTP client. The device gets its time information from the internal clock on the device.</p>
<p>ntp server {address | hostname} : NTP client/server mode—the device acts as both client and server. First, it acts as an NTP client, to synchronize time with a server. Once synchronized, the device can then act as an NTP server, to supply time to other NTP clients.</p>
<p><a href="#R-image-11ad4b33c014e1d3612c2021f6faf051" class="lightbox-link"><img alt="ntp server 172.162.2\nNTP Client/ server\nStratum 4\nntp server 172.16.3.3\nNTP Client / server\nStratum 3\n172.16.3_3\nGOII\nMp master\nGO,&lsquo;2\nNTP server\nStratum 2\nFigure 9-5 RI as NTP Client, R2 as Client/Server, R3 as Server" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///ad94907d-f81d-499c-ad54-b5db7eb548e3" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-11ad4b33c014e1d3612c2021f6faf051"><img alt="ntp server 172.162.2\nNTP Client/ server\nStratum 4\nntp server 172.16.3.3\nNTP Client / server\nStratum 3\n172.16.3_3\nGOII\nMp master\nGO,&lsquo;2\nNTP server\nStratum 2\nFigure 9-5 RI as NTP Client, R2 as Client/Server, R3 as Server" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///ad94907d-f81d-499c-ad54-b5db7eb548e3"></a></p>
<p><a href="#R-image-c44b340ab6899fcbd82979aabf0ef3f7" class="lightbox-link"><img alt="Example 9-8 NTP Client/Server Configuration\nClick here to view code image\n! Configuration on RI:\nntp server 172.16.2.2\nClick here to view code image\n! Configuration on R2:\nntp server 172.16.3.3\nClick here to view code image\n! Configuration on R3:\nntp master 2" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///643a88fe-2d60-4ee1-9684-09c87d798ae2" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c44b340ab6899fcbd82979aabf0ef3f7"><img alt="Example 9-8 NTP Client/Server Configuration\nClick here to view code image\n! Configuration on RI:\nntp server 172.16.2.2\nClick here to view code image\n! Configuration on R2:\nntp server 172.16.3.3\nClick here to view code image\n! Configuration on R3:\nntp master 2" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///643a88fe-2d60-4ee1-9684-09c87d798ae2"></a></p>
<p>show ntp status command</p>
<p>lists a status of synchronized, which confirms the NTP client has completed the process of changing its time to match the server’s time. Any router acting as an NTP client will list “unsynchronized” in that first line until the NTP synchronization process completes with at least one server. It also confirms the IP address of the server—this device’s reference clock—with the IP address configured in Example 9-8 (172.16.2.2).</p>
<p><a href="#R-image-505a1a9eb91954a73b82d29f4d6119c9" class="lightbox-link"><img alt="Example 9-9 Verifying NTP Client Status on RI\nClick here to view code image\nRl# show ntp status\nClock is synchronized, stratum 4, reference is 172.16.2.2\nnominal freq is 250.0000 Hz, actual freq is 250.0000 Hz, precision is\nntp uptime is 1553800 (1/100 of seconds), resolution is 4000\nreference time is DA5E7147.56CADEA7 (19:54:31.339 EST Thu Feb 4 2016)\nclock offset is 0.0986 msec, root delay is 2.46 msec\nroot dispersion is 22.19 msec, peer dispersion is 5.33 msec\nloopfilter state is &lsquo;CTRL &rsquo;\nsystem poll interval is 64,\n(Normal Controlled Loop), drift is e. 000000G\nlast update was 530 sec ago." class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///43b9da43-57f0-4a98-a836-4e093bd06ef3" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-505a1a9eb91954a73b82d29f4d6119c9"><img alt="Example 9-9 Verifying NTP Client Status on RI\nClick here to view code image\nRl# show ntp status\nClock is synchronized, stratum 4, reference is 172.16.2.2\nnominal freq is 250.0000 Hz, actual freq is 250.0000 Hz, precision is\nntp uptime is 1553800 (1/100 of seconds), resolution is 4000\nreference time is DA5E7147.56CADEA7 (19:54:31.339 EST Thu Feb 4 2016)\nclock offset is 0.0986 msec, root delay is 2.46 msec\nroot dispersion is 22.19 msec, peer dispersion is 5.33 msec\nloopfilter state is &lsquo;CTRL &rsquo;\nsystem poll interval is 64,\n(Normal Controlled Loop), drift is e. 000000G\nlast update was 530 sec ago." class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///43b9da43-57f0-4a98-a836-4e093bd06ef3"></a></p>
<p>show ntp associations</p>
<p>lists all the NTP servers that the local device can attempt to use, with status information about the association between the local device (client) and the various NTP servers.</p>
<p>Status on RI and R2<br>
Click here to view code image<br>
RI# show ntp associations<br>
! This output is<br>
taken from router RI, acting in client/server mode<br>
address<br>
sys . peer ,<br>
ref<br>
clock<br>
172.16. 3.3</p>
<h1 id="selected">selected,</h1>
<p>st<br>
3<br>
when poll<br>
50<br>
64</p>
<ul>
<li>candidate,<br>
reach<br>
377<br>
outlyer ,<br>
delay offset<br>
1.223 0.090<br>
x falseticker,<br>
disp<br>
4.46f<br>
cor<br>
Click here to view code image<br>
R2# show ntp associations<br>
! This output is taken from router R2, acting in<br>
client/server mode<br>
address<br>
ref clock<br>
1<br>
st<br>
2<br>
when poll<br>
49<br>
64<br>
reach<br>
377<br>
outlyer,<br>
delay<br>
1.220<br>
offset<br>
-7.758<br>
disp<br>
3.69<br>
*A-172.16.3.3 127.127.1.<br>
sys .peer, # selected,<br>
candidate,<br>
x<br>
falseticker, &ldquo;&gt;</li>
</ul>
<h3 id="ntp-reference-clock-and-stratum">NTP Reference Clock and Stratum</h3>
<p>Devices that act solely as an NTP server get their time from either internal device hardware or from some external clock using mechanisms other than NTP.</p>
<p>NTP servers and clients use a number to show the perceived accuracy of their reference clock data based on stratum level. The lower the stratum level, the more accurate the reference clock is considered to be. An NTP server that uses its internal hardware or external reference clock sets its own stratum level. Then, an NTP client adds 1 to the stratum level it learns from its NTP server, so that the stratum level increases the more hops away from the original clock source.</p>
<p>For instance, back in Figure 9-5, you can see the NTP primary server (R3) with a stratum of 2. R2, which references R3, adds 1 so it has a stratum of 3. R1 uses R2 as its NTP server, so R1 adds 1 to have a stratum of 4. These increasing stratum levels allow devices to refer to several NTP servers and then use time information from the best NTP server, best being the server with the lowest stratum level.</p>
<p>Routers and switches use the default stratum level of 8 for their internal reference clock based on the default setting of 8 for the stratum level in the ntp master [stratum-level] command. The command allows you to set a value from 1 through 15; in Example 9-8, the ntp master 2 command set router R3’s stratum level to 2.</p>
<p>Note</p>
<p>NTP considers 15 to be the highest useful stratum level, so any devices that calculate their stratum as 16 consider the time data unusable and do not trust the time. So, avoid setting higher stratum values on the ntp master command.</p>
<p><a href="#R-image-5276f11d09c697675309df28c1a85970" class="lightbox-link"><img alt="Example 9-11 Examining NTP Server, Reference Clock, and Stratum Data\nClick here to view code image\nR3# show ntp status\nClock is synchronized, stratum 2, reference is 127.127.1.1\nnominal freq is 250.0000 Hz, actual freq is 250.0000 Hz, precision i\nntp uptime is 595300 (1/100 of seconds), resolution is 4000\nreference time is EOF9174C.87277EBB (16:13:32.527 daylight sat Aug 1\nclock offset is 0.0000 msec, root delay is 0.00 msec\nroot dispersion is 0.33 msec, peer dispersion is 0.23 msec\nloopfilter state is &lsquo;CTRL&rsquo; (Normal Controlled Loop), drift is e. 00001\nsystem poll interval is 16, last update was 8 sec ago.\nR3# show ntp associations\naddress\n*n.127 • 127 • 1.1\nref clock\n. LOCL\nst\n1\nwhen\n15\npoll\n16\nreach delay\n377 0.øoe\nfalseticker,\noff\no.\nsys .peer, # selected, + candidate,\noutlyer, x" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///f789da20-724e-41ae-9ebd-7fe1c5ef7c68" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5276f11d09c697675309df28c1a85970"><img alt="Example 9-11 Examining NTP Server, Reference Clock, and Stratum Data\nClick here to view code image\nR3# show ntp status\nClock is synchronized, stratum 2, reference is 127.127.1.1\nnominal freq is 250.0000 Hz, actual freq is 250.0000 Hz, precision i\nntp uptime is 595300 (1/100 of seconds), resolution is 4000\nreference time is EOF9174C.87277EBB (16:13:32.527 daylight sat Aug 1\nclock offset is 0.0000 msec, root delay is 0.00 msec\nroot dispersion is 0.33 msec, peer dispersion is 0.23 msec\nloopfilter state is &lsquo;CTRL&rsquo; (Normal Controlled Loop), drift is e. 00001\nsystem poll interval is 16, last update was 8 sec ago.\nR3# show ntp associations\naddress\n*n.127 • 127 • 1.1\nref clock\n. LOCL\nst\n1\nwhen\n15\npoll\n16\nreach delay\n377 0.øoe\nfalseticker,\noff\no.\nsys .peer, # selected, + candidate,\noutlyer, x" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///f789da20-724e-41ae-9ebd-7fe1c5ef7c68"></a></p>
<h3 id="redundant-ntp-configuration">Redundant NTP Configuration</h3>
<p>an enterprise could use NTP to reference NTP servers that use an atomic clock as their reference source, like the NTP primary servers in Figure 9-6, which happen to be run by the US National Institute of Standards and Technology (NIST) (see tf.nist.gov).</p>
<p><a href="#R-image-5227b0f7240b826173852b62414bd868" class="lightbox-link"><img alt="Stratum 1\nStratum 2\nNTP Primary\nservers (MST)\nInternet\nNTP Clienvserver\nStratum 3\n9-6 Stratum Levels VVhen Using an Internet-based Stratum 1 NTP Server" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///b0dca087-9689-487e-86ec-04b89f2d82ee" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5227b0f7240b826173852b62414bd868"><img alt="Stratum 1\nStratum 2\nNTP Primary\nservers (MST)\nInternet\nNTP Clienvserver\nStratum 3\n9-6 Stratum Levels VVhen Using an Internet-based Stratum 1 NTP Server" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///b0dca087-9689-487e-86ec-04b89f2d82ee"></a></p>
<p>NTP primary server and NTP secondary server.</p>
<p>An NTP primary server acts only as a server, with a reference clock external to the device, and has a stratum level of 1, like the two NTP primary servers shown in Figure 9-6. NTP secondary servers are servers that use client/server mode as described throughout this section, relying on synchronization with some other NTP server.</p>
<p><a href="#R-image-2c17aa7f7c401c2992a39f0daf9a5e65" class="lightbox-link"><img alt="Example 9-12 NTP Configuration on RI, R2 per Eigure 9-6\nClick here to view code image\nntp server time-a-b-nist .gov\nntp server time-a-g.nist.gov" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///77c1af69-5be5-421e-983f-f15baed94077" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2c17aa7f7c401c2992a39f0daf9a5e65"><img alt="Example 9-12 NTP Configuration on RI, R2 per Eigure 9-6\nClick here to view code image\nntp server time-a-b-nist .gov\nntp server time-a-g.nist.gov" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///77c1af69-5be5-421e-983f-f15baed94077"></a></p>
<p>After losing their reference clock, R1 and R2 could no longer be useful NTP servers to the rest of the enterprise.</p>
<p>To overcome this potential issue, the routers can also be configured with the ntp master command, resulting in this logic:</p>
<p>Establish an association with the NTP servers per the ntp server command.</p>
<p>Establish an association with your internal clock using the ntp master stratum command.</p>
<p>Set the stratum level of the internal clock (per the ntp master {stratum-level} command) to a higher (worse) stratum level than the Internet-based NTP servers.</p>
<p>Synchronize with the best (lowest) known time source, which will be one of the Internet NTP servers in this scenario</p>
<p>ntp master 7 command, with a much higher stratum,</p>
<p><a href="#R-image-900a4446300a5a0d82b6a8715c963796" class="lightbox-link"><img alt="Example 9-13 NTP Configuration on RI and R2 to Protect Against Internet\nFailures\nClick here to view code image\nntp server time-a-b-nist .gov\nntp server time-a-g.nist.gov\nntp master 7" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///6679839f-8a17-4d63-a07f-e4e09cda1598" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-900a4446300a5a0d82b6a8715c963796"><img alt="Example 9-13 NTP Configuration on RI and R2 to Protect Against Internet\nFailures\nClick here to view code image\nntp server time-a-b-nist .gov\nntp server time-a-g.nist.gov\nntp master 7" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///6679839f-8a17-4d63-a07f-e4e09cda1598"></a></p>
<h3 id="ntp-using-a-loopback-interface-for-better-availability">NTP Using a Loopback Interface for Better Availability</h3>
<p>what happens when one interface on R4 fails</p>
<p>for any NTP clients that had referred to that specific IP address</p>
<p>There would likely still be a route to reach R4 itself.</p>
<p>The NTP client would not be able to send packets to the configured address because that interface is down.</p>
<p><a href="#R-image-f4e9fdc7069df9721cdef237c63ef30d" class="lightbox-link"><img alt="R2\nNTP server\nFigure 9-7 The Availability Issue ofReferencing an NTP Server&rsquo;s Physical Interface IP Address" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///efe7ee03-a9b4-4d2e-ad83-ba6db3b913a7" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f4e9fdc7069df9721cdef237c63ef30d"><img alt="R2\nNTP server\nFigure 9-7 The Availability Issue ofReferencing an NTP Server&rsquo;s Physical Interface IP Address" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///efe7ee03-a9b4-4d2e-ad83-ba6db3b913a7"></a></p>
<p>loopback interface to meet that exact need</p>
<p>once configured, it remains in an up/up state as long as</p>
<p>Key Topic.</p>
<p>The router remains up.</p>
<p>You do not issue a shutdown command on that loopback interface.</p>
<p><a href="#R-image-f37db63ac6c0d4fe6f8ca72f4c36acb9" class="lightbox-link"><img alt="Example 9-14 NTP Client/Server Configuration on RI and R2 Using a Loopback\nInterface\nClick here to view code image\n! Configuration on RI,\nntp server 172.16.9.9\nClick here to view code image\na client\n! Configuration on R2 for its server function\ninterface loopback ø\nL\nip address 172.16.9.9 255.255.255.ø\nntp master 4\nntp source loopback\n! Verification on router R2\nR2# show interfaces loopback ø\nLoopback0 is up, line protocol is up\nHardware is Loopback" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///46fedc78-dcd4-46c6-86d5-61d91857c93b" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f37db63ac6c0d4fe6f8ca72f4c36acb9"><img alt="Example 9-14 NTP Client/Server Configuration on RI and R2 Using a Loopback\nInterface\nClick here to view code image\n! Configuration on RI,\nntp server 172.16.9.9\nClick here to view code image\na client\n! Configuration on R2 for its server function\ninterface loopback ø\nL\nip address 172.16.9.9 255.255.255.ø\nntp master 4\nntp source loopback\n! Verification on router R2\nR2# show interfaces loopback ø\nLoopback0 is up, line protocol is up\nHardware is Loopback" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///46fedc78-dcd4-46c6-86d5-61d91857c93b"></a></p>
<p><a href="#R-image-9f97f9cc42df85f991e0f8016c9297df" class="lightbox-link"><img alt="Internet address is 172.16.9.9/24\n! lines omitted for brevity" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///a0215c7c-df76-4921-8d73-7d5d7b11785c" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9f97f9cc42df85f991e0f8016c9297df"><img alt="Internet address is 172.16.9.9/24\n! lines omitted for brevity" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///a0215c7c-df76-4921-8d73-7d5d7b11785c"></a></p>
<h2 id="analyzing-topology-using-cdp-and-lldp">Analyzing Topology Using CDP and LLDP</h2>
<h3 id="examining-information-learned-by-cdp">Examining Information Learned by CDP</h3>
<p>Cisco-proprietary</p>
<p>Layer 2 protocol</p>
<p>does not rely on a working Layer 3 protocol</p>
<p>Devices that support CDP learn information about others by listening for the advertisements sent by other devices.</p>
<p>CDP discovers several useful details from the neighboring Cisco devices:</p>
<p>Device identifier: Typically the host name</p>
<p>Address list: Network and data-link addresses</p>
<p>Port identifier: The interface on the remote router or switch on the other end of the link that sent the CDP advertisement</p>
<p>Capabilities list: Information on what type of device it is (for example, a router or a switch)</p>
<p>Platform: The model and OS level running on the device</p>
<p>Cisco IP Phones use CDP to learn the data and voice VLAN IDs as configured on the access switch.</p>
<p><a href="#R-image-c58b26c11a2dcdd12c76557fe7cf88e0" class="lightbox-link"><img alt="Table 9-3 show cdp Commands That List Information About Neighbors\nCommand\nshow cdp neigh-\nbors [type number]\nshow cdp neigh-\nbors detail\nshow cdp entry\nname\nDescription\nLists one summary line of information about each\nneighbor or just the neighbor found on a specific inter-\nface if an interface was listed\nLists one large set (approximately 15 lines) of informa-\ntion, one set for every neighbor\nLists the same information as the show cdp neighbors\ndetail command, but only for the named neighbor\n(case sensitive)" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///2398a655-1078-49a1-bd8e-0103fbbca8ff" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c58b26c11a2dcdd12c76557fe7cf88e0"><img alt="Table 9-3 show cdp Commands That List Information About Neighbors\nCommand\nshow cdp neigh-\nbors [type number]\nshow cdp neigh-\nbors detail\nshow cdp entry\nname\nDescription\nLists one summary line of information about each\nneighbor or just the neighbor found on a specific inter-\nface if an interface was listed\nLists one large set (approximately 15 lines) of informa-\ntion, one set for every neighbor\nLists the same information as the show cdp neighbors\ndetail command, but only for the named neighbor\n(case sensitive)" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///2398a655-1078-49a1-bd8e-0103fbbca8ff"></a></p>
<p>routers and switches support the same CDP commands, with the same parameters and same types of output.</p>
<p><a href="#R-image-dc886e0c655cca7862742d558705fc98" class="lightbox-link"><img alt="Cisco 2960XR Switches (WS-2960XR-24TS-l)\nGil/0/1\nFred\nGilW24\nSWI\nGil /0/2\nBarney\n02002222.2222\nGil,W21\nGil/O'2\nGiO,W1 0200.5555.5555\nCisco ISRIK Router\nFigure 9-8 Small Network Used in CDP Examples" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///65b036b9-4ce9-4ab5-abbf-e54bbaa228fb" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-dc886e0c655cca7862742d558705fc98"><img alt="Cisco 2960XR Switches (WS-2960XR-24TS-l)\nGil/0/1\nFred\nGilW24\nSWI\nGil /0/2\nBarney\n02002222.2222\nGil,W21\nGil/O'2\nGiO,W1 0200.5555.5555\nCisco ISRIK Router\nFigure 9-8 Small Network Used in CDP Examples" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///65b036b9-4ce9-4ab5-abbf-e54bbaa228fb"></a></p>
<p>Example 9-15 show cdp neighbors Command Examples: SW2<br>
Click here to view code image<br>
SW2# show cdp neighbors<br>
Capability Codes: R<br>
S<br>
D<br>
Router,</p>
<ul>
<li>Switch,<br>
Remote,<br>
T<br>
c<br>
Trans<br>
Host,<br>
CVTA,<br>
Bridge, B<br>
Source Route Bri<br>
1<br>
M<br>
IGMP, r<br>
Repeater, p<br>
Two-port Mac Relay<br>
Device ID<br>
SWI<br>
RI<br>
Local Intrfce<br>
Gig 1/0/21<br>
Gig 1/0/2<br>
Holdtme<br>
155<br>
131<br>
Capability<br>
Platform<br>
ws-C296ex<br>
Cili1-8P<br>
Total cdp entries displayed<br>
.2 &ldquo;&gt;</li>
</ul>
<p>To ensure all devices receive a CDP message, the Ethernet header uses a multicast destination MAC address (0100.0CCC.CCCC).</p>
<p>the device processes the message and then discards it, rather than forwarding it</p>
<p>show cdp neighbors detail</p>
<p>lists the full name of the switch model (WS-2960XR-24TS-I) and the IP address configured on the neighboring device.</p>
<p><a href="#R-image-585399aca05ad653ae5d8eeb14ad04b7" class="lightbox-link"><img alt="SW2# show cdp neighbors detail\nDevice ID: SWI\nEntry address(es):\nIP address: 1.1.1.1\nPlatform: cisco WS-C2960XR-24TS-1,\nCapabilities: Switch IGMP\nInterface:\nHoldtime .\nVersion :\nGigabitEthernet1/0/21,\n144 sec\nPort ID (outgoing port):\nGigabitE\nVersion\nCisco IOS Software, Software (C2960X-UNIVERSALK9-M),\nTechnical Support: http://www.cisco.com/techsupport\nCopyright (c) 1986-2018 by Cisco Systems, Inc.\nCompiled Thu 13-Sep-18 03 by prod rel team" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///79b58992-46ce-4683-8122-3a240e3e3588" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-585399aca05ad653ae5d8eeb14ad04b7"><img alt="SW2# show cdp neighbors detail\nDevice ID: SWI\nEntry address(es):\nIP address: 1.1.1.1\nPlatform: cisco WS-C2960XR-24TS-1,\nCapabilities: Switch IGMP\nInterface:\nHoldtime .\nVersion :\nGigabitEthernet1/0/21,\n144 sec\nPort ID (outgoing port):\nGigabitE\nVersion\nCisco IOS Software, Software (C2960X-UNIVERSALK9-M),\nTechnical Support: http://www.cisco.com/techsupport\nCopyright (c) 1986-2018 by Cisco Systems, Inc.\nCompiled Thu 13-Sep-18 03 by prod rel team" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///79b58992-46ce-4683-8122-3a240e3e3588"></a></p>
<p><a href="#R-image-2f9d2ed0c251a6b358298750b9f4fa8b" class="lightbox-link"><img alt="advertisement version: 2\nProtocol Hello: OUI=oxoeoooc,\nVTP Management Domain: &lsquo;fred&rsquo;\nNative VLAN: 1\nDuplex: full\nManagement address(es) :\nIP address: 1.1.1.1\nDevice ID: RI\nEntry address(es):\nIP address: 10.12.25.5\nProtocol ID=oxØ112;\npayload len=27,\nInterface:\nHoldtime .\nCapabilities: Router Switch IGMP\nPort ID (outgoing port): GigabitEt\nGigabitEthernet1/0/2,\n151 sec" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///41b70243-659b-48eb-8a21-e4eeb14899e3" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2f9d2ed0c251a6b358298750b9f4fa8b"><img alt="advertisement version: 2\nProtocol Hello: OUI=oxoeoooc,\nVTP Management Domain: &lsquo;fred&rsquo;\nNative VLAN: 1\nDuplex: full\nManagement address(es) :\nIP address: 1.1.1.1\nDevice ID: RI\nEntry address(es):\nIP address: 10.12.25.5\nProtocol ID=oxØ112;\npayload len=27,\nInterface:\nHoldtime .\nCapabilities: Router Switch IGMP\nPort ID (outgoing port): GigabitEt\nGigabitEthernet1/0/2,\n151 sec" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///41b70243-659b-48eb-8a21-e4eeb14899e3"></a></p>
<p><a href="#R-image-7154324cfac3aa84f3996b624ea4afaa" class="lightbox-link"><img alt="Version :\nCisco IOS Software [Fuji], ISR Software (ARMV8EB LINUX IOSD-UNIVERSA\nTechnical Support: http://www.cisco.com/techsupport\nCopyright (c) 1986-2018 by Cisco Systems, Inc.\nCompiled Tue 27-Mar-18 10:56 by mcpre\nadvertisement version :\n2\nVTP Management Domain: &rsquo; &rsquo;\nDuplex: full\nManagement address(es) :\nIP address: 10.12.25.5\nTotal cdp entries displayed\n.2" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///b8cc1ddc-e463-4ddf-9f81-4ecebf1796c2" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7154324cfac3aa84f3996b624ea4afaa"><img alt="Version :\nCisco IOS Software [Fuji], ISR Software (ARMV8EB LINUX IOSD-UNIVERSA\nTechnical Support: http://www.cisco.com/techsupport\nCopyright (c) 1986-2018 by Cisco Systems, Inc.\nCompiled Tue 27-Mar-18 10:56 by mcpre\nadvertisement version :\n2\nVTP Management Domain: &rsquo; &rsquo;\nDuplex: full\nManagement address(es) :\nIP address: 10.12.25.5\nTotal cdp entries displayed\n.2" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///b8cc1ddc-e463-4ddf-9f81-4ecebf1796c2"></a></p>
<p>The show cdp entry name command lists the exact same details shown in the output of the show cdp neighbors detail command, but for only the one neighbor listed in the command.</p>
<p>Cisco recommends that CDP be disabled on any interface that might not have a need for CDP. For switches, any switch port connected to another switch, a router, or to an IP phone should use CDP.</p>
<h3 id="configuring-and-verifying-cdp">Configuring and Verifying CDP</h3>
<p>IOS typically enables CDP globally and on each interface by default. You can then disable CDP per interface with the no cdp enable interface subcommand</p>
<p>re-enable it with the cdp enable interface subcommand</p>
<p>disable and re-enable CDP globally on the device</p>
<p>no cdp run and cdp run global commands</p>
<p><a href="#R-image-51f75415be413204bec216bfd99228d1" class="lightbox-link"><img alt="Table 9-4 Commands Used to Verify CDP Operations\nCommand\nshow cdp\nshow cdp inter-\nface [type\nnumber]\nshow cdp traffic\nDescription\nStates whether CDP is enabled globally and lists the de-\nfault update and holdtime timers\nStates whether CDP is enabled on each interface, or a\nsingle interface if the interface is listed, and states up-\ndate and holdtime timers on those interfaces\nLists global statistics for the number of CDP advertise-\nments sent and received" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///518b3cfe-18e1-4a81-9187-be7eea7b496b" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-51f75415be413204bec216bfd99228d1"><img alt="Table 9-4 Commands Used to Verify CDP Operations\nCommand\nshow cdp\nshow cdp inter-\nface [type\nnumber]\nshow cdp traffic\nDescription\nStates whether CDP is enabled globally and lists the de-\nfault update and holdtime timers\nStates whether CDP is enabled on each interface, or a\nsingle interface if the interface is listed, and states up-\ndate and holdtime timers on those interfaces\nLists global statistics for the number of CDP advertise-\nments sent and received" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///518b3cfe-18e1-4a81-9187-be7eea7b496b"></a></p>
<p><a href="#R-image-b67f4cb51bf0a2cb75b411de7ce198e9" class="lightbox-link"><img alt="Example 9-17 show cdp Commands That Show CDP Status\nClick here to view code image\nSW2# show cdp\nGlobal CDP information:\nSending CDP packets every 60 seconds\nSending a holdtime value of 180 seconds\nSending CDPv2 advertisements is enabled\nSW2# show cdp interface GigabitEthernet1/0/2\nGigabitEthernet1/Ø/2 is up, line protocol is up\nEncapsulation ARPA\nSending CDP packets every 60 seconds\nHoldtime is 180 seconds\nSW2# show cdp traffic\nCDP counters :\nTotal packets\nHdr syntax: 0,\nNo memory: 0,\nCDP version 1\nCDP version 2\noutput: 304, Input: 305\nChksum error:\nInvalid packet\nadvertisements\nadvertisements\n0, Encaps failed\noutput :\noutput :\n0, Input\n304, Input: 305" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///7787792d-cb59-4452-b119-10c3deeda082" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b67f4cb51bf0a2cb75b411de7ce198e9"><img alt="Example 9-17 show cdp Commands That Show CDP Status\nClick here to view code image\nSW2# show cdp\nGlobal CDP information:\nSending CDP packets every 60 seconds\nSending a holdtime value of 180 seconds\nSending CDPv2 advertisements is enabled\nSW2# show cdp interface GigabitEthernet1/0/2\nGigabitEthernet1/Ø/2 is up, line protocol is up\nEncapsulation ARPA\nSending CDP packets every 60 seconds\nHoldtime is 180 seconds\nSW2# show cdp traffic\nCDP counters :\nTotal packets\nHdr syntax: 0,\nNo memory: 0,\nCDP version 1\nCDP version 2\noutput: 304, Input: 305\nChksum error:\nInvalid packet\nadvertisements\nadvertisements\n0, Encaps failed\noutput :\noutput :\n0, Input\n304, Input: 305" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///7787792d-cb59-4452-b119-10c3deeda082"></a></p>
<p>send time and the hold time. CDP sends messages every 60 seconds by default, with a hold time of 180 seconds. The hold time tells the device how long to wait after no longer hearing from a device before removing those details from the CDP tables. You can override the defaults with the cdp timer seconds and cdp holdtime seconds global commands, respectively.</p>
<h2 id="examining-information-learned-by-lldp">Examining Information Learned by LLDP</h2>
<p><a href="#R-image-d6ea065fdd22ddc796af7aa2528cb29d" class="lightbox-link"><img alt="SW2# show Ildp neighbors\nCapability codes:\n(R) Router, (B) Bridge, (T) Telephone, (C) DOCSIS Cable Device\nHold-time\n(W) WLAN Access Point, (P) Repeater,\n(S)\nStation, (O) Other\nDevice ID\nRI\nSWI\nLocal Intf\nGil/O/2\nGil /0/21\nCapability\n120\n120\nTrans\nHost,\nCVTA,\nPort\nGiO/O/\nGil/Oj\nTotal entries displayed: 2\nSW2# show cdp neighbors\nCapability Codes: R\nS\nD\nRouter,\nSwitch,\nRemote,\nT\nc\nBridge, B\nSource Route Bri\n1\nIGMP, r\nRepeater, p\nM - Two-port Mac\nDevice ID\nLocal Intrfce\nGig 1/0/21\nGig 1/0/2\ndisplayed: 2\nHoldtme\n155\n131\nCapability\nSWI\nRI\nTotal\nRelay\nPlatform\nws-C296ex\nCili1-8P\nentries" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///c3dc6bd1-0f19-4496-9d7a-8b042e9acc13" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d6ea065fdd22ddc796af7aa2528cb29d"><img alt="SW2# show Ildp neighbors\nCapability codes:\n(R) Router, (B) Bridge, (T) Telephone, (C) DOCSIS Cable Device\nHold-time\n(W) WLAN Access Point, (P) Repeater,\n(S)\nStation, (O) Other\nDevice ID\nRI\nSWI\nLocal Intf\nGil/O/2\nGil /0/21\nCapability\n120\n120\nTrans\nHost,\nCVTA,\nPort\nGiO/O/\nGil/Oj\nTotal entries displayed: 2\nSW2# show cdp neighbors\nCapability Codes: R\nS\nD\nRouter,\nSwitch,\nRemote,\nT\nc\nBridge, B\nSource Route Bri\n1\nIGMP, r\nRepeater, p\nM - Two-port Mac\nDevice ID\nLocal Intrfce\nGig 1/0/21\nGig 1/0/2\ndisplayed: 2\nHoldtme\n155\n131\nCapability\nSWI\nRI\nTotal\nRelay\nPlatform\nws-C296ex\nCili1-8P\nentries" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///c3dc6bd1-0f19-4496-9d7a-8b042e9acc13"></a></p>
<p>the LLDP output in the example does differ from CDP in a few important ways:</p>
<p>LLDP uses B as the capability code for switching, referring to bridge, a term for the device type that existed before switches that performed the same basic functions.</p>
<p>LLDP does not identify IGMP as a capability, while CDP does (I).</p>
<p>CDP lists the neighbor’s platform, a code that defines the device type, while LLDP does not.</p>
<p>LLDP lists capabilities with different conventions (see upcoming Example 9-19).</p>
<p><a href="#R-image-c1f8709998c79fe5d8abe962e5922b4f" class="lightbox-link"><img alt="SW2# show Ildp entry RI\nCapability codes:\n(R) Router, (B) Bridge, (T) Telephone, (C) DOCSIS Cable Device\n(W) WLAN Access Point, (P) Repeater, (S) Station, (O) Other\nLocal Intf: Gil/0/2\nChassis id: 70ea .1a9a.d3Ø0\nPort id: GiØ/0/1\nPort Description: GigabitEthernet0/Ø/1\nSystem Name: RI\nSystem Description:\nCisco IOS Software [Fuji], ISR Software (ARMV8EB LINUX IOSD-UNIVERSA\nTechnical Support: http://www.cisco.com/techsupport\nCopyright (c) 1986-2018 by Cisco Systems, Inc.\nCompiled Tue 27-Mar-18 10:56 by mcpre\nTime remaining: 100 seconds\nSystem Capabilities: B,R\nEnabled Capabilities: R\nManagement Addresses :\nIP: 10.12.25.5\nAuto Negotiation\nnot supported\nPhysical media capabilities\nnot advertised\nMedia Attachment Unit type\nnot advertised\nVlan ID:\nnot advertised" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///947e4912-5bcb-4289-be21-d45a96066b85" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c1f8709998c79fe5d8abe962e5922b4f"><img alt="SW2# show Ildp entry RI\nCapability codes:\n(R) Router, (B) Bridge, (T) Telephone, (C) DOCSIS Cable Device\n(W) WLAN Access Point, (P) Repeater, (S) Station, (O) Other\nLocal Intf: Gil/0/2\nChassis id: 70ea .1a9a.d3Ø0\nPort id: GiØ/0/1\nPort Description: GigabitEthernet0/Ø/1\nSystem Name: RI\nSystem Description:\nCisco IOS Software [Fuji], ISR Software (ARMV8EB LINUX IOSD-UNIVERSA\nTechnical Support: http://www.cisco.com/techsupport\nCopyright (c) 1986-2018 by Cisco Systems, Inc.\nCompiled Tue 27-Mar-18 10:56 by mcpre\nTime remaining: 100 seconds\nSystem Capabilities: B,R\nEnabled Capabilities: R\nManagement Addresses :\nIP: 10.12.25.5\nAuto Negotiation\nnot supported\nPhysical media capabilities\nnot advertised\nMedia Attachment Unit type\nnot advertised\nVlan ID:\nnot advertised" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///947e4912-5bcb-4289-be21-d45a96066b85"></a></p>
<p>System Capabilities: What the device can do</p>
<p>Enabled Capabilities: What the device does now with its current configuration</p>
<p>LLDP uses the same messaging concepts as CDP, encapsulating messages directly in data-link headers. Devices do not forward LLDP messages so that LLDP learns only of directly connected neighbors. LLDP does use a different multicast MAC address (0180.C200.000E)</p>
<h3 id="configuring-and-verifying-lldp">Configuring and Verifying LLDP</h3>
<p>Cisco devices default to disable LLDP</p>
<p>LLDP separates the sending and receiving of LLDP messages as separate functions.</p>
<p>LLDP support processing receives LLDP messages on an interface so that the switch or router learns about the neighboring device while not transmitting LLDP messages to the neighboring device.</p>
<p>the commands include options to toggle on|off the transmission of LLDP messages separately from the processing of received messages.</p>
<p>[no] lldp run: A global configuration command that sets the default mode of LLDP operation for any interface that does not have more specific LLDP subcommands (lldp transmit, lldp receive). The lldp run global command enables LLDP in both directions on those interfaces, while no lldp run disables LLDP.</p>
<p>[no] lldp transmit: An interface sub-command that defines the operation of LLDP on the interface regardless of the global [no] lldp run command. The lldp transmit interface subcommand causes the device to transmit LLDP messages, while no lldp transmit causes it to not transmit LLDP messages.</p>
<p>[no] lldp receive: An interface subcommand that defines the operation of LLDP on the interface regardless of the global [no] lldp run command. The lldp receive interface subcommand causes the device to process received LLDP messages, while no lldp receive causes it to not process received LLDP messages.</p>
<p><a href="#R-image-323dbdcc02a23f0f7faaa1cb7648b14c" class="lightbox-link"><img alt="Example 9-20 Enabling LLDP on All Ports, Disabling on a Few Ports\nClick here to view code image\nlldp run\ninterface gigabitEthernet1/Ø/17\nno lldp transmit\nno lldp receive\ninterface gigabitEthernet1/Ø/18\nno lldp receive" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///48b49040-6e65-45ee-a590-a3b5e0fcc11b" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-323dbdcc02a23f0f7faaa1cb7648b14c"><img alt="Example 9-20 Enabling LLDP on All Ports, Disabling on a Few Ports\nClick here to view code image\nlldp run\ninterface gigabitEthernet1/Ø/17\nno lldp transmit\nno lldp receive\ninterface gigabitEthernet1/Ø/18\nno lldp receive" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///48b49040-6e65-45ee-a590-a3b5e0fcc11b"></a></p>
<p><a href="#R-image-cdad8ce30d4694184003f974b19fcd53" class="lightbox-link"><img alt="Example 9-21 Enabling LLDP on Limited Ports, Leaving Disabled on Most\nClick here to view code image\ninterface gigabitEthernet1/Ø/19\nlldp transmit\nlldp receive\ninterface gigabitEthernet1/0/20\nlldp receive" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///7640bbe6-77fa-41fe-97a7-8d5fd4d05b6e" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-cdad8ce30d4694184003f974b19fcd53"><img alt="Example 9-21 Enabling LLDP on Limited Ports, Leaving Disabled on Most\nClick here to view code image\ninterface gigabitEthernet1/Ø/19\nlldp transmit\nlldp receive\ninterface gigabitEthernet1/0/20\nlldp receive" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///7640bbe6-77fa-41fe-97a7-8d5fd4d05b6e"></a></p>
<p>show lldp interface lists the interfaces on which LLDP is enabled.</p>
<p><a href="#R-image-80e5f3e3938fb6295278be1cb46e8759" class="lightbox-link"><img alt="SW2# show Ildp\nGlobal LLDP Information:\nstatus: ACTIVE\nLLDP advertisements are sent every 30 seconds\nLLDP hold time advertised is 120 seconds\nLLDP interface reinitialisation delay is 2 seconds\nSW2# show Ildp interface gl/Ø/2\nGigabitEthernet1/Ø/2:\nTx: enabled\nRx: enabled\nTx state: IDLE\nRx state: WAIT FOR FRAME\nSW2# show Ildp traffic\nLLDP traffic statistics:\nTotal\nTotal\nTotal\nTotal\nTotal\nTotal\nTotal\nframes out: 259\nentries aged: 0\nframes in: 257\nframes received in error\nframes discarded: 0\nTLVs discarded: 0\nTLVs unrecognized: 0" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="blob:file:///56b09a3a-ac43-4d2d-9691-279d8f24afdb" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-80e5f3e3938fb6295278be1cb46e8759"><img alt="SW2# show Ildp\nGlobal LLDP Information:\nstatus: ACTIVE\nLLDP advertisements are sent every 30 seconds\nLLDP hold time advertised is 120 seconds\nLLDP interface reinitialisation delay is 2 seconds\nSW2# show Ildp interface gl/Ø/2\nGigabitEthernet1/Ø/2:\nTx: enabled\nRx: enabled\nTx state: IDLE\nRx state: WAIT FOR FRAME\nSW2# show Ildp traffic\nLLDP traffic statistics:\nTotal\nTotal\nTotal\nTotal\nTotal\nTotal\nTotal\nframes out: 259\nentries aged: 0\nframes in: 257\nframes received in error\nframes discarded: 0\nTLVs discarded: 0\nTLVs unrecognized: 0" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="blob:file:///56b09a3a-ac43-4d2d-9691-279d8f24afdb"></a></p>
<p>like CDP, LLDP uses a send timer and hold timer for the same purposes as CDP. The example shows the default settings of 30 seconds for the send timer and 120 seconds for the hold timer. You can override the defaults with the lldp timer seconds and lldp holdtime seconds global commands</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="dhcp-configuration">DHCP Configuration</h1>

<p>1.0 Network Fundamentals</p>
<p>1.10 Identify IP parameters for Client OS (Windows, Mac OS, Linux)</p>
<p>4.0 IP Services</p>
<p>4.3 Explain the role of DHCP and DNS within the network</p>
<p>4.6 Configure and verify DHCP client and relay</p>
<p>DHCP Concepts</p>
<p>Four messages between the client and server (DORA):</p>
<ul>
<li>
<p>Discover:</p>
</li>
<li>
<p>Sent by the DHCP client to find a willing DHCP server</p>
</li>
<li>
<p>Offer:</p>
</li>
<li>
<p>Sent by a DHCP server to offer to lease</p>
</li>
</ul>
<p>Request:</p>
<ul>
<li>Sent by the DHCP client to ask the server to lease the IPv4 address listed in the Offer message</li>
</ul>
<p>Acknowledgment:</p>
<ul>
<li>Sent by the DHCP server to assign the address and to list the mask, default router, and DNS server IP addresses</li>
</ul>
<p>IPv4 addresses that allow a host that has no IP address to still be able to send and receive messages on the local subnet:</p>
<p>0.0.0.0:</p>
<ul>
<li>An address reserved for use as a source IPv4 address for hosts that do not yet have an IP address.</li>
</ul>
<p>255.255.255.255:</p>
<ul>
<li>
<p>The local broadcast IP address. Packets sent to this destination address are broadcast on the local data link, but routers do not forward them.</p>
</li>
<li>
<p>a client, sends a Discover message, with source IP address of 0.0.0.0</p>
</li>
<li>
<p>Host A sends the packet to destination 255.255.255.255 router R1 will not forward this packet.</p>
</li>
<li>
<p>assuming the DHCP client chooses to use a DHCP option called the broadcast flag;</p>
</li>
<li>
<p>all examples in this book assume the broadcast flag is used.</p>
</li>
<li>
<p>all hosts in the subnet receive the Offer message</p>
</li>
<li>
<p>the original Discover message lists a number called the client ID, which</p>
</li>
<li>
<p>includes the host’s MAC address, that identifies the original host (host A in this case).</p>
</li>
<li>
<p>As a result, host A knows that the Offer message is meant for host A.</p>
</li>
</ul>
<p>Supporting DHCP for Remote Subnets with DHCP Relay</p>
<p>ip helper-address server-ip</p>
<ul>
<li>
<p>Watch for incoming DHCP messages, with destination IP address 255.255.255.255.</p>
</li>
<li>
<p>Change that packet’s source IP address to the router’s incoming interface IP address.</p>
</li>
<li>
<p>Change that packet’s destination IP address to the address of the DHCP server (as configured in the ip helper-address command).</p>
</li>
<li>
<p>Route the packet to the DHCP server.</p>
</li>
<li>
<p>for the return packet from the DHCP server</p>
</li>
<li>
<p>the server simply reverses the source and destination IP address of the packet received from the router (relay agent)</p>
</li>
<li>
<p>the Discover message lists source IP address 172.16.1.1, so the server sends the Offer message back to destination IP address 172.16.1.1.</p>
</li>
<li>
<p>the DHCP relay agent (router R1) needs to change the destination IP address, so that the real DHCP client (host A), which does not have an IP address yet, can receive and process the packet.</p>
</li>
<li>
<p>Sends as broadcast back to the LAN</p>
</li>
</ul>
<p>Information Stored at the DHCP Server</p>
<p>types of settings the DHCP server needs to know to support DHCP clients:</p>
<ul>
<li>
<p>Subnet ID and mask:</p>
</li>
<li>
<p>Reserved (excluded) addresses:</p>
</li>
<li>
<p>which addresses in the subnet to not lease.</p>
</li>
<li>
<p>Default router(s)</p>
</li>
<li>
<p>DNS IP address(es)</p>
</li>
</ul>
<p>other parameters</p>
<p>Maximum lease time</p>
<ul>
<li>time limit for leasing an IP address</li>
</ul>
<p>DHCP uses three allocation modes</p>
<p>Dynamic allocation</p>
<ul>
<li>the DHCP mechanisms and configuration described throughout this chapter.</li>
</ul>
<p>automatic allocation</p>
<ul>
<li>sets the DHCP lease time to infinite.</li>
</ul>
<p>static allocation</p>
<ul>
<li>preconfigures the specific IP address for a client based on the client’s MAC address.</li>
</ul>
<p>Trivial File Transfer Protocol (TFTP) server address</p>
<p>Configuring DHCP Relay</p>
<p>What for?</p>
<ul>
<li>DHCP clients exist in the subnet</li>
<li>DHCP servers do not exist in the subnet</li>
</ul>
<p>(config-if)# ip helper-address address</p>
<p>Show ip interface g0/0</p>
<ul>
<li>Helper Address is address or Helper address is not set</li>
</ul>
<p>Configuring a Switch as DHCP Client</p>
<p>(config-if) ip address dhcp</p>
<ul>
<li>the switch does not attempt DHCP until the interface reaches an up/up state</li>
</ul>
<p>show interfaces interface</p>
<ul>
<li>verify ip address</li>
</ul>
<p>show dhcp lease</p>
<ul>
<li>see the (temporarily) leased IP address and other parameters</li>
<li>the switch does not store the DHCP-learned IP configuration in the running-config</li>
</ul>
<p>show ip default-gateway</p>
<ul>
<li>view address of the default gateway</li>
</ul>
<p>Configuring a Router as DHCP Client</p>
<p>(config-if) # ip address dhcp</p>
<ul>
<li>IOS displays this route as a static route (destination 0.0.0.0/0)</li>
</ul>
<p>To recognize this route as a DHCP-learned default route, look to the administrative distance value of 254.</p>
<ul>
<li>administrative distance of 1 for static routes configured with the ip route configuration command</li>
<li>default of 254 for default routes added because of DHCP.</li>
</ul>
<p>Host Settings for IPv4</p>
<p>To work correctly, an IPv4 host needs to know these values:</p>
<ul>
<li>DNS server IP addresses</li>
<li>Default gateway (router) IP address</li>
<li>Device’s own IP address</li>
<li>Device’s own subnet mask</li>
</ul>
<p>Host IP Settings on Windows</p>
<p>netstat -rn</p>
<ul>
<li>lists the host’s IP routing table</li>
<li>the top of the table lists a route based on the default gateway (0.0.0.0 and 0.0.0.0)</li>
<li>top of the output also lists several other routes related to having a working interface, like a route to the subnet connected to the interface.</li>
</ul>
<p>gateway of “on-link”</p>
<p>the PC thinks the destination is on the local subnet (link)</p>
<p>Host IP Settings on macOS</p>
<p>ifconfig</p>
<ul>
<li>does not have an /all option</li>
<li>does not list the default gateway or DNS servers</li>
<li>Shows mac address and ip address</li>
</ul>
<p>networksetup -getinfo Ethernet</p>
<ul>
<li>Shows dhcp config, ip, subnet mask, and default gateway</li>
</ul>
<p>networksetup -getdnsservers Ethernet</p>
<ul>
<li>
<p>Shows dns server</p>
</li>
<li>
<p>adds a default route to its host routing table based on the default gateway</p>
</li>
<li>
<p>adds route to the local subnet calculated based on the IP address and mask learned with DHCP</p>
</li>
<li>
<p>uses the netstat -rn command to list those routes</p>
</li>
<li>
<p>output represents the default route using the word default rather than 0.0.0.0 and 0.0.0.0</p>
</li>
</ul>
<p>Host IP Settings on Linux</p>
<p>some Linux distributions do not include net-tools.</p>
<p>You can add net-tools to most Linux distributions.</p>
<p>includes ifconfig and netstat -rn.</p>
<p>iproute library</p>
<ul>
<li>preinstalled on Linux</li>
<li>includes a set of replacement commands and functions, many performed with the ip command and some parameters.</li>
<li>similar to the macOS version but also shows some interface counters.</li>
</ul>
<p>ipaddress</p>
<ul>
<li>shows basic addressing info</li>
<li>Shows subnet in prefix notation rather than in dotted decimal</li>
</ul>
<p>ifconfig wlan0</p>
<ul>
<li>shows l2 and l3 addresses</li>
<li>from net-tools</li>
</ul>
<p>netstat -rn</p>
<ul>
<li>
<p>from net-tools</p>
</li>
<li>
<p>lists a default route, but with a style that shows the destination as 0.0.0.0.</p>
</li>
<li>
<p>points to the default gateway as learned with DHCP:</p>
</li>
<li>
<p>lists a route to the local subnet</p>
</li>
</ul>
<p>The bottom of the example shows the command meant to replace netstat -rn: ip route. Note that it also shows a default route that references the default router, along with a route for the local subnet.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="dhcp-snooping-and-arp-inspection">DHCP Snooping and ARP Inspection</h1>

<p>5.0 Security Fundamentals</p>
<p>5.7 Configure Layer 2 security features (DHCP snooping, dynamic ARP inspection, and port security)</p>
<p>DHCP Snooping</p>
<ul>
<li>notices DHCP messages that fall outside the normal use of DHCP</li>
<li>watches the DHCP messages that flow through a LAN switch</li>
<li>builds a table that lists the details of legitimate DHCP flows</li>
<li>other switch features can know what legitimate DHCP leases exist for devices connected to the switch.</li>
</ul>
<p>Dynamic ARP Inspection (DAI)</p>
<ul>
<li>
<p>helps prevent packets being redirected to an attacking host.</p>
</li>
<li>
<p>Some ARP attacks try to convince hosts to send packets to the attacker’s device instead of the true destination.</p>
</li>
<li>
<p>The switch watches ARP messages as they flow through the switch.</p>
</li>
<li>
<p>checks incoming ARP messages,</p>
</li>
<li>
<p>checks those against normal ARP operation as well as</p>
</li>
<li>
<p>checks the details against other data sources, including the DHCP Snooping binding table.</p>
</li>
<li>
<p>When the ARP message does not match the known information about the legitimate addresses in the network, the switch filters the ARP message.</p>
</li>
</ul>
<p>DHCP Snooping Concepts</p>
<ul>
<li>
<p>analyzes incoming messages on the specified subset of ports in a VLAN</p>
</li>
<li>
<p>never filters non-DHCP messages</p>
</li>
<li>
<p>allow the incoming DHCP message or discard the message.</p>
</li>
<li>
<p>operates on LAN switches and is commonly used on Layer 2 LAN switches and enabled on Layer 2 ports.</p>
</li>
<li>
<p>Client facing devices are untrusted</p>
</li>
<li>
<p>DHCP facing devices (server, router, switch) are trusted</p>
</li>
<li>
<p>works first on all ports in a VLAN, but with each port being trusted or untrusted by DHCP Snooping</p>
</li>
<li>
<p>the rules differentiate between messages normally sent by servers (like DHCPOFFER and DHCPACK) versus those normally sent by DHCP clients:</p>
</li>
<li>
<p>DHCP messages received on an untrusted port, for messages normally sent by a server, will always be discarded.</p>
</li>
<li>
<p>DHCP messages received on an untrusted port, as normally sent by a DHCP client, may be filtered if they appear to be part of an attack.</p>
</li>
<li>
<p>DHCP messages received on a trusted port will be forwarded; trusted ports do not filter (discard) any DHCP messages.</p>
</li>
</ul>
<p>A Sample Attack: A Spurious DHCP Server</p>
<ul>
<li>Spurious DHCP server (attacker) responds to dhcp message by a client pc</li>
<li>attacker replies with false dhcp information by naming itself as the default gateway</li>
<li>Pc1 send all messages to another network to attacker, becoming a man-in-the-middle attack (pc2 could forward the messages to the actual default gateway</li>
<li>the legitimate DHCP also returns a DHCPOFFER message to host PC1, but most hosts use the first received DHCPOFFER, and the attacker will likely be first in this scenario.</li>
</ul>
<p>DHCP Snooping Logic</p>
<ul>
<li>
<p>stops attacks by making ports untrusted</p>
</li>
<li>
<p>DHCP clients also use the DHCP RELEASE and DHCP DECLINE messages.</p>
</li>
<li>
<p>DHCP RELEASE</p>
</li>
<li>
<p>client can tell the DHCP server it no longer needs the address, releasing it back to the DHCP server</p>
</li>
<li>
<p>DHCP DECLINE</p>
</li>
<li>
<p>turn down the use of an IP address during the normal DORA flow on messages.</p>
</li>
</ul>
<p>DHCP Snooping rules:</p>
<ul>
<li>
<p>Examine all incoming DHCP messages.</p>
</li>
<li>
<p>If normally sent by servers, discard the message.</p>
</li>
<li>
<p>If normally sent by clients, filter as follows:</p>
</li>
<li>
<p>DISCOVER and REQUEST</p>
</li>
<li>
<p>check for MAC address consistency between the Ethernet frame and the DHCP message.</p>
</li>
</ul>
<p>RELEASE or DECLINE</p>
<ul>
<li>
<p>check the incoming interface plus IP address versus the DHCP Snooping binding table.</p>
</li>
<li>
<p>For messages not filtered that result in a DHCP lease, build a new entry to the DHCP Snooping binding table.</p>
</li>
</ul>
<p>DHCP snooping checking MAC Address</p>
<ul>
<li>
<p>chaddr (client hardware address)</p>
</li>
<li>
<p>Source MAC address included in DISCOVER message</p>
</li>
<li>
<p>frame encapsulating the dhcp message also includes the source mac address</p>
</li>
<li>
<p>DHCP Snooping checks to make sure those values match.</p>
</li>
<li>
<p>if not the packet is dropped</p>
</li>
<li>
<p>Used on untrusted ports</p>
</li>
<li>
<p>stops attacker from leasing all available addresses so no other client can get a lease</p>
</li>
</ul>
<p>Filtering Messages that Release IP Addresses</p>
<ul>
<li>
<p>DHCP Snooping binding table</p>
</li>
<li>
<p>creates entry for all legitimate DHCP entries</p>
</li>
<li>
<p>DHCP Snooping, and other features like Dynamic ARP Inspection, can use the table to make decisions.</p>
</li>
<li>
<p>DHCP Snooping Binding Table:</p>
</li>
<li>
<p>MAC</p>
</li>
<li>
<p>IP</p>
</li>
<li>
<p>VLAN</p>
</li>
<li>
<p>INTERFACE</p>
</li>
<li>
<p>checks client-sent messages like RELEASE and DECLINE that would cause the DHCP server to be allowed to release an address</p>
</li>
<li>
<p>attacker could RELEASE an address that is not his and attempt steal it for himself</p>
</li>
<li>
<p>attacker pretends his source IP is the legitimate IP trying to RELEASE</p>
</li>
<li>
<p>the source interface in the DHCP Snooping Binding Table does not match so dhcp snooping bloacks the request</p>
</li>
</ul>
<p>DHCP Snooping Configuration</p>
<p>Required:</p>
<ul>
<li>
<p>enable DHCP Snooping</p>
</li>
<li>
<p>ip dhcp snooping</p>
</li>
<li>
<p>list the VLANs on which to use DHCP Snooping</p>
</li>
<li>
<p>ip dhcp snooping vlan vlan-id</p>
</li>
</ul>
<p>Often used:</p>
<ul>
<li>
<p>configure trusted ports</p>
</li>
<li>
<p>default is untrusted.</p>
</li>
<li>
<p>(config-if) # ip dhcp snooping trust</p>
</li>
</ul>
<p>DHCP Snooping verification</p>
<p>show ip dhcp snooping</p>
<ul>
<li>
<p>enabled or disabled</p>
</li>
<li>
<p>operational in which vlans</p>
</li>
<li>
<p>trusted interfaces</p>
</li>
<li>
<p>Insertion of option 82 is disabled</p>
</li>
<li>
<p>(enabled by default)</p>
</li>
<li>
<p>no ip dhcp information option command is configured</p>
</li>
<li>
<p>(because this switch is not a dhcp relay agent)</p>
</li>
<li>
<p>DHCP relay agents add option 82 DHCP header fields (RFC 3046)</p>
</li>
<li>
<p>If enabled on a non relay agent then dhcp stops working for end users</p>
</li>
<li>
<p>The switch sets fields in the DHCP messages as if it were a DHCP relay agent</p>
</li>
<li>
<p>changes to those messages cause most DHCP servers (and most DHCP relay agents) to ignore the received DHCP messages.</p>
</li>
<li>
<p>Rate limit on each interface</p>
</li>
</ul>
<p>Show ip dhcp snooping binding</p>
<p>Shows actual dhcp snooping binding table</p>
<p>DHCP Rate Limiting</p>
<ul>
<li>
<p>attacker generates large volumes of DHCP messages to overload the DHCP Snooping feature and the switch CPU itself</p>
</li>
<li>
<p>optional feature that tracks the number of incoming DHCP messages.</p>
</li>
<li>
<p>If the number of incoming DHCP messages exceeds that limit over a one-second period:</p>
</li>
<li>
<p>port changes to an err-disabled state.</p>
</li>
</ul>
<p>-can be on both on trusted and untrusted interfaces.</p>
<ul>
<li>Default of no rate limit</li>
</ul>
<p>how to enable DHCP Snooping rate limits and err-disabled recovery.</p>
<p>(config-int) # ip dhcp snooping rate limit number</p>
<p>errdisable recovery cause dhcp-rate-limit</p>
<ul>
<li>recover from errdisable if caused by dhcp snooping</li>
</ul>
<p>errdisable recovery interval number</p>
<ul>
<li>seconds to wait before recovering</li>
</ul>
<p>(config-int) # no ip dhcp snooping rate limit</p>
<p>Dynamic ARP Inspection (DAI)</p>
<ul>
<li>
<p>examines incoming ARP messages on untrusted ports to filter those it believes to be part of an attack.</p>
</li>
<li>
<p>compares incoming ARP messages with two sources of data:</p>
</li>
<li>
<p>DHCP Snooping binding table</p>
</li>
<li>
<p>configured ARP ACLs.</p>
</li>
<li>
<p>If the incoming ARP message does not match the tables in the switch, the switch discards the ARP message.</p>
</li>
</ul>
<p>DAI Concepts</p>
<p>gratuitous ARP (arp reply)—</p>
<p>triggers hosts to add incorrect ARP entries to their ARP tables.</p>
<p>Review of Normal IP ARP</p>
<p>Both hosts learn the other host’s MAC address with this two-message flow. Not only does PC1 learn R2’s MAC address based on the ARP reply (message 2), but router R2 learns PC1’s IP and MAC address because of the ARP request (message 1).</p>
<p>ARP Request</p>
<ul>
<li>
<p>Ethernet Frame</p>
</li>
<li>
<p>source mac</p>
</li>
<li>
<p>destination mac (broadcast)</p>
</li>
<li>
<p>ARP</p>
</li>
<li>
<p>Origin IP</p>
</li>
<li>
<p>Target IP</p>
</li>
<li>
<p>Origin MAC</p>
</li>
<li>
<p>Target MAC ??</p>
</li>
</ul>
<p>ARP Reply</p>
<ul>
<li>
<p>Ethernet Frame</p>
</li>
<li>
<p>Source MAC</p>
</li>
<li>
<p>Dest. MAC</p>
</li>
<li>
<p>ARP</p>
</li>
<li>
<p>Origin IP</p>
</li>
<li>
<p>Target IP</p>
</li>
<li>
<p>Origin MAC</p>
</li>
<li>
<p>Target MAC</p>
</li>
</ul>
<p>Gratuitous ARP as an Attack Vector</p>
<ul>
<li>
<p>when a host changes its MAC address it can send a gratuitous ARP message with these features:</p>
</li>
<li>
<p>ARP reply.</p>
</li>
<li>
<p>sent without having first received an ARP request.</p>
</li>
<li>
<p>sent to an Ethernet destination broadcast address so that all hosts in the subnet receive the message.</p>
</li>
<li>
<p>could be part of a man-in-the-middle attack</p>
</li>
<li>
<p>attacker uses gratuitous arp to make replies go back to it instead of original host</p>
</li>
</ul>
<p>Dynamic ARP Inspection Logic</p>
<ul>
<li>Host does not need arp if it doesn&rsquo;t have an IP yet</li>
<li>Once DHCP assigns and IP then ARP is used</li>
<li>for untrusted interfaces DAI confirms an ARP’s correctness based on the DHCP Snooping Binding table</li>
<li>compares origin MAC and IP</li>
<li>if not found on the table, discard the arp</li>
<li>same trusted and untrusted rules as dhcp snooping</li>
</ul>
<p>ARP ACL</p>
<ul>
<li>
<p>statically configured</p>
</li>
<li>
<p>list correct pairs of IP and mac addresses</p>
</li>
<li>
<p>Useful for ip addresses configured statically because they will not be in the dhcp snooping binding table</p>
</li>
<li>
<p>DAI can check Ethernet header and arp source and destination messages mac addresses to make sure they match</p>
</li>
<li>
<p>DAI can also check Messages with unexpected IP addresses in the two ARP IP address fields</p>
</li>
<li>
<p>does its work in the switch CPU rather than in the switch ASIC</p>
</li>
<li>
<p>DAI itself can be more susceptible to DoS attacks.</p>
</li>
<li>
<p>attacker could generate large numbers of ARP messages, driving up CPU usage in the switch.</p>
</li>
<li>
<p>DAI can avoid these problems through rate limiting the number of ARP messages on a port over time.</p>
</li>
</ul>
<p>Configuring ARP Inspection on a Layer 2 Switch</p>
<p>decisions include the following:</p>
<ul>
<li>Choose whether to rely on DHCP Snooping, ARP ACLs, or both.</li>
<li>If using DHCP Snooping, configure it and make the correct ports trusted for DHCP Snooping.</li>
<li>Choose the VLAN(s) on which to enable DAI.</li>
<li>Make DAI trusted (rather than the default setting of untrusted) on select ports in those VLANs, typically for the same ports you trusted for DHCP Snooping.</li>
</ul>
<p>ip arp inspection vlan vlan-id</p>
<ul>
<li>enable arp DAI on that vlan</li>
</ul>
<p>(config-if)# ip arp inspection trust</p>
<ul>
<li>dhcp snooping should be enabled or DAI will filter all packets</li>
</ul>
<p>ip dhcp snooping</p>
<p>ip dhcp snooping vlan vlan-id</p>
<p>ip dhcp snooping trust</p>
<p>(configure arp ACLs)</p>
<p>show ip arp inspection</p>
<ul>
<li>
<p>gives both configuration settings along with status variables and counters</p>
</li>
<li>
<p>forwarded, dropped, dhcp drops, acl drop counts</p>
</li>
<li>
<p>Is logging enabled?</p>
</li>
</ul>
<p>show ip arp inspection statistics</p>
<ul>
<li>
<p>counts per vlan</p>
</li>
<li>
<p>forwarded, dropped, dhcp drops, acl drops</p>
</li>
<li>
<p>permits</p>
</li>
</ul>
<p>ARP Rate Limiting</p>
<ul>
<li>
<p>Default for all interfaces</p>
</li>
<li>
<p>(trusted and untrusted)</p>
</li>
</ul>
<p>burst interval (a number of seconds)</p>
<ul>
<li>x ARP messages over y seconds”</li>
<li>(DHCP Snooping does not define a burst setting)</li>
<li>optional configuration</li>
</ul>
<p>ip arp inspection limit rate 8 burst interval 4</p>
<ul>
<li>
<p>8 messages in a burst of 4 seconds</p>
</li>
<li>
<p>default of 15 messages over a one second burst</p>
</li>
<li>
<p>show ip arp inspection interfaces</p>
</li>
<li>
<p>rate, burst interval, trust state, per interface</p>
</li>
</ul>
<p>ip arp inspection limit rate number</p>
<p>ip arp inspection limit rate none</p>
<ul>
<li>disable rate limiting</li>
</ul>
<p>errdisable recovery cause arp-inspection</p>
<p>errdisable recovery interval 30</p>
<p>Configuring Optional DAI Message Checks</p>
<p>ip arp inspection validate {dst-mac, ip, src-mac}</p>
<ul>
<li>one, two, or all three of the options</li>
<li>command with overrides previous versions of the same command</li>
<li>show ip arp inspection to validate</li>
</ul>
<p>drop ARP packets when the IP addresses in the packets are invalid or when the MAC addresses in the body of the ARP packets do not match the addresses specified in the Ethernet header.</p>
<ul>
<li>For src-mac, check the source MAC address in the Ethernet header against the sender MAC address in the ARP body. This check is performed on both ARP requests and responses. When enabled, packets with different MAC addresses are classified as invalid and are dropped.</li>
<li>For dst-mac, check the destination MAC address in the Ethernet header against the target MAC address in ARP body. This check is performed for ARP responses. When enabled, packets with different MAC addresses are classified as invalid and are dropped.</li>
<li>For ip, check the ARP body for invalid and unexpected IP addresses. Addresses include 0.0.0.0, 255.255.255.255, and all IP multicast addresses. Sender IP addresses are checked in all ARP requests and responses, and target IP addresses are checked only in ARP responses</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="ethernet-lans">Ethernet LANs</h1>

<ol start="2">
<li>Ethernet LANs</li>
</ol>
<p>Thursday, June 10, 2021</p>
<p>8:00 AM</p>
<h1 id="10-network-fundamentals">1.0 Network Fundamentals</h1>
<h1 id="11-explain-the-role-and-function-of-network-components">1.1 Explain the role and function of network components</h1>
<h1 id="11b-l2-and-l3-switches">1.1.b L2 and L3 Switches</h1>
<h1 id="12-describe-characteristics-of-network-topology-architectures">1.2 Describe characteristics of network topology architectures</h1>
<h1 id="12e-small-officehome-office-soho">1.2.e Small office/home office (SOHO)</h1>
<h1 id="13-compare-physical-interface-and-cabling-types">1.3 Compare physical interface and cabling types</h1>
<h1 id="13a-single-mode-fiber-multimode-fiber-copper">1.3.a Single-mode fiber, multimode fiber, copper</h1>
<h1 id="13b-connections-ethernet-shared-media-and-point-to-point">1.3.b Connections (Ethernet shared media and point-to-point)</h1>
<p>802.3 (Ethernet Standards</p>
<p>10BASE-T</p>
<ul>
<li>10 Mbps</li>
<li>Ethernet</li>
<li>802.3</li>
<li>Copper/ 100 m</li>
</ul>
<p>100BASE-T</p>
<ul>
<li>100 Mbps</li>
<li>Fast Ethernet</li>
<li>802.3u</li>
<li>Copper/ 100m</li>
</ul>
<p>1000BASE-LX</p>
<ul>
<li>1000 Mbps</li>
<li>Gigabit Ethernet</li>
<li>802.3z</li>
<li>Fiber, 5000 m</li>
</ul>
<p>1000BASE-T</p>
<ul>
<li>1000 Mbps</li>
<li>Gigabit Ethernet</li>
<li>802.3ab</li>
<li>Copper, 100m</li>
</ul>
<p>10GBASE-T</p>
<ul>
<li>10 Gbps</li>
<li>10 Gig Ethernet</li>
<li>802.3an</li>
<li>Copper 100m</li>
</ul>
<p>Three most common</p>
<ul>
<li>10BASE-T, 100BASE-T, and 1000BASE-T</li>
</ul>
<p>Twisting of the wires helps reduce EMI.</p>
<p>Crosstalk</p>
<p>-EMI between wire pairs</p>
<p>Gigabit Ethernet interface Converter (GBIC)</p>
<ul>
<li>The original form factor for a removeable transceiver for Gigabit interfaces; larger than SFPs</li>
</ul>
<p>Small Form Pluggable (SFP)</p>
<ul>
<li>The replacement for GBICs, used on gigabit interfaces, with a smaller size, taking less space on the side of the networking card or switch.</li>
</ul>
<p>Small Form Pluggable Plus (SFP+)</p>
<ul>
<li>Same size as the SFP, but used on 10-Gbps interfaces</li>
</ul>
<p>UTP Cabling Pinouts for 10BASE-T and 100BASE-T</p>
<p>10BASE-T and 100BASE-T</p>
<ul>
<li>2 wire pairs,</li>
<li>one pair for each direction</li>
</ul>
<p>Crossover</p>
<p>PC/ Router/ AP</p>
<ul>
<li>transmits on pins 1/2</li>
<li>RECEIVES ON PINS 3/6</li>
</ul>
<p>Switch/ Hub</p>
<ul>
<li>Transmits on pins 3/6</li>
<li>receives on pins 1/2</li>
</ul>
<p>Ethernet NIC transmitters send on pins 1 and 2</p>
<p>NIC receivers receive on pins 3 and 6</p>
<p>Straight through cable</p>
<ul>
<li>Pins 1/2 &gt; 1/2</li>
<li>Pins 3/6 &gt; 3/6</li>
</ul>
<p>autoix (cisco)</p>
<ul>
<li>Notices when a wrong cable is used</li>
<li>automatically changes it&rsquo;s logic to make the link work.</li>
</ul>
<p>1000BASE-T</p>
<ul>
<li>4 wire pairs</li>
<li>Both ends transmit and receive simultaneously on each wire pair.</li>
<li>pairs 1/2, 3/6, 4/5, 7/8</li>
<li>Crossover cable crosses the pairs at pins 1/2 and 3/6, it also crosses pairs 4/5 with 7/8</li>
</ul>
<p>Fiber Cabling Transmission Concepts</p>
<p>Physical cable</p>
<ul>
<li>Core &gt;</li>
<li>Cladding &gt;</li>
<li>Buffer &gt;</li>
<li>Strengthener &gt;</li>
<li>Outer Jacket</li>
</ul>
<p>Optical Transmitter</p>
<ul>
<li>Shines light into the core</li>
</ul>
<p>Multimode fiber</p>
<ul>
<li>multiple angles (modes) of light waves</li>
<li>Less expensive</li>
<li>10 gigabit over ethernet allows for distance up to 400m</li>
</ul>
<p>Single mode fiber</p>
<ul>
<li>Smaller diameter (around 1/5 of multimode) core</li>
<li>laser-based transmitter</li>
<li>single angle</li>
</ul>
<p>More expensive SFP/ SFP+ hardware</p>
<p>Distances up to tens of kilometers</p>
<p>Transmit port on one end of the fiber connects to the receive port on the other end (Tx and Rx)</p>
<p>10Gbps Fiber Standards</p>
<ul>
<li>10GBASE-S/ MM/ 400m</li>
<li>10GBASE-LX4/ MM/ 300m</li>
<li>10GBASE-LR/ SM/ 10km</li>
<li>10GBASE-E/ SM/ 30km</li>
</ul>
<p>UTP, MM, and SM comparisons</p>
<p>UTP</p>
<ul>
<li>low cable cost</li>
<li>low switch port cost</li>
<li>100m Max Distance</li>
<li>Some susceptibility to interference</li>
<li>Some risk of copying from cable emissions</li>
</ul>
<p>Multimode</p>
<ul>
<li>Medium cable cost</li>
<li>Medium switch port cost</li>
<li>500m Max Distance</li>
<li>No susceptibility to interference</li>
<li>No risk of copying from cable emissions</li>
</ul>
<p>Single-Mode</p>
<ul>
<li>Medium cable cost</li>
<li>High switch port cost</li>
<li>40Km Max Distance</li>
<li>No susceptibility to interference</li>
<li>No risk of copying from cable emissions</li>
</ul>
<p>Sending Data In Ethernet Networks</p>
<p>Ethernet Header (preamble/sfd/Destination/Source/Type/Dataandpad/FCS)</p>
<p>Header</p>
<ul>
<li>
<p>Preamble</p>
</li>
<li>
<p>7 bites</p>
</li>
<li>
<p>Synchronization</p>
</li>
<li>
<p>Start Frame Delimiter (SFD)</p>
</li>
<li>
<p>1 Byte</p>
</li>
<li>
<p>Signifies next byte begins the Destination MAC Address Field</p>
</li>
<li>
<p>Destination MAC Address</p>
</li>
<li>
<p>6 Bytes</p>
</li>
<li>
<p>Source MAC Address</p>
</li>
<li>
<p>6 Bytes</p>
</li>
<li>
<p>Type</p>
</li>
<li>
<p>2 bytes</p>
</li>
<li>
<p>Type of protocol listed in the frame (IPv4 or IPv6)</p>
</li>
<li>
<p>Data and Pad</p>
</li>
<li>
<p>46-1500Bytes</p>
</li>
<li>
<p>padding can be added to meet the minimum length requirement</p>
</li>
</ul>
<p>Trailer</p>
<ul>
<li>Frame Check Sequence (FCS)</li>
<li>Used to determine if the frame experienced transmission errors</li>
</ul>
<p>Maximum Transmission Unit (MTU)</p>
<ul>
<li>Maximum layer 3 packet that can be sent</li>
</ul>
<p>Ethernet Addressing</p>
<ul>
<li>
<p>6 bytes long (48 bits)</p>
</li>
<li>
<p>12 digit hexadecimal</p>
</li>
<li>
<p>Cisco switch may list a mac address with periods: 0000.0C12.3456</p>
</li>
<li>
<p>Unicast address</p>
</li>
<li>
<p>an address for a single NIC or port</p>
</li>
</ul>
<p>OUI (Organizationally unique indentifier)</p>
<ul>
<li>Universally unique manufacturer code</li>
<li>24 Bits</li>
<li>6 Hex Digits</li>
</ul>
<p>Vendor Assigned</p>
<ul>
<li>24 Bits</li>
<li>6 Hex Digits</li>
</ul>
<p>Group addresses</p>
<p>Broadcast Address</p>
<ul>
<li>Delivered to all devices on the Ethernet LAN.</li>
<li>FFFF.FFFF.FFFF</li>
</ul>
<p>Multicast Address</p>
<ul>
<li>Copied and forwarded to a subset of devices on the LAN</li>
</ul>
<p>Identifying Network Layer Protocols with the Ethernet Type Field</p>
<p>The type field identifies which type of layer 3 packet exists within the ethernet frame (IPv6 or IPv4)</p>
<p>Ethertype is the term used for the type field in an ethernet frame</p>
<p>Error Detection with FCS</p>
<ul>
<li>Error detection does not mean error recovery</li>
<li>Ethernet decide whether the frame should be discarded and does not attempt to recover the lost frame.</li>
</ul>
<p>Sending Ethernet frames with switches and hubs</p>
<ul>
<li>Switches allow the use of Full Duplex Logic</li>
<li>Hubs use half-duplex logic</li>
</ul>
<p>Sending in Modern Ethernet LANs Using Full Duplex</p>
<p>Half duplex</p>
<ul>
<li>must wait to send if it is currently receiving a frame</li>
<li>cannot send and receive at the same time</li>
</ul>
<p>Full Duplex</p>
<ul>
<li>Does not have to wait before sending,</li>
<li>send and receive at the same time.</li>
</ul>
<p>Hubs</p>
<ul>
<li>Uses physical link standards instead of data link standards and are considered layer 1 devices</li>
</ul>
<p>Carrier Sense multiple access with Collision Detection (CSMA/CD)</p>
<ol>
<li>
<p>Listen until line is not busy</p>
</li>
<li>
<p>Send frame</p>
</li>
<li>
<p>Listen for a collision while sending if a collision occurs:</p>
</li>
<li>
<p>Send jamming signal telling all nodes a collision has occurred</p>
</li>
<li>
<p>each node waits a random time then tries to send again</p>
</li>
<li>
<p>Back to step one</p>
</li>
</ol>
<ul>
<li>
<p>All links between PCs and switches use full duplex</p>
</li>
<li>
<p>A link connected to a hub should be half duplex</p>
</li>
<li>
<p>Ethernet Shared media</p>
</li>
<li>
<p>refers to hubs that use CSMA/CD and share bandwidth</p>
</li>
<li>
<p>Ethernet point-to-point</p>
</li>
<li>
<p>network built with switches where links work independently of others</p>
</li>
<li>
<p>A frame can be sent on every Point-to-point link in an ethernet at the same time.</p>
</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="extended-acls">Extended ACLs</h1>

<p>This chapter covers the following exam topics:</p>
<p>5.0 Security Fundamentals</p>
<p>5.6 Configure and verify access control lists</p>
<ul>
<li>all the parameters must be matched correctly to match that one ACE. .</li>
</ul>
<p>Matching the Protocol, Source IP, and Destination IP 9Extended)</p>
<ul>
<li>
<p>Uses the access-list global command. The</p>
</li>
<li>
<p>syntax is identical up until permit or deny keyword</p>
</li>
<li>
<p>Requires three matching parameters:</p>
</li>
<li>
<p>IP protocol type</p>
</li>
<li>
<p>source IP address</p>
</li>
<li>
<p>destination IP address.</p>
</li>
</ul>
<p>IP header’s Protocol Type field</p>
<ul>
<li>identifies the header that follows the IP header (layer 4)</li>
<li>TCP, UDP, EIGRP, IGMP, etc</li>
<li>Use protocol as keyword</li>
<li>Keyword IP means all IPv4 packets</li>
</ul>
<p>Syntax</p>
<p># Access-list 101 (list #) permit/ Deny tcp (protocol) 10.0.0.1 0.0.0.0 (Source) 10.1.0.1 0.0.0.255 (Destination</p>
<ul>
<li>
<p>Requires the use of the host keyword for specific address</p>
</li>
<li>
<p>Examples</p>
</li>
<li>
<p>access-list 101 deny tcp any any</p>
</li>
<li>
<p>Any IP packet that has a TCP header</p>
</li>
<li>
<p>access-list 101 deny udp any any</p>
</li>
<li>
<p>Any IP packet that that has a UDP header</p>
</li>
<li>
<p>access-list 101 deny icmp any any</p>
</li>
<li>
<p>Any IP packet that has a ICMP header</p>
</li>
<li>
<p>access-list 101 deny ip host 1.1.1.1 host 2.2.2.2</p>
</li>
<li>
<p>All IP packets from host 1.1.1.1 going to host 2.2.2.2</p>
</li>
<li>
<p>access-list 101 deny udp 1.1.1.0 0.0.0.255 any</p>
</li>
<li>
<p>All IP packets that have a UDP header following the IP header, from subnet 1.1.1.0/24 going to any destination</p>
</li>
</ul>
<p>IP and TCP Header</p>
<p>IP Header</p>
<p>Misc Header Fields</p>
<ul>
<li>9 bytes</li>
</ul>
<p>Protocol</p>
<ul>
<li>1 byte</li>
<li>ie 6 = tcp</li>
<li>identify TCP header</li>
</ul>
<p>Header Checksum</p>
<ul>
<li>2 bytes</li>
</ul>
<p>Source IP</p>
<ul>
<li>4 bytes</li>
</ul>
<p>Dest. IP</p>
<ul>
<li>4 bytes</li>
</ul>
<p>Options</p>
<ul>
<li>variable</li>
</ul>
<p>TCP Header</p>
<p>Source Port</p>
<ul>
<li>2 bytes</li>
</ul>
<p>Dest. port</p>
<ul>
<li>2 bytes</li>
</ul>
<p>Rest of TCP</p>
<ul>
<li>16 bytes</li>
</ul>
<p>tcp or udp keyword</p>
<ul>
<li>can optionally reference the source and/or destination port</li>
<li>equal, not equal, less than, greater than, and for a range of port numbers</li>
<li>can use port numbers or  keywords for some well-known application ports</li>
</ul>
<p>positions of the source and destination port fields in the access-list command and these port number keywords.</p>
<p># access-list 101 permit (protocol) Source_IP (source port) dest_IP (dest port)</p>
<p>Protocol</p>
<ul>
<li>tcp</li>
<li>udp</li>
</ul>
<p>Source Port</p>
<ul>
<li>eq _</li>
<li>ne_</li>
<li>lt_</li>
<li>gt_</li>
<li>range_</li>
</ul>
<p>Dest. Port</p>
<ul>
<li>eq _</li>
<li>ne_</li>
<li>lt_</li>
<li>gt_</li>
<li>range_</li>
</ul>
<p>eq: =</p>
<p>lt: &lt;</p>
<p>ne: not equal</p>
<p>gt: &gt;</p>
<p>range: x to y</p>
<p>ie:</p>
<p># access-list 101 permit tcp 172.16.1.0 0.0.0.255 172.16.3.0 0.0.0.255 eq 21</p>
<ul>
<li>eq 21 is in the destination port position</li>
</ul>
<p>Apps and Port number shortcuts for ACL Commands</p>
<p>20 ftp-data</p>
<p>21 ftp</p>
<p>22 -</p>
<p>23 telnet</p>
<p>25 smtp</p>
<p>53 domain</p>
<p>67 bootps (dhcp server)</p>
<p>68 bootpc (dhcp client)</p>
<p>69 tftp</p>
<p>80 www</p>
<p>110 pop3</p>
<p>161 snmp</p>
<p>443 -</p>
<p>514 -</p>
<p>16,384 - 32,767 (RTP/ Voice/ Video) -</p>
<p>Extended IP ACL Configuration</p>
<p>ommand
access-list access-list-number {deny I
permit} protocol source source-wildcard
destination destination-wildcard [log I
log-input]
access-list access-list-number {deny I
permit} {tcp I udp} source source-wild-
card [operator [port]] destination destina-
tion-wildcard [operator [port]] [estab-
fished] [log]
Configuration Mode and
Description
Global command for extended
numbered access lists. Use a
number between 100 and 199 or
2000 and 2699, inclusive.
A version of the access-list com-
mand with parameters specific
to TCP and/or UDP. &ldquo;&gt;</p>
<ul>
<li>enable the ACL using the same ip access-group command used with standard ACLs.</li>
<li>Place extended ACLs as close as possible to the source of the packets that will be filtered.</li>
</ul>
<p>- saves some bandwidth.</p>
<ul>
<li>
<p>ACL numbers</p>
</li>
<li>
<p>100–199 and 2000–2699</p>
</li>
</ul>
<p>Extended IP Access Lists: Example 1</p>
<p>(If you were to type eq 80, the config would show eq www.)</p>
<p>#(int) ip access-group 101 in</p>
<p>Named ACLs and ACL Editing</p>
<p>Named IP Access Lists</p>
<ul>
<li>Easier to remember</li>
<li>Uses ACL subcommands instead of global config commands</li>
<li>editing features allow deleting individual lines and inserting new ones</li>
</ul>
<p>Config</p>
<p># ip access-list (standard/ extended) (name)</p>
<p>#(ACLmode) permit 1.1.1.1</p>
<p>#(ACLmode) permit 2.2.2.2</p>
<p>#(ACLmode) permit 3.3.3.3</p>
<p>#(ACLmode) deny ip 10.1.2.0 0.0.0.255 10.2.3.0 0.0.0.255</p>
<p>#(int) ip access-group barney out</p>
<ul>
<li>
<p>delete and add new lines to the ACL from within ACL configuration mode</p>
</li>
<li>
<p>deleting a single entry from the ACL.</p>
</li>
</ul>
<p>#(ACLmode) no deny ip 10.1.2.0 0.0.0.255</p>
<p>Editing ACLs Using Sequence Numbers (named and numbered (not the global numbered way)</p>
<ul>
<li>
<p>ACL sequence number is added to each ACL permit or deny statement,</p>
</li>
<li>
<p>numbers represent the sequence of statements in the ACL</p>
</li>
<li>
<p>Numbered ACLs can use a configuration style like named ACLs, as well as the traditional style, for the same ACL; the new style is required to perform advanced ACL editing.</p>
</li>
<li>
<p>Deleting single lines:</p>
</li>
<li>
<p>delete an ACE with a no sequence-number subcommand.</p>
</li>
<li>
<p>Inserting new lines:</p>
</li>
<li>
<p>New ACEs can be configured with a sequence number before the deny or permit command, dictating the location of the statement within the ACL.</p>
</li>
<li>
<p>Automatic sequence numbering:</p>
</li>
<li>
<p>sequence numbers are added to ACEs automatically</p>
</li>
</ul>
<p># Show ip access-lists 24</p>
<ul>
<li>Shows access list 24 and sequence numbers with each entry</li>
</ul>
<p>#(ACLmode) no 20</p>
<ul>
<li>delete entry 20</li>
</ul>
<p>#(ACLmode) 5 deny 10.1.1.1</p>
<ul>
<li>enters this new ace as sequence #5</li>
<li>Places the sequence number in the list in order</li>
</ul>
<p>although Example 3-6 uses a numbered ACL, named ACLs use the same process to edit (add and remove) entries.</p>
<p>Numbered ACL Configuration Versus Named ACL Configuration</p>
<ul>
<li>numbered ACLs are stored with the original style of configuration, as global access-list commands, no matter which method is used to configure the ACL.</li>
<li>the parts of ACL 24 configured with both new-style commands and old-style commands are all listed in the same old-style ACL (show running-config).</li>
</ul>
<p>ACL Implementation Considerations</p>
<ul>
<li>
<p>Place more specific statements early in the ACL.</p>
</li>
<li>
<p>Disable an ACL from its interface (using the no ip access-group interface subcommand) before making changes to the ACL.</p>
</li>
<li>
<p>By doing so, you avoid issues with the ACL during an interim state</p>
</li>
</ul>
<p>Mitigating Security Issues with ACLs</p>
<p>Security threats that can be mitigated with ACLs</p>
<p>- IP address spoofing, inbound</p>
<p>- IP address spoofing, outbound</p>
<p>- DoS TCP SYN attacks, blocking external attacks</p>
<p>- Dos TCP SYN attacks, using TCP Intercept</p>
<p>- DoS smurf attacks</p>
<p>- Denying/filtering ICMP messages, inbound</p>
<p>- Denying/filtering ICCMP messages, outbound</p>
<p>- Denying/filtering Traceroute</p>
<p>* Don&rsquo;t allow external packets that have an internal destination address.</p>
<p>Configuring ACLs from the internet</p>
<ul>
<li>Deny any source addresses from your internal networks</li>
</ul>
<p>- Deny any local host addresses (127.0.0.0/8)</p>
<p>- Deny any reserved private addresses (RFC 1918)</p>
<p>- Deny any addresses in the IP multicast address range (224.0.0.0/4)</p>
<p>Controlling VTY (Telnet/ SSH) Access</p>
<p>1. Create a standard IP access list that permits only the host or hosts you want to be able to telnet into the routers.</p>
<p>2. Apply the access list to the VTY line with the access-class in command.</p>
<p>(g) # access-list 50 permit host 172.16.10.3</p>
<p>(g) # line vty  0 4</p>
<p>(int) # access-class 50 in</p>
<p>Monitoring Access Lists</p>
<p># show access-list</p>
<p>shows access lists, parameters, statistics, etc.</p>
<p># show access-list 110</p>
<p>Shows info for access list 110</p>
<p># show ip access-list</p>
<p>shows IP access lists on the router</p>
<p># show ip interface</p>
<p>Shows which interfaces have access lists set on them.</p>
<p># show running-config</p>
<p>Shows ACLs and what interfaces that have them.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="how-to-study-for-ccna">How to Study for CCNA</h1>

<p><a href="#R-image-c8a9dedd061eb57979c96695b658f871" class="lightbox-link"><img alt="CCNA Study Calendar" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/Pasted%20image%2020231208132459.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c8a9dedd061eb57979c96695b658f871"><img alt="CCNA Study Calendar" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/Pasted%20image%2020231208132459.png"></a></p>
<p>It took me a whopping 2 years to finish my CCNA! I kept giving up and quitting my studies for months at a time. Why? Because I couldn&rsquo;t remember the massive amount of content covered in the CCNA. It felt hopeless. I could have done it in 6 month (or faster) if I knew how to study.</p>
<p>I hadn&rsquo;t taken a test in 10 years before this. So I had completely forgotten how to learn. This post is about the mistakes I made studying for the CCNA and how to avoid them.</p>
<p>You will also learn, as I did, about spaced repetition. I&rsquo;ve also included a 6 month CCNA spaced repetition calendar.</p>
<hr>
<h2 id="my-mistakes-so-you-dont-make-them">My Mistakes, So You Don&rsquo;t Make Them</h2>
<hr>
<h3 id="mistake-1-didnt-start-flashcards-until-the-final-30-days">Mistake #1 Didn&rsquo;t start flashcards until the final 30 days</h3>
<p>I wish I would have started flashcards from day 1. This would have helped a crap ton. Remembering all of the little details is not only useful for taking the test. It embeds the concepts in your brain and keeps you processing how things work .</p>
<p>If there is anything you take from this list. You should definitely be doing some flashcards every day.</p>
<h3 id="mistake-2-not-enough-labs-as-i-went">Mistake #2 Not enough labs as I went.</h3>
<p>While studying the OCG and video courses. I did some labs. But I also skipped a ton of labs because it wasn&rsquo;t convenient at the time. Then I was forced to lab every single topic in the final 30 days. A lot of cramming was done..</p>
<p>Make sure to do all of the labs as you go. Make up your own labs as well. This is very important to building job worthy skills.</p>
<h3 id="mistake-3-didnt-have-a-plan-or-stick-with-it">Mistake #3 Didn&rsquo;t have a plan or stick with it.</h3>
<p>When your plan consists of, &ldquo;just read everything and watch the videos and take the test when you feel ready&rdquo;, you tend to procrastinate and put things off. Make a study schedule and a solid plan. (See below)</p>
<p>Having a set date for when you will take the test was pretty motivating. I did not find this out until about 30 days until my test.</p>
<hr>
<h2 id="spaced-repetition">Spaced Repetition</h2>
<hr>
<p>If you are using Anki flashcards for your studies, you may already be using spaced repetition. Spaced repetition is repeatedly reviewing with the time in between reviews getting longer each time you review it.</p>
<p>Here is an excellent article about our learning curves and why spaced repetition helps us remember things <a href="https://fs.blog/spacing-effect/" rel="external" target="_blank" title="https://fs.blog/spacing-effect/">https://fs.blog/spacing-effect/</a></p>
<h4 id="how-to-set-up-a-spaced-repetition-calendar-for-ccna">How to set up a spaced repetition calendar for CCNA.</h4>
<p>Step 1. Plan how long your studies will take</p>
<p>Figure out how long you need. It usually takes around 240 hours of studying for CCNA. (Depending on experience). Then figure out how many hours per day that you can spend on studying. This example is based on a 6 month study calendar.</p>
<p>You can use this 6 month excel calendar to plan and track your progress. You. can still use this method If you have already been studying CCNA. Just edit your calendar for how much time you have left.</p>
<p>The calendar is also based on Wendel Odom&rsquo;s Official Cert Guide. You will also want to mix your other resources into your reviews.</p>
<p>Decide what your review sessions will be</p>
<p>Plan to review each chapter 3-4 times. here is what I did for review sessions to pass the exam.</p>
<p>Review 1 Read and highlight (and flashcards)</p>
<ul>
<li>Read the chapter. Highlight key information that you want to remember.</li>
<li>Do a lab for the material you studied (if applicable)</li>
<li>Answer DIKTA questions</li>
<li>Start Chapter 1 Anki Flascards</li>
</ul>
<p>Review 2 Copy highlights over to OneNote (keep doing flashcards)</p>
<ul>
<li>Copy your highlights over to OneNote. (using copy and paste if you have the digital book)</li>
<li>Read your highlights and make sure you understand everything.</li>
<li>lab and continue doing flashcards. (just go through Anki suggested flashcards, not just ones for the specific chapter.)</li>
</ul>
<p>Review 3 Labs and Highlight your notes (and flashcards)</p>
<ul>
<li>
<p>More labs!</p>
</li>
<li>
<p>Go over your notes. Color coding everything. (You can find my jumbled note mess here)</p>
</li>
<li>
<p>Green: Read again</p>
</li>
<li>
<p>Teal: Very important Learn this/ lab it.</p>
</li>
<li>
<p>Red/ purple: make extra flashcards out of this.</p>
</li>
</ul>
<p>Review 4 Practice questions and review</p>
<ul>
<li>Go through and answer the DIKTA questions again. Review any missed answers.</li>
<li>Lab anything you aren&rsquo;t quite sure of.</li>
</ul>
<p>The final 30 days</p>
<p><a href="#R-image-56343c69e4968a8a0e16a94a86396bf1" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/Pasted%20image%2020231208132727.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-56343c69e4968a8a0e16a94a86396bf1"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/Pasted%20image%2020231208132727.png"></a></p>
<p>I HIGHLY recommend Boson ExSim for your final 30 days of studying. ExSim comes with 3 exams (A,B, and C). Start with exam A in test simulation mode. Leave about a week in between each practice exam so you can go over your answers and Boson&rsquo;s explanations for each answer.</p>
<p>One week before your test, (after you&rsquo;ve completed exams A,B, and C). Do a random exam. Make sure you do the timed version that don&rsquo;t show your score as you go.</p>
<p>You should be scoring above 900 by your 3rd and 4th exam if you have been reviewing Boson&rsquo;s answer explanations.</p>
<p>Schedule your exam</p>
<p>Pearson view didn&rsquo;t let me schedule the exam past 30 days out from when I wanted to take it. I&rsquo;m not sure if this is the case all the time. But by the time you are 30 days out you should have your test scheduled. This will light the fire under you. Great motivation for the home stretch.</p>
<p>If your exam is around June during Cisco Live, Cisco usually offers a 50% discount for an exam voucher. You probably won’t find any other discounts unless you pay for Cisco’s specific CCNA training.</p>
<h2 id="final-word-on-labs">Final word on labs</h2>
<p>You can technically pass the CCNA without doing many labs. But this will leave you at a HUGE disadvantage in the job market. Labs are crucial for really understanding networking. Knowing your way around the CLI and being able to troubleshoot networking issues will make you stand out from those who crammed for the exam.</p>
<p>If you’ve made it this far I really appreciate you taking the time to read this post. I really hope it helps at least one person.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="ip-services">IP Services</h1>

<p>3.0 IP Connectivity</p>
<p>3.5 Describe the purpose of First Hop Redundancy Protocol</p>
<p>4.0 Infrastructure Services</p>
<p>4.4 Explain the function of SNMP in network operations</p>
<p>4.9 Describe the capabilities and function of TFTP/FTP in the network</p>
<h2 id="first-hop-redundancy-protocol">First Hop Redundancy Protocol</h2>
<p>Subnet 10.1.1.0/24
SW3
Default
GW=.9
SW4
SWI
SW2
.9
Single Points of Failure
RI
Figure 12-1 RI and the One WAN Link as Single Points of Failure &ldquo;&gt;</p>
<p>Subnet 10. I .1.0/24
SW3
Default
GW=.9
SW4
Remote
Single Points of Failure
SWI
SW2
.9
R4
Main Site
Figure 12-2 Higher Availability but with RI Still as a Single Point of Failure &ldquo;&gt;</p>
<p>Subnet 10.1.1.0/24
sw3 1
Default
GW=.9
SW4 1
SWI
SW2 1
GO/O
.9
.129
Figure 12-3 Removing All Single Points ofFailure from the Network Design &ldquo;&gt;</p>
<p>GW=.9
GW=.9
GW=.129
GW=.129
GO/O
.9
GO/I
.129
Figure 124 Balancing Traffic by Assigning Different Default Routers to Different Clients &ldquo;&gt;</p>
<p>All hosts act like they always have, with one default router setting that never has to change.</p>
<p>The default routers share a virtual IP address in the subnet, defined by the FHRP.</p>
<p>Hosts use the FHRP virtual IP address as their default router address.</p>
<p>The routers exchange FHRP protocol messages so that both agree as to which router does what work at any point in time.</p>
<p>When a router fails or has some other problem, the routers use the FHRP to choose which router takes over responsibilities from the failed router.</p>
<p>The Three Solutions for First-Hop Redundancy</p>
<p>First Hop Redundancy Protocol does not name any one protocol. Instead, it names a family of protocols that fill the same role</p>
<p>acronym
HSRP
VRRP
GLBP
Full Name
Hot Standby
Router Protocol
Virtual Router
Redundancy
Protocol
Gateway Load
Balancing
Protocol
Origin
Cisco
RFC
5798
Cisco
Redundancy
Approach
active/standby
active/standby
active/active
Load
Balancing
Per&hellip;
subnet
subnet
host &ldquo;&gt;</p>
<p>HSRP Concepts</p>
<p>operates with an active/standby model (also more generally called active/passive</p>
<p>allows two (or more) routers to cooperate</p>
<p>GW=.I
GW=.I
Host ARP Table
MAC
10.1.1.1 VMACI
HSRP Active
.1
VMACI
RI
HSRP
HSRP Standby
Figure 12-5 All Traffic Goes to .1 (RI, Which Is Active); R2 Is Standby &ldquo;&gt;</p>
<p>HSRP Failover</p>
<p>GW=.I
GW=.I
GW=.I
GW=.I
c
.9
vrMC1
VMACI
.129
HSRP Active
Host ARP Table
MAC
No Change
10.1.1.1 VMACI
Figure 12-6 Packets Sent Through R2 (New Active) Once It Takes Overfor Failed RI &ldquo;&gt;</p>
<p>To make the switches change their MAC address table entries for VMAC1, R2 sends an Ethernet frame with VMAC1 as the source MAC address.</p>
<p>he frame is also a LAN broadcast, so all the switches learn a MAC table entry for VMAC1 that leads toward R2.</p>
<p>HSRP Load Balancing</p>
<p>you can configure multiple instances of HSRP in the same subnet (called multiple HSRP groups), preferring one router to be active in one group and the other router to be preferred as active in another.</p>
<p>Subnet 10.1.1.0/24
SW3
10.1.2.1
VLAN 2
Subnet 10.1.2.0/24
Active Subnet I
Standby Subnet 2
10.1.1.1
SWI
HSRP
RI
SW2
10.1.2.1
Active Subnet 2
Standby Subnet 1
F igure 12-7 Load Balancing with HSRP by Using Different Active Routers per Subnet &ldquo;&gt;</p>
<p>FHRPs are needed on any device that acts as a default router,</p>
<p>includes both traditional routers and Layer 3 switches.</p>
<h2 id="simple-network-management-protocol">Simple Network Management Protocol</h2>
<p>SNMPv2c and SNMPv3</p>
<p>application layer protocol</p>
<p>provides a message format for communication between what are termed managers and agents</p>
<p>manager</p>
<p>a network management application running on a PC or server</p>
<p>typically being called a Network Management Station (NMS)</p>
<p>uses SNMP protocols to communicate with each SNMP agent.</p>
<p>Cisco Prime series of management products (<a href="http://www.cisco.com/go/prime" rel="external" target="_blank">www.cisco.com/go/prime</a>) use SNMP (and other protocols) to manage networks.</p>
<p>agents</p>
<p>exist in the network, one per device that is managed.</p>
<p>software running inside each device (router, switch, and so on), with knowledge of all the variables on that device that describe the device’s configuration, status, and counters.</p>
<p>keeps a database of variables that make up the parameters, status, and counters for the operations of the device. This database, called the Management Information Base (MIB)</p>
<p>IOS on routers and switches include an SNMP agent, with built-in MIB, that can be enabled with the configuration shown later</p>
<p>i.e. Cisco Prime)
The MB
The Cisco Router and
SNMP Agent Software
Figure 12-8 Elements of Simple Network Management Protocol &ldquo;&gt;</p>
<p>SNMP Variable Reading and Writing: SNMP Get and Set</p>
<p>NMS typically polls the SNMP agent on each device</p>
<p>NMS can notify the human user in front of the PC or send emails, texts, and so on to notify the network operations staff of any issues identified by the data found by polling the devices. You can even reconfigure the device through these SNMP variables in the MIB if you permit this level of control.</p>
<p>NMS uses the SNMP Get, GetNext, and GetBulk messages (together referenced simply as Get messages) to ask for information from an agent.</p>
<p>NMS sends an SNMP Set message to write variables on the SNMP agent as a means to change the configuration of the device.</p>
<p>messages come in pairs, with, for instance, a Get Request asking the agent for the contents of a variable, and the Get Response supplying that information</p>
<p>o find out if GiO/O is UP/UP
SNMP Get Request
The MIB
Gi0/0
Router I
Figure 12-9 SNMP Get Request and Get Response Message Flow &ldquo;&gt;</p>
<p>NMS can analyze various statistical facts such as averages, minimums, and maximums</p>
<p>NMS can set thresholds for certain key variables, telling the NMS to send a notification (email, text, and so on) when a threshold is passed.</p>
<p>SNMP Notifications: Traps and Informs</p>
<p>SNMP agents can initiate communications to the NMS.</p>
<p>generally called notifications, use two specific SNMP messages: Trap and Inform</p>
<p>SNMP agents send a Trap or Inform SNMP message to the NMS to list the state of certain MIB variables when those variables reach a certain state.</p>
<p>y GiO/O Interface Failed!
Take a Look!
SNMP Trap @
The MIB
Router 1
Figure 12-10 SNMP Trap Notification Process &ldquo;&gt;</p>
<p>SNMP Traps and Inform messages have the exact same purpose but differ in the protocol mechanisms</p>
<p>trap</p>
<p>The SNMP agent sends the Trap to the IP address of the NMS, with UDP as the transport protocol as with all SNMP messages,</p>
<p>less overhead than inform</p>
<p>Inform</p>
<p>Like Trap messages but with reliability added</p>
<p>Added to the protocol with SNMP Version 2 (SNMPv2),</p>
<p>use UDP but add application layer reliability</p>
<p>NMS must acknowledge receipt of the Inform with an SNMP Response message, or the SNMP agent will time out and resend the Inform.</p>
<p>The Management Information Base</p>
<p>Every SNMP agent has its own Management Information Base</p>
<p>defines variables whose values are set and updated by the agent</p>
<p>enable the management software to monitor/control the network device.</p>
<p>defines each variable as an object ID (OID)</p>
<p>organizes the OIDs based in part on RFC standards, and in part with vendor-proprietary variables</p>
<p>organizes all the variables into a hierarchy of OIDs, usually shown as a tree</p>
<p>Each node in the tree can be described based on the tree structure sequence, either by name or by number.</p>
<p>nternet I
rivate 4
enterprises (I)
Cisco 9
1.3.6.1.4.1.9.2.2
1.3.6.1.4.1.9.9.10
Figure 12-11 Management Information Base (MIB) &ldquo;&gt;</p>
<p>you could use an SNMP manager and type MIB variable 1.3.6.1.4.1.9.2.1.58.0 and click a button to get that variable, to see the current CPU usage percentage from a Cisco router</p>
<p>Securing SNMP</p>
<p>use ACLs to limit SNMP messages to those from known servers only.</p>
<p>can configure an IPv4 ACL to filter incoming SNMP messages that arrive in IPv4 packets and an IPv6 ACL to filter SNMP messages that arrive in IPv6 packets.</p>
<p>all versions of SNMP support a basic clear-text password mechanism,</p>
<p>SNMPv1 defined clear-text passwords called SNMP communities.</p>
<p>SNMP agent and the SNMP manager need prior knowledge of the same SNMP community value (called a community string)</p>
<p>Get messages and the Set message include the appropriate community string value, in clear text.</p>
<p>NMS sends a Get or Set with the correct community string, as configured on the SNMP agent, the agent processes the message.</p>
<p>SNMPv1 defines both a read-only community and a read-write community.</p>
<p>read-only (RO) community allows Get messages, and the read-write (RW) community allows both reads and writes (Gets and Sets).</p>
<p>RI RO Passi
RI RW Pass2
O Get (?assl or Pass2 Worki)
@Set (Pass2 Only Works)
Figure 12-12 RO and RW Communities with the Get and Set Commands
RO Passi
RI RW Pass2 &ldquo;&gt;</p>
<p>SNMPv2, and the related Community-based SNMP Version 2 (SNMPv2c)</p>
<p>The original specifications for SNMPv2 did not include SNMPv1 communities</p>
<p>SNMPv3</p>
<p>security had arrived with the powerful network management protocol. SNMPv3 does away with communities and replaces them with the following features:</p>
<p>Message integrity: This mechanism, applied to all SNMPv3 messages, confirms whether or not each message has been changed during transit.</p>
<p>Authentication: This optional feature adds authentication with both a username and password, with the password never sent as clear text. Instead, it uses a hashing method like many other modern authentication processes.</p>
<p>Encryption (privacy): This optional feature encrypts the contents of SNMPv3 messages so that attackers who intercept the messages cannot read their contents.</p>
<h2 id="ftp-and-tftp">FTP and TFTP</h2>
<dl>
<dt>lick here to view code image</dt>
<dt>R2# show file systems</dt>
<dt>File Systems:</dt>
<dt>*</dt>
<dt>Size(b)</dt>
<dt>256487424</dt>
<dt>262136</dt>
<dt>7794737152</dt>
<dt>Free(b)</dt>
<dt>49238016</dt>
<dt>253220</dt>
<dt>7483719680</dt>
<dt>copied in 187.</dt>
<dt>Type</dt>
<dt>opaque</dt>
<dt>opaque</dt>
<dt>opaque</dt>
<dt>opaque</dt>
<dt>network</dt>
<dt>disk</dt>
<dt>disk</dt>
<dt>nvram</dt>
<dt>opaque</dt>
<dt>opaque</dt>
<dt>opaque</dt>
<dt>network</dt>
<dt>network</dt>
<dt>network</dt>
<dt>network</dt>
<dt>network</dt>
<dt>opaque</dt>
<dt>network</dt>
<dt>opaque</dt>
<dt>usbflash</dt>
<dt>Flags</dt>
<dt>rw</dt>
<dt>rw</dt>
<dt>rw</dt>
<dt>rw</dt>
<dt>rw</dt>
<dt>rw</dt>
<dt>rw</dt>
<dt>rw</dt>
<dt>rw</dt>
<dt>rw</dt>
<dt>prefixes</dt>
<dt>archive:</dt>
<dt>system :</dt>
<dt>tmpsys :</dt>
<dt>null :</dt>
<dt>tftp:</dt>
<dt>flasho</dt>
<dd>flash:#
flashl:
nvram:
sys log:
xmodem :
ymodem :
rcp:
pram:
http :
scp:
tar:
https:
cns:
usbflashø:
74503236 bytes
876 secs (396555 bytes/sec) &ldquo;&gt;</dd>
</dl>
<p>Opaque: To represent logical internal file systems for the convenience of internal functions and commands</p>
<p>Network: To represent external file systems found on different types of servers for the convenience of reference in different IOS commands</p>
<p>Disk: For flash</p>
<p>Usbflash: For USB flash</p>
<p>NVRAM: A special type for NVRAM memory, the default location of the startup-config file</p>
<p>the command more flash0:/wotemp/fred would display the contents of file fred in directory /wotemp in the first flash memory slot in the router.</p>
<p>many commands use a keyword that indirectly refers to a formal filename, to reduce typing. For example:</p>
<p>show running-config command: Refers to file system:running-config</p>
<p>show startup-config command: Refers to file nvram:startup-config</p>
<p>show flash command: Refers to default flash IFS (usually flash0:)</p>
<h3 id="upgrading-ios-images">Upgrading IOS Images</h3>
<p>process to upgrade an IOS image into flash memory, using the following steps:</p>
<p>Step 1. Obtain the IOS image from Cisco, usually by downloading the IOS image from Cisco.com using HTTP or FTP.</p>
<p>Step 2. Place the IOS image someplace that the router can reach. Locations include TFTP or FTP servers in the network or a USB flash drive that is then inserted into the router.</p>
<p>Step 3. Issue the copy command from the router, copying the file into the flash memory that usually remains with the router on a permanent basis. (Routers usually cannot boot from the IOS image in a USB flash drive.)</p>
<p>nternet
Figure 12-13
TFTp server
Router
o
copy tftp flash
Copying an IOS Image as Part of the Cisco IOS Software Upgrade Process &ldquo;&gt;</p>
<p>Copying a New IOS Image to a Local IOS File System Using TFTP</p>
<p>ddress or name of remote host [ ] ? 2.2.2.1
Source filename [ ] ? c29øe-universa1k9-mz . SPA. 152-4. Ml.bin
Destination filename [c29ee-universa1k9-mz.SPA.152-4.M1.bin ] ?
Ml. bin
—mz. SPA.
Accessing tftp://2.2.2.1/c29ee-universa1k9-mz.
Loading
c29ee
-universalk9
152-4.</p>
<ul>
<li>9779404e
97794e4e
bytes
bytes ]
copied
in
187 . 876
secs
(396555
SPA. 152-4. Ml. bin
(via Gigi
from 2.2.2.1
bytes/ sec) &ldquo;&gt;</li>
</ul>
<p>copy command</p>
<p>works through these kinds of questions:</p>
<p>What is the IP address or host name of the TFTP server?</p>
<p>What is the name of the file?</p>
<p>Ask the server to learn the size of the file, and then check the local router’s flash to ask whether enough space is available for this file in flash memory.</p>
<p>Does the server actually have a file by that name?</p>
<p>Do you want the router to erase any old files in flash?</p>
<p>Afterward</p>
<p>verifies that the checksum for the file shows that no errors occurred</p>
<p>view the contents of the flash file system</p>
<p>show flash</p>
<p>shows the files in the default flash file system (flash0:)</p>
<dl>
<dt>3:38.</dt>
<dt>3</dt>
<dt>4</dt>
<dt>ee:es.</dt>
<dt>5</dt>
<dt>ee:es.</dt>
<dt>6</dt>
<dt>ee:es.</dt>
<dt>7</dt>
<dt>ee:es.</dt>
<dt>8</dt>
<dt>18:20.</dt>
<dt>9</dt>
<dt>21 :es.</dt>
<dt>-#- - -length&ndash; &mdash;&ndash;date/time&ndash;</dt>
<dt>Jul</dt>
<dt>Jul</dt>
<dt>Jul</dt>
<dt>Jul</dt>
<dt>Jul</dt>
<dt>Jul</dt>
<dt>Aug</dt>
<dt>Oct</dt>
<dt>show flash</dt>
<dt>le4193476</dt>
<dt>seee32e</dt>
<dt>1038</dt>
<dt>12288e</dt>
<dt>1697952</dt>
<dt>415956</dt>
<dt>1153</dt>
<dt>9779404e</dt>
<dt>21</dt>
<dt>10</dt>
<dt>10</dt>
<dt>10</dt>
<dt>10</dt>
<dt>10</dt>
<dt>16</dt>
<dt>10</dt>
<dt>2e15</dt>
<dt>2e12</dt>
<dt>2e12</dt>
<dt>2e12</dt>
<dt>2e12</dt>
<dt>2e12</dt>
<dt>2e12</dt>
<dt>2e14</dt>
<dt>ee.</dt>
<dd>44
52
02
16
28
56
• 38
path
+00.
c29ee-universa1k9-mz . SPA
cpexpress . tar
home . shtml
home . tar
securedesktop-ios-3.1.1.
ss1c1ient-win-1.1.4.176.
wo-lic-l
c29ee-universa1k9-mz.SPA
49238e16 bytes
available (207249408
bytes used) &ldquo;&gt;</dd>
</dl>
<p>dir flash0: command lists the contents of that same file system, with similar information. (You can use the dir command to display the contents of any local IFS.)</p>
<p>irectory of flashe:/
1
3
4
5
6
7
8
9
-rw-
-rw-
-rw-
le4193476
seee32e
le38
12288e
1697952
415956
1153
97794e4e
Jul 21 2e15 +ee:ee
Jul 10 2e12 +ee:ee
Jul 10 2e12 +ee:ee
Jul 10 2e12 +ee:ee
Jul 10 2e12 +ee:ee
Jul 10 2e12 +ee:ee
Aug 16 2e12 +ee:ee
Oct 10 2e14 +ee:ee
c29ee-universa1
cpexpress . tar
home . shtml
home . tar
securedesktop-i
sslclient-win-l
wo-lic-l
c29ee-universa1
256487424 bytes total (49238e16 bytes free) &ldquo;&gt;</p>
<p>show flash lists the bytes used, whereas the dir command lists the total bytes (bytes used plus bytes free). know which command lists which particular total.</p>
<p>Verifying IOS Code Integrity with MD5</p>
<p>when Cisco builds a new IOS image, it calculates and publishes an MD5 hash value for that specific IOS file.</p>
<p>IOS verify command.</p>
<p>will list the MD5 hash as recalculated on your router. If both MD5 hashes are equal, the file has not changed.</p>
<p>ww.cisco.com
Compare
Download:
MD5: xxxxxxx&hellip;
Figure 12-14 MDS Verification of IOS Images—Concepts &ldquo;&gt;</p>
<p>verify 5 command generates the MD5 hash on your router,</p>
<p>you can include the hash value computed by Cisco as the last parameter (as shown in the example), or leave it off. If you include it, IOS will tell you if the locally computed value matches what you copied into the command. If you leave it out, the verify command lists the locally computed MD5 hash, and you have to do the picky character-by-character check of the values yourself.</p>
<p>lick here to view code image
R2# verify 5 flashø:c29ee-universa1k9-mz.SPA.154-3.M3.bin a79e325
.MD5 of flashe:c29ee-universa1k9-mz.SPA.154-3.M3.bin Done!
Verified (flashe:c29ee-universa1k9-mz . SPA. 154-3.M3. bin)
= a79e325e6c &ldquo;&gt;</p>
<p>Copying Images with FTP</p>
<p>ethod
TFTP
FTP
SCP
Method (Full Name)
Trivial File Transfer Protocol
File Transfer Protocol
Secure Copy Protocol
Encrypted?
No
No
Yes &ldquo;&gt;</p>
<p>copy ftp flash</p>
<dl>
<dt>lick here to view code image</dt>
<dt>RI* copy</dt>
<dt>Tl.bxn</dt>
<dt>—mz. SPA.</dt>
<dt>155-2.</dt>
<dt>Tl.bxn</dt>
<dt>—mz. SPA.</dt>
<dt>155-2.</dt>
<dt>Destination filename [c29ee-universa1k9-mz .SPA.155</dt>
<dt>-2. Tl.bin]?</dt>
<dt>Accessing ftp</dt>
<dt>Loading</dt>
<dt>c29ee</dt>
<dd>//192.168.1.17e/c29ee-universa1k9
-universalk9
[OK - I e7410736/4096
bytes ]
le741e736
bytes
copied
in
119 . 604
secs
(898e53
bytes/ sec) &ldquo;&gt;</dd>
</dl>
<p>can configure the FTP username and password on the router so that you do not have to include them in the copy command. For instance, the global configuration commands ip ftp username wendell and ip ftp password odom would have configured those values.</p>
<p>The FTP and TFTP Protocols</p>
<p>copy command, when using the tftp or ftp keyword, makes the command act as a client</p>
<p>FTP Protocol Basics</p>
<p>uses TCP</p>
<p>TCP port 21 and in some cases also well-known port 20.</p>
<p>FTP uses a client/server model for file transfer</p>
<p><!-- raw HTML omitted --></p>
<p>FTP control connection—define the kinds of functions supported by FTP</p>
<p>allow the client to navigate around the directory structures of the server, list files, and then transfer files from the server (FTP GET) or to the server (FTP PUT).</p>
<p>summary of some of the FTP actions:</p>
<p>Navigate directories: List the current directory, change the current directory to a new directory, go back to the home directory, all on both the server and client side of the connection.</p>
<p>Add/remove directories: Create new directories and remove existing directories on both the client and server.</p>
<p>List files: List files on both the client and server.</p>
<p>File transfer: Get (client gets a copy of the file from the server), Put (client takes a file that exists on the client and puts a copy of the FTP server).</p>
<p>FTP Active and Passive Modes</p>
<p>may impact whether the TCP client can or cannot connect to the server and perform normal functions</p>
<p>user at the FTP client can choose which mode to use</p>
<p>FTP passive mode may be the more likely option to work.</p>
<p>FTP uses two types of TCP connections:</p>
<p>Control Connection: Used to exchange FTP commands</p>
<p>Data Connection: Used for sending and receiving data, both for file transfers and for output to display to a user</p>
<p>when a client connects to an FTP server, the client first creates the FTP control connection</p>
<p>server listens for new control connections on its well-known port 21</p>
<p>client allocates any new dynamic port (49222 in this case) and creates a TCP connection to the server</p>
<p>9222
192.168.1.102
TCP SYN
TCP SYN ACK
TCP ACK
Figure 12-17 FTP Client Creates an FTP Control Connection
FTP Server
192.168.1.11 &ldquo;&gt;</p>
<p>The FTP client allocates a currently unused dynamic port and starts listening on that port.</p>
<p>The client identifies that port (and its IP address) to the FTP server by sending an FTP PORT command to the server.</p>
<p>The server, because it also operates in active mode, expects the PORT command; the server reacts and initiates the FTP data connection to the client’s address (192.168.1.102) and port (49333).</p>
<p>9222
TCP control
FTP PORT 192.168.1.102 49333
TCP SYN for FTP Data
FTP Server
21
49160
Figure 12-18 FTP Active Mode Process to Create the Data Connection &ldquo;&gt;</p>
<p>Passive mode helps solve the firewall restrictions by having the FTP client initiate the FTP data connection to the server.</p>
<p>passive mode does not simply cause the FTP client to connect to a well-known port on the server;</p>
<p>The FTP client changes to use FTP passive mode, notifying the server using the FTP PASV command.</p>
<p>The server chooses a port to listen on for the upcoming new TCP connection, in this case TCP port 49444.</p>
<p>The FTP notifies the FTP client of its IP address and chosen port with the FTP PORT command.</p>
<p>The FTP client opens the TCP data connection to the IP address and port learned at the previous step.</p>
<p>92.168.1.102
49222
49160
192.168.1.11
FTP Server
FTP PASV
49444
FTP PORT 192.168.1.11 49444 0
TCP SYN for FTP Data Connection
Figure 12-19 FTP Passive Mode Process to Create the Data Connection &ldquo;&gt;</p>
<p>FTP over TLS (FTP Secure)</p>
<p>FTPS encrypts both the control and data connections with TLS, including the exchange of the usernames and passwords</p>
<p>FTPS explicit mode process:</p>
<p>The client creates the FTP control TCP connection to server well-known port 21.</p>
<p>The client initiates the use of TLS in the control connection with the FTP AUTH command.</p>
<p>When the user takes an action that requires an FTP data connection, the client creates an FTP data TCP connection to server well-known port 21.</p>
<p>The client initiates the use of TLS in the data connection with the FTP AUTH command.</p>
<p>92.168.1.102
192.168.1.11
FTP Server
o
49222
FTP AUTH (Starts TLS)
49299
o
FTP AUTH (Starts TLS)
Figure 12-20 FTPS Explicit Mode Control and Data Connection Establishment &ldquo;&gt;</p>
<p>implicit mode process</p>
<p>begins with a required TLS connection, with no need for an FTP AUTH command, using well-known ports 990 (for the control connection) and 989 (for the data connection).</p>
<p>SFTP</p>
<p>uses SSH to encrypt file transfers over an SSH connection. However, the acronym SFTP does not refer to a secure version of FTP.</p>
<p>TFTP Protocol Basics</p>
<p>Trivial File Transfer Protocol uses UDP well-known port 69. Because it uses UDP, TFTP adds a feature to check each file for transmission errors by using a checksum process on each file after the transfer completes.</p>
<p>the code requires less space to install, which can be useful for devices with limited memory.</p>
<p>can Get and Put files, but it includes no commands to change directories, create/remove directories, or even to list files on the server.</p>
<p>does not support even simple clear-text authentication. In effect, if a TFTP server is running, it should accept requests from any TFTP client.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="ipv6-addressing-and-subnetting">IPv6 Addressing and Subnetting</h1>

<p>This chapter covers the following exam topics:</p>
<p>1.0 Network Fundamentals</p>
<p>1.8 Configure and verify IPv6 addressing and prefix</p>
<p>1.9 Compare and contrast IPv6 address types</p>
<p>1.9.a Global unicast</p>
<p>1.9.b Unique local</p>
<p>IPv6 does not use any concept like the classful network concept used by IPv4. However, IANA does still reserve some IPv6 address ranges for specific purposes.</p>
<p>Public and Private IPv6 Addresses</p>
<p>global unicast addresses as the public IPv6 address space.</p>
<p>Global unicast: Addresses that work like public IPv4 addresses. The organization that needs IPv6 addresses asks for a registered IPv6 address block, which is assigned as a global routing prefix. After that, only that organization uses the addresses inside that block of addresses—that is, the addresses that begin with the assigned prefix.</p>
<p>Unique local: Works somewhat like private IPv4 addresses, with the possibility that multiple organizations use the exact same addresses, and with no requirement for registering with any numbering authority.</p>
<p>That reserved block of IPv6 addresses—a set of addresses that only one company can use—is called a global routing prefix.</p>
<p>Address Ranges for Global Unicast Addresses</p>
<p>unique local unicast addresses, discussed later in this chapter, all start with hex FD.</p>
<p>any address ranges that are not specifically reserved, for now, are considered to be global unicast addresses.</p>
<p>ddress Type
Global unicast
Unique local
Multicast
Link local
First Hex Digits
2 or 3 (originally); all not otherwise reserved (today)
FE80 &ldquo;&gt;</p>
<p>IPv6 Subnetting Using Global Unicast Addresses</p>
<p>Most everyone uses the easiest possible IPv6 prefix length: /64.</p>
<p>the right side of the IPv6, formally called the interface ID (short for interface identifier), acts like the IPv4 host field.</p>
<p>the prefix length of the global routing prefix is often between /32 and /48, or possibly as long as /56.</p>
<p>with the commonly used 64-bit interface ID field, the subnet field is typically 64–P bits, with P being the length of the global routing prefix.</p>
<p>All subnet IDs begin with the global routing prefix.</p>
<p>Use a different value in the subnet field to identify each different subnet.</p>
<p>All subnet IDs have all 0s in the interface ID.</p>
<p>The IPv6 subnet ID, more formally called the subnet router anycast address, is reserved and should not be used as an IPv6 address for any host.</p>
<p>Assigning Addresses to Hosts in a Subnet</p>
<p>hosts can learn these same settings dynamically, using either Dynamic Host Configuration Protocol (DHCP) or a built-in IPv6 mechanism called Stateless Address Autoconfiguration (SLAAC).</p>
<p>Unique Local Unicast Addresses</p>
<p>Unique local unicast addresses act as private IPv6 addresses.</p>
<p>The biggest difference lies in the literal number (unique local addresses begin with hex FD) and with the administrative process: the unique local prefixes are not registered with any numbering authority and can be used by multiple organizations.</p>
<p>Use FD as the first two hex digits.</p>
<p>Choose a unique 40-bit global ID.</p>
<p>Append the global ID to FD to create a 48-bit prefix, used as the prefix for all your addresses.</p>
<p>Use the next 16 bits as a subnet field.</p>
<p>Note that the structure leaves a convenient 64-bit interface ID field.</p>
<p><!-- raw HTML omitted --></p>
<p>IANA actually reserves prefix FC00::/7, and not FD00::/8, for these addresses. FC00::/7 includes all addresses that begin with hex FC and FD. However, an RFC (4193) requires the eighth bit of these addresses to be set to 1, which means that in practice today, the unique local addresses all begin with their first two digits as FD.</p>
<p>Subnetting with Unique Local IPv6 Addresses</p>
<p>With unique local, you create that prefix locally, and the prefix begins with /48, with the first 8 bits set and the next 40 bits randomly chosen.</p>
<p>imagine you chose a 10-hex-digit value of hex 00 0001 0001, prepend a hex FD, making the entire prefix be FD00:0001:0001::/48, or FD00:1:1::/48 when abbreviated.</p>
<p>The Need for Globally Unique Local Addresses</p>
<p>RFC stresses the importance of choosing your global ID in a way to make it statistically unlikely to be used by other companies.</p>
<p>in a real network, plan on using the random number generator logic listed in RFC 4193 to create your prefix.</p>
<p>One of the big reasons to attempt to use a unique prefix, rather than everyone using the same easy-to-remember prefixes, is to be ready for the day that your company merges with or buys another company.</p>
<p>With IPv6 unique local addresses, if both companies did the right thing and randomly chose a prefix, they will most likely be using completely different prefixes, making the merger much simpler</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="ipv6-basics">IPv6 Basics</h1>

<p>This chapter covers the following exam topics:</p>
<p>1.0 Network Fundamentals</p>
<p>1.8 Configure and verify IPv6 addressing and prefix</p>
<p>Introduction to IPv6</p>
<p>IPv6 increases the address to 128 bits in length.</p>
<p>Older OSPF Version 2 Upgraded to OSPF Version 3:</p>
<p>a newer version, OSPF version 3, was created to support IPv6. (Note: OSPFv3 was later upgraded to support advertising both IPv4 and IPv6 routes.)</p>
<p>ICMP Upgraded to ICMP Version 6:</p>
<p>ARP Replaced by Neighbor Discovery Protocol:</p>
<p>32 hexadecimal digits (one hex digit per 4 bits)</p>
<p>Figure 22-3 shows the required 40-byte part of the IPv6 header.</p>
<p>lass
Payload Length
4 Bytes
Flow Label
Next Header
Source Address
(16 Bytes)
Destination Address
(16 Bytes)
Figure 22-3 IPv6 Header
Hop Limit
. 40
Bytes &ldquo;&gt;</p>
<p>IPv6 Routing</p>
<p>To be able to build and send IPv6 packets out an interface, end-user devices need an IPv6 address on that interface.</p>
<p>End-user hosts need to know the IPv6 address of a default router, to which the host sends IPv6 packets if the host is in a different subnet.</p>
<p>IPv6 routers de-encapsulate and re-encapsulate each IPv6 packet when routing the packet.</p>
<p>IPv6 routers make routing decisions by comparing the IPv6 packet’s destination address to the router’s IPv6 routing table; the matched route lists directions of where to send the IPv6 packet next.</p>
<p>Note</p>
<p>You could take the preceding list and replace every instance of IPv6 with IPv4, and all the statements would be true of IPv4 as well.</p>
<p>the router must look at a protocol type field in the data-link header, which identifies the type of packet inside the data-link frame. Today, most data-link frames carry either an IPv4 packet or an IPv6 packet.</p>
<p>To route an IPv6 packet, a router must use its IPv6 routing table instead of the IPv4 routing table.</p>
<p>the process works like IPv4, except that the IPv6 packet lists IPv6 addresses, and the IPv6 routing table lists routing information for IPv6 subnets (called prefixes).</p>
<p>(The migration strategy of running both IPv4 and IPv6 is called dual stack.) All you have to do is configure the router to route IPv6 packets, in addition to the existing configuration for routing IPv4 packets.</p>
<p>IPv6 Routing Protocols</p>
<p>Routing Information Protocol (RIP), Open Shortest Path First (OSPF), Enhanced Interior Gateway Routing Protocol (EIGRP), and Border Gateway Protocol (BGP) were all updated to support IPv6.</p>
<p><!-- raw HTML omitted --></p>
<p>these routing protocols also follow the same interior gateway protocol (IGP) and exterior gateway protocol (EGP) conventions as their IPv4 cousins. RIPng, EIGRPv6, and OSPFv3 act as interior gateway protocols, advertising IPv6 routes inside an enterprise.</p>
<p>Representing the Prefix Length of an Address</p>
<p>IPv6 uses a mask concept, called the prefix length, similar to IPv4 subnet masks.</p>
<p>the IPv6 prefix length is written as a /, followed by a decimal number. The prefix length defines how many bits of the IPv6 address define the IPv6 prefix, which is basically the same concept as the IPv4 subnet ID.</p>
<p>When writing an IPv6 address and prefix length in documentation, you can choose to leave a space before the /, or not, as shown in the next two examples.</p>
<p>2222:1111:0:1:A:B:C:D/64</p>
<p>2222:1111:0:1:A:B:C:D /64</p>
<p>Finding the IPv6 Prefix</p>
<p>by zeroing out the last 64 bits (16 digits) of the address, you find the following prefix value:</p>
<p>2000:1234:5678:9ABC:0000:0000:0000:0000/64</p>
<p>This value can be abbreviated, with four quartets of all 0s at the end, as follows:</p>
<p>2000:1234:5678:9ABC::/64</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="ipv6-configuration">IPv6 Configuration</h1>

<p>This chapter covers the following exam topics:</p>
<p>1.0 Network Fundamentals</p>
<p>1.9 Compare and contrast IPv6 address types</p>
<p>1.9.a Global unicast</p>
<p>1.9.b Unique local</p>
<p>1.9.c Link local</p>
<p>1.9.d Anycast</p>
<p>1.9.e Multicast</p>
<p>1.9.f Modified EUI 64</p>
<p>Configuring the Full 128-Bit Address</p>
<p>To statically configure the full 128-bit unicast address—either global unicast or unique local—the router needs an ipv6 address address/prefix-length interface subcommand on each interface. The address can be an abbreviated IPv6 address or the full 32-digit hex address. The command includes the prefix length value, at the end, with no space between the address and prefix length.</p>
<p>ubnet
RI
GO/O/O
Subnet
GO/O
Subnet
Figure 24-3 Sample 128-bit IPv6 Addresses to Be Configured on Cisco Router Interfaces &ldquo;&gt;</p>
<p>lick here to view code image
ipv6 unicast-routing
interface GigabitEthernete/e
interface GigabitEthernete/e/0 &ldquo;&gt;</p>
<p>lick here to view code image
ipv6 unicast-routing
interface GigabitEthernete/e
interface GigabitEthernete/1/0 &ldquo;&gt;</p>
<p>both abbreviated and unabbreviated addresses, and both lowercase and uppercase hex digits, showing that all are allowed.</p>
<p>Enabling IPv6 Routing</p>
<p>IPv6 routing is not enabled by default. The solution takes only a single command—ipv6 unicast-routing—which enables IPv6 routing on the router.</p>
<p>A router must enable IPv6 globally (ipv6 unicast-routing) and enable IPv6 on the interface (ipv6 address) before the router will attempt to route IPv6 packets in and out an interface. If you omit the ipv6 unicast-routing command but configure interface IPv6 addresses, the router will not route any received IPv6 packets, but the router will act as an IPv6 host. If you include the ipv6 unicast-routing command but omit all the interface IPv6 addresses, the router will be ready to route IPv6 packets but have no interfaces that have IPv6 enabled, effectively disabling IPv6 routing</p>
<p>Verifying the IPv6 Address Configuration</p>
<p>The show ipv6 interface brief command gives you interface IPv6 address info, but not prefix length info, similar to the IPv4 show ip interface brief command.</p>
<p>this command lists IPv6 addresses, but not the prefix length or prefixes.</p>
<p>The show ipv6 interface command gives the details of IPv6 interface settings, much like the show ip interface command does for IPv4.</p>
<p>the show interfaces command still lists the IPv4 address and mask but tells us nothing about IPv6. So, to see IPv6 interface addresses, use commands that begin with show ipv6</p>
<p>Generating a Unique Interface ID Using Modified EUI-64</p>
<p>The router then uses EUI-64 rules to create the interface ID part of the address, as follows:</p>
<p>Key Topic.</p>
<p>Split the 6-byte (12-hex-digit) MAC address in two halves (6 hex digits each).</p>
<p>Insert FFFE in between the two, making the interface ID now have a total of 16 hex digits (64 bits).</p>
<p>Invert the seventh bit of the interface ID.</p>
<p>ey
Topic
Defined by Configuration
Subnet Prefix
Calculated by Router Using EUl-64
1st Half
of MAC
Invert 7th Bit, 1st Byte
(Reading Left to Right)
FFFE
2nd Half
of MAC
Figure 24-4 IPv6 Address Format with Interface ID and EUI-64 &ldquo;&gt;</p>
<p>0000 oo o
0000 oo»
02
First 2 Hex Digits
Convert to Binary
Invert 7th Bit
@ Convert to Hex
Example 2
16
0001 Olio
0001 0100
14
Binary
Binary
Figure 24-6 Inverting the Seventh Bit of an EUI-64 Interface ID Field &ldquo;&gt;</p>
<p>tep 2:
Little
Space
A
c
B
A Little Space
Figure 24-7 A Mnemonic Device to Help Memorize Bit Inversion Shortcut &ldquo;&gt;</p>
<p>Table 24-2 lists some practice problems,</p>
<p>ipv6 address address/prefix-length eui-64 interface subcommand.</p>
<p>pv6 unicast-routing
! The ipv6 address command now lists a prefix,
interface GigabitEthernetø,&lsquo;0
mac-address €201. aaeø.
interface GigabitEthernetø,&lsquo;0/Ø
RI* show ipv6 interface brief
GigabitEthernete/e
[up/up]
not the full address
GigabitEthernete/1
unassigned
[administratively down/down]
GigabitEthernete/0/e
[up/up]
FE8e:
GigabitEthernete/e/1
[administratively down/down]
unassigned &ldquo;&gt;</p>
<p>mac-address command under R1’s G0/0 interface, which causes IOS to use the configured MAC address instead of the universal (burned-in) MAC address</p>
<p>for interfaces that do not have a MAC address, like serial interfaces, the router uses the MAC of the lowest-numbered router interface that does have a MAC.</p>
<p>if you mistakenly type the full address and still use the eui-64 keyword, IOS accepts the command and converts the address to the matching prefix before putting the command into the running config file. For example, IOS converts ipv6 address 2000:1:1:1::1/64 eui-64 to ipv6 address 2000:1:1:1::/64 eui-64.</p>
<p>Dynamic Unicast Address Configuration</p>
<p>routers can be configured to use dynamically learned IPv6 addresses. These can be useful for routers connecting to the Internet through some types of Internet access technologies, like DSL and cable modems.</p>
<p>two ways for the router interface to dynamically learn an IPv6 address to use:</p>
<p>Stateful DHCP</p>
<p>Stateless Address Autoconfiguration (SLAAC)</p>
<p><!-- raw HTML omitted --></p>
<p>Special Addresses Used by Routers</p>
<p>After you configure the ipv6 unicast-routing global configuration command, to enable the function of IPv6 routing, the addition of a unicast IPv6 address on an interface causes the router to do the following:</p>
<p>Gives the interface a unicast IPv6 address</p>
<p>Enables the routing of IPv6 packets in/out that interface</p>
<p>Defines the IPv6 prefix (subnet) that exists off that interface</p>
<p>Tells the router to add a connected IPv6 route for that prefix, to the IPv6 routing table, when that interface is up/up</p>
<p>the same ideas happen for IPv4 when you configure an IPv4 address on a router interface.</p>
<p>Link-Local Addresses</p>
<p>a special kind of unicast IPv6 address.</p>
<p>not used for normal IPv6 packet flows that contain data for applications</p>
<p>used by some overhead protocols and for routing.</p>
<p>Link-Local Address Concepts</p>
<p>packets sent to any link-local address should not be forwarded by any router to another subnet.</p>
<p>For example, Neighbor Discovery Protocol (NDP), which replaces the functions of IPv4’s ARP, uses link-local addresses.</p>
<p>Routers also use link-local addresses as the next-hop IP addresses in IPv6 routes,</p>
<p>IPv6 hosts also use a default router (default gateway) concept, like IPv4, but instead of the router address being in the same subnet, hosts refer to the router’s link-local address. The show ipv6 route command lists the link-local address of the neighboring router, rather than the global unicast or unique local unicast address.</p>
<p>2 Link Local
Gw=R1 Link Local
PCI
Subnet 2
Subnet 2
PC2
Figure 24-8 IPv6 Using Link-Local Addresses as the Next-Hop Address &ldquo;&gt;</p>
<p>key facts about link-local addresse</p>
<p>Unicast (not multicast): Link-local addresses represent a single host,</p>
<p>Forwarding scope is the local link only: Packets sent to a link-local address do not leave the local data link because routers do not forward packets with link-local destination addresses.</p>
<p>Automatically generated: Every IPv6 host interface (and router interface) can create its own link-local address automatically,</p>
<p>Creating Link-Local Addresses on Routers</p>
<p>all link-local addresses start with the same prefix,(FE80,FE90,FEA0,FEB0) as shown on the left side of Figure 24-9.</p>
<p>E80 : 0000 : 0000 : 0000
Figure 24-9 Link-Local Address Format
64 Bits
Interface ID: EUl-64 &ldquo;&gt;</p>
<p>the first 10 bits must match prefix FE80::/10, meaning that the first three hex digits will be either FE8, FE9, FEA, or FEB.</p>
<p>the next 54 bits should be binary 0, so the link-local address should always start with FE80:0000:0000:0000 as the first four unabbreviated quartets.</p>
<p>The second half of the link-local address, in practice, can be formed using EUI-64 rules, can be randomly generated, or even configured.</p>
<p>IOS creates a link-local address for any interface that has configured at least one other unicast address using the ipv6 address command (global unicast or unique local). To see the link-local address, just use the usual commands that also list the unicast IPv6 address: show ipv6 interface and show ipv6 interface brief.</p>
<p>ddresses
Click here to view code image
RI* show ipv6 interface brief
GigabitEthernet0/e
[up/ up]
GigabitEthernete/1
unassigned
GigabitEthernete,/0/e
[administratively down/down]
[up/ up]
FE8e:
GigabitEthernet0/0/1
[administratively down/down]
unassigned &ldquo;&gt;</p>
<p>both addresses have the same interface ID value</p>
<p>IOS chooses the link-local address for the interface based on the following rules:</p>
<p>If configured, the router uses the value in the ipv6 address address link-local interface subcommand. Note that the configured link-local address must be from the correct address range for link-local addresses; that is, an address from prefix FE80::/10. In other words, the address must begin with FE8, FE9, FEA, or FEB.</p>
<p>If not configured, the IOS calculates the link-local address using EUI-64 rules, as discussed and demonstrated in and around Example 24-7. The calculation uses EUI-64 rules even if the interface unicast address does not use EUI-64.</p>
<p>Routing IPv6 with Only Link-Local Addresses on an Interface</p>
<p>ipv6 address address/prefix-length: Static configuration of a specific address</p>
<p>ipv6 address prefix/prefix-length eui-64: Static configuration of a specific prefix and prefix length, with the router calculating the interface ID using EUI-64 rules</p>
<p>ipv6 address dhcp: Dynamic learning on the address and prefix length using DHCP</p>
<p>ipv6 address autoconfig: Dynamic learning of the prefix and prefix length, with the router calculating the interface ID using EUI-64 rules (SLAAC)</p>
<p>ipv6 enable: Enables IPv6 processing and adds a link-local address, but adds no other unicast IPv6 addresses.</p>
<p>some links, particularly WAN links, do not need a global unicast address</p>
<p>the routers do not need to have global unicast (or unique local) addresses on the WAN links for routing to work. IPv6 routing protocols use link-local addresses as the next-hop address when dynamically building IPv6 routes.</p>
<p>static routes, as discussed in Chapter 25, “Implementing IPv6 Routing,” can use link-local addresses for the next-hop address.</p>
<p>creating a WAN link with no global unicast (or unique local) addresses works. As a result, you would not even need to assign an IPv6 subnet to each WAN link. Then to configure the WAN interfaces, use the ipv6 enable command, enabling IPv6 and giving each interface a generated link-local IPv6 address.</p>
<p>To use the command, just configure the ipv6 enable command on the interfaces on both ends of the WAN link.</p>
<p>IPv6 Multicast Addresses</p>
<p>IANA defines the range FF30::/12 (all IPv6 addresses that begin with FF3) as the range of addresses to be used for some types of multicast applications.</p>
<p>different IPv6 RFCs reserve multicast addresses for specific purposes. For instance, OSPFv3 uses FF02::5 and FF02::6 as the all-OSPF-routers and all-DR-Routers multicast addresses,</p>
<p>OSPFv2 uses IPv4 addresses 224.0.0.5 and 224.0.0.6 for the equivalent purposes.</p>
<p>Reserved Multicast Addresses</p>
<p>IPv6, instead of using Layer 3 and Layer 2 broadcasts, instead uses Layer 3 multicast addresses, which in turn cause Ethernet frames to use Ethernet multicast addresses. As a result:</p>
<p>All the hosts that should receive the message receive the message, which is necessary for the protocols to work. However…</p>
<p>…Hosts that do not need to process the message can make that choice with much less processing as compared to IPv4.</p>
<p>OSPFv3 uses IPv6 multicast addresses FF02::5 and FF02::6. In a subnet, the OSPFv3 routers will listen for packets sent to those addresses. However, all the endpoint hosts do not use OSPFv3 and should ignore those OSPFv3 messages</p>
<p>the most common reserved IPv6 multicast addresses.</p>
<p>ll-nodes
All-routers
All-OSPF, All-
OSPF-DR
RIPng
Routers
EIGRPv6
Routers
DHCP Relay
Agent
Multicast
Address
Meaning
All-nodes (all interfaces that
use IPv6 that are on the link)
All-routers (all IPv6 router
interfaces on the link)
All OSPF routers and all
OSPF-designated routers,
respectively
All RIPng routers
All routers using EIGRP for
IPv6 (EIGRPv6)
All routers acting as a
DHCPv6 relay agent
IPv4
Equivalent
224.0.0.1
224.0.0.2
224.0.0.5,
224.0.0.6
224.0.0.9
224.0.0.10
None &ldquo;&gt;</p>
<p>show ipv6 interface command to show the multicast addresses used by Router R1 on its G0/0 interface.</p>
<p>lick here to view code image
RI* show ipv6 interface GigabitEthernet 0/0
GigabitEthernet0/0 is up, line protocol is up
IPv6 is enabled, link-local address is FE80: : 1
No Virtual link-local address(es):
Global
2ee1.
Joined
Lines
unicast address(es):
group address(es):
omitted for brevity &ldquo;&gt;</p>
<p>Multicast Address Scopes</p>
<p>Each scope defines a different set of rules about whether routers should or should not forward a packet, and how far routers should forward packets, based on those scopes.</p>
<p>cope
Name
Inter-
face-
Local
Local
Site-
Local
Organiz-
ation-
Local
Global
Quar-
tet
FFOI
FF02
FF05
FF08
FFOE
Scope
Defined
by&hellip;
Derived by
Device
Derived by
Device
Configura-
tion on
Routers
Configura-
tion on
Routers
No
Boundar-
les
Meaning
Packet remains within the device. Use-
ful for internally sending packets to
services running on that same host.
Host that creates the packet can send it
onto the link, but no routers forward
the packet.
Intended to be more than Link-Local,
so routers forward, but must be less
than Organization-Local; generally
meant to limit packets so they do not
cross WAN links.
Intended to be broad, probably for an
entire company or organization. Must
be broader than Site-Local.
No boundaries. &ldquo;&gt;</p>
<p>routers can predict the boundaries of some scopes, like link-local, but they need configuration to know the boundaries of other scopes, for instance, organization-local.)</p>
<p>ite-local
Link-local
Internet
2
Figure 24-11 IPv6 Multicast Scopes &ldquo;&gt;</p>
<p>Link-local address: An IPv6 address that begins FE80. This serves as a unicast address for an interface to which devices apply a link-local scope. Devices often create their own link-local addresses using EUI-64 rules. A more complete term for comparison would be link-local unicast address.</p>
<p>Link-local multicast address: An IPv6 address that begins with FF02. This serves as a reserved multicast address to which devices apply a link-local scope.</p>
<p>Link-local scope: A reference to the scope itself, rather than an address. This scope defines that routers should not forward packets sent to an address in this scope.</p>
<p>Solicited-Node Multicast Addresses</p>
<p>IPv6 Neighbor Discovery Protocol (NDP) replaces IPv4 ARP,</p>
<p>NDP improves the MAC-discovery process by sending IPv6 multicast packets that can be processed by the correct host but discarded with less processing by the rest of the hosts in the subnet</p>
<p>Figure 24-12 shows how to determine the solicited node multicast address associated with a unicast address. Start with the predefined /104 prefix (26 hex digits) shown in Figure 24-12. In other words, all the solicited-node multicast addresses begin with the abbreviated FF02::1:FF. In the last 24 bits (6 hex digits), copy the last 6 hex digits of the unicast address into the solicited-node address.</p>
<dl>
<dt>f Unicast Address</dt>
<dt>FF02</dt>
<dd>0000
Defined by RFC
• 0000 : 0000 : 0000
Abbreviation:</dd>
<dd>0001
Figure 24-12 Solicited-Node Multicast Address Format &ldquo;&gt;</dd>
</dl>
<p>a host or router calculates a matching solicited node multicast address for every unicast address on an interface</p>
<p>the router interface has a unicast address of 2001:DB8:1111:1::1/64, and a link-local address of FE80::AA:AAAA. As a result, the interface has two solicited node multicast addresses, shown at the end of the output.</p>
<dl>
<dt>lick here to view code image</dt>
<dt>Rl# show ipv6 interface GigabitEthernet ø/e</dt>
<dt>GigabitEthernete/ø is up, line protocol is up</dt>
<dt>IPv6 is enabled, link-local address is FEW: :AA AAAA</dt>
<dt>No Virtual link-local address(es):</dt>
<dt>Global</dt>
<dt>2001</dt>
<dt>Joined</dt>
<dt>Lines</dt>
<dt>unicast address(es):</dt>
<dt>group address(es):</dt>
<dd>[TEN]
omitted
for brevity &ldquo;&gt;</dd>
</dl>
<p>Miscellaneous IPv6 Addresses</p>
<p>all IPv6 hosts can use two additional special addresses:</p>
<p>The unknown (unspecified) IPv6 address, ::, or all 0s</p>
<p>The loopback IPv6 address, ::1, or 127 binary 0s with a single 1</p>
<p>A host can use the unknown address (::) when its own IPv6 address is not yet known or when the host wonders if its own IPv6 address might have problems.</p>
<p>hosts use the unknown address during the early stages of dynamically discovering their IPv6 address. When a host does not yet know what IPv6 address to use, it can use the :: address as its source IPv6 address</p>
<p>IPv6 loopback address gives each IPv6 host a way to test its own protocol stack. Just like the IPv4 127.0.0.1 loopback address, packets sent to ::1 do not leave the host but are instead simply delivered down the stack to IPv6 and back up the stack to the application on the local host</p>
<p>Anycast Addresses</p>
<p>service works best when implemented on several routers</p>
<p>Hosts can send just one packet to an IPv6 address, and the routers will forward the packet to the nearest router that supports that service by virtue of supporting that destination IPv6 address.</p>
<p>Step 1. Two routers configure the exact same IPv6 address, designated as an anycast address, to support some service.</p>
<p>Step 2. In the future, when any router receives a packet for that anycast address, the other routers simply route the packet to the nearest router that supports the address.</p>
<p>the routers implementing the anycast address must be configured and then advertise a route for the anycast address. The addresses do not come from a special reserved range of addresses;</p>
<p>they are from the unicast address range. Often, the address is configured with a /128 prefix so that the routers advertise a host route for that one anycast address.</p>
<p>the routing protocol advertises the route just like any other IPv6 route; the other routers cannot tell the difference</p>
<p>the actual address (2001:1:1:2::99) looks like any other unicast address</p>
<p>note the different anycast keyword on the ipv6 address command, telling the local router that the address has a special purpose as an anycast address</p>
<p>the show ipv6 interface command does identify the address as an anycast address, but the show ipv6 interface brief command does not.</p>
<p>lick here to view code image
Rl# configure terminal
PV6 Anycast Addresses
Enter configuration commands,
one per line. End with CNTL/Z.
Rl(config)# interface gigabitEthernet ø/ø
iPV6 address
Rl(config-if)# ipv6 address :99/128 anycast
Rl(config-if)# AZ
Rl# show ipv6 interface gø/ø
GigabitEthernete/ø is up, line protocol is up
IPv6 is enabled, link-local address is FE80
No Virtual link-local address(es):
Global unicast address(es):
2001 subnet is 2001
2001 :gg, subnet is 2001 : .•99/128 [ANY]
I Lines omitted for brevity
Rl# show ipv6 interface brief gø/ø
GigabitEthernete/ø Cup/up]
FE80
2001 &ldquo;&gt;</p>
<p>IPv6 Addressing Configuration Summary</p>
<p>ype
Global
unicast
Unique Local
Link local
All hosts
multicast
All routers
multicast
Routing pro-
tocol
multicasts
Solicited-
node
multicast
Prefix/Address
Notes
Many prefixes
Various
/104
Enabled with What Interface
Subcommand
ipv6 address address/prefix-length
ipv6 address prefix/prefix-length eui-64
ipv6 address prefix/prefix-length eui-64
ipv6 address address link-local
Autogenerated by all ipv6 address
commands
Autogenerated by the ipv6 enable
command
Autogenerated by all ipv6 address
commands
Autogenerated by all ipv6 address
commands
Added to the interface when the corres-
ponding routing protocol is enabled on
the interface
Autogenerated by all ipv6 address
commands &ldquo;&gt;</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="ipv6-routing">IPv6 Routing</h1>

<p>3.0 IP Connectivity</p>
<p>3.3 Configure and verify IPv4 and IPv6 static routing</p>
<p>3.3.a Default route</p>
<p>3.3.b Network route</p>
<p>3.3.c Host route</p>
<p>3.3.d Floating static</p>
<p>Connected and Local IPv6 Routes</p>
<p>a router adds IPv6 routes based on the following:</p>
<p>The configuration of IPv6 addresses on working interfaces (connected and local routes)</p>
<p>The direct configuration of a static route (static routes)</p>
<p>The configuration of a routing protocol, like OSPFv3, on routers that share the same data link (dynamic routes)</p>
<p>Rules for Connected and Local Routes</p>
<p>First, the router looks for any configured unicast addresses on any interfaces by looking for the ipv6 address command.</p>
<p>if the interface is working—if the interface has a “line status is up, protocol status is up” notice in the output of the show interfaces command—the router adds both a connected and local route.</p>
<p>Routers do not create connected or local IPv6 routes for link-local addresses.</p>
<p>The connected route represents the subnet connected to the interface, whereas the local route is a host route for only the specific IPv6 address configured on the interface.</p>
<p>Routers create IPv6 routes based on each unicast IPv6 address on an interface, as configured with the ipv6 address command, as follows:</p>
<p>The router creates a route for the subnet (a connected route).</p>
<p>The router creates a host route (/128 prefix length) for the router IPv6 address (a local route).</p>
<p>Routers do not create routes based on the link-local addresses associated with the interface.</p>
<p>Routers remove the connected and local routes for an interface if the interface fails, and they re-add these routes when the interface is again in a working (up/up) state</p>
<p>rotocols
Click here to view code image
RI# show ipv6 route
IPv6 Routing Table
Codes: C
Connected,</p>
<ul>
<li>BGP, HA
NHRP, 11
default
7
Local,
L
Home Agent,
entries
Static,
s
MR - Mobile</li>
<li>ISIS Ll, 12
ISIS L2,
Per-user Static rou
U
Router, R
RIP
IA - ISIS interarea
OE2
la
IA
EIGRP, EX - EIGRP external, NM - NEMO
ISIS summary, D
ND Default, NDP
ND Prefix, DCE
Destination, NDr
Re
RPL, O - OSPF Intra, 01 - OSPF Inter, OEI - OSPF ext 1
OSPF ext 2, ONI - OSPF NSSA ext 1, ON2 - OSPF NSSA ext
LISP alt, Ir
LISP site-registrations, Id
LISP dyn-ei
LISP away, a - Application
c
L
c
L
c
L
2001 .
v la
2øe1.
via
2001 .
v la
20e1.
via
2001 .
v la
2øe1.
via
via
GigabitEthernete/Ø, directly connected
GigabitEthernete/Ø, receive
Seriale/ø/e, directly connected
GigabitEthernete/Ø/e, receive
GigabitEthernete/1/e, directly connected
GigabitEthernete/1/e, receive
NullØ, receive &ldquo;&gt;</li>
</ul>
<p>Examples of Local IPv6 Routes</p>
<p>show ipv6 route local command</p>
<p>ck here to view code image
RI# show ipv6 route local
! Legend omitted for brevity
L
L
L
2001 .
via
2001 .
via
2001 .
via
r_FØe .
via
GigabitEthernete/Ø, receive
Serialø/e/ø, receive
GigabitEthernete/1/Ø, receive
NullØ, receive &ldquo;&gt;</p>
<p>Static IPv6 Routes</p>
<p>static routes require direct configuration with the ipv6 route command</p>
<p>the ipv6 route command begins with the prefix and prefix length. Then the respective commands list the directions of how this router should forward packets toward that destination subnet or prefix by listing the outgoing interface or the address of the next-hop router.</p>
<p>A static route on R1, for this subnet, will begin with ipv6 route 2001:DB8:1111:2::/64, followed by either the outgoing interface (S0/0/0) or the next-hop IPv6 address, or both.</p>
<p>or Packets Destined to this Subnet
Send out Here or&hellip; Send to There
GO,&lsquo;O
so,&lsquo;0/1
Subnet 4
GO,&lsquo;O
Subnet 2
Figure 25-2 Logic Behind IPvS Static Route Commands (IPvS Route) &ldquo;&gt;</p>
<p>Static Routes Using the Outgoing Interface</p>
<p>when the command references an interface, the interface is a local interface</p>
<p>Static route on router RI
. .:/64 sø/Ø/0 &ldquo;&gt;</p>
<p>show ipv6 route command will list all the IPv6 routes.</p>
<p>show ipv6 route static command, which lists only static routes</p>
<p>I# show
! Legend
via
ipv6 route static
omitted for
Seriale/Ø/e,
brevity
directly connected &ldquo;&gt;</p>
<p>directly connected” might mislead you to think this is a connected route; trust the “S” code.</p>
<p>show ipv6 route 2001:DB8:1111:2::22 command. This command asks the router to list the route that the router would use when forwarding packets to that particular address. Example 25-7 shows an example.</p>
<p>nown via &quot;static&quot;
distance 1,
Route count is 1/1, share count
Routing paths:
metric
directly connected via Seria10/Ø/0
Last updated ago &ldquo;&gt;</p>
<p>Static Routes Using Next-Hop IPv6 Address</p>
<p>Static IPv6 routes that refer to a next-hop address have two options: the unicast address on the neighboring router (global unicast or unique local) or the link-local address of that same neighboring router</p>
<p>ubnet 1
For Packets Destined to this Subnet
Send to Global Unicast
Send to Link-Local
GO/O
Subnet 2
Figure 25-3 Using Unicast or Link-Local as the Next-Hop Address for Static Routes &ldquo;&gt;</p>
<p>ck here to view code image
RI# show
! Legend
s
2001 .
v la
RI# show
ipv6 route static
omitted for brevity
Known via &quot;static&quot;
distance 1,
Backup from &quot;ospf 1 [110] &quot;
Route count is 1/1, share count
Routing paths:
Last updated ee:07 ago
metric e &ldquo;&gt;</p>
<p>Example Static Route with a Link-Local Next-Hop Address</p>
<p>ipv6 route command cannot simply refer to a link-local next-hop address by itself because the link-local address does not, by itself, tell the local router which outgoing interface to use.</p>
<p>With a link-local next-hop address, a router cannot work through this same logic, so the outgoing interface must also be configured.</p>
<p>lick here to view code image
! The first command is on router RI, listing R2&rsquo;s link-local address
! The next command is on router R2, listing RI&rsquo;s link-local address &ldquo;&gt;</p>
<p>show commands also list both the next-hop (link-local) address and the outgoing interface</p>
<p>ick here to view code image
RI# show ipv6 route static
! Legend omitted for brevity
s
via FE8Ø: SerialØ/Ø/Ø
Known via &quot;static&quot;
distance 1,
Backup from &quot;ospf 1 [110] &quot;
Route count is 1/1, share count
Routing paths:
FE80: SerialO/Ø/Ø
Last updated ago
metric e &ldquo;&gt;</p>
<p>Static Routes over Ethernet Links</p>
<p>To configure a static route that uses an Ethernet interface, the ipv6 route command’s forwarding parameters should always include a next-hop IPv6 address. IOS allows you to configure the ipv6 route command using only the outgoing-interface parameter, without listing a next-hop address. The router will accept the command; however, if that outgoing interface happens to be an Ethernet interface, the router cannot successfully forward IPv6 packets using the route.</p>
<p>To configure the ipv6 route correctly when directing packets out an Ethernet interface, the configuration should use one of these styles:</p>
<p>Refer to the next-hop global unicast address (or unique local address) only</p>
<p>Refer to both the outgoing interface and next-hop global unicast address (or unique local address)</p>
<p>Refer to both the outgoing interface and next-hop link-local address</p>
<p>end to Global Unicast
GO/O
:11
Subnet 1
GO/I,&lsquo;O
Send to Neighbor Unicast and Out GONO •
@For Packets Destined to this Subnet
c
GO/O
Subnet 2
Figure 254 Network Details for IPOS Static Routes on an Ethernet Interface &ldquo;&gt;</p>
<p>ick here to view code image
! The first command is on router RI, listing R3&rsquo;s global unicast add
! The next command is on router R3, listing RI&rsquo;s link-local address &ldquo;&gt;</p>
<p>Static Default Routes</p>
<p>Branch routers could use default routes instead of a routing protocol.</p>
<p>ore
Default Route
so,wo
GO/I/O
Default Route (::/O)
Branch
Offices
GO/O/O
Figure 25-5 Using Static Default Routes at Branches to Forward Back to the Core &ldquo;&gt;</p>
<p>use a specific value to note the route as a default route: ::/0</p>
<p>lick here to view code image
IForward out 81&rsquo; s Se/ø/l local interface.
81 ipv6 route : SO/Ø/I &ldquo;&gt;</p>
<p>ck here to view code image
BI# show ipv6 route static
IPv6 Routing Table
default
le entries
Codes: C
IA
o
Connected, L
Local, S
Static,
Per-user Static rou
U</p>
<ul>
<li>ISIS L2</li>
<li>BGP, R
RIP, 11
ISIS interarea,
ISIS Ll, 12
ISIS summary, D</li>
<li>EIGRP, EX - EIGRP
ND Prefix, DCE
Destination, NDr
Re
ND Default,
OSPF Intra,
NDP
ONI - OSPF BISSA
01 - OSPF Inter, OEI - OSPF ext 1, OE2 - OSPF
ext 1, ON2 - OSPF NSSA ext 2
s
via Seriale/ø/l, directly connected &ldquo;&gt;</li>
</ul>
<p>Static IPv6 Host Routes</p>
<p>a route to a single host IP address. With IPv4, those routes use a /32 mask, which identifies a single IPv4 address in the ip route command; with IPv6, a /128 mask identifies that single host in the ipv6 route command.</p>
<p>The first command lists host B&rsquo;s address, prefix length /128,
! with R2&rsquo;s link-local address as next-hop, with an outgoing interface
. •:22/128
sø/ø/e FE8Ø:
RI (config)#
! The next command also lists host B &rsquo;s
address,
prefix length /128,
! but with R2&rsquo;s global unicast address
-hop, and no outgoing ir
as next
. •:22/128 &ldquo;&gt;</p>
<p>Floating Static IPv6 Routes</p>
<p>ackup Link (Tl; Static)
Subnet
Core Of the
Enterprise
Network &ldquo;&gt;</p>
<p>IOS considers static routes better than OSPF-learned routes by default due to administrative distance. IOS uses the same administrative distance concept and default values for IPv6 as it does for IPv4</p>
<p>IPv6 floating static route floats or moves into and out of the IPv6 routing table depending on whether the better (lower) administrative distance route learned by the routing protocol happens to exist currently.</p>
<p>To implement an IPv6 floating static route, just override the default administrative distance on the static route, making the value larger than the default administrative distance of the routing protocol.</p>
<p>ipv6 route 2001:db8:1111:7::/64 2001:db8:1111:9::3 130 command on R1 would do exactly that, setting the static route’s administrative distance to 130.</p>
<p>lick here to view code image
RI# show ipv6 route static
! Legend omitted for brevity
s
Known via &quot;static&quot;
distance 130, metric 0
Route count is 1/1, share count 0
Routing paths:
Last updated ago
Table 25-2 lists some of the default administrative distance values used with IPv6. &ldquo;&gt;</p>
<p>oute Source
Connected routes
Static routes
NDP
EIGRP
OSPF
RIP
Unknown or unbelievable
Administrative Distance
1
2
90
110
120
255 &ldquo;&gt;</p>
<p>Troubleshooting Incorrect Static Routes That Appear in the IPv6 Routing Table</p>
<p>IOS cannot tell if you choose the incorrect outgoing interface, incorrect next-hop address, or incorrect prefix/prefix-length in a static route.</p>
<p>IOS puts the route into the IP routing table—even though the route may not work because of the poorly chosen parameters.</p>
<p>R1 cannot use its own IPv6 address as a next-hop address.</p>
<p>routes may have incorrect parameters. Check for these types of mistakes:</p>
<p>Step 1. Prefix/Length: Does the ipv6 route command reference the correct subnet ID (prefix) and mask (prefix length)?</p>
<p>Step 2. If using a next-hop IPv6 address that is a link-local address:</p>
<p>A. Is the link-local address an address on the correct neighboring router? (It should be an address on another router on a shared link.)</p>
<p>B. Does the ipv6 route command also refer to the correct outgoing interface on the local router?</p>
<p>Step 3. If using a next-hop IPv6 address that is a global unicast or unique local address, is the address the correct unicast address of the neighboring router?</p>
<p>Step 4. If referencing an outgoing interface, does the ipv6 route command reference the interface on the local router (that is, the same router where the static route is configured)?</p>
<p>The Static Route Does Not Appear in the IPv6 Routing Table</p>
<p>IOS makes the following checks before adding the route;</p>
<p>For ipv6 route commands that list an outgoing interface, that interface must be in an up/up state.</p>
<p>For ipv6 route commands that list a global unicast or unique local next-hop IP address (that is, not a link-local address), the local router must have a route to reach that next-hop address.</p>
<p>If another IPv6 route exists for that exact same prefix/prefix-length, the static route must have a better (lower) administrative distance.</p>
<p>The Neighbor Discovery Protocol</p>
<p>with 1pv4 ARP works as a separate protocol; with IPv6, the Neighbor Discovery Protocol (NDP), a part of ICMPv6, performs the same functions.</p>
<p>few of the functions of the NDP protocol (RFC 4861). Some of those NDP functions are</p>
<p>Neighbor MAC Discovery: An IPv6 LAN-based host will need to learn the MAC address of other hosts in the same subnet. NDP replaces IPv4’s ARP, providing messages that replace the ARP Request and Reply messages.</p>
<p>Router Discovery: Hosts learn the IPv6 addresses of the available IPv6 routers in the same subnet.</p>
<p>SLAAC: When using Stateless Address Auto Configuration (SLAAC), the host uses NDP messages to learn the subnet (prefix) used on the link plus the prefix length.</p>
<p>DAD: Before using an IPv6 address, hosts use NDP to perform a Duplicate Address Detection (DAD) process, to ensure no other host uses the same IPv6 address before attempting to use it.</p>
<p>Discovering Neighbor Link Addresses with NDP NS and NA</p>
<p>using a pair of matched solicitation and advertisement messages: the Neighbor Solicitation (NS) and Neighbor Advertisement (NA) messages.</p>
<p>the NS acts like an IPv4 ARP request, asking the host with a particular unicast IPv6 address to send back a reply. The NA message acts like an IPv4 ARP Reply, listing that host’s MAC address.</p>
<p>Neighbor Solicitation (NS): This message asks the host with a particular IPv6 address (the target address) to reply with an NA message that lists its MAC address. The NS message is sent to the solicited-node multicast address associated with the target address, so the message is processed only by hosts whose last six hex digits match the address that is being queried.</p>
<p>Neighbor Advertisement (NA): This message lists the sender’s IPv6 and MAC addresses. It can be sent in reply to an NS message, and if so, the packet is sent to the IPv6 unicast address of the host that sent the original NS message. A host can also send an unsolicited NA, announcing its IPv6 and MAC addresses, in which case the message is sent to the all-IPv6-hosts local-scope multicast address FF02::1.</p>
<p>NS
PC2
MAC
I am MAC
Figure 25-8 Example NDP NS/NA Process to Find the Neighbor&rsquo;s Link Addresses &ldquo;&gt;</p>
<p>lick here to view code image
R3# show ipv6 neighbors
IPv6 Address
FE8Ø:
Age
e
e
Link-layer Addr
0201. ame. oeel
0201. ame. oeel
State
REACH
REACH &ldquo;&gt;</p>
<p>To view a host’s NDP neighbor table, use these commands: (Windows) netsh interface ipv6 show neighbors; (Linux) ip -6 neighbor show; (Mac OS) ndp -an.</p>
<p>Discovering Routers with NDP RS and RA</p>
<p>NDP defines two messages that allow any host to discover all routers in the subnet:</p>
<p>Router Solicitation (RS): This message is sent to the “all-IPv6-routers” local-scope multicast address of FF02::2 so that the message asks all routers, on the local link only, to identify themselves.</p>
<p>Router Advertisement (RA): This message, sent by the router, lists many facts, including the link-local IPv6 address of the router. When sent in response to an RS message, it flows back to either the unicast address of the host that sent the RS or to the all-IPv6-hosts address FF02::1. Routers also send RA messages without being asked, sent to the all-IPv6-hosts local-scope multicast address of FF02::1.</p>
<p>Link-Local)
RS
All Routers—identify Yourselves
I Am: 3:
Figure 25-9 Example NDP RS/RA Process to Find the Default Routers
RI
2 &ldquo;&gt;</p>
<p>IPv6 allows multiple prefixes and multiple default routers to be listed in the RA message; Figure 25-9 just shows one of each for simplicity’s sake.</p>
<p>also periodically send unsolicited RA messages</p>
<p>the RA messages flow to the FF02::1 all-nodes IPv6 multicast address.</p>
<p>Using SLAAC with NDP RS and RA</p>
<p>IPv6 supports an alternative method for IPv6 hosts to dynamically choose an unused IPv6 address to use</p>
<p>The process goes by the name Stateless Address Autoconfiguration (SLAAC).</p>
<p>Learn the IPv6 prefix used on the link, from any router, using NDP RS/RA messages.</p>
<p>Build an address from the prefix plus an interface ID, chosen either by using EUI-64 rules or as a random value.</p>
<p>Before using the address, first use DAD to make sure that no other host is already using the same address.</p>
<p>refix
Figure 25-10 Host IPv6 Address Formation Using SLA4C
Chosen by Host
Interface ID
E UI-64 &ldquo;&gt;</p>
<p>Discovering Duplicate Addresses Using NDP NS and NA</p>
<p>IPv6 uses the Duplicate Address Detection (DAD) process before using a unicast address to make sure that no other node on that link is already using the address. Hosts use DAD not only at the end of the SLAAC process, but also any time that a host interface initializes, no matter whether using SLAAC, DHCP, or static address configuration. When performing DAD, if another host already uses that address, the first host simply does not use the address until the problem is resolved.</p>
<p>a host sends an NS message for its own IPv6 address. No other host should be using that address, so no other host should send an NDP NA in reply. However, if another host already uses that address, that host will reply with an NA, identifying a duplicate use of the address.</p>
<p>Hosts do the DAD check for each of their unicast addresses, link-local addresses included, both when the address is first used and each time the host’s interface comes up.</p>
<p>NDP Summary</p>
<p>NDP does more than what is listed in this chapter, and the protocol allows for addition of other functions, so NDP might continue to grow over time. For now, use Table 25-3 as a study reference for the four NDP features discussed here.</p>
<p>unction
Router
discovery
Prefix/length
discovery
Neighbor
discovery
Duplicate Ad-
dress Detection
tocol
sages
RS and
RS and
NS and
NS and
Who
Discov-
ers Info
Any
IPv6
host
Any
IPv6
host
Any
IPv6
host
Any
IPv6
host
Supplies
Info
Any IPv6
router
Any IPv6
router
Any IPv6
host
Any IPv6
host
Info Supplied
Link-local IPv6 ad-
dress of router
Prefix(es) and associ-
ated prefix lengths
used on local link
Link-layer address
(for example, MAC
address) used by a
neighbor
Simple confirmation
whether a unicast ad-
dress is already in use &ldquo;&gt;</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="junos-basics">Junos Basics</h1>

<p>Routing engine = Control Plane</p>
<ul>
<li>OSPF</li>
<li>BGP</li>
<li>Telenet session</li>
</ul>
<p>Daemons</p>
<ul>
<li>
<p>RPD</p>
</li>
<li>
<p>Most important Protocol</p>
</li>
<li>
<p>Routing Protocol Daemon</p>
</li>
<li>
<p>Works with all routing protocols</p>
</li>
<li>
<p>Inet.0</p>
</li>
<li>
<p>Routing tables</p>
</li>
<li>
<p>MG-D</p>
</li>
<li>
<p>DCD</p>
</li>
<li>
<p>ChassisD</p>
</li>
<li>
<p>VRRPD/ SNMPD</p>
</li>
</ul>
<p>Packet forwarding Engine = Forwarding Plane</p>
<ul>
<li>Traffic</li>
<li>Line cards (forwarding tables)</li>
<li>Switch fabric</li>
</ul>
<h1 id="junos-software-architecture">Junos Software architecture</h1>
<p>One daemon crashing in the Routing Engine will not crash other Daemons</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="lan-architecture">LAN Architecture</h1>

<p>1.2 Describe characteristics of network topology architectures</p>
<p>1.2.a 2 tier</p>
<p>1.2.b 3 tier</p>
<p>1.2.e Small office/home office (SOHO)</p>
<p>1.3 Compare physical interface and cabling types</p>
<p>1.3.c Concepts of PoE</p>
<p>Two-Tier Campus Design (Collapsed Core)</p>
<p>access, distribution, and core.</p>
<p>I
GigE
A2
10/100/1000 10/100/1000
To WAN
2x 10 GbE
Uplinks
Distribution
2 Distribution
DI
A39
Switches
GigE
40 Access
A40
Switches
1000 pcs
Layer
Access
Layer
10/100/1000 10/100/1000
Figure 13-1 Campus LAN with Design Terminology Listed &ldquo;&gt;</p>
<p>Access switches connect directly to end users,</p>
<p>Distribution switches provide a path through which the access switches can forward traffic to each other</p>
<p>each of the access switches connects to at least one distribution switch, typically to two distribution switches for redundancy.</p>
<p>most designs use at least two uplinks to two different distribution switches (as shown in Figure 13-1) for redundancy.</p>
<p>Provides a place to connect end-user devices (the access layer, with access switches)</p>
<p>Connects the switches with a reasonable number of cables and switch ports by connecting all 40 access switches to two distribution switches</p>
<p>Topology Terminology Seen Within a Two-Tier Design</p>
<p>Star: A design in which one central device connects to several others, so that if you drew the links out in all directions, the design would look like a star with light shining in all directions.</p>
<p>Full mesh: For any set of network nodes, a design that connects a link between each pair of nodes.</p>
<p>Partial mesh: For any set of network nodes, a design that connects a link between some pairs of nodes, but not all. In other words, a mesh that is not a full mesh.</p>
<p>Hybrid: A design that combines topology design concepts into a larger (typically more complex) design.</p>
<p>two-tier design is indeed a hybrid design that uses both a star topology at the access layer and a partial mesh at the distribution layer.</p>
<p>The distribution layer creates a partial mesh.</p>
<p>none of the access layer switches connect to each other.</p>
<p>3
D4
Figure 13-3 Using a Full Mesh at the Distribution Layer, 6 Switches, 15 Links &ldquo;&gt;</p>
<p>Three-Tier Campus Design (Core)</p>
<p>collapsed core refers to the fact that the two-tier design does not have a third tier, the core tier</p>
<p>ll
A12
A13
Al 4
Dil
D12
A31
031
A32
Building 2
A21
D21
A22
A23
D22
,A24
D32
A33
Building 3
Figure 13-4 Two-Tier Building Design, No Core, Three Buildings &ldquo;&gt;</p>
<p>Sometimes the center of the network uses a full mesh, sometimes a partial mesh, depending on the availability of cables between the buildings.</p>
<p>provide one function: to connect the distribution switches.</p>
<p>All
Dil
A12
A13
D12
Al 4
Building 2
Core 1
031
A32
Core21&rsquo;
032
A33
Building 3
D21
D22
A34
A21
A22
A23
A24
A31
Figure 13-5 Three-Tier Building Design (Core Design), Three Buildings &ldquo;&gt;</p>
<p>Access: Provides a connection point (access) for end-user devices. Does not forward frames between two other access switches under normal circumstances.</p>
<p>Distribution: Provides an aggregation point for access switches, providing connectivity to the rest of the devices in the LAN, forwarding frames between switches, but not connecting directly to end-user devices.</p>
<p>Core: Aggregates distribution switches in very large campus LANs, providing very high forwarding rates for the larger volume of traffic due to the size of the network.</p>
<p>Topology Design Terminology</p>
<p>SWI
Access Switch: Star
Figure 13-6 LAN Design Terminolog
Uplinks: Partial Mesh &ldquo;&gt;</p>
<p>the right side of Figure 13-6 combines the star topology of the access layer with the partial mesh of the distribution layer. So you might hear these designs that combine concepts called a hybrid design.</p>
<h3 id="small-officehome-office">Small Office/Home Office</h3>
<p>000000
UTP
CATV
ISP/lnternet
cable
RI
Figure 13-7 A Typical Home Wired and Wireless LAN &ldquo;&gt;</p>
<p>that one wireless router acts like separate devices you would find in an enterprise campus:</p>
<p>Key Topic.</p>
<p>An Ethernet switch, for the wired Ethernet connections</p>
<p>A wireless access point (AP), to communicate with the wireless devices and forward the frames to/from the wired network</p>
<p>A router, to route IP packets to/from the LAN and WAN (Internet) interfaces</p>
<p>A firewall, which often defaults to allow only clients to connect to servers in the Internet, but not vice versa</p>
<p>UTP
CATV
Cable
UTP
ISP/
Internet
UTP
Cable
Modem
Figure 13-8 A Representation of the Functions Inside a Consumer Wireless Routing Product &ldquo;&gt;</p>
<h2 id="power-over-ethernet-poe">Power over Ethernet (PoE)</h2>
<p>a LAN switch, acts as the Power Sourcing Equipment (PSE</p>
<p>supplies DC power  so the device does not need an AC/DC converter.</p>
<p>A device that has the capability to be powered over the Ethernet cable</p>
<p>is called the Powered Device (PD)</p>
<p>Devices (PDs)
Ethernet Cables
DC Power
e eee
Figure 13-9
Power Supply
Power Sourcing
Equipment (PSE)
AC Power
cable
AC Power
Outlet
Power over Ethernet Terminolog &ldquo;&gt;</p>
<p>PoE Operation</p>
<p>PoE must (and does) have processes in place to determine if PoE is needed, and for how much power, before applying any potentially harmful power levels to the circuit.</p>
<p>autonegotiation mechanisms need to work before the PD has booted,</p>
<p>By using these IEEE autonegotiation messages and watching for the return signal levels, PoE can determine whether the device on the end of the cable requires power (that is, it is a PD) and how much power to supply</p>
<p>Step 1. Do not supply power on a PoE-capable port unless negotiation identifies that the device needs power.</p>
<p>Step 2. Use Ethernet autonegotiation techniques, sending low power signals and monitoring the return signal, to determine the PoE power class, which determines how much power to supply to the device.</p>
<p>Step 3. If the device is identified as a PD, supply the power per the power class, which allows the device to boot.</p>
<p>Step 4. Monitor for changes to the power class, both with autonegotiation and listening for CDP and LLDP messages from the PD.</p>
<p>Step 5. If a new power class is identified, adjust the power level per that class.</p>
<p>PDs signaling how many watts of power they would like to receive from the PSE. Depending on the specific PoE standard, the PSE will then supply the power, either over two pairs or four pairs, as noted in Table 13-2.</p>
<p>Table 13-2 Power over Ethernet Standards
802.3af
802.3at
802.3bt
802.3bt
Name
Cisco Inline Power
PoE
POE +
UPoE
UpoE+
Standard
Cisco
Watts at PSE
7
15
30
60
100
Powered Wire Pairs
2
2
2
4
4 &ldquo;&gt;</p>
<p>PoE and LAN Design</p>
<p>some of the key points to consider when planning a LAN design that includes PoE:</p>
<p>Powered Devices: Determine the types of devices and specific models, along with their power requirements.</p>
<p>Power Requirements: Plan the numbers of different types of PDs to connect into each wiring closet to build a power budget. That power budget can then be processed to determine the amount of PoE power to make available through each switch.</p>
<p>Switch Ports: Some switches support PoE standards on all ports, some on no ports, some on a subset of ports. Research the various switch models so that you purchase enough PoE-capable ports for the switches planned for each wiring closet.</p>
<p>Switch Power Supplies: Without PoE, when purchasing a switch, you choose a power supply so that it delivers enough power to power the switch itself. With PoE, the switch acts as a distributor of electrical power, so the switch power supply must deliver many more watts than it needs to run the switch itself. You will need to create a power budget per switch, based on the number of connected PDs, and purchase power supplies to match those requirements.</p>
<p>PoE Standards versus Actual: Consider the number of PoE switch ports needed, the standards they support, the standards supported by the PDs, and how much power they consume. For instance, a PD and a switch port may both support PoE+, which supports up to 30 watts supplied by the PSE. However, that powered device may need at most 9 watts to operate, so your power budget needs to reserve less power than the maximum for those devices.</p>
<p>show power inline</p>
<p>power inline never</p>
<p>power inline auto</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="layer-2-etherchannel">Layer 2 Etherchannel</h1>

<h1 id="layer-2-etherchannel">Layer 2 Etherchannel</h1>
<h3 id="manual-layer-2-etherchannel">Manual Layer 2 EtherChannel</h3>
<ul>
<li>Add the correct channel-group configuration command to each physical interface on each switch, all with the on keyword, and all with the same number.</li>
<li>The on keyword tells the switches to place a physical interface into an EtherChannel, and</li>
<li>The number identifies the PortChannel interface number that the interface should be a part of.</li>
<li>EtherChannel, PortChannel, and Channel-group basically mean the same thing.</li>
<li>channel-group number on the neighboring switch can differ.</li>
<li>&ldquo;Po1&rdquo; is short for PortChannel1</li>
<li>Channel-group command cannot override the channel-protocol command</li>
</ul>
<p>Create the port channel:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>int port-channel 1</code></pre></div><p>Add an Ip address to the port channel:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>ip address 10.0.0.5 255.255.255.0</code></pre></div><p>Add the channel-group to each interface that should be in the channel:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>channel-group 1 mode on</code></pre></div><p>Display port channel status:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>show etherchannel </code></pre></div><h3 id="dynamic-etherchannels">Dynamic EtherChannels</h3>
<p>Cisco switches also support two different configuration options that then use a dynamic protocol to negotiate whether a particular link becomes part of an EtherChannel or not. Basically, the configuration enables a protocol for a particular channel-group number. At that point, the switch can use the protocol to send messages to/from the neighboring switch and discover whether their configuration settings pass all checks. If a given physical link passes, the link is added to the EtherChannel and used; if not, it is placed in a down state, and not used, until the configuration inconsistency can be resolved.</p>
<h4 id="port-aggregation-protocol-pagp-cisco">Port Aggregation Protocol (PAgP) (Cisco)</h4>
<ul>
<li>support 8 links in a channel</li>
<li>uses &ldquo;desirable&rdquo; and &ldquo;auto&rdquo;</li>
<li>At least one of the two sides must be set to &ldquo;desirable&rdquo;</li>
</ul>
<h4 id="link-aggregation-control-protocol-lacp">Link Aggregation Control Protocol (LACP)</h4>
<ul>
<li>Support 16 links in a channel</li>
<li>Only 8 can be active at a time</li>
<li>inactive ports wait for any of the active ports to fail</li>
<li>Uses &ldquo;active&rdquo; and &ldquo;passive&rdquo;</li>
<li>At least one of the two sides must be set to &ldquo;active&rdquo;</li>
</ul>
<p>negotiate so that only links that pass the configuration checks are actually used in an EtherChannel.</p>
<p>To configure either protocol, a switch uses the channel-group configuration commands on each switch, but with a keyword that either means “use this protocol and begin negotiations” or “use this protocol and wait for the other switch to begin negotiations.”</p>
<p>Note:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>Do not use the on parameter on one end, and either auto or desirable (or for LACP, active or passive) on the neighboring switch. The on option uses neither PAgP nor LACP, so a configuration that uses on, with PAgP or LACP options on the other end, would prevent the EtherChannel from working.</code></pre></div><p>Show port channel 1 information:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>show etherchannel 1 port-channel</code></pre></div><h3 id="matching-physical-interface-settings">Matching Physical Interface Settings</h3>
<ul>
<li>Physical port configuration must match other ports in the channel or it will not be used.</li>
<li>Switches either use PAgP or LACP (if already in use) or use Cisco Discovery Protocol (CDP) if using manual configuration to check neighbors</li>
<li>All settings except the STP settings must match.</li>
<li>Shutdown/no shutdown the port channel interface to recover from err-disabled state. (This restarts the physical interfaces as well)</li>
</ul>
<p>Things that must match:</p>
<ul>
<li>Speed</li>
<li>Duplex</li>
<li>Access or Trunk setting</li>
<li>VLAN for access ports</li>
<li>Allowed VLAN list for trunk ports</li>
<li>Native VLAN for trunk ports</li>
<li>STP interface settings</li>
</ul>
<h3 id="etherchannel-load-distribution">Etherchannel Load Distribution</h3>
<ul>
<li>MAC addresses of the PortChannel interfaces are used instead of the physical ports.</li>
<li>The switch must decide out which specific physical port to use to forward the frame. (EtherChannel load distribution or load balancing)</li>
<li>MAC or IP based load balancing methods depending on the switch</li>
<li>Messages in a single application flow use the same link in the channel</li>
<li>integrates ASIC so that load distribution works as quick as forwarding any other frame</li>
<li>Uses all the active links in the EtherChannel, adjusting to the addition and removal of active links over time.</li>
<li>Balance the traffic across active links.</li>
<li>Balanced based on low order bits</li>
</ul>
<p>Define which method is used for load balancing:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>port-channel load-balance method</code></pre></div><p>Test which ports specific types of traffic would use based on source/destination mac address:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>test etherchannel load-balance </code></pre></div>
            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="more-spanning-tree">More Spanning Tree</h1>

<h1 id="spanning-tree-protocol">Spanning Tree Protocol</h1>
<ul>
<li>Prevents loops in a network.</li>
<li>Loops can create Broadcast storms, Mac table instability, and Multiple frame transmission.</li>
</ul>
<h2 id="broadcast-storms">Broadcast Storms</h2>
<ol>
<li>Switch receives a broadcast frame.</li>
<li>Switch transmits that frame out of all ports.</li>
<li>The broadcast frames will keep being received on each switch then broadcasted again.</li>
</ol>
<h2 id="mac-table-instability">Mac Table instability</h2>
<ol>
<li>Broadcast storm is causing broadcast packets going in and out of every port, the</li>
<li>Switch has to keep updating the source mac address of those packets.</li>
</ol>
<h2 id="multiple-frame-transmission">Multiple frame transmission</h2>
<p>Issues can be cause when multiples of the same frame are received on a port.</p>
<p>Spanning tree must build a topology so it can figure out if there is a loop in the network, and pick which port(s) to block to stop any network loops.</p>
<p>Spanning tree controls all ports in the network and puts them in different port “states”. These states help spanning tree learn the network topology and decide which ports to forward or block. This process is called convergence. Convergence happens whenever spanning tree realizes that there has been a change in the network. (a new switch is added or a link goes down.)The port states are Blocking, Listening, Learning, Forwarding and Disabled.</p>
<p>Blocking</p>
<p>• Stable state</p>
<p>• Mac addresses are not learned on this port</p>
<p>• Port does not forward any fram</p>
<p>Listening</p>
<p>• Removes old or “stale” mac address entries from this port if no frames are recieved for that mac address while it is in this state.</p>
<p>• Transitory state that is temporary while spanning tree converges.</p>
<p>• A port in this state does not forward any frames.</p>
<p>• Incoming frames mac addresses are not learned.</p>
<p>Learning</p>
<p>• Incoming mac addresses on this port are now learned.</p>
<p>• A port in this state does not forward any frames.</p>
<p>• Also a port in a transitory state.</p>
<p>Disabled</p>
<p>• Stable</p>
<p>• Mac addresses are not learned on this port</p>
<p>• Port does not forward any frames</p>
<p>How spanning tree decides.</p>
<p>To build out the topology, spanning tree elects designated ports and root ports and determines the lowest cost path to the root bridge. (root cost)</p>
<p>Cost is based on the operating speed of the link. Here are the cost values STP uses based on the speed of the link.</p>
<p>These are the cisco defaults:</p>
<p>10 Mbps = 100</p>
<p>100 Mbps = 19</p>
<p>1 gbps = 4</p>
<p>10 gbps = 2</p>
<p>100 gbps = N/A</p>
<p>1 tbps = N/A</p>
<p>You can change the values to a newer form with:</p>
<p># spanning-tree pathcost method long</p>
<p>Which changes the values to:</p>
<p>10 Mbps = 2,000,000</p>
<p>100 Mbps = 200,000</p>
<p>1 gbps = 20,000</p>
<p>10 gbps = 2,000</p>
<p>100 gbps = 200</p>
<p>1 tbps = 20</p>
<p>Designated ports and root ports</p>
<p>Spanning tree sends Hello BPDUs to determine the spanning tree topology. A port that sends forwards hello bpdus is called a designated port. A port that receives hello bpdus is called a designated port.</p>
<p>Hello BPDU</p>
<p>Hello bpdu contains a switches Bridge ID, the root bridge ID, the senders root cost. (cost to the root bridge), and the root switches timer values.</p>
<p>Bridge ID (BID)</p>
<p>Has an 8 byte value that is different on each switch. A 2-byte priority field. And a 6 byte system ID that is based on the mac address</p>
<p>Root Bridge ID</p>
<p>The Bridge ID of the switch that the sender thinks is currently the root switch.</p>
<p>Root Switches Timer Values</p>
<p>Hello Timer = How often Hello bpdus are sent</p>
<p>MaxAge Timer = The max time that spanning tree will wait not getting a hello bpdu before it reconverges the network.</p>
<p>Forward Delay Timer = How long a port stays in the listening and learning states.</p>
<p>Root Cost</p>
<p>The cost between the sender and the root bridge</p>
<p>Spanning tree elects a root bridge then decides the best path to the root bridge from all of the other switches. If there are multiple paths to the root bridge, then the worst path is blocked. All ports on the root bridge are set to a forwarding state.</p>
<p>The other switches elect a port that has the lowest cost path to the root bridge. These ports are called root ports. Root ports are always in a forwarding state.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="network-address-translation-nat">Network Address Translation (NAT)</h1>

<p>4.0 IP Services</p>
<p>4.1 Configure and verify inside source NAT using static and pools</p>
<h3 id="cidr">CIDR</h3>
<p>ISP3
ISP4
To 198.
To 198.<em>—</em>
To 198.
Customer A
198.8.3.0124
Customer B
198.0.o.o -
198.4.2.0124
198.255.255.0
198.4.3.0124
Customer C
198.1.0.0/24
Figure 10-1 Typical Use of CIDR &ldquo;&gt;</p>
<p>most public address assignments for the last 20 years have been a CIDR block rather than an entire class A, B, or C network.</p>
<h3 id="private-addressing">Private Addressing</h3>
<p>Addresses
10.0.0.0 to
10.255.255.255
172.16.O.O to
172.31.255.255
192.168.0.0 to
192.168.255.255
Network(s)
10.0.0.0
172.16.o.o -
172.31.o.o
192.168.0.0 -
192.168.255.0
Class of
Networks
c
Number of
Networks
1
16
256 &ldquo;&gt;</p>
<p>no organization is allowed to advertise these networks using a routing protocol on the Internet.</p>
<p>Feature
CIDR:
NAT:
Private
Networks
RFC(s)
4632
3022
1918
Main Benefits
Assign more-specific public IPv4 address blocks to
companies than Class A, B, and C networks.
Aggregate routes to public IPv4 addresses based on
worldwide address allocation plan.
Enable approximately 65,000 TCP/UDP sessions to
be supported by a single public IPv4 address.
Enable the use of NAT for enterprise Internet con-
nections, with private addresses used inside the
enterprise. &ldquo;&gt;</p>
<h3 id="network-address-translation-concepts">Network Address Translation Concepts</h3>
<p>Client
10.1.1.1
Source
10.1.1.1
Source
170.1.1.1
Destination
170.1.1.1
NAT Changes
Destination
10.1.1.1
Source
200.1.1.1
Source
170.1.1.1
170.1 .1 .1
Destination
170.1.1.1
Destination
200.1.1.1
Figure 10-2 NAT IP Address Swapping: Private Addressing &ldquo;&gt;</p>
<h3 id="static-nat">Static NAT</h3>
<p>IP addresses statically mapped to each other.</p>
<p>10.1.12
SA 10.1.1.1
NAT
Static NATTab1e
Internet
SA = 200.1.1.1
Private Address Public Address
10.1.1.1
10.1.1.2
200.1.1.1
200.1.1.2
Se rv&rsquo;er
170.1.1.1
Legend
SA: Source Address
Figure 10-3 Static NAT Showing Inside Local and Global Addresses &ldquo;&gt;</p>
<p>NAT router simply configures a one-to-one mapping between the private address and the registered address that is used on its behalf.</p>
<p>Supporting a second IP host with static NAT requires a second static one-to-one mapping using a second IP address in the public address range.</p>
<p>the router statically maps 10.1.1.2 to 200.1.1.2. Because the enterprise has a single registered Class C network, it can support at most 254 private IP addresses with NAT, with the usual two reserved numbers (the network number and network broadcast address).</p>
<p>inside local for the private IP addresses in this example and inside global for the public IP addresses.</p>
<p>Outside
10.1.1.1
10.1.1.2
10.1.1.1
Inside Local
10.1.1.1
10.1.1.2
NAT
Internet
SA =200.1.1.1
170.1.1.
Inside Global
200.1.1.1
200.1.1.2
Figure 10-4 Static NAT Terminolog
Legend &ldquo;&gt;</p>
<p>Inside
local
Inside
global
Values in
Figures
10.1.1.1
200.1.1.1
Meaning
Inside: Refers to the permanent location of the
host, from the enterprise&rsquo;s perspective: it is inside
the enterprise.
Local: Means not global; that is, local. It is the ad-
dress used for that host while the packet flows in
the local enterprise rather than the global Internet.
Alternative: Think of it as inside private, because
this address is typically a private address.
Inside: Refers to the permanent location of the
host, from the enterprise&rsquo;s perspective.
Global: Means global as in the global Internet. It is
the address used for that host while the packet
flows in the Internet.
Alternative: Think of it as inside public, because
the address is typically a public IPv4 address. &ldquo;&gt;</p>
<p>global
Outside
local
170.1.1.1
With source NAT, the one address used by the host
that resides outside the enterprise, which NAT does
not change, so there is no need for a contrasting
term.
Alternative: Think of it as outside public, because
the address is typically a public IPv4 address.
This term is not used with source NAT. With desti-
nation NAT, the address would represent a host that
resides outside the enterprise, but the address used
to represent that host as packets pass through the
local enterprise. &ldquo;&gt;</p>
<h3 id="dynamic-nat">Dynamic NAT</h3>
<p>Dynamic NAT sets up a pool of possible inside global addresses and defines matching criteria to determine which inside local IP addresses should be translated with NAT.</p>
<p>10.1.1.1
Outside
Internet
NAT
10.1.1.2
NAT Table Before First Packet
Server
170.1.1.1
Criteria for NAT:
10.1.1.
Inside Local _lnside Global
NAT Table After First Packet
Inside Local
10.1.1
Inside Global
200.1.1.1
NAT Pool:
200.1.1.1
200.1.1.2
200.1.1.3
200.1.1.4
200.1.1.5
Figure 10-5 Dynamic NAT &ldquo;&gt;</p>
<p>Host 10.1.1.1 sends its first packet to the server at 170.1.1.1.</p>
<p>As the packet enters the NAT router, the router applies some matching logic to decide whether the packet should have NAT applied. Because the logic has been configured to match source IP addresses that begin with 10.1.1, the router adds an entry in the NAT table for 10.1.1.1 as an inside local address.</p>
<p>The NAT router needs to allocate an IP address from the pool of valid inside global addresses. It picks the first one available (200.1.1.1, in this case) and adds it to the NAT table to complete the entry.</p>
<p>The NAT router translates the source IP address and forwards the packet.</p>
<p>The dynamic entry stays in the table as long as traffic flows occasionally. You can configure a timeout value that defines how long the router should wait, having not translated any packets with that address, before removing the dynamic entry. You can also manually clear the dynamic entries from the table using the clear ip nat translation * command.</p>
<p>NAT can be configured with more IP addresses in the inside local address list than in the inside global address pool.</p>
<p>If a new packet arrives from yet another inside host, and it needs a NAT entry, but all the pooled IP addresses are in use, the router simply discards the packet. The user must try again until a NAT entry times out, at which point the NAT function works for the next host that sends a packet. Essentially, the inside global pool of addresses needs to be as large as the maximum number of concurrent hosts that need to use the Internet at the same time—unless you use PAT, as is explained in the next section.</p>
<h3 id="overloading-nat-with-port-address-translation">Overloading NAT with Port Address Translation</h3>
<p>NAT Overload feature, also called Port Address Translation (PAT)</p>
<p>170.1.1.1 Port 80
10.1.1.2
10.1.1.3
10.1.1 1, Port49724
10.1.1.2, port 49724
10.1.1.3, Port 49733
170111
170111
port 80
Port 80
Server
170.1.1.1
Figure 10-6 Three TCP Connectionsfrom Three PCs &ldquo;&gt;</p>
<p>10.1.1.1
170.1.1 1 Port80
10.1.1.2
10.1.1 2
10.1 .1 .3
10.1.1.3
170.1.1 1 Port 80
Port 49724
port 49724
Port 49733
NAT
200.1.1.2
Port 49724
200.1.1.2, Port 49725
200.1.1.2
Port 49726
170.1.1.1 Port 80
Server
170.1.1.1
Inside Local
10.1.1.1: 49724
10.1.12: 49724
10.1.1.3: 49733
Inside Global
200.1.1 .2: 49724
200.1.12: 49725
200.1.1 .2: 49726
Dynamic NAT Table, With Overloading
Figure 10-8 NAT Overload (PAT) &ldquo;&gt;</p>
<p>The NAT router keeps a NAT table entry for every unique combination of inside local IP address and port, with translation to the inside global address and a unique port number associated with the inside global address.</p>
<p>NAT overload can use more than 65,000 port numbers</p>
<p>PAT is by far the most popular option</p>
<h2 id="nat-configuration-and-troubleshooting">NAT Configuration and Troubleshooting</h2>
<h3 id="static-nat-configuration">Static NAT Configuration</h3>
<p>Each static mapping between a local (private) address and a global (public) address must be configured.</p>
<p>Those same interface subcommands tell NAT whether the interface is inside or outside.</p>
<p>Step 1. Use the ip nat inside command in interface configuration mode to configure interfaces to be in the inside part of the NAT design.</p>
<p>Step 2. Use the ip nat outside command in interface configuration mode to configure interfaces to be in the outside part of the NAT design.</p>
<p>Step 3. Use the ip nat inside source static inside-local inside-global command in global configuration mode to configure the static mappings.</p>
<p>Certskills
200.1.1.252
10.1.1.1
SO/O/O
10.1.1.2
Inside
Internet
rve
170.1.1.1
Outside
Static NAT Confi
Inside Local
10.1.1.1
10.1.1.2
ration
Inside Global
200.1.1.1
200.1.1.2
Figure 10-9 Sample Networkfor NAT Examples, with Public Class C 200.1.1.0/24 &ldquo;&gt;</p>
<p>! Lines omitted for brevity
interface GigabitEthernet0/Ø
ip address 10.1.1.3 255.255.255.0
ip nat inside
interface SerialØ/0/0
ip address 200.1.1.251 255.255.255.0
ip nat outside
ip nat inside source static 10.1.1.2 200.1.1.2
ip nat inside source static 10.1.1.1 200.1.1.1
NAT # show ip nat translations
Pro Inside global Inside local
Outside local
200.1.1.1
200.1.1.2
10.1.1.1
10.1.1.2
dynamic;
Outside glo
0 extended)
NAT # show ip nat statistics
Total active translations: 2 (2 static,
Outside interfaces:
Seria10/0/Ø
Inside interfaces:
GigabitEthernetØ/Ø
Hits: 100 Misses: 0
Expired translations &ldquo;&gt;</p>
<p>static mappings are created using the ip nat inside source static command.</p>
<p>Source keyword means that NAT translates the source IP address of packets coming into its inside interfaces. The static keyword means that the parameters define a static entry, which should never be removed from the NAT table because of timeout. Because the design calls for two hosts—10.1.1.1 and 10.1.1.2—to have Internet access, two ip nat inside commands are needed.</p>
<p>show ip nat translations command lists the two static NAT entries created in the configuration. The show ip nat statistics command lists statistics, listing things such as the number of currently active translation table entries. The statistics also include the number of hits, which increments for every packet for which NAT must translate addresses.</p>
<h3 id="dynamic-nat-configuration">Dynamic NAT Configuration</h3>
<p>Dynamic NAT still requires that each interface be identified as either an inside or outside interface</p>
<p>Dynamic NAT uses an access control list (ACL) to identify which inside local (private) IP addresses need to have their addresses translated, and it defines a pool of registered public IP addresses to allocate.</p>
<p>Step 1. Use the ip nat inside command in interface configuration mode to configure interfaces to be in the inside part of the NAT design (just like with static NAT).</p>
<p>Step 2. Use the ip nat outside command in interface configuration mode to configure interfaces to be in the outside part of the NAT design (just like with static NAT).</p>
<p>Step 3. Configure an ACL that matches the packets entering inside interfaces for which NAT should be performed.</p>
<p>Step 4. Use the ip nat pool name first-address last-address netmask subnet-mask command in global configuration mode to configure the pool of public registered IP addresses.</p>
<p>Step 5. Use the ip nat inside source list acl-number pool pool-name command in global configuration mode to enable dynamic NAT. Note the command references the ACL (step 3) and pool (step 4) per previous steps.</p>
<p>Click here to view code image
NAT# show running-config
! Lines omitted for brevity
interface GigabitEthernet0/0
ip address 10.1.1.3 255.255.255.0
ip nat inside
interface Seria10/0/0
ip address 200.1.1.251 255.255.255.e
ip nat outside
10.1.1.2
10.1.1.1
ip nat
ip nat
access
access
pool fred 200.
1.1.1 200.1.1.2 netmask 255.255.255.252
inside
-list 1
-list 1
source
permit
permit
list
1
pool fred &ldquo;&gt;</p>
<p>Click here to view code image
The next command lists one empty line because no entries have been
! created yet.
NAT# show ip nat translations
NAT# show ip nat statistics
Total active translations: e (e static, e dynamic;
Peak translations: 8, occurred ago
e extended)
Outside interfaces:
seriale/e/e
Inside interfaces:
GigabitEthernete/e
Hits: e Misses: e
CEF Translated packets: e,
Expired translations: e
Dynamic mappings:</p>
<ul>
<li>Inside Source
CEF Punted packets:
e
[id 1] access-list 1 pool fred refcount e
pool Fred: net-mask 255.255.255.252
start 2ee.1.1.1 end 2ee.1.1.2
type generic, total addresses 2,
Total doors: e
Appl doors: e
Normal doors: e
allocated 0 (8%),
misses e &ldquo;&gt;</li>
</ul>
<p>“misses,” as highlighted in the example. The first occurrence of this counter counts the number of times a new packet comes along, needing a NAT entry, and not finding one.</p>
<p>The second misses counter toward the end of the command output lists the number of misses in the pool. This counter increments only when dynamic NAT tries to allocate a new NAT table entry and finds no available addresses</p>
<p>Click here to view code image
NAT# show ip nat translations
Pro Inside global</p>
<ul>
<li>2ee.1.1.1
Inside
local
le.l.l.l
Outside local
Outsic
NAT# show ip nat statistics
Total active translations: 1 (e static, 1 dynamic;
Peak translations: 11, occurred ago
e extended)
Outside interfaces:
seriale/e/e
Inside interfaces:
GigabitEthernete/e
Hits: 69 Misses: 1
Expired translations:
Dynamic mappings:</li>
<li>Inside Source
e
access-list 1 pool fred refcount 1
[eml Fred: net-mask 255.255.255.252
start 2ee.1.1.1 end 2ee.1.1.2
type generic, total addresses 2,
allocated 1 (59%),
misses e &ldquo;&gt;</li>
</ul>
<p>Click here to view code imac
! Host 10.1.1.1 currently uses inside global 200.1.1.1
NAT# show ip nat translations
19:23
Pro Inside global</p>
<ul>
<li>200.1.1.1
1
Inside loca
10.1.1.1
Outside
NAT# clear ip nat translation *
! telnet from 10.1.1.2 to 170.1.1.1 happened next;
! Now host 10.1.1.2 uses inside global 200.1.1.1
NAT# show ip nat translations
Pro Inside global</li>
<li>200.1.1.1
! Telnet from 10.1.1.1
NAT# debug ip nat
Inside
local
10.1.1.2
to 170
Outside
local
not shown
local
not shown
IP NAT
Oct
Oct
Oct
Oct
20
20
20
20
debugging is on
19:23 : 03 . 263:
19:23 267:
: 03
568:
.1.1.1 happened next;
s-170.1.1.1, d=2øø.1.1
s-170.1.1.1, d=2øø.1.1
d=17e .1.1
.2-&gt;1e.1.1
d=17e .1.1
.2-&gt;1e.1.1
.1
.1
.1
.1
Outsid
Outsid
c 348]
c 348]
[349]
[349] &ldquo;&gt;</li>
</ul>
<p>debug ip nat command. This debug command causes the router to issue a message every time a packet has its address translated for NAT.</p>
<h3 id="nat-overload-pat-configuration">NAT Overload (PAT) Configuration</h3>
<p>If PAT uses a pool of inside global addresses, the configuration looks exactly like dynamic NAT, except the ip nat inside source list global command has an overload keyword added to the end. If PAT just needs to use one inside global IP address, the router can use one of its interface IP addresses</p>
<p>configuration when using an interface IP address as the sole inside global IP address:</p>
<p>Step 1. As with dynamic and static NAT, configure the ip nat inside interface sub-command to identify inside interfaces.</p>
<p>Step 2. As with dynamic and static NAT, configure the ip nat outside interface subcommand to identify outside interfaces.</p>
<p>Step 3. As with dynamic NAT, configure an ACL that matches the packets entering inside interfaces.</p>
<p>Step 4. Configure the ip nat inside source list acl-number interface type/number overload global configuration command, referring to the ACL created in step 3 and to the interface whose IP address will be used for translations.</p>
<p>10.1.1.1
10.1.1.2
Inside
200.1.1.249
200.1.1.250
Internet
NAT Table overload
Inside Local
Inside Global
10.1.1.1: 49712 200.1.1.249: 49712
10.1.1.2: 49713 200.1.1_249: 49713
10.1.1.2: 49913 200.1.1.249:49913
Figure 10-10 NAT Overload and PAT
170.1.1.1
Outside &ldquo;&gt;</p>
<p>Click to im
NAT* show running-config
Lines Omitted for Brevity
interface GigabitEthernetØ/ø
ip address 10.1.1.3 255.255.255.a
ip nat inside
interface Seriale/e/a
ip address 200.1.1.249 255.255.255.252
ip nat outside
ip nat inside source list I interface Seriale/ø/ø overload
access-list I permit 10.1.1.2
access-list I permit 10.1.1.1
dynamic; 3 extended)
NAT*
Pro
tcp
tcp
tcp
NAT*
show ip nat translations
Inside global
Inside
local
10.1.1.1:49712
10.1.1.2:49713
10.1.1.2:49913
show ip nat statistics
Out s ide
local
17e.1.1.1:23
17e.1.1.1:23
17e.1.1.1:23
Outsid
170.1.
170.1.
170.1.
Total active translations: 3 (e static,
Peak translations: 12, occurred ago
Outside interfaces:
Serialø/ø/ø
Inside interfaces:
Gigabit Ethernete/a
Hits: IE Misses: 3
Expired translations .
Dynamic mappings:
Inside Source
access-list I interface Seriale/e/a refcount 3 &ldquo;&gt;</p>
<p>ip nat inside source list 1 interface serial 0/0/0 overload command has several parameters</p>
<p>The list 1 parameter means the same thing as it does for dynamic NAT: inside local IP addresses matching ACL 1 have their addresses translated. The interface serial 0/0/0 parameter means that the only inside global IP address available is the IP address of the NAT router’s interface serial 0/0/0.</p>
<p>The router creates one NAT table entry for each unique combination of inside local IP address and port</p>
<p>NAT Troubleshooting</p>
<p>Reversed inside and outside</p>
<p>Static NAT: Check the ip nat inside source static command to ensure it lists the inside local address first and the inside global IP address second.</p>
<p>Dynamic NAT (ACL): Ensure that the ACL configured to match packets sent by the inside hosts match that host’s packets before any NAT translation has occurred.</p>
<p>Dynamic NAT (pool): For dynamic NAT without PAT, ensure that the pool has enough IP addresses\</p>
<p>A large or growing value in the second misses counter in the show ip nat statistics command output can indicate this problem. Also, compare the configured pool to the list of addresses in the NAT translation table (show ip nat translations). Finally, if the pool is small, the problem may be that the configuration intended to use PAT and is missing the overload keyword</p>
<p>PAT: It is easy to forget to add the overload option</p>
<p>perhaps NAT has been configured correctly, but an ACL exists on one of the interfaces, discarding the packets.</p>
<p>IOS processes ACLs before NAT. For packets exiting an interface, IOS processes any outbound ACL after translating the addresses with NAT.</p>
<p>User traffic required</p>
<p>IPv4 routing</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="ospf-basics">OSPF Basics</h1>

<p>This chapter covers the following exam topics:</p>
<p>3.0 IP Connectivity</p>
<p>3.2 Determine how a router makes a forwarding decision by default</p>
<p>3.2.b Administrative distance</p>
<p>3.2.c Routing protocol metric</p>
<p>3.4 Configure and verify single area OSPFv2</p>
<p>3.4.a Neighbor adjacencies</p>
<p>3.4.b Point-to-point</p>
<p>3.4.c Broadcast (DR/BR selection)</p>
<p>3.4.d Router ID</p>
<p>Comparing Dynamic Routing Protocol Features</p>
<p>Routers add IP routes to their routing tables using three methods: connected routes, static routes, and routes learned by using dynamic routing protocols.</p>
<ul>
<li>
<p>Routing protocol: A set of messages, rules, and algorithms used by routers for the overall purpose of learning routes. This process includes the exchange and analysis of routing information. Each router chooses the best route to each subnet (path selection) and finally places those best routes in its IP routing table. Examples include RIP, EIGRP, OSPF, and BGP.</p>
</li>
<li>
<p>Routed protocol and routable protocol: Both terms refer to a protocol that defines a packet structure and logical addressing, allowing routers to forward or route the packets. Routers forward packets defined by routed and routable protocols. Examples include IP Version 4 (IPv4) and IP Version 6 (IPv6).</p>
</li>
</ul>
<p>path selection sometimes refers to part of the job of a routing protocol, in which the routing protocol chooses the best route.</p>
<p>Routing Protocol Functions</p>
<p>Learn routing information about IP subnets from neighboring routers.</p>
<p>Advertise routing information about IP subnets to neighboring routers.</p>
<p>If more than one possible route exists to reach one subnet, pick the best route based on a metric.</p>
<p>If the network topology changes—for example, a link fails—react by advertising that some routes have failed and pick a new currently best route. (This process is called convergence.)</p>
<p>Interior and Exterior Routing Protocols</p>
<p>IP routing protocols fall into one of two major categories: interior gateway protocols (IGP) or exterior gateway protocols (EGP).</p>
<p>IGP: A routing protocol that was designed and intended for use inside a single autonomous system (AS)</p>
<p>EGP: A routing protocol that was designed and intended for use between different autonomous systems</p>
<p>An AS is a network under the administrative control of a single organization.</p>
<p>routing protocols designed to exchange routes between routers in different autonomous systems are called EGPs. Today, Border Gateway Protocol (BGP) is the only EGP used.</p>
<p>IGP Routing Protocol Algorithms</p>
<p>Distance vector (sometimes called Bellman-Ford after its creators)</p>
<p>Advanced distance vector (sometimes called “balanced hybrid”)</p>
<p>Link-state (OSPF)</p>
<p>Routing Information Protocol (RIP) was the first popularly used IP distance vector protocol, with the Cisco-proprietary Interior Gateway Routing Protocol (IGRP) being introduced a little later.</p>
<p> proprietary routing protocol called Enhanced Interior Gateway Routing Protocol (EIGRP)</p>
<p>it used more distance vector features than link-state, so it is more commonly classified as an advanced distance vector protocol.</p>
<p>Metrics</p>
<p>Routing protocols choose the best route to reach a subnet by choosing the route with the lowest metric</p>
<p> RIP uses a counter of the number of routers (hops) between a router and the destination subnet</p>
<p>OSPF totals the cost associated with each interface in the end-to-end route, with the cost based on link bandwidth</p>
<p>The bandwidth interface subcommand does not change the actual physical speed of the interface. It just tells IOS what speed to assume the interface is using.)</p>
<p>Other IGP Comparisons</p>
<p>Classless routing protocols support variable-length subnet masks (VLSM) as well as manual route summarization (supernetting) by sending routing protocol messages that include the subnet masks in the message. The older RIPv1 and IGRP routing protocols—both classful routing protocols—do not.</p>
<p>Administrative Distance</p>
<p>If one company uses OSPF and the other uses EIGRP on at least one router, both OSPF and EIGRP must be used. Then that router can take routes learned by OSPF and advertise them into EIGRP, and vice versa, through a process called route redistribution.</p>
<p>When a single routing protocol learns multiple routes to the same subnet, the metric tells it which route is best. However, when two different routing protocols learn routes to the same subnet, because each routing protocol’s metric is based on different information, IOS cannot compare the metrics</p>
<p>When IOS must choose between routes learned using different routing protocols, IOS uses a concept called administrative distance. Administrative distance is a number that denotes how believable an entire routing protocol is on a single router. The lower the number, the better, or more believable, the routing protocol. For example, RIP has a default administrative distance of 120, OSPF uses a default of 110, and EIGRP defaults to 90. When using OSPF and EIGRP, the router will believe the EIGRP route instead of the OSPF route (at least by default). The administrative distance values are configured on a single router and are not exchanged with other routers</p>
<p>The show ip route command lists each route’s administrative distance as the first of the two numbers inside the brackets. The second number in brackets is the metric</p>
<p>IOS can be configured to change the administrative distance of a particular routing protocol, a particular route, or even a static route.</p>
<p>For example, the command ip route 10.1.3.0 255.255.255.0 10.1.130.253 defines a static route with a default administrative distance of 1, but the command ip route 10.1.3.0 255.255.255.0 10.1.130.253 210 defines the same static route with an administrative distance of 210</p>
<p>Topology Information and LSAs</p>
<p>Each LSA is a data structure with some specific information about the network topology; the LSDB is simply the collection of all the LSAs known to a router.</p>
<p>before sending an LSA to yet another neighbor, routers communicate, asking “Do you already have this LSA?,” and then sending the LSA to the next neighbor only if the neighbor has not yet learned about the LSA.</p>
<p>Routers reflood an LSA when some information changes (for example, when a link goes up or comes down). They also reflood each LSA based on each LSA’s separate aging timer (default 30 minutes).</p>
<p>Applying Dijkstra SPF Math to Find the Best Routes</p>
<p>Becoming neighbors: A relationship between two routers that connect to the same data link, created so that the neighboring routers have a means to exchange their LSDBs.</p>
<p>Exchanging databases: The process of sending LSAs to neighbors so that all routers learn the same LSAs.</p>
<p>Adding the best routes: The process of each router independently running SPF, on their local copy of the LSDB, calculating the best routes, and adding those to the IPv4 routing table.</p>
<p>The Basics of OSPF Neighbors</p>
<p>OSPF neighbors are routers that both use OSPF and both sit on the same data link. Two routers can become OSPF neighbors if connected to the same VLAN, or same serial link, or same Ethernet WAN link.</p>
<p>they must send OSPF messages and agree to become OSPF neighbors. To do so, the routers send OSPF Hello messages, introducing themselves to the potential neighbor. Assuming the two potential neighbors have compatible OSPF parameters, the two form an OSPF neighbor relationship, and would be displayed in the output of the show ip ospf neighbor command.</p>
<p>allows new routers to be dynamically discovered. That means new routers can be added to a network without requiring every router to be reconfigured. Instead, OSPF routers listen for OSPF Hello messages from new routers and react to those messages, attempting to become neighbors and exchange LSDBs.</p>
<p>Meeting Neighbors and Learning Their Router ID</p>
<p>process starts with messages called OSPF Hello messages. The Hellos in turn list each router’s router ID (RID), which serves as each router’s unique name or identifier for OSPF. Finally, OSPF does several checks of the information in the Hello messages to ensure that the two routers should become neighbors.</p>
<p>OSPF RIDs are 32-bit numbers.</p>
<p>By default, IOS chooses one of the router’s interface IPv4 addresses to use as its OSPF RID. However, the OSPF RID can be directly configured</p>
<p>As soon as a router has chosen its OSPF RID and some interfaces come up, the router is ready to meet its OSPF neighbors. OSPF routers can become neighbors if they are connected to the same subnet. To discover other OSPF-speaking routers, a router sends multicast OSPF Hello packets to each interface and hopes to receive OSPF Hello packets from other routers connected to those interfaces.</p>
<p>They continue to send Hellos at a regular interval based on their Hello timer settings. The Hello messages themselves have the following features:</p>
<p>The Hello message follows the IP packet header, with IP protocol type 89.</p>
<p>Hello packets are sent to multicast IP address 224.0.0.5, a multicast IP address intended for all OSPF-speaking routers.</p>
<p>OSPF routers listen for packets sent to IP multicast address 224.0.0.5, in part hoping to receive Hello packets and learn about new neighbors.</p>
<p>Each router keeps an OSPF state variable for how it views the neighbor.</p>
<p>Hello. This message tells R1 that R2 exists, and it allows R1 to move through the init state and quickly to a 2-way state.</p>
<p>The 2-way state is a particularly important OSPF state. At that point, the following major facts are true:</p>
<p>2-way means that the router is available to exchange its LSDB with the neighbor. In other words, it is ready to begin a 2-way exchange of the LSDB.</p>
<p>First, they tell each other a list of LSAs in their respective databases—not all the details of the LSAs, just a list. (Think of these lists as checklists.) Then each router can check which LSAs it already has and then ask the other router for only the LSAs that are not known yet.</p>
<p>the OSPF messages that actually send the LSAs between neighbors are called Link-State Update (LSU) packets. That is, the LSU packet holds data structures called link-state advertisements (LSA). The LSAs are not packets, but rather data structures that sit inside the LSDB and describe the topology.</p>
<p>Maintaining Neighbors and the LSDB</p>
<p>First, routers monitor each neighbor relationship using Hello messages and two related timers: the Hello Interval and the Dead Interval. Routers send Hellos every Hello Interval to each neighbor. Each router expects to receive a Hello from each neighbor based on the Hello Interval, so if a neighbor is silent for the length of the Dead Interval (by default, four times as long as the Hello Interval), the loss of Hellos means that the neighbor has failed.</p>
<p>Next, routers must react when the topology changes as well,</p>
<p>Each router’s LSDB now reflects the fact that the original router’s G0/0 interface failed, so each router will then use SPF to recalculate any routes affected by the failed interface.</p>
<p>A third maintenance task done by neighbors is to reflood each LSA occasionally, even when the network is completely stable. By default, each router that creates an LSA also has the responsibility to reflood the LSA every 30 minutes (the default), even if no changes occur. (Note that each LSA has a separate timer, based on when the LSA was created, so there is no single big event where the network is overloaded with flooding LSAs.)</p>
<p>Using Designated Routers on Ethernet Links</p>
<p>On Ethernet links, OSPF defaults to use a network type of broadcast, which causes OSPF to elect one of the routers on the same subnet to act as the designated router (DR).</p>
<p>These five OSPF routers elect one router to act as the DR and one router to be a backup DR (BDR).</p>
<p>The database exchange process on an Ethernet link does not happen between every pair of routers on the same VLAN/subnet. Instead, it happens between the DR and each of the other routers, with the DR making sure that all the other routers get a copy of each LSA.</p>
<p> The BDR watches the status of the DR and takes over for the DR if it fails. (When the DR fails, the BDR takes over, and then a new BDR is elected.)</p>
<p>The DR can send a packet to all OSPF routers in the subnet by using multicast IP address 224.0.0.5</p>
<p>The DR can send one set of messages to all the OSPF routers rather than sending one message to each router.</p>
<p>any OSPF router needing to send a message to the DR and also to the BDR (so it remains ready to take over for the DR) can send those messages to the “All SPF DRs” multicast address 224.0.0.6.</p>
<p>routers that are neither a DR nor a BDR—called DROthers by OSPF—never reach a full state because they do not exchange LSDBs directly with each other.</p>
<p>full state (called fully adjacent neighbors</p>
<p>2-way state (called neighbors)</p>
<p>all OSPF routers on the same link that reach the 2-way state—that is, they send Hello messages and the parameters match—are called neighbors. The subset of neighbors for which the neighbor relationship continues on and reaches the full state are called adjacent neighbors.</p>
<p>OSPF Areas and LSAs</p>
<p>A larger topology database requires more memory on each router.</p>
<p>The SPF algorithm requires processing power that grows exponentially compared to the size of the topology database.</p>
<p>A single interface status change anywhere in the internetwork (up to down, or down to up) forces every router to run SPF again!</p>
<p>OSPF Areas</p>
<p>Put all interfaces connected to the same subnet inside the same area.</p>
<p>An area should be contiguous.</p>
<p>Some routers may be internal to an area, with all interfaces assigned to that single area.</p>
<p>Some routers may be Area Border Routers (ABR) because some interfaces connect to the backbone area, and some connect to nonbackbone areas.</p>
<p>All nonbackbone areas must have a path to reach the backbone area (area 0) by having at least one ABR connected to both the backbone area and the nonbackbone area.</p>
<p>How Areas Reduce SPF Calculation Time</p>
<p>Routers require fewer CPU cycles to process the smaller per-area LSDB with the SPF algorithm, reducing CPU overhead and improving convergence time.</p>
<p>The smaller per-area LSDB requires less memory.</p>
<p>Changes in the network (for example, links failing and recovering) require SPF calculations only on routers in the area where the link changed state, reducing the number of routers that must rerun SPF.</p>
<p>Less information must be advertised between areas, reducing the bandwidth required to send LSAs.</p>
<p>(OSPFv2) Link-State Advertisements</p>
<p>One router LSA for each router in the area</p>
<p>One network LSA for each network that has a DR plus one neighbor of the DR</p>
<p>One summary LSA for each subnet ID that exists in a different area
Router LSAs Build Most of the Intra-Area Topology</p>
<p>Router LSAs, also known as Type 1 LSAs, describe the router in detail. Each lists a router’s RID, its interfaces, its IPv4 addresses and masks, its interface state, and notes about what neighbors the router knows about via each of its interfaces.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="ospf-configuration">OSPF Configuration</h1>

<p>OSPF Config</p>
<p>This chapter covers the following exam topics:</p>
<p>3.0 IP Connectivity</p>
<p>3.2 Determine how a router makes a forwarding decision by default</p>
<p>3.2.b Administrative distance</p>
<p>3.2.c Routing protocol metric</p>
<p>3.4 Configure and verify single area OSPFv2</p>
<p>3.4.a Neighbor adjacencies</p>
<p>3.4.b Point-to-point</p>
<p>3.4.c Broadcast (DR/BR selection)</p>
<p>3.4.d Router ID</p>
<p>Implementing Single-Area OSPFv2</p>
<p>Step 1. Use the router ospf process-id global command to enter OSPF configuration mode for a particular OSPF process.</p>
<p>Step 2. (Optional) Configure the OSPF router ID by doing the following:</p>
<p>A. Use the router-id id-value router subcommand to define the router ID, or</p>
<p>B. Use the interface loopback number global command, along with an ip address address mask command, to configure an IP address on a loopback interface (chooses the highest IP address of all working loopbacks), or</p>
<p>C. Rely on an interface IP address (chooses the highest IP address of all working nonloopbacks).</p>
<p>Step 3. Use one or more network ip-address wildcard-mask area area-id router subcommands to enable OSPFv2 on any interfaces matched by the configured address and mask, enabling OSPF on the interface for the listed area.</p>
<p>OSPF Single-Area Configuration</p>
<p>for each matched interface, the router enables OSPF on those interfaces, discovers neighbors, creates neighbor relationships, and assigns the interface to the area listed in the network command.</p>
<p>Verifying OSPF Operation</p>
<p>The show ip ospf neighbor, show ip ospf database, and show ip route commands display information to match each of these three steps, respectively.</p>
<p>network and
ip ospf Commands
s Enabled</p>
<ul>
<li>Interfaces
Discover
with Hello
Neighbors
Flood LSAs
LSDB
SPF Calculation
RIB
Admin Distance
Routes
Figure 20-3 OSPF Verification Commands
show
show
show
show
Show
show
show
show
show
show
show
show
show
running —config
protocol s
ip
ip
ip
ip
ip
ip
ip
ospf
ospf
ospf
ospf
ospf
ospf
ospf
interface
interface type number
interface brief
neighbor
neighbor type number
database
rib
route
route
route
ospf
subnet mask
section subnet &ldquo;&gt;</li>
</ul>
<p>FULL/  -: The neighbor state is full, with the “-“ instead of letters meaning that the link does not use a DR/BDR.</p>
<p>FULL/DR: The neighbor state is full, and the neighbor is the DR.</p>
<p>FULL/BDR: The neighbor state is full, and the neighbor is the backup DR (BDR).</p>
<p>FULL/DROTHER: The neighbor state is full, and the neighbor is neither the DR nor BDR. (It also implies that the local router is a DR or BDR because the state is FULL.)</p>
<p>2WAY/DROTHER: The neighbor state is 2-way, and the neighbor is neither the DR nor BDR—that is, a DROther router. (It also implies that the local router is also a DROther router because otherwise the state would reach a full state.)</p>
<p>Verifying OSPF Configuration</p>
<p>If you have enable mode access, use the show running-config command to examine the configuration.</p>
<p>If you have only user mode access, use the show ip protocols command to re-create the OSPF configuration.</p>
<p>Use the show ip ospf interface [brief] command to determine whether the router enabled OSPF on the correct interfaces or not based on the configuration.</p>
<p>show ip ospf interface brief command shown here. It lists one line per interface, with the list showing all the interfaces on which OSPF has been enabled</p>
<p>the show ip ospf interface command with the brief keyword at the end lists a single line of output per interface, but the show ip ospf interface command (without the brief keyword) displays about 20 lines of output per interface</p>
<p>Configuring the OSPF Router ID</p>
<p>most enterprise networks that use OSPF choose to configure each router’s OSPF router ID</p>
<p>If the router-id rid OSPF subcommand is configured, this value is used as the RID.</p>
<p>If any loopback interfaces have an IP address configured, and the interface has an interface status of up, the router picks the highest numeric IP address among these loopback interfaces.</p>
<p>The router picks the highest numeric IP address from all other interfaces whose interface status code (first status code) is up. (In other words, an interface in up/down state will be included by OSPF when choosing its router ID.)</p>
<p>stops and restarts the OSPF process (with the clear ip ospf process command). So, if OSPF comes up, and later the configuration changes in a way that would impact the OSPF RID, OSPF does not change the RID immediately. Instead, IOS waits until the next time the OSPF process is restarted.</p>
<p>OSPF Interface Configuration Example</p>
<p>Step 1. Use the no network network-id area area-id subcommands in OSPF configuration mode to remove the network commands.</p>
<p>Step 2. Add one ip ospf process-id area area-id command in interface configuration mode under each interface on which OSPF should operate, with the correct OSPF process (process-id) and the correct OSPF area number.</p>
<p>Verifying OSPF Interface Configuration</p>
<p>The show ip protocols command relists most of the routing protocol configuration, so it does list some different details if you use interface configuration versus the network command</p>
<p>face Configuration
Click here to view code image
! First, with the new interface configuration
RI* show ip ospf interface ge/0/0
GigabitEthernete/0/e is up, line protocol is up
Internet Address 10.1.12.1/24, Area e, Attached via Interface Enab
! Lines omitted for brevity
! For comparison, the old results with the use of the OSPF network c
RI* show ip ospf interface ge/0/0
GigabitEthernete/0/e is up, line protocol is up
Internet Address 10.1.12.1/24, Area e, Attached via Network Statem
. ending line omitted for brevity &ldquo;&gt;</p>
<p>Additional OSPFv2 Features</p>
<p>Passive interfaces</p>
<p>Default routes</p>
<p>Metrics</p>
<p>Load balancing</p>
<p>OSPF Passive Interfaces</p>
<p>When no routers exist on a link</p>
<p>OSPF continues to advertise about the subnet that is connected to the interface.</p>
<p>OSPF no longer sends OSPF Hellos on the interface.</p>
<p>OSPF no longer processes any received Hellos on the interface.</p>
<p>OSPF still advertises about the connected subnet, but OSPF also does not form neighbor relationships over the interface.</p>
<p>First, you can add the following command to the configuration of the OSPF process, in router configuration mode:</p>
<p>passive-interface type number</p>
<p>Alternately, the configuration can change the default setting so that all interfaces are passive by default and then add a no passive-interface command for all interfaces that need to not be passive:</p>
<p>passive-interface default</p>
<p>no passive-interface type number</p>
<p>Click here to view code image
! First, make each subinterface passive directly
router ospf 1
passive-interface GigabitEthernetø/ø.1
passive-interface GigabitEthernetø/0.2
! Or, change the default to passive, and make the other interfaces n
router ospf 1
passive-interface default
no passive-interface GigabitEthernetØ/Ø/0
no passive-interface GigabitEthernetØ/1/0
no passive-interface GigabitEthernetØ/2/0 &ldquo;&gt;</p>
<p>The show ip ospf interface brief command lists all interfaces on which OSPF is enabled, including passive interfaces.</p>
<p>The show ip ospf interface command lists a single line that mentions that the interface is passive.</p>
<p>OSPF Default Routes</p>
<p>All routers learn specific (nondefault) routes for subnets inside the company; a default route is not needed when forwarding packets to these destinations.</p>
<p>One router connects to the Internet, and it has a default route that points toward the Internet.</p>
<p>All routers should dynamically learn a default route, used for all traffic going to the Internet, so that all packets destined to locations in the Internet go to the one router connected to the Internet.</p>
<dl>
<dt>default-information originate command (Step 2) makes the router advertise a default route using OSPF to the remote routers (B1 and B2).</dt>
<dd>
<p>default-information originate
GO/I/O
GO/O/O
GO/O/O
GO/I/O
GO/3/0
RI
192.0.2.1
Internet
ISP 1
ip route 0.0-0.0 0.O.O.0 192.0.2.1</p>
</dd>
<dd>default-information originate
OSPFv2 Advertises Default
Figure 20-6 Using OSPF to Create and Flood a Default Route &ldquo;&gt;</dd>
</dl>
<p>The default-information originate always router subcommand tells the router to always advertise the default route, no matter whether the router’s default route is working or not.</p>
<p>RI* show ip route static
static,
Codes: L -
local, C -
connected, S -
! Rest of the legend omitted for brevity
RIP, M
mobile, B
Gateway of last resort is 192.e.2.1 to network e. e. e. e
e.e.e.e/e [254/0] via 192.0.2.1 &ldquo;&gt;</p>
<p>Bl# show ip route ospf
Codes: L -
D
NI -
El -
static, R -
local, C -
connected, S -</p>
<ul>
<li>EIGRP, EX - EIGRP external, O - OSPF,
RIP, M - mobile, B
IA - OSPF inter are
OSPF NSSA external type 1, N2 - OSPF NSSA external type
OSPF external type 1, E2 - OSPF external type 2
! Rest of the legend omitted for brevity
Gateway of last resort is 10.1.12.1 to network e. e. e. e
O*E2
o
o
e.e.e.e/e [110/1] via le.1.12.1, GigabitEthernete/1
le.e.e.e/8 is variably subnetted, 6 subnets, 2 masks
10.1.3.e/24 [lie/3] via le.1.12.1, GigabitEthern
10.1.13.e/24 [110/2] via 10.1.12.1, GigabitEther &ldquo;&gt;</li>
</ul>
<p>OSPF Metrics (Cost)</p>
<p>Cisco routers allow three different ways to change the OSPF interface cost:</p>
<p>Directly, using the interface subcommand ip ospf cost x.</p>
<p>Using the default calculation per interface, and changing the interface bandwidth setting, which changes the calculated value.</p>
<p>Using the default calculation per interface, and changing the OSPF reference bandwidth setting, which changes the calculated value.</p>
<p>Click here to view code image
RI* conf t
Enter configuration commands, one per
RI (config)# interface gø,&lsquo;0/0
RI (config-if)# ip ospf cost 4
RI (config-if)# interface go/ 1/0
RI (config-if)# ip ospf cost 5
RI (config-if)# AZ
RI* show ip ospf interface brief
line.
End with CNTL/Z.
Interface
Gie/e.2
Gie/e.l
Gie/e/e
Gie/l/e
Gie/2/e
PID
1
1
1
1
1
Area
e
e
e
e
e
IP
le.
Address/Mask
Cost
1
1
4
5
1
State Nb
le.1.2.1/24
le.1.1.1/24
le.1.12.1/24
le.1.13.1/24
14.1/24
DR
DR
DR
BDR
DR
1/
1/
1/ &ldquo;&gt;</p>
<p>The output also shows a cost value of 1 for the other Gigabit interfaces, which is the default OSPF cost for any interface faster than 100 Mbps.</p>
<p>Setting the Cost Based on Interface and Reference Bandwidth</p>
<p>interface bandwidth setting does not influence the actual transmission speed. Instead, the interface bandwidth acts as a configurable setting to represent the speed of the interface, with the option to configure the bandwidth to match the actual transmission speed…or not</p>
<p>configuration of the interface bandwidth using bandwidth speed interface subcommand.</p>
<p>Reference_bandwidth / Interface_bandwidth</p>
<p>you should avoid changing the interface bandwidth as a means to influence the default OSPF cost.</p>
<p>any interface with an interface bandwidth of 100 Mbps or faster ties with a calculated OSPF cost of 1 when using the default reference bandwidth. So, when relying on the default OSPF cost calculation, it helps to configure the reference bandwidth to another value.</p>
<p>Interface
Serial
Ethernet
Fast Ethernet
Gigabit
Ethernet
10 Gigabit
Ethernet
100 Gigabit
Ethernet
Interface Default Band-
width (Kbps)
1544 Kbps
10,000 Kbps
100,000 Kbps
Kbps
Kbps
Kbps
Formula (Kbps)
100,000 / 1544
100,000 / 10,000
OSPF
Cost
64
10
1
1
1
1 &ldquo;&gt;</p>
<p>You can still use OSPF’s default cost calculation (and many do) just by changing the reference bandwidth with the auto-cost reference-bandwidth speed OSPF mode subcommand</p>
<p>For instance, in an enterprise whose fastest links are 10 Gbps (10,000 Mbps), you could set all routers to use auto-cost reference-bandwidth 10000, meaning 10,000 Mbps or 10 Gbps. In that case, by default, a 10-Gbps link would have an OSPF cost of 1, while a 1-Gbps link would have a cost of 10, and a 100-MBps link a cost of 100.</p>
<p>Set the cost explicitly, using the ip ospf cost x interface subcommand, to a value between 1 and 65,535, inclusive.</p>
<p>Although it should be avoided, change the interface bandwidth with the bandwidth speed command, with speed being a number in kilobits per second (Kbps).</p>
<p>Change the reference bandwidth, using router OSPF subcommand auto-cost reference-bandwidth ref-bw, with a unit of megabits per second (Mbps).</p>
<p>OSPF Load Balancing</p>
<p>when the metrics tie for multiple routes to the same subnet, the router can put multiple equal-cost routes in the routing table (the default is four different routes) based on the setting of the maximum-paths number router subcommand</p>
<p>the default (and better) method, the load balancing could be on a per-destination IP address basis.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="ospf-lab">OSPF Lab</h1>

<p>Welcome to the CCNA OSPF lab. You&rsquo;ll need to configure OSPF so that there are full routing capabilities in the network. As well as use show commands to verify your network. Then you will troubleshoot and fix a broken OSPF network.</p>
<p>Once again, this will all be done in Packet Tracer. But feel free to do this lab on real equipment, GNS-3, etc.</p>
<h2 id="ospf-setup">OSPF Setup</h2>
<p>There are two main ways to configure OSPF. You can go into OSPF configuration mode. Or you can configure OSPF in Interface configuration mode. I will show you how to configure router1. You will need to configure the other routers as well.</p>
<h2 id="step-1-configure-ospf-on-routers-1-2-and-3">Step 1. Configure OSPF on routers 1, 2, and 3.</h2>
<p>Do not configure OSPF on router3 link to isprouter. Also, make sure to include the loopback interfaces in your OSPF networks.</p>
<h3 id="enter-ospf-configuration-mode">Enter OSPF Configuration Mode</h3>
<p>router1 (config) # router ospf 1</p>
<h3 id="define-networks-for-ospf-to-advertise">Define networks for OSPF to advertise</h3>
<p>router1 (config-router) network 10.0.1.0 0.0.0.255 area 0</p>
<p>router1 (config-router) network 192.168.1.0 0.0.0.255 area 0</p>
<p>router1 (config-router) network 1.1.1.1 0.0.0.0 area 0</p>
<p>or</p>
<h3 id="configure-ospf-in-interface-configuration-mode">Configure OSPF in Interface configuration mode</h3>
<p>Interface configuration</p>
<p>router1 (config-if) # Ip ospf 1 area 0</p>
<h2 id="step-2--configure-router1-connection-to-the-1921681024-network-as-a-passive-interface">Step 2.  Configure router1 connection to the 192.168.1.0/24 network as a passive interface</h2>
<p>Make ospf interfaces that are not connected to a router stop trying to for neighbor relationships. (Stop sending hellos and stop processing hellos)</p>
<p>passive interface type number</p>
<h2 id="step-3-configure-router3-to-us-isprouter-as-the-default-gateway-and-to-advertise-the-default-route">Step 3. Configure router3 to us isprouter as the default gateway and to advertise the default route.</h2>
<p>Set a default route</p>
<p>ip route 0.0.0.0 0.0.0.0 19.0.0.1</p>
<p>Advertise a default route</p>
<p>default-information originate</p>
<h2 id="step-4-ping-isprouter-from-pc1-to-verify-connection">Step 4. Ping isprouter from PC1 to verify connection</h2>
<h2 id="step-5-use-show-commands-to-view-ospf-neighbors-routing-table-and-the-ospf-lsdb">Step 5. Use Show Commands to view OSPF neighbors, routing Table, and the OSPF LSDB</h2>
<p>Show Commands</p>
<p>Show IP OSPF neighbor (neighbors)</p>
<p>Show ip ospf database (Link State database)</p>
<p>show ip route</p>
<p>show ip ospf interface</p>
<p>20 lines of output per interface</p>
<p>show ip ospf interface gi0/0</p>
<p>show ip ospf interface brief</p>
<p>To check if ospf is enabled on the proper interfaces. Single line of output per interface</p>
<p>show ip ospf rib (spf calculation)</p>
<p>Show ip route</p>
<p>Show ip route ospf</p>
<p>Show ip protocols</p>
<p>Broken OSPF Lab</p>
<p>More OSPF Labs</p>
<h2 id="other-helpful-ospf-commands">Other helpful OSPF commands</h2>
<p>Configure OSPF Router ID (preferred by router)</p>
<p>router1 (config-router) # router-id 1.1.1.1</p>
<p>Create a loopback interface</p>
<p>Highest loopback interface with the &ldquo;up&rdquo; status is used as the RID if the RID is not manually configured.</p>
<p>If no loopbacks are configured, and the RID is not manually configured, then the highest IP with an &ldquo;up&rdquo; ststus is used as the RID.</p>
<p>interface loopback 0.</p>
<p>ip address 1.1.1.1</p>
<p>Clear IP OSPF process</p>
<p>Restart the OSPF process. This can be used so RID configurations will take effect.</p>
<p>Change the cost of an interface</p>
<p>ip ospf cost 4</p>
<h2 id="change-the-reference-bandwidth">Change the reference bandwidth</h2>
<p>router ospf # auto-cost reference bandwidth 10000</p>
<h2 id="change-the-interface-bandwidth">Change the interface bandwidth</h2>
<p>bandwidth speed (kbps)</p>
<h2 id="ospf-load-balancing">OSPF Load balancing</h2>
<p>maximum paths 5</p>
<h2 id="set-ospf-network-to-point-to-point">Set Ospf Network to point-to-point</h2>
<p>Must be set on both routers</p>
<p>router1 (config-if) # ip ospf network point-to-point</p>
<h2 id="set-the-ospf-network-type-back-to-broadcast">Set the ospf network type back to broadcast</h2>
<p>ip ospf network broadcast</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="ospf-network-types-and-neighbors">OSPF Network Types and Neighbors</h1>

<p>This chapter covers the following exam topics:</p>
<p>3.0 IP Connectivity</p>
<p>3.4 Configure and verify single area OSPFv2</p>
<p>3.4.a Neighbor adjacencies</p>
<p>3.4.b Point-to-point</p>
<p>3.4.c Broadcast (DR/BDR selection)</p>
<p>3.4.d Router ID</p>
<p>OSPF Network Types</p>
<p>Network Type
Keyword
broadcast
point-to-point
Dynamically Discovers
Neighbors
Yes
Yes
Uses a
DR/BDR
Yes
No &ldquo;&gt;</p>
<p>The OSPF Broadcast Network Type</p>
<p>default to use network type broadcast</p>
<p>Attempt to discover neighbors by sending OSPF Hellos to the 224.0.0.5 multicast address (an address reserved for sending packets to all OSPF routers in the subnet)</p>
<p>Attempt to elect a DR and BDR on each subnet</p>
<p>On the interface with no other routers on the subnet (G0/1), become the DR</p>
<p>On the interface with three other routers on the subnet (G0/0), be either DR, BDR, or a DROther router</p>
<p>all discovered routers on the link should become neighbors and at least reach the 2-way state. For all neighbor relationships that include the DR and/or BDR, the neighbor relationship should further reach the full state. That section defined the term fully adjacent as a special term that refers to neighbors that reach this full state.</p>
<p>To see the setting, use the show ip ospf interface command, as shown in Example 21-4. The first highlighted item identifies the network type</p>
<p>Click here to view code image
RI* show ip ospf interface ge/ø
GigabitEthernete/e is up, line protocol is up
Internet Address 10.1.1.1/24, Area e, Attached via Interface Enabl
Process ID 1, Router ID 1.1.1.1, Network Type BROADCAST, cost: 1
Topology-MTID
e
Cost
1
Disabled
no
Shutdown
no
Topology Name
Base
Enabled by interface config, including secondary ip addresses
Transmit Delay is 1 sec, State DROTHER, Priority 1
Designated Router (ID) 4.4.4.4, Interface address 10.1.1.4
Backup Designated router (ID) 3.3.3.3, Interface address 10.1.1.3
Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit
oob-resync timeout 40
Hello due in ee:ee:ee
Supports Link-local Signaling (LLS)
Cisco NSF helper support enabled
IETF NSF helper support enabled
Index 1/1/1, flood queue length e
Next
Last flood scan length is e, maximum is 1
Last flood scan time is e msec, maximum is e
Nei ghhnr r Olin* i e R Ad-iarpnt- nei ghhnr c-nllnt-
msec &ldquo;&gt;</p>
<p>Adjacent with neighbor 4.4.4.4 (Designated Router)
Suppress hello for e neighbor(s) &ldquo;&gt;</p>
<p>ip ospf network broadcast interface subcommand would configure the setting.</p>
<p>Configuring to Influence the DR/BDR Election</p>
<p>If the DR fails, the BDR becomes the DR, and a new BDR is elected.</p>
<p>When a better router enters the subnet, no preemption of the existing DR or BDR occurs.</p>
<ul>
<li>Preemption: If a new router is configured to be the DR, it will not become the DR until the OSPF process is reset.</li>
</ul>
<p>As a result of these rules, while you can configure a router to be the best (highest priority) router to become the DR in an election, doing so only increases that router’s statistical chances of being the DR at a given point in time. If the router fails, other routers will become DR and BDR, and the best router will not be DR again until the current DR and BDR fail.</p>
<p>The highest OSPF interface priority: The highest value wins during an election, with values ranging from 0 to 255.</p>
<p>The highest OSPF Router ID: If the priority ties, the election chooses the router with the highest OSPF RID.</p>
<p>If an engineer preferred that R1 be the DR, the engineer could add the configuration in Example 21-5 to set R1’s interface priority to 99. (default of 1)</p>
<p>RI* configure terminal
Configuring from terminal, memory, or network [terminal]?
Enter configuration commands, one per line.
End with CNTL/Z.
RI (config)# interface gø,&lsquo;ø
RI (config-if)# ip ospf priority 99
RI (config-if)# AZ
RI* show ip ospf interface ge/ø I include Priority
Transmit Delay is 1 sec, State DROTHER, Priority 99
10.1.1.2
10.1.1.3
10.1.
1.4
RI* show ip
Neighbor ID
2.2. 2.2
3.3. 3.3
4.4.4.4
RI* show ip
Interface
Gie/l
Gie/e
ospf neighbor
pri
1
1
1
State
2WAY/DROTHER
FULL/BDR
FULL/DR
Dead Time
ospf
PID
1
1
interface brief
Area
e
e
Address/Mask
IP
le.1.11.1/24
le.1.1.1/24
Address
Cost
1
1
State
DR
DROTH
In
2/ &ldquo;&gt;</p>
<p>show that the DR and BDR have not changed at all</p>
<p>The OSPF Point-to-Point Network Type</p>
<p>(HDLC and PPP) do not support data-link broadcasts.</p>
<p>to use OSPF network type point-to-point. R2, on the other end of the WAN link, would need the same configuration command on its matching interface.</p>
<p>RI
Click here to view code image
RI* configure terminal
Enter configuration commands, one per line.
End with CNTL/Z.
RI (config)# interface ge/Ø/0
RI (config-if)# ip ospf network point-to-point
RI (config-if)#
RI* show ip ospf interface ge/0/0
GigabitEthernete/0/e is up, line protocol is up
Internet Address 10.1.12.1/24, Area e, Attached via Interface Enab
Process ID 1, Router ID 1.1.1.1, Network Type POINT TO POINT, cost
Topology-MT ID
e
Cost
4
Disabled
no
Shutdown
no
Topology Name
Base
Enabled by interface config, including secondary ip addresses
Transmit Delay is 1 sec, State POINT TO POINT
Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit
oob-resync timeout 40
Hello due in ee:ee:el
Supports Link-local Signaling (LLS)
Cisco NSF helper support enabled &ldquo;&gt;</p>
<p>Index 1/3/3, flood queue length e
Next
Last flood scan length is 1, maximum is 3
Last flood scan time is e msec, maximum is e msec
Neighbor Count is 1, Adjacent neighbor count is 1
Adjacent with neighbor 2.2.2.2
Suppress hello for e neighbor(s) &ldquo;&gt;</p>
<p>RI
Click here to view code image
show ip ospf neighbor
eighbor ID
.2.2.2
pri
e
State
FULL/
Dead Time
lines omitted for brevity
show ip ospf interface brief
nterface
ie/e/e
PID
1
Area
e
Address/Mask
IP
le.1.12.1/24
Address
10.1. 12.2
Cost
4
Interfac
GigabitE
State Nbrs F
1/1
P2P
lines omitted for brevity &ldquo;&gt;</p>
<p>OSPF Neighbor Relationships</p>
<p>They must have compatible values for several settings as listed in the Hellos exchanged between the two routers</p>
<p>Requirement
Interfaces must be in an up/up state.
Access control lists (ACL) must not filter
routing protocol messages.
Interfaces must be in the same subnet.
They must pass routing protocol neigh-
bor authentication (if configured).
Hello and hold/dead timers must match.
Router IDs (RID) must be unique.
They must be in the same area.
OSPF process must not be shut down.
Required
for OSPF
Yes
Yes
Yes
Yes
Yes
Yes
Yes
Yes
Neighbor Missing
if Incorrect
Yes
Yes
Yes
Yes
Yes
Yes
Yes
Yes &ldquo;&gt;</p>
<p>MTU setting.
Neighboring interfaces must use same
OSPF network type.
Yes
Yes
No
No &ldquo;&gt;</p>
<p>For items listing a “yes” in this column, if that item is configured incorrectly, the neighbor will not appear in lists of OSPF neighbors—for instance, with the show ip ospf neighbor command.</p>
<p>the last section (shaded) lists a couple of OSPF settings that give a different symptom when incorrect</p>
<p>for these two items, when incorrect, a router can list the other router as a neighbor, but the neighbor relationship does not work properly in that the routers do not exchange LSAs as they should</p>
<p>Requirement
Hello and dead timers must match.
They must be in the same area.
RIDs must be unique.
They must pass any neighbor
authentication.
OSPF process must not be shut down.
Best show Command
show ip ospf interface
show ip ospf interface brief
show ip ospf
show ip ospf interface
show ip ospf, show ip ospf
interface &ldquo;&gt;</p>
<p>10/40 is the default hello/dead timer</p>
<p>Finding Area Mismatches</p>
<p>Check the output of show running-config to look for</p>
<p>ip ospf process-id area area-number interface subcommands</p>
<p>network commands in OSPF configuration mode</p>
<p>Use the show ip ospf interface [brief] command to list the area number</p>
<p>Finding Duplicate OSPF Router IDs</p>
<p>both routers automatically generate a log message for the duplicate OSPF RID problem between R1 and R3;</p>
<p>show ip ospf commands on both R3 and R1 to easily list the RID on each router,</p>
<p>use the router-id 3.3.3.3 OSPF subcommand and use the EXEC mode command clear ip ospf process. (OSPF will not begin using a new RID value until the process restarts, either via command or reload.)</p>
<p>Finding OSPF Hello and Dead Timer Mismatches</p>
<p>Hello interval/timer: The per-interface timer that tells a router how often to send OSPF Hello messages on an interface.</p>
<p>Dead interval/timer: The per-interface timer that tells the router how long to wait without having received a Hello from a neighbor before believing that neighbor has failed. (Defaults to four times the Hello timer.)</p>
<p>Click here to view code image
RI* show ip ospf interface GO/O
GigabitEthernete/e is up, line protocol is up
Internet Address 10.1.1.1/24, Area e, Attached via Network Stateme
Process ID 1, Router ID 1.1.1.1, Network Type BROADCAST, cost: 1
Topology-MT ID Cost Disabled Shutdown
e
1
no
no
Topology Name
Base
Transmit Delay is 1 sec, State DR, Priority 1
Designated Router (ID) 1.1.1.1, Interface address 10.1.1.1
No backup designated router on this network
Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit
lines omitted for brevity &ldquo;&gt;</p>
<p>R4# show ip ospf interface Gi€/€
GigabitEthernete/e is up, line protocol is up
Internet Address le.1.1.4/24, Area e, Attached via Network Statem
Process ID 4, Router ID le.1.44.4, Network Type BROADCAST, cost:
Topology-MT ID Cost Disabled Shutdown
e
1
no
no
Topology Name
Base
Transmit Delay is 1 sec, State DR, Priority 1
Transmit Delay is 1 sec, State DR, Priority 1
Designated Router (ID) 10.1
No backup designated router
Timer intervals configured,
lines omitted for brevity
.44.4, Interface address 10.1.1.4
on this network
Hello 5, Dead 20, Wait 2e, Retransmit &ldquo;&gt;</p>
<p>Shutting Down the OSPF Process</p>
<p>When a routing protocol process is shut down, IOS does the following:</p>
<p>Brings down all neighbor relationships and clears the OSPF neighbor table</p>
<p>Clears the LSDB</p>
<p>Clears the IP routing table of any OSPF-learned routes</p>
<p>IOS retains all OSPF configuration.</p>
<p>IOS still lists all OSPF-enabled interfaces in the OSPF interface list (show ip ospf interface) but in a DOWN state.</p>
<p>Mismatched MTU Settings</p>
<p>defining the largest network layer packet that the router will forward out each interface.</p>
<p>default MTU size of 1500 bytes,</p>
<p>The ip mtu size interface subcommand defines the IPv4 MTU setting, and the ipv6 mtu size command sets the equivalent for IPv6 packets.</p>
<p>Symptom: they fail to exchange their LSDBs. Eventually, after trying and failing to exchange their LSDBs, the neighbor relationship also fails.</p>
<p>show interfaces command (which lists the IP MTU).</p>
<p>Mismatched OSPF Network Types</p>
<p>one router uses broadcast, and the other uses point-to-point, the following occurs:</p>
<p>The two routers become fully adjacent neighbors (that is, they reach a full state).</p>
<p>They exchange their LSDBs.</p>
<p>They do not add IP routes to the IP routing table.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="qos">QoS</h1>

<p>4.0 IP Services</p>
<p>4.7 Explain the forwarding per-hop behavior (PHB) for QoS such as classification, marking, queuing, congestion, policing, shaping</p>
<p>QoS defines these actions as per-hop behaviors (PHBs), which is a formal term to refer to actions other than storing and forwarding a message.</p>
<h2 id="qos-managing-bandwidth-delay-jitter-and-loss">QoS: Managing Bandwidth, Delay, Jitter, and Loss</h2>
<p>four characteristics of network traffic:</p>
<p>Bandwidth</p>
<p>refers to the speed of a link, in bits per second (bps)</p>
<p>helps to also think of bandwidth as the capacity of the link, in terms of how many bits can be sent over the link per second.</p>
<p>Delay</p>
<p>the time between sending one packet and that same packet arriving at the destination host</p>
<p>Round-trip delay</p>
<p>the time it takes to send one packet between two hosts and receive one back</p>
<p>Jitter</p>
<p>variation in one-way delay between consecutive packets sent by the same application</p>
<p>Loss</p>
<p>the number of lost messages, usually as a percentage of packets sent.</p>
<p>people think of loss as something caused by faulty cabling or poor WAN services. That is one cause. However, more loss happens because of the normal operation of the networking devices, in which the devices’ queues get too full, so the device has nowhere to put new packets, and it discards the packet.</p>
<p>Types of Traffic</p>
<p>Data Applications</p>
<p>HTTP GET
500 Packets
Figure 11-1 Concept of Disproportionate Packet/Byte Volumes with HTTP Traffic &ldquo;&gt;</p>
<p>Quality of Experience (QoE) - users’ perception of their use of the application on the network.</p>
<p>Voice and Video Applications</p>
<p>A flow is all the data moving from one application to another over the network, with one flow for each direction</p>
<p>For example, if you open a website and connect to a web server, the web page content that moves from the server to the client is one flow.</p>
<p>From a voice perspective, a phone call between two IP phones would create a flow for each direction</p>
<p>Step 1. The phone user makes a phone call and begins speaking.</p>
<p>Step 2. A chip called a codec processes (digitizes) the sound to create a binary code (160 bytes with the G.711 codec, for example) for a certain time period (usually 20 ms).</p>
<p>Step 3. The phone places the data into an IP packet.</p>
<p>Step 4. The phone sends the packet to the destination IP phone.</p>
<p>CODEC
Voice Bytes
IP UDP ATP Voice Bytes
Figure 11-2 Creating VolP Packets with an IP Phone and a G.711 Codec &ldquo;&gt;</p>
<p>guidelines for interactive voice:</p>
<p>Delay (one-way): 150 ms or less</p>
<p>Jitter: 30 ms or less</p>
<p>Loss: 1% or less</p>
<p>requirements for video</p>
<p>Bandwidth: 384 Kbps to 20+ Mbps</p>
<p>Delay (one-way): 200–400 ms</p>
<p>Jitter: 30–50 ms</p>
<p>Loss: 0.1%–1%</p>
<p>QoS as Mentioned in This Book</p>
<p>“Classification and Marking” is about the marking of packets and the definition of trust boundaries.</p>
<p>“Queuing” describes the scheduling of packets to give one type of packet priority over another.</p>
<p>“Shaping and Policing” explains these two tools together because they are often used on opposite ends of a link.</p>
<p>“Congestion Avoidance” addresses how to manage the packet loss that occurs when network devices get too busy.</p>
<p>Classification and Marking</p>
<p>a type of QoS tool that classifies packets based on their header contents then marks the message by changing some bits in specific header fields</p>
<p>Classification Basics</p>
<p>QoS tools sit in the path that packets take when being forwarded through a router or switch, much like the positioning of ACLs. Like ACLs, QoS tools are enabled on an interface. Also like ACLs, QoS tools are enabled for a direction: packets entering the interface (before the forwarding decision) or for messages exiting the interface (after the forwarding decision).</p>
<p>classification refers to the process of matching the fields in a message to make a choice to take some QoS action</p>
<p>QoS tools perform classification (matching of header fields) to decide which packets to take certain QoS actions against. Those actions include the other types of QoS tools discussed in this chapter, such as queuing, shaping, policing, and so on.</p>
<p>Forward
RI
Classify
Queue
Scheduling
(Prioritization)
Transmit
Figure 11-3 Big Idea: Classification for Queuing in a Router &ldquo;&gt;</p>
<p>Matching (Classification) Basics</p>
<p>Cisco and by RFCs, suggests doing complex matching early in the life of a packet and then marking the packet. Marking means that the QoS tool changes one or more header fields, setting a value in the header.</p>
<p>Differentiated Services Code Point (DSCP)</p>
<p>a 6-bit field in the IP header meant for QoS marking</p>
<p>Mark DSCP
at Ingress
SWI
Less Complex Matching
DSCP=X? CLASS 1.
DSCP=Y? CLASS 2.
WAN
SW2
F igure 11-4 Systematic Classification and Markingfor the Enterprise &ldquo;&gt;</p>
<p>Classification on Routers with ACLs and NBAR</p>
<p>many QoS tools support the ability to simply refer to an IP ACL, with this kind of logic:</p>
<p>For any packet matched by the ACL with a permit action, consider that packet a match for QoS, so do a particular QoS action.</p>
<p>All these fields are matchable for QoS classification.</p>
<p>IP Header
4
TCP Header
9
Miscellaneous
Header
Fields
4
Variable
2
2
16+
Rest
Protocol Header
6 (TCP) Checksum
6 = TCP
Source IP Destination IP
Address Address
Source Dest.
Options
of
Port Port
TCP
Figure 11-5 Classification with Five Fields Used by Extended ACLs &ldquo;&gt;</p>
<p>not every classification can be easily made by matching with an ACL. In more challenging cases, Cisco Network Based Application Recognition (NBAR) can be used. NBAR is basically in its second major version, called NBAR2, or next-generation NBAR. In short, NBAR2 matches packets for classification in a large variety of ways that are very useful for QoS.</p>
<p>NBAR2 looks far beyond what an ACL can examine in a message</p>
<p>Cisco also organizes what NBAR can match in ways that make it easy to separate the traffic into different classes.</p>
<p>you might classify WebEx traffic and give it a unique DSCP marking. NBAR provides easy built-in matching ability for WebEx, plus more than 1000 different subcategories of applications.</p>
<p>NBAR refers to this idea of defining the characteristics of different applications as application signatures.)</p>
<p>Rl#(config)# class-map matchingexample
RI (config-cmap)# match protocol attribute category voice-and-video ?
! output heavily edited for length
amazon-instant-video
cisco-ip-camera
cisco-phone
espn-video
facetime
! Output snipped.
VOD service by Amazon
Cisco video surveillance camera
Cisco IP Phones and PC-based Unified Com
ESPN related websites and mobile applica
Facetime video calling software &ldquo;&gt;</p>
<p>Marking IP DSCP and Ethernet CoS</p>
<p>example plan</p>
<p>Classify all voice payload traffic that is used for business purposes as IP DSCP EF and CoS 5.</p>
<p>Classify all video conferencing and other interactive video for business purposes as IP DSCP AF41 and CoS 4.</p>
<p>Classify all business-critical data application traffic as IP DSCP AF21 and CoS 2</p>
<p>Marking the IP Header</p>
<p>Marking a QoS field in the IP header works well with QoS because the IP header exists for the entire trip from the source host to the destination host.</p>
<p>IPv4 defines a Type of Service (ToS) byte in the IPv4 header, as shown in Figure 11-6. The original RFC defined a 3-bit IP Precedence (IPP) field for QoS marking. That field gave us eight separate values—binary 000, 001, 010, and so on, through 111—which when converted to decimal are decimals 0 through 7.</p>
<p>IPP
Type of
Service
DSCP
RFC 2474
Unused
ECN
Old Use
IP Header
(Rest of IP Header&hellip;)
Current Use
RFC 3168
Figure 11-6 IP Precedence and Differentiated Services Code Point Fields &ldquo;&gt;</p>
<p>Those last 5 bits of the ToS byte per RFC 791 were mostly defined for some purpose but were not used in practice to any significant extent.</p>
<p>DSCP increased the number of marking bits to 6 bits, allowing for 64 unique values that can be marked. The DiffServ RFCs, which became RFCs back in the late 1990s, have become accepted as the most common method to use when doing QoS, and using the DSCP field for marking has become quite common.</p>
<p>IPv6 has a similar field to mark as well. The 6-bit field also goes by the name DSCP, with the byte in the IPv6 header being called the IPv6 Traffic Class byte.</p>
<p>Marking the Ethernet 802.1Q Header</p>
<p>marking field exists in the 802.1Q header</p>
<p>It goes by two different names: Class of Service, or CoS, and Priority Code Point, or PCP.</p>
<p>sits in the third byte of the 4-byte 802.1Q header, as a 3-bit field, supplying eight possible values to mark (see Figure 11-7). It goes by two different names: Class of Service, or CoS, and Priority Code Point, or PCP.</p>
<p>Ethernet
8021 Q
Type
Data
Trailer
Class of Service (COS) (3 Bits)
Priority Code Point (PCP)
Figure 11-7 Class ofService Field in 802.1Q/p Header &ldquo;&gt;</p>
<p>802.1Q header is not included in all Ethernet frames</p>
<p>only exists when 802.1Q trunking is used on a link</p>
<p>only for QoS features enabled on interfaces that use trunking, as shown</p>
<p>WAN
SWI
Trunk
SW2
can Use COS
Figure 11-8 Useful Life of COS Marking &ldquo;&gt;</p>
<p>Other Marking Fields</p>
<p>Field Name
DSCP
IPP
cos
TID
EXP
Header(s)
IPv4, IPv6
IPv4, IPv6
802.1Q
802.11
MPLS Label
Length (bits)
6
3
3
3
3
Where Used
End-to-end packet
End-to-end packet
Over VLAN trunk
over Wi-Fi
over MPLS WAN &ldquo;&gt;</p>
<p>Defining Trust Boundaries</p>
<p>most voice traffic is marked with a DSCP called Expedited Forwarding (EF), which has a decimal value of 46</p>
<p>trust boundary</p>
<p>the point in the path of a packet flowing through the network at which the networking devices can trust the current QoS markings</p>
<p>Set DSCP and
COS Inbound
SWI
Trust Boundary
WAN
SW2
Figure 11-9 Trusting Devices—PC &ldquo;&gt;</p>
<p>when the access layer includes an IP Phone, the phone is typically the trust boundary</p>
<p>IP Phones can set the CoS and DSCP fields of the messages created by the phone, as well as those forwarded from the PC through the phone. The specific marking values are actually configured on the attached access switch</p>
<p>Set Phone DSCP and COS
SWI
Trust Boundary
WAN
SW2
Figure 11-10 Trusting Devices—IP Phone &ldquo;&gt;</p>
<p>DiffServ Suggested Marking Values</p>
<p>DiffServ architecture as defined originally by RFC 2475</p>
<p>three sets of DSCP values as used in DiffServ.</p>
<p>Expedited Forwarding (EF)</p>
<p>Expedited Forwarding (EF) DSCP value—a single value</p>
<p>use for packets that need low latency (delay), low jitter, and low loss.</p>
<p>decimal 46</p>
<p>Most often QoS plans use EF to mark voice payload packets. With voice calls, some packets carry voice payload, and other packets carry call signaling messages. Call signaling messages set up (create) the voice call between two devices, and they do not require low delay, jitter, and loss.</p>
<p>By default, Cisco IP Phones mark voice pay-load with EF, and mark voice signaling packets sent by the phone with another value called CS3.</p>
<p>Assured Forwarding (AF)</p>
<p>The Assured Forwarding (AF) DiffServ RFC (2597) defines a set of 12 DSCP values meant to be used in concert with each other</p>
<p>defines the concept of four separate queues in a queuing system. Additionally, it defines three levels of drop priority within each queue for use with congestion avoidance tools. With four queues, and three drop priority classes per queue, you need 12 different DSCP markings, one for each combination of queue and drop priority. (Queuing and congestion avoidance mechanisms are discussed later in this chapter.)</p>
<p>The text names follow a format of AFXY, with X referring to the queue (1 through 4) and Y referring to the drop priority (1 through 3).</p>
<p>Best Queue
Worst Queue
AF41
(34)
AF31
(26)
AF21
(18)
AFII
(10)
AF42
(36)
AF32
(28)
AF22
(20)
AF12
(12)
AF43
(38)
AF33
(30)
AF23
(22)
AF13
14)
11-11 Differentiated Services Assured Forwarding Values and Meaning &ldquo;&gt;</p>
<p>Class Selector (CS)</p>
<p>eight DSCP values for backward compatibility with IPP values.</p>
<p>The DSCP values have the same first 3 bits as the IPP field, and with binary 0s for the last 3 bits, as shown on the left side of the figure. CSx represents the text names, where x is the matching IPP value (0 through 7).</p>
<p>o
1
2
3
4
5
6
7
CSO
CSI
CS2
CS3
CS4
CS5
CS6
CS7
Decimal
DSCP
16
24
32
40
56
Figure 11-12 Class Selector &ldquo;&gt;</p>
<p>Guidelines for DSCP Marking Values</p>
<p>how all devices should mark data</p>
<p>DSCP EF: Voice payload</p>
<p>AF4x: Interactive video (for example, videoconferencing)</p>
<p>AF3x: Streaming video</p>
<p>AF2x: High priority (low latency) data</p>
<p>CS0: Standard data</p>
<p>Queuing</p>
<p>the QoS toolset for managing the queues that hold packets while they wait their turn to exit an interface</p>
<p>Router Internals
ingress
services
Output Queue
Forwarding
Transmit
Figure 11-13 Output Queuing in a Router: Last Output Action Before Transmission &ldquo;&gt;</p>
<p>To use multiple queues, the queuing system needs a classifier function to choose which packets are placed into which queue</p>
<p>The queuing system needs a scheduler as well, to decide which message to take next when the interface becomes available</p>
<p>Queues
Scheduler
Transmit
Figure 11-14 Queuing Components &ldquo;&gt;</p>
<p>Prioritization refers to the concept of giving priority to one queue over another</p>
<p>Round-Robin Scheduling (Prioritization) (Two Types)</p>
<p>weighting</p>
<p>the scheduler takes a different number of packets (or bytes) from each queue, giving more preference to one queue over another.</p>
<p>Class-Based Weighted Fair Queuing (CBWFQ)</p>
<p>Each class receives at least the amount of bandwidth configured during times of congestion, but maybe more</p>
<p>Queues
02
03
Scheduler
20%
30%
50%
Round Robin
Transmit
Figure 11-15 CBWFQ Round-Robin Scheduling &ldquo;&gt;</p>
<p>Low Latency Queuing</p>
<p>Bandwidth/call
30-320 Kbps
One-way Delay (max) Jitter (max)
Loss (max)
150 ms
30 ms &ldquo;&gt;</p>
<p>Queues
data 2
default
Scheduler
50%
10%
Round Robin
Transmit
Figure 11-16 Round Robin Not Goodfor Voice Delay (Latency) and Jitter &ldquo;&gt;</p>
<p>tells the scheduler to treat one or more queues as special priority queues</p>
<p>Scheduler
LLQ
voice
data 1
data 2
default
—Always Next
Transmit
Round Robin
Figure 11-17 LLQ Always Schedules Voice Packet Next &ldquo;&gt;</p>
<p>if the speed of the interface is X bits per second, but more than X bits per second come into the voice queue? The scheduler never services the other queues (called queue starvation).</p>
<p>limit the amount of traffic placed into the priority queue, using a feature called policing</p>
<p>a cap on the bandwidth used by the priority queue</p>
<p>Call Admission Control (CAC) tools</p>
<p>Find a way to limit the amount of voice and video that the network routes out this link, so that the policer never discards any of the traffic</p>
<p>CAC tools did not get a mention in the exam topics, so this chapter leaves those tools at a brief mention</p>
<p>A Prioritization Strategy for Data, Voice, and Video</p>
<p>approach queuing in their QoS plans:</p>
<p>Key Topic.</p>
<p>Use a round-robin queuing method like CBWFQ for data classes and for noninteractive voice and video.</p>
<p>If faced with too little bandwidth compared to the typical amount of traffic, give data classes that support business-critical applications much more guaranteed bandwidth than is given to less important data classes.</p>
<p>Use a priority queue with LLQ scheduling for interactive voice and video, to achieve low delay, jitter, and loss.</p>
<p>Put voice in a separate queue from video so that the policing function applies separately to each.</p>
<p>Define enough bandwidth for each priority queue so that the built-in policer should not discard any messages from the priority queues.</p>
<p>Use Call Admission Control (CAC) tools to avoid adding too much voice or video to the network, which would trigger the policer function.</p>
<h1 id="shaping-and-policing">Shaping and Policing</h1>
<p>not found in as many locations in a typical enterprise</p>
<p>often used at the WAN edge in an enterprise network design.</p>
<p>monitor the bit rate of the combined messages that flow through a device.</p>
<p>notes each packet that passes and measures the number of bits per second over time</p>
<p>attempt to keep the bit rate at or below the configured speed</p>
<p>policers discard packets, and shapers hold packets in queues to delay the packets.</p>
<p>Does this next packet push the measured rate past the configured shaping rate or policing rate?</p>
<p>If no:</p>
<p>Let the packet keep moving through the normal path and do nothing extra to the packet.</p>
<p>If yes:</p>
<p>If shaping, delay the message by queuing it.</p>
<p>If policing, either discard the message or mark it differently.</p>
<p>policing, which discards or re-marks messages that exceed the policing rate, followed by shaping, which slows down messages that exceed the shaping rate.</p>
<h2 id="policing">Policing</h2>
<p>Traffic Rate
Outgoing Measured
Traffic Rate
Burst
Policing
Rate
Figure 11-18 Effect ofa Policer and Shaper on an Offered Traffic Load &ldquo;&gt;</p>
<p>Policers allow for a burst beyond the policing rate for a short time, after a period of low activity.</p>
<p>Where to Use Policing</p>
<p>Policing makes sense only in certain cases, and as a general tool, it can be best used at the edge between two networks.</p>
<p>200 Mb s CIR
sw
Police to
200 Mbps
GO/2
GO/2
sw
Police to
200 Mbps
Figure 11-19 Ethernet WAN: Link Speed Versus CIR &ldquo;&gt;</p>
<p>a 200-Mbps committed information rate (CIR).</p>
<p>the SP providing the WAN service agrees to allow the enterprise to send 200 Mbps of traffic in each direction. However, remember that the enterprise routers transmit the data at the speed of the access link, or 1 Gbps in this case.</p>
<p>The SP can police incoming packets, setting the policing rate to match the CIR that the customer chooses for that link.</p>
<p>Policers can also re-mark packets.</p>
<p>SP could mark the messages with a new marking value, with this strategy:</p>
<p>Re-mark packets that exceed the policing rate, but let them into the SP’s network.</p>
<p>If other SP network devices are experiencing congestion when they process the packet, the different marking means that device can discard the packet. However…</p>
<p>…if no other SP network devices are experiencing congestion when forwarding that re-marked packet, it gets through the SP network anyway.</p>
<p>SP can treat their customers a little better by discarding less traffic, while still protecting the SP’s network during times of stress.</p>
<p>key features of policing:</p>
<p>Key Topic.</p>
<p>It measures the traffic rate over time for comparison to the configured policing rate.</p>
<p>It allows for a burst of data after a period of inactivity.</p>
<p>It is enabled on an interface, in either direction, but typically at ingress.</p>
<p>It can discard excess messages but can also re-mark the message so that it is a candidate for more aggressive discard later in its journey.</p>
<h2 id="shaping">Shaping</h2>
<p>Use a shaper to slow down the traffic</p>
<p>shaping before sending data to an SP that is policing—is one of the typical uses of a shaper</p>
<p>slows messages down by queuing the messages.</p>
<p>then services the shaping queues, but not based on when the physical interface is available</p>
<p>schedules messages from the shaping queues based on the shaping rate</p>
<p>the shaper queues packets so that the sending rate through the shaper does not exceed the shaping rate; and then output queuing works as normal, if needed.</p>
<p>Forwarding
Shaper
LLQ
At
Shape
Rate
Output
Queuing
Transmit
Figure 11-20 Shaping Queues: Scheduling with LLQ and CBWFQ &ldquo;&gt;</p>
<p>apply the round-robin and priority queuing features of CBWFQ and LLQ, respectively, to the shaping queues</p>
<h3 id="setting-a-good-shaping-time-interval-for-voice-and-video">Setting a Good Shaping Time Interval for Voice and Video</h3>
<p>you can (and should) configure a shaper’s setting that changes the internal operation of the shaper, which then reduces the delay and jitter caused to voice and video traffic.</p>
<p>A shaper’s time interval refers to its internal logic and how a shaper averages, over time, sending at a particular rate</p>
<p>Because the interface transmits bits at 1 Gbps, it takes just .2 seconds, or 200 ms, to send all 200 million bits. Then the shaper must wait for the rest of the time interval, another 800 ms, before beginning the next time interval.</p>
<p>Send:
200 ms
200
Million
Bits
Sent
wait: 800 ms
1 Second Тле lnterval
Send:
200 ms
200
Million
wait: 800 ms
Bits
Sent
Т: 1 sec
Т: 2 sec
Figure 11-21 Опе Second (1000 ms) Shaping Time Intewal, Shaping at 20 Percent ofLine Rate &ldquo;&gt;</p>
<p>configure a short time interval so there is less wait time</p>
<p>Tc = 1 second (1000 ms): Send at 1 Gbps for 200 ms, rest for 800 ms</p>
<p>Tc = .1 second (100 ms): Send at 1 Gbps for 20 ms, rest for 80 ms</p>
<p>Tc = .01 second (10 ms): Send at 1 Gbps for 2 ms, rest for 8 ms</p>
<p>When shaping, use a short time interval. By recommendation, use a 10-ms time interval to support voice and video.</p>
<p>key features of shapers:</p>
<p>Key Topic.</p>
<p>Shapers measure the traffic rate over time for comparison to the configured shaping rate.</p>
<p>Shapers allow for bursting after a period of inactivity.</p>
<p>Shapers are enabled on an interface for egress (outgoing packets).</p>
<p>Shapers slow down packets by queuing them and over time releasing them from the queue at the shaping rate.</p>
<p>Shapers use queuing tools to create and schedule the shaping queues, which is very important for the same reasons discussed for output queuing.</p>
<h2 id="congestion-avoidance">Congestion Avoidance</h2>
<p>attempts to reduce overall packet loss by preemptively discarding some packets used in TCP connections</p>
<p>TCP Windowing Basics</p>
<p>tail drop</p>
<p>one queue being totally full. Any new packets that arrive for that queue right now will be dropped because there is no room at the tail of the queue (tail drop).</p>
<p>@Medium Congestion
Tail Drop
Much Congestion
Tail Drop
Figure 11-22 Tail Drop Concepts with Three Different Scenarios &ldquo;&gt;</p>
<p>Congestion Avoidance Tools</p>
<p>discard some TCP segments before the queues fill, hoping that enough TCP connections will slow down, reducing congestion, and avoiding tail drop</p>
<p>monitor the average queue depth over time, triggering more severe actions the deeper the queue</p>
<p>the queue depth passes the maximum threshold, the tool drops all packets, in an action called full drop.</p>
<p>congestion avoidance tools can classify messages to treat some packets better than others</p>
<p>Maximum Threshold
% Drops
Minimum Threshold
NO Drops
Queue Empty
Figure 11-23 Mechanisms ofCongestion Avoidance &ldquo;&gt;</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="rapid-spanning-tree-rstp">Rapid Spanning Tree (RSTP)</h1>

<p>2.0 Network Access</p>
<p>2.4 Configure and verify (Layer 2/Layer 3) EtherChannel (LACP)</p>
<p>2.5 Describe the need for and basic operations of Rapid PVST+ Spanning Tree Protocol and identify basic operations</p>
<p>2.5.a Root port, root bridge (primary/secondary), and other port names</p>
<p>2.5.b Port states (forwarding/blocking)</p>
<p>2.5.c PortFast benefits</p>
<p>Most network engineers make the distribution layer switches be the root.</p>
<p>STP Modes and Standards</p>
<p>Three options to configure on the spanning-tree mode command, which tells the switch which type of STP to use</p>
<p> the switches do not support STP or RSTP with the single tree (CST). They can use either the Cisco-proprietary and STP-based PVST+, Cisco-proprietary and RSTP-based RPVST+, or the IEEE standard MSTP.</p>
<p>MSTP allows the definition of as many instances (multiple spanning tree instances, or MSTIs) as chosen by the network designer but does not require one per VLAN.</p>
<p>STP and MSTP now exist as part of the 802.1Q standard, which defines VLANs and VLAN trunking.</p>
<p>The revised rules divide the original priority field into two separate fields, as shown in Figure 10-4: a 4-bit priority field and a 12-bit subfield called the system ID extension (which represents the VLAN ID</p>
<p>Cisco switches let you configure the BID, but only the priority part.</p>
<p>The switch fills in its universal (burned-in) MAC address as the system ID. It also plugs in the VLAN ID of a VLAN in the 12-bit system ID extension field; you cannot change that behavior either. The only part configurable by the network engineer is the 4-bit priority field.</p>
<p>the configuration command (spanning-tree vlan vlan-id priority x) requires a decimal number between 0 and 65,535. But not just any number in that range will suffice; it must be a multiple of 4096, as emphasized in the help text shown in Example 10-2.</p>
<p>#spanning-tree vlan x root primary (on the switch that should be primary)</p>
<p>#spanning-tree vlan x root secondary (on the switch that should be secondary)</p>
<p>These two commands cause the switch to make a choice of priority value but then store the chosen priority value in the spanning-tree vlan x priority value command. The command with root primary or root secondary does not appear in the configuration. When configuring root primary, the switch looks at the priority of the current root switch and chooses either (a) 24,576 or (b) 4096 less than the current root’s priority (if the current root’s priority is 24,576 or less) to the configuration instead. When configuring, root secondary always results in that switch using a priority of 28,672, with the assumption that the value will be less than other switches that use the default of 32,768, and higher than any switch configured as root primary.</p>
<p>How Switches Use the Priority and System ID Extension</p>
<p>Cisco Catalyst switches configure the priority value using a number that represents a 16-bit value; however, the system ID extension exists as the low-order 12 bits of that same number.</p>
<p>When the switch builds its BID to use for RSTP in a VLAN, it must combine the configured priority with the VLAN ID of that VLAN.</p>
<p>the configured priority results in a 16-bit priority that always ends with 12 binary 0s.</p>
<p>Root Switch: 24,576 (priority) + 9 (VLAN ID) = 24585</p>
<p>Local Switch: 32,768 (priority) + 9 (VLAN ID) = 32777</p>
<p>RSTP Methods to Support Multiple Spanning Trees</p>
<p>RSTP creates one tree—the Common Spanning Tree (CST)—while RPVST+ creates one tree for each and every VLAN.</p>
<p>RSTP sends one set of RSTP messages (BPDUs) in the network, no matter the number of VLANs, while RPVST+ sends one set of messages per VLAN.</p>
<p>RSTP and RPVST+ use different destination MAC addresses: RSTP with multicast address 0180.C200.0000 (an address defined in the IEEE standard), and RPVST+ with multicast address 0100.0CCC.CCCD (an address chosen by Cisco).</p>
<p>When transmitting messages on VLAN trunks, RSTP sends the messages in the native VLAN with no VLAN header/tag. RPVST+ sends each VLAN’s messages inside that VLAN—for instance, BPDUs about VLAN 9 have an 802.1Q header that lists VLAN 9.</p>
<p>RPVST+ adds an extra type-length value (TLV) to the BPDU that identifies the VLAN ID, while RSTP does not (because it does not need to, as RSTP ignores VLANs.)</p>
<p>Both view the 16-bit priority as having a 12-bit System ID Extension, with RSTP setting the value to 0000.0000.0000, meaning “no VLAN,” while RPVST+ uses the VLAN ID.</p>
<p>Other RSTP Configuration Options</p>
<p>Switch Priority: The global command spanning-tree vlan x priority y lets an engineer set the switch’s priority in that VLAN.</p>
<p>Primary and Secondary Root Switches: The global command spanning-tree vlan x root primary | secondary also lets you set the priority, but the switch decides on a value to make that switch likely to be the primary root switch (the root) or the secondary root switch (the switch that becomes root if the primary fails).</p>
<p>Port Costs: The interface subcommand spanning-tree [vlan x] cost y lets an engineer set the switch’s STP/RSTP cost on that port, either for all VLANs or for a specific VLAN on that port. Changing those costs then changes the root cost for some switches, which impacts the choice of root ports and designated ports.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="resources-i-used-to-pass-ccna">Resources I used to Pass CCNA</h1>

<p><a href="#R-image-3a7e6150433fe5e63a42405c7ce576a7" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/images/resourcesforccna.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3a7e6150433fe5e63a42405c7ce576a7"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/images/resourcesforccna.png"></a></p>
<p>There are a lot of great CCNA resources out there. This list does not include all of them. Only the ones that I personally used to pass the CCNA 200-301 exam.</p>
<p>Materials for CCNA are generally separated into 5 categories:</p>
<ul>
<li>Books</li>
<li>Video courses</li>
<li>Labs</li>
<li>Practice test</li>
<li>Flashcards</li>
</ul>
<h2 id="books">Books</h2>
<h3 id="wendell-odom-ocg-official-cert-guide-library">Wendell Odom OCG Official cert guide library</h3>
<p>To me, this is the king of CCNA study materials. Some people do not like reading but this will give you more depth than any other resource on this list. <a href="https://www.amazon.com/CCNA-200-301-Official-Guide-Library/dp/1587147149/ref=sr_1_1?keywords=ccna+200-301&sr=8-1" rel="external" target="_blank">Link.</a></p>
<h3 id="todd-lammle-books">Todd Lammle Books</h3>
<p>Yes, I read both the OCG and Todd Lammle books cover to cover. No, I do not recommend doing this. Todd has a great way of adding humor into networking. If you need to build up your networking from the ground up. These books are great. <a href="https://www.amazon.com/Cisco-CCNA-Certification-Set-200-301/dp/1119677610/ref=sr_1_8?keywords=ccna+200-301&sr=8-8&ufe=app_do%3Aamzn1.fos.18ed3cb5-28d5-4975-8bc7-93deae8f9840" rel="external" target="_blank">Link.</a></p>
<h2 id="video-courses">Video Courses</h2>
<h3 id="cbt-nuggets">CBT Nuggets</h3>
<p>Jeremy Ciara makes learning networking so much fun. This was a great course but is not enough for you to pass the exam on it&rsquo;s own. Also, a CBT nuggets monthly subscription will set you back $59 per month. <a href="https://www.cbtnuggets.com/it-training/cisco/ccna" rel="external" target="_blank">Link.</a></p>
<h3 id="jeremys-it-lab">Jeremy&rsquo;s IT Lab</h3>
<p>Jermey&rsquo;s IT lab course was the most informative for me. Jeremy is really great at explaining the more complex topics. Jeremy&rsquo;s course also includes Packet Tracer labs and and in depth Anki flashcard deck for free. <a href="https://www.youtube.com/watch?v=H8W9oMNSuwo&list=PLxbwE86jKRgMpuZuLBivzlM8s2Dk5lXBQ" rel="external" target="_blank">Link.</a></p>
<h2 id="labs">Labs</h2>
<h3 id="david-bombals-packet-tracer-labs">David Bombal&rsquo;s Packet Tracer Labs</h3>
<p>These labs will really make you think. Although they do steer off the exam objectives a bit. <a href="https://courses.davidbombal.com/p/cisco-ccna-packet-tracer-ultimate-labs-ccna-exam-prep-labs" rel="external" target="_blank">Link.</a></p>
<h3 id="jeremys-it-labs">Jeremy&rsquo;s IT labs</h3>
<p>These were my favorite labs by far. Very easy to set up with clear instructions and video explanations.  <a href="https://www.youtube.com/watch?v=H8W9oMNSuwo&list=PLxbwE86jKRgMpuZuLBivzlM8s2Dk5lXBQ" rel="external" target="_blank">Link.</a></p>
<h2 id="practice-test">Practice test</h2>
<h3 id="boson-exsim">Boson Exsim</h3>
<p>I can&rsquo;t stress this enough. if there is one resource that you invest some money into. it&rsquo;s the Boson practice exams. This is a test simulator that is very close to what the actual test will be like. Exsim comes with 3 exams.</p>
<p>After taking one of these practice tests you will get a breakdown of your scores per category. You will also get to go through all of your questions and see detailed explantations for why each answer is right or wrong.</p>
<p>These practice exams were crucial for me to understand where my knowledge gaps were. <a href="https://www.boson.com/practice-exam/200-301-cisco-ccna-practice-exam" rel="external" target="_blank">Link.</a></p>
<h2 id="subnettingpracticecom">Subnettingpractice.com</h2>
<p>You can learn subnetting pretty good. Then forget some of the steps a month later and have to learn all over again. It was very helpful to go over some of these subnetting questions once in a while. <a href="https://subnettingpractice.com/" rel="external" target="_blank">Link.</a></p>
<h2 id="flashcards">Flashcards</h2>
<h3 id="anki-deck">Anki Deck</h3>
<p>These are the only flashcards I used. It is very nice not to have to create your own flashcards. Having the Anki app on your phone is very convenient. You can study whenever you have a few minutes of downtime.</p>
<p>Anki also used spaced-repetition. It will give you harder flashcards more often based on how you rate their difficulty.</p>
<p>This particular deck goes along with the OCG. You can filter by chapter and add more as you get through the book.</p>
<p>I will be using Anki flashcards for every exam in the future. <a href="https://ankiweb.net/shared/info/591991787" rel="external" target="_blank">Link.</a></p>
<h2 id="my-top-3">My Top 3</h2>
<p>Be careful not to use too many resources. You may get a bit overwhelmed. Especially if this is your first certification like it was for me. You will be building study habits and learning how to read questions correctly. So focus on quality over quantity.</p>
<p>If I had to study for the CCNA again, I would use these three resources:</p>
<ul>
<li>OCG</li>
<li>Boson Exsim</li>
<li>Anki Flashcards</li>
</ul>
<p>If you like these posts, please let me know so i can keep making more like them!</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="router-operation">Router Operation</h1>

<p>The configuration of IP addresses differs in some ways, with switches using a VLAN interface and routers using an IP address configured on each working interface.</p>
<p>switches do not have auxiliary ports.</p>
<p>Layer 2 switches support the show mac address-table command, while Cisco routers do not.</p>
<p>routers support the show ip route command, while Cisco Layer 2 switches do not.</p>
<p>Layer 2 switches use the show interfaces status command to list one line of output per interface (and routers do not)</p>
<p>show protocols command. This command confirms the state of each of the three R1 interfaces in Figure 15-6 and the IP address and mask configured on those same interfaces.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="routing-in-the-lan">Routing in the LAN</h1>

<p>A. Use the sdm prefer lanbase-routing command (or similar) in global configuration mode to change the switch forwarding ASIC settings to make space for IPv4 routes at the next reload of the switch.</p>
<p>B. Use the reload EXEC command in enable mode to reload (reboot) the switch to pick up the new sdm prefer command setting.</p>
<p>C. Once reloaded, use the ip routing command in global configuration mode to enable the IPv4 routing function in IOS software and to enable key commands like show ip route.</p>
<p>if you then enabled OSPF on the Layer 3 switch, the configuration and verification would work the same as it does on a router, as discussed in Chapter 20, “Implementing OSPF.” The routes that IOS adds to the Layer 3 switch’s IP routing table would list the VLAN interfaces as outgoing interfaces.</p>
<p>Troubleshooting Routing with SVIs</p>
<p>look to those first few configuration commands listed in the configuration checklist found in the earlier section “Configuring Routing Using Switch SVIs.” Those commands are sdm prefer (followed by a reload) and then ip routing (after the reload).</p>
<p>The sdm prefer command changes how the switch forwarding chips allocate memory for different forwarding tables, and changes to those tables require a reload of the switch. By default, many access switches that support Layer 3 switching still have an SDM default that does not allocate space for an IP routing table. Once changed and reloaded, the ip routing command then enables IPv4 routing in IOS software. Both are necessary before some Cisco switches will act as a Layer 3 switch.</p>
<p>Scenario 1: The last access interface in VLAN 10 is shut down (F0/1), so IOS shuts down the VLAN 10 interface.</p>
<p>Scenario 2: VLAN 20 (not VLAN interface 20, but VLAN 20) is deleted, which results in IOS then bringing down (not shutting down) the VLAN 20 interface.</p>
<p>Scenario 3: VLAN 30 (not VLAN interface 30, but VLAN 30) is shut down, which results in IOS then bringing down (not shutting down) the VLAN 30 interface.</p>
<p>VLAN Routing with Layer 3 Switch Routed Ports</p>
<p>On a routed port, the switch does not perform Layer 2 switching logic on that frame. Instead, frames arriving in a routed port trigger the Layer 3 routing logic, including</p>
<p>Stripping off the incoming frame’s Ethernet data-link header/trailer</p>
<p>Making a Layer 3 forwarding decision by comparing the destination IP address to the IP routing table</p>
<p>Adding a new Ethernet data-link header/trailer to the packet</p>
<p>Forwarding the packet, encapsulated in a new frame</p>
<p>The exam topics do not mention routed interfaces specifically, but the exam topics do mention L3 EtherChannels, meaning Layer 3 EtherChannels.</p>
<p>Implementing Routed Interfaces on Switches</p>
<p>Enabling a switch interface to be a routed interface instead of a switched interface is simple: just use the no switchport subcommand on the physical interface.</p>
<p>To make the port stop acting like a switch port and instead act like a router port, use the no switchport command on the interface.</p>
<p>Once the port is acting as a routed port, think of it like a router interface</p>
<p>the routed interface will show up differently in command output in the switch. In particular, for an interface configured as a routed port with an IP address, like interface GigabitEthernet0/1 in the previous example:</p>
<p>Key Topic.</p>
<p>show interfaces: Similar to the same command on a router, the output will display the IP address of the interface. (Conversely, for switch ports, this command does not list an IP address.)</p>
<p>show interfaces status: Under the “VLAN” heading, instead of listing the access VLAN or the word trunk, the output lists the word routed, meaning that it is a routed port.</p>
<p>show ip route: Lists the routed port as an outgoing interface in routes.</p>
<p>show interfaces type number switchport: If a routed port, the output is short and confirms that the port is not a switch port. (If the port is a Layer 2 port, this command lists many configuration and status details.)</p>
<p> All the ports that are links directly between the Layer 3 switches can be routed interfaces.</p>
<p>Implementing Layer 3 EtherChannels</p>
<p>each pair of switches has one routing protocol neighbor relationship with the neighbor, and not two. Each switch learns one route per destination per pair of links, and not two. IOS then balances the traffic, often with better balancing than the balancing that occurs with the use of multiple IP routes to the same subnet.</p>
<p>Step 1. Configure the physical interfaces as follows, in interface configuration mode:</p>
<p>A. Add the channel-group number mode on command to add it to the channel. Use the same number for all physical interfaces on the same switch, but the number used (the channel-group number) can differ on the two neighboring switches.</p>
<p>B. Add the no switchport command to make each physical port a routed port.</p>
<p>Step 2. Configure the PortChannel interface:</p>
<p>A. Use the interface port-channel number command to move to port-channel configuration mode for the same channel number configured on the physical interfaces.</p>
<p>B. Add the no switchport command to make sure that the port-channel interface acts as a routed port. (IOS may have already added this command.)</p>
<p>C. Use the ip address address mask command to configure the address and mask.</p>
<p>Cisco uses the term EtherChannel in concepts discussed in this section and then uses the term PortChannel, with command keyword port-channel, when verifying and configuring EtherChannels.</p>
<p>although the physical interfaces and PortChannel interface are all routed ports, the IP address should be placed on the PortChannel interface only. In fact, when the no switchport command is configured on an interface, IOS adds the no ip address command to the interface.</p>
<p>Troubleshooting Layer 3 EtherChannels</p>
<p>look at the configuration of the channel-group command, which enables an interface for an EtherChannel. Second, you should check a list of settings that must match on the interfaces for a Layer 3 EtherChannel to work correctly.</p>
<p>As for the channel-group interface subcommand, this command can enable EtherChannel statically or dynamically. If dynamic, this command’s keywords imply either Port Aggregation Protocol (PAgP) or Link Aggregation Control Protocol (LACP) as the protocol to negotiate between the neighboring switches whether they put the link into the EtherChannel.</p>
<p>no switchport: The PortChannel interface must be configured with the no switchport command, and so must the physical interfaces.</p>
<p>Speed: The physical ports in the channel must use the same speed.</p>
<p>duplex: The physical ports in the channel must use the same duplex.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="securing-network-devices">Securing Network Devices</h1>

<p>This chapter covers the following exam topics:</p>
<p>1.0 Network Fundamentals</p>
<p>1.1 Explain the Role of Network Components</p>
<p>1.1.c Next-generation Firewalls and IPS</p>
<p>4.0 IP Services</p>
<p>4.8 Configure network devices for remote access using SSH</p>
<p>5.0 Security Fundamentals</p>
<p>5.3 Configure device access control using local passwords</p>
<p>Encrypting Older IOS Passwords with service password-encryption</p>
<p>service password-encryption</p>
<ul>
<li>
<p>encrypts passwords that are normally held as clear text</p>
</li>
<li>
<p>password password (console or vty mode)</p>
</li>
<li>
<p>username name password password</p>
</li>
<li>
<p>enable password password</p>
</li>
<li>
<p>encoding type of “7”</p>
</li>
</ul>
<p>no service password-encryption</p>
<ul>
<li>passwords remain encrypted until password is changed</li>
</ul>
<p>Hashing the enable secret</p>
<ul>
<li>never stores the clear-text password</li>
<li>IOS computes the MD5 hash of the password in the enable secret command and stores the hash of the password in the configuration.</li>
<li>IOS hashes the clear-text password as typed by the user.</li>
<li>IOS compares the two hashed values</li>
</ul>
<p>no enable secret</p>
<ul>
<li>Can be used without having to enter the password</li>
</ul>
<p>Improved Hashes for Cisco’s Enable Secret</p>
<p>The two newer alternative algorithm types</p>
<ul>
<li>Both use an SHA-256 hash instead of MD5</li>
</ul>
<p>enable [algorithm-type5] secret password</p>
<ul>
<li>Type 5</li>
<li>MD5</li>
</ul>
<p>enable algorithm-type sha256 secret password</p>
<ul>
<li>Type 8</li>
<li>SHA-256</li>
</ul>
<p>enable algorithm-type scrypt secret password</p>
<ul>
<li>
<p>Type 9</p>
</li>
<li>
<p>SHA-256</p>
</li>
<li>
<p>New enable secret commands with different algorithm types replace any existing enable secret command.</p>
</li>
</ul>
<p>Encoding the Passwords for Local Usernames</p>
<p>Username secret command Encoding</p>
<p>username name [algorithm-type5] secret password</p>
<p>username name algorithm-type sha-256 secret password</p>
<p>username name algorithm-type scrypt secret password</p>
<p>Controlling Password Attacks with ACLs</p>
<p>(line vty)# access-class 3 in</p>
<ul>
<li>Bond ACL 3 to a vty line</li>
</ul>
<p>(line vty)# access-class 3 out</p>
<ul>
<li>looks at the destination IP address instead of the source</li>
<li>filters based on the device to which the telnet or ssh command is trying to connect.</li>
</ul>
<p>Traditional Firewalls</p>
<ul>
<li>
<p>match the source and destination IP addresses</p>
</li>
<li>
<p>matching their static well-known TCP and UDP ports</p>
</li>
<li>
<p>additional TCP and UDP ports </p>
</li>
<li>
<p>Match the text in the URI of an HTTP request</p>
</li>
<li>
<p>state information (stateful firewall)</p>
</li>
<li>
<p>storing information about each packet</p>
</li>
<li>
<p>make decisions about filtering future packets based on the historical state information (stateful inspection)</p>
</li>
<li>
<p>could be tracking the number of TCP connections per second</p>
</li>
<li>
<p>recording state information based on earlier packets</p>
</li>
<li>
<p>stateless firewall or a router ACL</p>
</li>
<li>
<p>would not have had the historical state information to realize that a DoS attack was occurring.</p>
</li>
</ul>
<p>Security Zones</p>
<ul>
<li>
<p>defining which hosts can initiate new connections.</p>
</li>
<li>
<p>Zone Inside</p>
</li>
<li>
<p>Secure</p>
</li>
<li>
<p>Zone Outside</p>
</li>
<li>
<p>Not secure</p>
</li>
<li>
<p>DMZ</p>
</li>
<li>
<p>Access by public</p>
</li>
</ul>
<p>Intrusion Prevention Systems (IPS</p>
<ul>
<li>IPS first downloads a database of exploit signatures</li>
<li>IPS can log the event, discard packets, or even redirect the packets to another security application for further examination.</li>
<li>needs to download and keep updating its signature database.</li>
</ul>
<p>Cisco Next-Generation Firewalls</p>
<p>Cisco  firewall</p>
<ul>
<li>
<p>Cisco Adaptive Security Appliance (ASA).</p>
</li>
<li>
<p>stateful filtering</p>
</li>
<li>
<p>comparing fields in the IP, TCP, and UDP headers, and using security zones when defining firewall rules</p>
</li>
</ul>
<p>Application Visibility and Control (AVC)</p>
<p>looks at the application layer data to identify the application</p>
<ul>
<li>deep packet inspection</li>
<li>can identify many applications based on the data sent (application layer headers plus application data structures far past the TCP and UDP headers).</li>
</ul>
<p>Duties of a NGFW</p>
<p>Traditional firewall:</p>
<p>stateful firewall filtering, NAT/PAT, and VPN termination.</p>
<p>Application Visibility and Control (AVC)</p>
<p>Advanced Malware Protection:</p>
<ul>
<li>A network-based antimalware function can run on the firewall itself, blocking file transfers that would install malware, and saving copies of files for later analysis.</li>
</ul>
<p>URL Filtering: This feature</p>
<ul>
<li>examines the URLs in each web request, categorizes the URLs, and either filters or rate limits the traffic based on rules. The Cisco Talos security group monitors and creates reputation scores for each domain known in the Internet, with URL filtering being able to use those scores in its decision to categorize, filter, or rate limit.</li>
</ul>
<p>NGIPS</p>
<p>Cisco Next-Generation IPS</p>
<ul>
<li>examines the context by gathering data from all the hosts and the users of those hosts.</li>
<li>will know the OS, software revision levels, what apps are running, open ports, the transport protocols and port numbers in use, and so on.</li>
<li>Armed with that data, the NGIPS can make much more intelligent choices about what events to log.</li>
</ul>
<p>NGIPS Duties</p>
<p>Traditional IPS:</p>
<ul>
<li>using exploit signatures to compare packet flows, creating a log of events, and possibly discarding and/or redirecting packets.</li>
</ul>
<p>Application Visibility and Control (AVC):</p>
<p>Contextual Awareness:</p>
<ul>
<li>gather data from hosts—OS, software version/level, patches applied, applications running, open ports, applications currently sending data, and so on. Those facts inform the NGIPS as to the often more limited vulnerabilities in a portion of the network so that the NGIPS can focus on actual vulnerabilities while greatly reducing the number of logged events.</li>
</ul>
<p>Reputation-Based Filtering:</p>
<p>can perform reputation-based filtering, taking the scores into account.</p>
<p>Event Impact Level:</p>
<p>provides an assessment based on impact levels</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="security-architectures">Security Architectures</h1>

<p>This chapter covers the following exam topics:</p>
<p>5.0 Security Fundamentals</p>
<p>5.1 Define key security concepts (threats, vulnerabilities, exploits, and mitigation techniques)</p>
<p>5.2 Describe security program elements (user awareness, training, and physical access control)</p>
<p>5.4 Describe security password policies elements, such as management, complexity, and password alternatives (multifactor authentication, certificates, and biometrics)</p>
<p>5.8 Differentiate authentication, authorization, and accounting concepts</p>
<p>Attacks That Spoof Addresses</p>
<ul>
<li>
<p>attacker sends packets with a spoofed source IP address</p>
</li>
<li>
<p>attacker sends spoofed MAC addresses</p>
</li>
<li>
<p>DHCP requests with spoofed MAC addresses can be sent to a  DHCP server</p>
</li>
<li>
<p>filling its address lease table and leaving no free IP addresses for normal use.</p>
</li>
</ul>
<p>Denial-of-Service Attacks</p>
<ul>
<li>
<p>server adds the TCP connection and replies to the fake address with a SYN-ACK.</p>
</li>
<li>
<p>no ack replies cause the server to leave open the connection and fill up the table</p>
</li>
<li>
<p>Server is no longer able to do legitimate TCP connections</p>
</li>
<li>
<p>ICMP echo (ping) packets</p>
</li>
<li>
<p>flood of UDP packets, and TCP connections, such as the TCP SYN flood</p>
</li>
<li>
<p>distributed denial-of-service (DDoS)</p>
</li>
<li>
<p>attack is distributed across a large number of bots, all flooding or attacking the same target.</p>
</li>
</ul>
<p>Reflection and Amplification Attacks</p>
<p>Reflection attack</p>
<ul>
<li>
<p>Attacker sends packets to the reflector host</p>
</li>
<li>
<p>host (reflector) reflects the exchange toward the spoofed address that is the target.</p>
</li>
<li>
<p>The attacker might also send the spoofed packets to multiple reflectors, causing the target to receive multiple copies of the unexpected traffic.</p>
</li>
<li>
<p>Attackers source packet is the IP of the victim</p>
</li>
<li>
<p>when reflector (Corporate server) responds, it sends packets to victim</p>
</li>
</ul>
<p>Amplification attack</p>
<ul>
<li>attacker sends a small amount of traffic to a reflector to generate large volume of traffic to a target</li>
<li>leverages a protocol or service to generate the traffic</li>
<li>mechanisms of DNS and NTP have been exploited for this</li>
</ul>
<p>Man-in-the-Middle Attacks</p>
<ul>
<li>can exploit the ARP table to communicate with other hosts on the local network</li>
<li>attacker sends the last ARP reply so that any listening host will update its ARP table with the most recent information.</li>
<li>attacker can repeat this process by poisoning the ARP entries on multiple hosts and then relaying traffic between them without easy detection.</li>
</ul>
<p>Address Spoofing Attack Summary</p>
<p>DoS/DDoS</p>
<ul>
<li>Exhaust a system service or resource</li>
<li>Crash target system</li>
</ul>
<p>Reflection/ Amplification</p>
<ul>
<li>Trick unwilling accomplice host to send traffic to target</li>
</ul>
<p>man-in-the-middle</p>
<ul>
<li>Eavesdrop on traffic</li>
<li>Modify traffic passing through</li>
</ul>
<p>Reconnaissance Attacks</p>
<ul>
<li>discover details about the target and its systems prior to an actual attack.</li>
<li>use common tools to uncover public details like who owns a domain and what IP address ranges are used there.</li>
<li>nslookup can reveal the owner of the domain and the IP address space registered to it.</li>
<li>The whois and dig commands are complementary tools that can query DNS information to reveal detailed information about domain owners, contact information, mail servers, authoritative name servers, and so on.</li>
<li>using ping sweeps to send pings to each IP address in the target range. Hosts that answer the ping sweep then become live targets.</li>
<li>Port scanning tools can then sweep through a range of UDP and TCP ports to see if a target host answers on any port numbers. Any replies indicate that a corresponding service is running on the target host.</li>
<li>not a true attack because nothing is exploited as a result.</li>
</ul>
<p>Buffer Overflow Attacks</p>
<ul>
<li>
<p>incoming data might be stored in unexpected memory locations if a buffer is allowed to fill beyond its limit.</p>
</li>
<li>
<p>sending data that is larger than expected.</p>
</li>
<li>
<p>If a vulnerability exists, the target system might store that data, overflowing its buffer into another area of memory, eventually crashing a service or the entire system.</p>
</li>
<li>
<p>attackers specially craft the large message by inserting malicious code in it.</p>
</li>
<li>
<p>If the target system stores that data as a result of a buffer overflow, then it can potentially run the malicious code without realizing.</p>
</li>
</ul>
<p>Malware</p>
<ul>
<li>
<p>Trojan horse</p>
</li>
<li>
<p>can spread from one computer to another only through user interaction</p>
</li>
<li>
<p>such as opening email attachments, downloading software from the Internet, and inserting a USB drive into a computer.</p>
</li>
<li>
<p>Packaged inside other software</p>
</li>
<li>
<p>viruses</p>
</li>
<li>
<p>can propagate between systems more readily. To spread, virus software must inject itself into another application, then rely on users to transport the infected application software to other victims.</p>
</li>
<li>
<p>Self-injected into other software</p>
</li>
<li>
<p>Worms</p>
</li>
<li>
<p>-propagates automatically</p>
</li>
</ul>
<p>Human Vulnerabilities</p>
<p>Spear phishing</p>
<ul>
<li>
<p>targets a group of similar users who might work for the same company, shop at the same stores, and so on.</p>
</li>
<li>
<p>all receive the same convincing email with a link to a malicious site.</p>
</li>
<li>
<p>Whaling</p>
</li>
<li>
<p>similar to phishing</p>
</li>
<li>
<p>targets high-profile individuals in corporations, governments, and organizations.</p>
</li>
<li>
<p>voice calls (vishing)</p>
</li>
<li>
<p>SMS text messages (smishing).</p>
</li>
</ul>
<p>Pharming:</p>
<ul>
<li>altered DNS service or local hosts file entry for a legitimate site.</li>
<li>altered name resolution returns the address of a malicious site instead.</li>
</ul>
<p>Watering Hole:</p>
<ul>
<li>frequently visited site is compromised and malware is deposited there.</li>
<li>infects only the target users who visit the site</li>
</ul>
<p>Attack Type
Social
engineering
Phishing
Spear phishing
Whaling
Vishing
Smishing
Pharming
Watering hole
Goal
Exploits human trust and social behavior
Disguises a malicious invitation as something legitimate
Targets group of similar users
Targets high-profile individuals
Uses voice calls
Uses SMS text messages
Uses legitimate services to send users to a compromised
site
Targets specific victims who visit a compromised site &ldquo;&gt;</p>
<p>Securing Network Access with Cisco AAA</p>
<p>Authentication, Authorization, and Accounting</p>
<p>Authentication</p>
<p>- Name and password</p>
<p>- Challenge and response</p>
<p>- Token cards</p>
<p>Authorization</p>
<p>- Takes place after authentication is validated</p>
<p>- Provides needed resources specifically allowed to a certain user and permits the operation that specific user is allowed to perform</p>
<p>Accounting</p>
<p>- Records what the user did on the network as well as the resources they accessed.</p>
<p>- Keeps track of how much time they spent using network resources.</p>
<p>Authentication Methods</p>
<p>Least secure to most secure methods:</p>
<ul>
<li>No username or password</li>
<li>Username/password (static)</li>
<li>Aging username/password</li>
<li>One-time passwords (OTP</li>
<li>Token cards/soft tokens</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="spanning-tree-protocol-basics">Spanning Tree Protocol Basics</h1>

<p>RSTP is the most common spanning tree protocol. And Cisco devices default to using RSTP.</p>
<p>MAC table instability</p>
<ul>
<li>The switches MAC address tables keep changing because frames with the same source MAC arrive on different ports.</li>
</ul>
<p>Broadcast storms</p>
<ul>
<li>forwarding of a frame repeatedly on the same links</li>
</ul>
<p>Multiple frame transmission</p>
<ul>
<li>side effect of looping frames</li>
<li>Multiple copies are delivered to a host, confusing the host.</li>
</ul>
<p>What Spanning Tree Does</p>
<ul>
<li>
<p>blocking state</p>
</li>
<li>
<p>interfaces does not process any frames</p>
</li>
<li>
<p>except STP/RSTP messages and some other overhead messages</p>
</li>
</ul>
<p>STP Convergence</p>
<ul>
<li>switches collectively realize that something has changed in the LAN topology</li>
<li>determine whether they need to change which ports block and which port forward</li>
</ul>
<p>How Spanning Tree works</p>
<p>three criteria to choose whether to put and interface in forwarding state:</p>
<p>elect a root switch.</p>
<ul>
<li>STP puts all working interfaces on the root switch in forwarding state</li>
</ul>
<p>nonroot switches</p>
<ul>
<li>
<p>select the port with the least administrative cost (root port)</p>
</li>
<li>
<p>cost between itself and the root switch (root cost) (root cost path)</p>
</li>
<li>
<p>root port (RP) gets put in a forwarding state</p>
</li>
<li>
<p>The switch with the lowest root cost, as compared with the other switches attached to the same link, is placed in forwarding state.</p>
</li>
<li>
<p>That switch is the designated switch, and that switch&rsquo;s interface, attached to that segment, is called the designated port (DP)</p>
</li>
</ul>
<p>STP States</p>
<p>All the root switches ports</p>
<ul>
<li>forwarding</li>
<li>root switch is always the designated switch</li>
</ul>
<p>All nonroot switch&rsquo;s root ports</p>
<ul>
<li>forwarding</li>
<li>port with the least cost to the root switch (lowest root cost)</li>
</ul>
<p>Each LAN&rsquo;s designated port</p>
<ul>
<li>forwarding</li>
<li>switch forwarding the Hello on to the segment with the lowest root cost is the designated switch for the segment</li>
</ul>
<p>All other working ports</p>
<ul>
<li>blocking</li>
<li>Not used for forwarding frames</li>
<li>frames received on these interfaces to not forward</li>
</ul>
<p>The STP Bridge ID and Hello BPDU</p>
<ul>
<li>
<p>bridge ID (BID)</p>
</li>
<li>
<p>8-byte value unique to each switch.</p>
</li>
<li>
<p>2-byte priority field</p>
</li>
<li>
<p>6-byte system ID</p>
</li>
<li>
<p>based on a universal (burned-in) MAC address</p>
</li>
<li>
<p>bridge protocol data units (BPDU)</p>
</li>
<li>
<p>configuration BPDUs, which switches</p>
</li>
<li>
<p>used to exchange information with each other (switches) The most common BPDU, called a</p>
</li>
<li>
<p>hello BPDU,</p>
</li>
<li>
<p>sending switch&rsquo;s BID</p>
</li>
<li>
<p>switches can tell which switch sent which Hello BPDU</p>
</li>
<li>
<p>Root Bridge ID</p>
</li>
<li>
<p>BID the sender currently believes to be the root switch</p>
</li>
<li>
<p>Sender&rsquo;s root cost</p>
</li>
<li>
<p>STP cost between this switch and current root</p>
</li>
<li>
<p>Timer values on the root switch</p>
</li>
<li>
<p>Hello timer, MaxAge timer, and forward delay timer</p>
</li>
</ul>
<p>Electing the Root Switch</p>
<ul>
<li>
<p>based on the BIDs in the BPDUs.</p>
</li>
<li>
<p>root switch is the switch with the lowest numeric value for the BID.</p>
</li>
<li>
<p>Because the two-part BID starts with the priority value,</p>
</li>
<li>
<p>essentially the switch with the lowest priority becomes the root.</p>
</li>
<li>
<p>If a tie occurs based on the priority portion of the BID,</p>
</li>
<li>
<p>the switch with the lowest MAC address portion of the BID is the root.</p>
</li>
<li>
<p>Mac addresses are the second part of the BID</p>
</li>
<li>
<p>all switches claim to be the root by sending Hello BPDUs listing their own BID as the root BID.</p>
</li>
<li>
<p>If a switch hears a Hello that lists a better (lower) BID</p>
</li>
<li>
<p>that switch stops advertising itself as root and starts forwarding the superior Hello.</p>
</li>
<li>
<p>The Hello sent by the better switch lists the better switch’s BID as the root.</p>
</li>
<li>
<p>superior hello (better hello)</p>
</li>
<li>
<p>the listed root’s BID is better (numerically lower),</p>
</li>
<li>
<p>Inferior hello (worse Hello), meaning that</p>
</li>
<li>
<p>the listed root’s BID is not as good (numerically higher)</p>
</li>
<li>
<p>each nonroot switch chooses its one and only root port. A switch’s RP is its interface through which it has the least STP/RSTP cost to reach the root switch (least root cost).</p>
</li>
</ul>
<p>Choosing Each Switch&rsquo;s Root Port</p>
<ul>
<li>
<p>each nonroot switch chooses its one and only root port.</p>
</li>
<li>
<p>its interface through which it has the least STP/RSTP cost to reach the root switch (least root cost).</p>
</li>
<li>
<p>The STP/RSTP port cost is simply an integer value assigned to each interface, per VLAN</p>
</li>
<li>
<p>The switches also look at their neighbor’s root cost, as announced in Hello BPDUs received from each neighbor.</p>
</li>
</ul>
<p>![Root Cost = O
SWI
GO/I
GiO'2
Root Cost = O
RootCostoutGO/1 is 5
Root Cost out GO,&lsquo;2 is 8
0+5=5
cost 5
Cost = 4
GiO,Q
SW3
4
Cost 4
GiO,Q
My Root Cost
Out GOO is 4
sv-V2
GiO'1
Root Cost = 4</p>
<ul>
<li>
<p>SW3 calculates its cost to reach the root over the two possible paths by adding the advertised cost (in Hello messages) to the interface costs listed in the figure.</p>
</li>
<li>
<p>The root switch sends Hellos, with a listed root cost of 0. The idea is that the root’s cost to reach itself is 0.</p>
</li>
<li>
<p>Each switch places its root port into a forwarding state.</p>
</li>
<li>
<p>tiebreaker to use in case the best root cost ties for two or more paths.</p>
</li>
<li>
<p>Choose based on the lowest neighbor bridge ID.</p>
</li>
<li>
<p>Choose based on the lowest neighbor port priority.</p>
</li>
<li>
<p>Choose based on the lowest neighbor internal port number.</p>
</li>
</ul>
<p>Choosing the Designated Port on each LAN Segment</p>
<ul>
<li>
<p>final step to choose the STP/RSTP topology is to choose the designated port on each LAN segment.</p>
</li>
<li>
<p>The designated port (DP) on each LAN segment is the switch port that advertises the lowest-cost Hello onto a LAN segment.</p>
</li>
<li>
<p>When a nonroot switch forwards a Hello, the nonroot switch sets the root cost field in the Hello to that switch’s cost to reach the root. In effect, the switch with the lower cost to reach the root, among all switches connected to a segment, becomes the DP on that segment.</p>
</li>
<li>
<p>All DPs are placed into a forwarding state</p>
</li>
</ul>
<p>Two additional tiebreakers are needed in some cases</p>
<ul>
<li>
<p>these would be unlikely today.</p>
</li>
<li>
<p>A single switch can connect two or more interfaces to the same collision domain by connecting to a hub.</p>
</li>
<li>
<p>In that case, the one switch hears its own BPDUs.</p>
</li>
<li>
<p>So, if a switch ties with itself, two additional tiebreakers are used:</p>
</li>
<li>
<p>the lowest interface STP/RSTP priority and,</p>
</li>
<li>
<p>if that ties, the lowest internal interface number.</p>
</li>
<li>
<p>switch ports connected to endpoint devices should become DPs and settle into a forwarding state.</p>
</li>
</ul>
<p>Configuring to influence the STP Topology</p>
<ul>
<li>
<p>configure the bridge ID and  change STP/RSTP port costs.</p>
</li>
<li>
<p>change the BID, the engineer can</p>
</li>
<li>
<p>set the priority used by the switch, while</p>
</li>
<li>
<p>continues to use the universal MAC address as the final 48 bits of the BID.</p>
</li>
<li>
<p>giving a switch the lowest priority value among all switches will cause that switch to win the root election.</p>
</li>
<li>
<p>to favor one link, give the ports on that link a lower cost, or to avoid a link, give the ports a higher cost.</p>
</li>
</ul>
<p>Link Costs</p>
<p>10 Mbps</p>
<ul>
<li>2,000,000</li>
<li>100 (old)</li>
</ul>
<p>100Mbps</p>
<ul>
<li>200,000</li>
<li>19 (old)</li>
</ul>
<p>1gbps</p>
<ul>
<li>20,000</li>
<li>4 (old)</li>
</ul>
<p>10Gbps</p>
<ul>
<li>2000</li>
<li>2 (old)</li>
</ul>
<p>100Gbps</p>
<ul>
<li>200</li>
<li>N/A (old)</li>
</ul>
<p>1Tbps</p>
<ul>
<li>
<p>20</p>
</li>
<li>
<p>N/A (old)</p>
</li>
<li>
<p>the cost defaults based on the operating speed of the link, not the maximum speed</p>
</li>
<li>
<p>(config) # spanning-tree pathcost method long</p>
</li>
<li>
<p>Cisco Catalyst switches can be configured to use the long values as defaults</p>
</li>
</ul>
<p>Details specific to STP</p>
<p>STP Activity When the Network Remains Stable</p>
<ul>
<li>
<p>An STP root switch sends a new Hello BPDU every 2 seconds by default.</p>
</li>
<li>
<p>Each nonroot switch forwards the Hello on all DPs, but only after changing items listed in the Hello.</p>
</li>
<li>
<p>(As a result, the Hello flows once over every working link in the LAN.)</p>
</li>
<li>
<p>When forwarding the Hello BPDU, each switch sets the root cost to that local switch’s calculated root cost. The switch also sets the “sender’s bridge ID” field to its own bridge ID. (The root’s bridge ID field is not changed.)</p>
</li>
</ul>
<p>Step 1. The root creates and sends a Hello BPDU, with a root cost of 0, out all its working interfaces (those in a forwarding state).</p>
<p>Step 2. The nonroot switches receive the Hello on their root ports. After changing the Hello to list their own BID as the sender’s BID and listing that switch’s root cost, the switch forwards the Hello out all designated ports.</p>
<p>Step 3. Steps 1 and 2 repeat until something changes.</p>
<ul>
<li>When a switch ceases to receive the Hellos, or receives a Hello that lists different details, something has failed, so the switch reacts and starts the process of changing the spanning-tree topology.</li>
</ul>
<p>STP Timers That Manage STP Convergence</p>
<ul>
<li>
<p>STP convergence process requires the use of three timers</p>
</li>
<li>
<p>All switches use the timers as dictated by the root switch, which the root lists in its periodic Hello BPDU messages.</p>
</li>
</ul>
<p>hello</p>
<ul>
<li>2 seconds by default</li>
<li>Period between hellos created by the root</li>
</ul>
<p>MaxAge</p>
<ul>
<li>10 times the hello (20 seconds by default hello)</li>
<li>How long the switch will go without receiving any hellos before it attempts to change the stp topology</li>
</ul>
<p>Forward Delay</p>
<ul>
<li>
<p>15 seconds</p>
</li>
<li>
<p>how long the port stays in listening and learning state</p>
</li>
<li>
<p>After MaxAge expires, the switch essentially makes all its STP choices again, based on any Hellos it receives from other switches.</p>
</li>
</ul>
<p>Changing Interface States with STP</p>
<p>Roles, like root port and designated port, relate to how STP analyzes the LAN topology. States, like forwarding and blocking, tell a switch whether to send or receive frames.</p>
<p>When STP converges, a switch chooses new port roles, and the port roles determine the state (forwarding or blocking).</p>
<p>Switches using STP can simply move immediately from forwarding to blocking state, but they must take extra time to transition from blocking state to forwarding state.</p>
<p>when a port that formerly blocked needs to transition to forwarding, the switch first puts the port through two intermediate interface states.</p>
<p>Listening:</p>
<ul>
<li>interface does not forward frames.</li>
<li>switch removes old stale (unused) MAC table entries for which no frames are received from each MAC address during this period.</li>
<li>These stale MAC table entries could be the cause of the temporary loops.</li>
<li>Transitory</li>
</ul>
<p>Learning:</p>
<ul>
<li>do not forward frames</li>
<li>switch begins to learn the MAC addresses of frames received on the interface.</li>
<li>Transitory</li>
</ul>
<p>Blocking</p>
<ul>
<li>does not forward frames</li>
<li>does not learn mac addresses</li>
<li>stable</li>
</ul>
<p>Forwarding</p>
<ul>
<li>learns mac addresses</li>
<li>forwards frames</li>
<li>stable</li>
</ul>
<p>Disabled</p>
<ul>
<li>does not forward or learn mac addresses</li>
<li>stable</li>
</ul>
<p>blocking &gt; listening, &gt; learning &gt; forwarding.</p>
<p>STP leaves the interface in each interim state for a time equal to the forward delay timer, which defaults to 15 seconds.</p>
<p>a convergence event that causes an interface to change from blocking to forwarding requires 30 seconds to transition from blocking to forwarding.</p>
<p>a switch might have to wait MaxAge seconds (default 20 seconds) before even choosing to move an interface from blocking to forwarding state.</p>
<p>Rapid STP Concepts</p>
<ul>
<li>802.1w</li>
<li>Sits in 802.1q standards document</li>
</ul>
<p>Comparing STP and RSTP</p>
<ul>
<li>
<p>similarities</p>
</li>
<li>
<p>elect the root switch using the same rules and tiebreakers.</p>
</li>
<li>
<p>switches select their root ports with the same rules.</p>
</li>
<li>
<p>elect designated ports on each LAN segment with the same rules and tiebreakers.</p>
</li>
<li>
<p>place each port in either forwarding or blocking state</p>
</li>
<li>
<p>(RSTP calls the blocking state the discarding state.)</p>
</li>
<li>
<p>they can both be used in the same network.</p>
</li>
<li>
<p>RSTP improves network convergence when topology changes occur, usually converging within a few seconds (or in slow conditions, in about 10 seconds).</p>
</li>
</ul>
<p>RSTP defines more cases in which the switch can avoid waiting for a timer to expire, such as the following:</p>
<ul>
<li>
<p>a switch can replace its root port, without any waiting to reach a forwarding state (in some conditions).</p>
</li>
<li>
<p>replace a designated port, without any waiting to reach a forwarding state (in some conditions).</p>
</li>
<li>
<p>lowers waiting times for cases in which RSTP must wait for a timer.</p>
</li>
<li>
<p>MaxAge is only 3 times the hello</p>
</li>
<li>
<p>uses the term alternate port to refer to a switch’s other ports that could be used as the root port if the root port ever fails.</p>
</li>
<li>
<p>The backup port concept provides a backup port on the local switch for a designated port.</p>
</li>
<li>
<p>backup ports apply only to designs that use hubs, so they are unlikely to be useful today.)</p>
</li>
</ul>
<p>RSTP Port roles</p>
<p>Root Port</p>
<ul>
<li>Nonroot switch&rsquo;s port that has the best path to the root</li>
</ul>
<p>Alternate port</p>
<ul>
<li>Replaces the root port when the root port fails</li>
</ul>
<p>Designated port</p>
<ul>
<li>port designated to forward onto a collision domain</li>
</ul>
<p>Backup Port</p>
<ul>
<li>Replaces designated port when designated port fails</li>
</ul>
<p>Disabled ports</p>
<ul>
<li>
<p>administratively disabled</p>
</li>
<li>
<p>each switch independently generates its own Hellos.</p>
</li>
<li>
<p>allows for queries between neighbors</p>
</li>
<li>
<p>(rather than waiting on timers to expire to learn new information)</p>
</li>
</ul>
<p>RSTP and the Alternate (Root) Port Role</p>
<p>alternate port</p>
<ul>
<li>both the RP and the alternate port must receive Hellos that identify the same root switch.</li>
</ul>
<p>the switch changes the former root port’s role and state:</p>
<ul>
<li>
<p>the role from root port to a disabled port, and</p>
</li>
<li>
<p>the state from forwarding to discarding</p>
</li>
<li>
<p>without waiting on any timers, the switch changes roles and state for the alternate port:</p>
</li>
<li>
<p>its role changes to be the root port, with a forwarding state.</p>
</li>
<li>
<p>the new root port also does not need to spend time in other states, such as learning state, instead moving immediately to forwarding state.</p>
</li>
</ul>
<p>Step 1. The link between SW1 and SW3 fails, so SW3’s current root port (Gi0/1) fails.</p>
<p>Step 2. SW3 and SW2 exchange RSTP messages to confirm that SW3 will now transition its former alternate port (Gi0/2) to be the root port. This action causes SW2 to flush the required MAC table entries.</p>
<p>Step 3. SW3 transitions Gi0/1 to the disabled role and Gi0/2 to the root port role.</p>
<p>Step 4. SW3 transitions Gi0/2 to a forwarding state immediately, without using learning state, because this is one case in which RSTP knows the transition will not create a loop.</p>
<p>RSTP States and Processes</p>
<ul>
<li>
<p>RSTP keeps both the learning and forwarding states as compared with STP, for the same purposes</p>
</li>
<li>
<p>RSTP does not even define a listening state,</p>
</li>
<li>
<p>RSTP renames the blocking state to the discarding state and redefines its use slightly.</p>
</li>
<li>
<p>RSTP uses the discarding state for what STP defines as two states: disabled state and blocking state.</p>
</li>
</ul>
<p>![Table 9-10 Port States Compared: STP and RSTP
Function
Port is administratively disabled
Stable state that ignores incoming data frames and is not used to
forward data frames
Interim state without MAC learning and without forwarding
Interim state with MAC learning and without forwarding
Stable state that allows MAC learning and forwarding of data
STP State
Disabled
Blocking
Listening
Learning
Forward-
RSTp
State
Discard-
Discard-
Not used
Learning
Forward</p>
<ul>
<li>
<p>RSTP switches tell each other (using messages) that the topology has changed.</p>
</li>
<li>
<p>Those messages also direct neighboring switches to flush the contents of their MAC tables in a way that removes all the potentially loop-causing entries, without a wait.</p>
</li>
<li>
<p>RSTP backup port role creates a way for RSTP to quickly replace a switch’s designated port on some LAN.</p>
</li>
</ul>
<p>RSTP Port Types</p>
<ul>
<li>several links between two switches. RSTP considers these links to be point-to-point links and the ports connected to them to be point-to-point ports</li>
</ul>
<p>Point-to-point
port
SWI
SW3
Point-to-point
Edge Port
Point-to-point
Port
SW2
swa
Shared
Port
Hub</p>
<ul>
<li>
<p>Ports that instead connect to a single endpoint device at the edge of the network, like a PC or server, are called point-to-point edge ports, or simply edge ports.</p>
</li>
<li>
<p>&ldquo;shared&rdquo; to describe ports connected to a hub.</p>
</li>
<li>
<p>hubs also force the attached switch port to use half-duplex logic. RSTP assumes that all half-duplex ports may be connected to hubs, treating ports that use half duplex as shared ports.</p>
</li>
<li>
<p>RSTP converges more slowly on shared ports as compared to all point-to-point ports.</p>
</li>
</ul>
<p>Optional STP Features</p>
<h2 id="etherchannel">Etherchannel</h2>
<ul>
<li>The switches treat the EtherChannel as a single interface with regard to STP.</li>
</ul>
<p>Layer 2 EtherChannels combine links that switches use as switch ports, with the switches using Layer 2 switching logic to forward and receive Ethernet frames over the EtherChannels. Layer 3 EtherChannels also combine links, but the switches use Layer 3 routing logic to forward packets over the EtherChannels.</p>
<p>PortFast</p>
<p>PortFast</p>
<ul>
<li>
<p>allows a switch to immediately transition from blocking to forwarding, bypassing listening and learning states.</p>
</li>
<li>
<p>only ports on which you can safely enable PortFast are ports on which you know that no bridges, switches, or other STP-speaking devices are connected.</p>
</li>
<li>
<p>Cisco switches enable RSTP point-to-point edge ports by enabling PortFast on the port.</p>
</li>
</ul>
<h2 id="bpdu-guard">BPDU Guard</h2>
<p>An attacker could connect a switch to a port with a low STP/RSTP priority value. And make itself the root switch. The new STP/RSTP topology could have worse performance than the desired topology.</p>
<ul>
<li>
<p>The attacker could plug into multiple ports, into multiple switches, become root, and actually forward much of the traffic in the LAN. Without the networking staff realizing it, the attacker could use a LAN analyzer to copy large numbers of data frames sent through the LAN.</p>
</li>
<li>
<p>Users could innocently harm the LAN when they buy and connect an inexpensive consumer LAN switch (one that does not use STP/RSTP). Such a switch, without any STP/RSTP function, would not choose to block any ports and could cause a loop.</p>
</li>
<li>
<p>Cisco BPDU Guard feature helps defeat these kinds of problems by disabling a port if any BPDUs are received on the port. So, this feature is particularly useful on ports that should be used only as an access port and never connected to another switch.</p>
</li>
<li>
<p>In addition, the BPDU Guard feature helps prevent problems with PortFast. PortFast should be enabled only on access ports that connect to user devices, not to other LAN switches. Using BPDU Guard on these same ports makes sense because if another switch connects to such a port, the local switch can disable the port before a loop is created.</p>
</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="standard-acls">Standard ACLs</h1>

<h1 id="standard-access-control-lists">Standard Access Control Lists</h1>
<p>Can be used to match packets for applying Quality of Service (QoS) features.</p>
<h3 id="acl-location-and-direction">ACL location and direction</h3>
<ul>
<li>inbound to the router, before the router makes its forwarding (routing) decision</li>
<li>outbound, after the router makes its forwarding decision and has determined the exit interface to use.</li>
<li>enable an ACL on an interface that processes the packet, in the direction the packet flows through that interface.</li>
<li>the router then processes every inbound or outbound IP packet using that ACL</li>
</ul>
<h2 id="actions-when-a-match-occurs">Actions when a match occurs</h2>
<ul>
<li>deny or permit</li>
</ul>
<h3 id="types-of-ip-acls">Types of IP ACLs</h3>
<ul>
<li>Standard numbered ACLs (1–99) or (1300-1999)</li>
<li>Extended numbered ACLs (100–199) or (2000-2699)</li>
</ul>
<h4 id="named-acls">Named ACLs</h4>
<ul>
<li>Editing with sequence numbers</li>
<li>configuration identifies the ACL either using a number or a name. ACLs will also be</li>
<li>either standard or extended</li>
</ul>
<h4 id="standard-numbered-ipv4-acls">Standard Numbered IPv4 ACLs</h4>
<ul>
<li>matches only the source IP address</li>
<li>identify the ACL using numbers rather than names (numbered)</li>
<li>Looks at IPv4 packets.</li>
</ul>
<p>List Logic with IP ACLs</p>
<ul>
<li>router takes the action listed in that line of the ACL and stops looking further in the ACL</li>
<li>every IP ACL has a deny all statement implied at the end of the ACL</li>
</ul>
<p>Matching Logic and Command Syntax</p>
<ul>
<li>Access list is one or more access-list commands with the same number.</li>
<li>any number from the ranges shown in the preceding line of syntax.</li>
<li>(One number is no better than the other.) IOS refers to each line in an ACL is an Access Control Entry (ACE engineers just call them ACL statements.</li>
<li>each access-list command also lists the action (permit or deny), plus the matching logic.</li>
</ul>
<p>Matching the Exact IP Address</p>
<ul>
<li>
<p>permit if source = 10.1.1.1</p>
</li>
<li>
<p>access-list 1 permit 10.1.1.1</p>
</li>
<li>
<p>If you use Host keyword IOS will remove the keyword in the config</p>
</li>
</ul>
<p>Matching Any/All Addresses</p>
<ul>
<li>access-list 1 permit any</li>
</ul>
<p>ACL show commands list</p>
<ul>
<li>counters for the number of packets matched by each command in the ACL,</li>
<li>no counter for that implicit deny any concept at the end of the ACL.</li>
<li>Configure deny any command to see deny counts</li>
</ul>
<h3 id="implementing-standard-ip-acls">Implementing Standard IP ACLs</h3>
<p># access-list access-list-number {deny | permit} source [source-wildcard]</p>
<ul>
<li>
<p>Plan the location (router and interface) and direction (in or out) on that interface:</p>
</li>
<li>
<p>placed near to the destination of the packets so that they do not unintentionally discard packets that should not be discarded.</p>
</li>
<li>
<p>identify the source IP addresses of packets as they go in the direction that the ACL is examining.</p>
</li>
<li>
<p>Configure one or more access-list</p>
</li>
<li>
<p># access-list access-list-number {deny | permit} source [source-wildcard]</p>
</li>
<li>
<p>Enable the ACL</p>
</li>
<li>
<p>(config-if)# ip access-group number {in | out}</p>
</li>
</ul>
<p>Standard Numbered ACL Example 1</p>
<p>R2(config)# access-list 1 permit 10.1.1.1</p>
<p>R2(config)# access-list 1 deny 10.1.1.0 0.0.0.255</p>
<p>R2(config)# access-list 1 permit 10.0.0.0 0.255.255.255</p>
<p>R2(config-if)# ip access-group 1 in</p>
<p># show ip access-lists</p>
<ul>
<li>details about IPv4 ACLs only</li>
</ul>
<p># show access-lists</p>
<ul>
<li>lists details about any configure ACL, not just IPv4</li>
</ul>
<p># show ip interface s0/0/1</p>
<ul>
<li>lists the number or name of any IP ACL enabled on the interface</li>
</ul>
<p>Standard Numbered ACL Example 2</p>
<ul>
<li>
<p>standard ACLs cannot check the destination IP address.</p>
</li>
<li>
<p>extended ACL  lets you check both the source and destination IP address.</p>
</li>
<li>
<p>access-list remark parameter</p>
</li>
<li>
<p>to leave text documentation that stays with the ACL.</p>
</li>
<li>
<p>router checks packets that it routes against the ACL for outbound ACLs</p>
</li>
<li>
<p>a router does not filter packets that the router itself creates with an outbound ACL</p>
</li>
</ul>
<p>Troubleshooting and Verification Tips</p>
<ul>
<li>IOS keeps statistics about the packets matched by each line of an ACL</li>
</ul>
<p>log keyword</p>
<ul>
<li>
<p>add to end of access-list command</p>
</li>
<li>
<p>IOS then issues log messages with occasional statistics about matches of that ACL line</p>
</li>
<li>
<p>Double check the ACL is enabled on the right interface, or for the right direction</p>
</li>
</ul>
<p>Practice Building access-list Commands</p>
<p>Tips to consider when choosing matching parameters to any access-list command:</p>
<ul>
<li>To match a specific address, just list the address.</li>
<li>To match any and all addresses, use the any keyword.</li>
</ul>
<p>several practice problems (wildcard)</p>
<ul>
<li>
<p>Packets from 172.16.5.4</p>
</li>
<li>
<p>0.0.0.0</p>
</li>
<li>
<p>Packets from hosts with 192.168.6</p>
</li>
<li>
<p>0.0.0.255</p>
</li>
<li>
<p>Packets from hosts with 192.168</p>
</li>
<li>
<p>0.0.255.255</p>
</li>
<li>
<p>Packets from any hosts</p>
</li>
<li>
<p>255.255.255.255</p>
</li>
<li>
<p>Packets from subnet 10.1.200.0/21</p>
</li>
<li>
<p>0.0.7.255</p>
</li>
<li>
<p>Packets from subnet 172.20.112.0/23</p>
</li>
<li>
<p>0.0.1.255</p>
</li>
<li>
<p>Packets from subnet 172.20.112.0/26</p>
</li>
<li>
<p>0.0.0.63</p>
</li>
<li>
<p>Packets from subnet 192.168.9.64/28</p>
</li>
<li>
<p>0.0.0.15</p>
</li>
<li>
<p>Packets from subnet 192.168.9.64/30</p>
</li>
<li>
<p>0.0.0.3</p>
</li>
</ul>
<p>Reverse Engineering from ACL to Address Range (practice problems)</p>
<ol>
<li>one address</li>
<li>192.168.4.0 - 192.168.4.127</li>
<li>192.168.6.0 - 192.168.6. 31</li>
<li>172.30.96.0 - 172.30.96.255</li>
<li>172.30.96.0 - 172.30.96. 63</li>
<li>10.1.192.0 - 10.1.192..3</li>
<li>10.1.192.0 - 10.1.193.255</li>
<li>10.1.192.0 - 10.1.255.255</li>
</ol>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="static-routes">Static Routes</h1>

<p>1.0 Network Fundamentals</p>
<p>1.6 Configure and verify IPv4 addressing and subnetting</p>
<p>3.0 IP Connectivity</p>
<p>3.1 Interpret the components of routing table</p>
<p>3.1.a Routing protocol code</p>
<p>3.1.b Prefix</p>
<p>3.1.c Network mask</p>
<p>3.1.d Next hop</p>
<p>3.1.e Administrative distance</p>
<p>3.1.f Metric</p>
<p>3.1.g Gateway of last resort</p>
<p>3.2 Determine how a router makes a forwarding decision by default</p>
<p>3.2.a Longest match</p>
<p>3.2.b Administrative distance</p>
<p>3.3 Configure and verify IPv4 and IPv6 static routing</p>
<p>3.3.a Default route</p>
<p>3.3.b Network route</p>
<p>3.3.c Host route</p>
<p>3.3.d Floating static</p>
<p>Routers first learn connected routes, which are routes for subnets attached to a router interface. Routers can also use static routes, which are routes created through a configuration command (ip route) that tells the router what route to put in the IPv4 routing table. And routers can use a routing protocol, in which routers tell each other about all their known routes, so that all routers can learn and build routes to all networks and subnets.</p>
<p>Step 1. If the destination is local, send directly:</p>
<p>A. &lsquo;&lsquo;Find the destination host’s MAC address. Use the already-known Address Resolution Protocol (ARP) table entry, or use ARP messages to learn the information.</p>
<p>B. Encapsulate the IP packet in a data-link frame, with the destination data-link address of the destination host.</p>
<p>For each received data-link frame, choose whether or not to process the frame. Process it if</p>
<ol>
<li>
<p>The frame has no errors (per the data-link trailer Frame Check Sequence [FCS] field).</p>
</li>
<li>
<p>The frame’s destination data-link address is the router’s address (or an appropriate multicast or broadcast address).</p>
</li>
<li>
<p>If choosing to process the frame at Step 1, de-encapsulate the packet from inside the data-link frame.</p>
</li>
<li>
<p>Make a routing decision. To do so, compare the packet’s destination IP address to the routing table and find the route that matches the destination address. This route identifies the outgoing interface of the router and possibly the next-hop router.</p>
</li>
<li>
<p>Encapsulate the packet into a data-link frame appropriate for the outgoing interface. When forwarding out LAN interfaces, use ARP as needed to find the next device’s MAC address.</p>
</li>
<li>
<p>Transmit the frame out the outgoing interface, as listed in the matched IP route.</p>
</li>
</ol>
<ul>
<li>The interface is in a working state. In other words, the interface status in the show interfaces command lists a line status of up and a protocol status of up.</li>
<li>The interface has an IP address assigned through the ip address interface subcommand.</li>
</ul>
<p>Routing Protocol Code: The legend at the top of the show ip route output (about nine lines) lists all the routing protocol codes (exam topic 3.1.a). This book references the codes for connected routes (C), local (L), static (S), and OSPF (O).</p>
<p>Prefix: The word prefix (exam topic 3.1.b) is just another name for subnet ID.</p>
<p>Mask: Each route lists a prefix (subnet ID) and network mask (exam topic 3.1.c) in prefix format, for example, /24.</p>
<p>The ARP Table on a Cisco Router</p>
<p>Dynamically learned ARP table entries have an upward counter, like the 35-minute value for the ARP table entry for IP address 172.16.1.9. By default, IOS will time out (remove) an ARP table entry after 240 minutes in which the entry is not used.</p>
<p>clear ip arp [ip-address] EXEC command.</p>
<p>Configuring Static Routes</p>
<p>The static route is considered a network route when the destination listed in the ip route command defines a subnet, or an entire Class A, B, or C network. In contrast, a default route matches all destination IP addresses, while a host route matches a single IP address (that is, an address of one host.)</p>
<p>However, the route that used the outgoing interface configuration is also noted as a connected route; this is just a quirk of the output of the show ip route command.</p>
<p>also lists a few statistics about all IPv4 routes. For example, the example shows two lines, for the two static routes configured in Example 16-4, but statistics state that this router has routes for eight subnets.</p>
<p>IOS adds and removes these static routes dynamically over time, based on whether the outgoing interface is working or not. For example, in this case, if R1’s S0/0/0 interface fails, R1 removes the static route to 172.16.2.0/24 from the IPv4 routing table. Later, when the interface comes up again, IOS adds the route back to the routing table.</p>
<p>Static Host Routes</p>
<p>To configure such a static route, the ip route command uses an IP address plus a mask of 255.255.255.255 so that the matching logic matches just that one address.</p>
<p>An engineer might use host routes to direct packets sent to one host over one path, with all other traffic to that host’s subnet over some other path. For instance, you could define these two static routes for subnet 10.1.1.0/24 and host 10.1.1.9, with two different next-hop addresses, as follows:</p>
<p>routers use the most specific route (that is, the route with the longest prefix length)</p>
<p>Floating Static Routes</p>
<p>the router must first decide which routing source has the better <a href="https://learning.oreilly.com/library/view/ccna-200-301-official/9780136755562/vol1_gloss.xhtml#gloss_24" rel="external" target="_blank">administrative distance</a>, with lower being better, and then use the route learned from the better source</p>
<p>By default, IOS considers static routes better than OSPF-learned routes. By default, IOS gives static routes an administrative distance of 1 and OSPF routes an administrative distance of 110</p>
<p>To implement a floating static route, you need to use a parameter on the ip route command that sets the administrative distance for just that route, making the value larger than the default administrative distance of the routing protocol. For example, the ip route 172.16.2.0 255.255.255.0 172.16.5.3 130</p>
<p>while the show ip route command lists the administrative distance of most routes, as the first of two numbers inside two brackets, the show ip route subnet command plainly lists the administrative distance.</p>
<p>Static Default Routes</p>
<p>ip route 0.0.0.0 0.0.0.0 S0/0/1 creates a static default route on Router B1—a route that matches all IP packets—and sends those packets out interface S0/0/1.</p>
<p>show ip route</p>
<p>a *, meaning it is a candidate default route. A router can learn about more than one default route, and the router then has to choose which one to use; the * means that it is at least a candidate to become the default route.</p>
<p>Troubleshooting Static Routes</p>
<ul>
<li>
<p>The route is in the routing table but is incorrect.</p>
</li>
<li>
<p>Is there a subnetting math error in the subnet ID and mask?</p>
</li>
<li>
<p>Is the next-hop IP address correct and referencing an IP address on a neighboring router?</p>
</li>
<li>
<p>Does the next-hop IP address identify the correct router?</p>
</li>
<li>
<p>Is the outgoing interface correct, and referencing an interface on the local router (that is, the same router where the static route is configured)?</p>
</li>
<li>
<p>The route is not in the routing table.</p>
</li>
</ul>
<p>table. IOS also considers the following before adding the route to its routing table:</p>
<p><a href="#R-image-8e4fc7df5904779c06dfaa4aa9147391" class="lightbox-link"><img alt="Key Topic." class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="data:image/jpeg;base64,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iB4Nc5XPq71aqrOysnqF8PurAFj5JLp/khWMfMwlkGp9UhL16QxcMf0Wtk5XJHEdB6YmPoszzcU/0299XsvqGdZn09SLrKNp3iwQGuJIcxv7vtT1V02dH6JXdBqde0EHg6W7Qf6zliZH1i6vkY7sey79G4Q4taGucP5TmqtZ1LMtxKsN7/0FBDqmgAEET+ePd+co/vMAAPVOokcU/wBLinGfCf6vpZfumQyMvTjuQPDDaPDCUOIemPq9T0Of1Hrtf1hdRhgvaAPSxyP0bm7ZLz9H8787csQC0db/AE1barfWO+tn0WuP0mt5RR9Z+tCr0/XHEby1pfH9eFW6a2y7qNUS95fucTqT5lA5Rkyw4ZTleQSqW0bPyxSMUseLJxRhGsRhcPmnwj5pfK+kDhOmTrXcR//S9D6n0HC6id9g22fvBZ//ADLwf9K7/X+0uiSUGT7txfrPb4v63DxNnF974f1XucHTg4uF53/mXg/6V3+v9pL/AJl4P+ld/r/aXRJJn9D/ANV/zV/9P/13/Oed/wCZeD/pXf6/2kv+ZeD/AKV3+v8AaXRJJf0P/Vf81X9P/wBd/wA553/mXg/6V3+v9pX+m9BwunO31jfZ+8VppJ+P7txfq/b4v6vDxLMv3vh/W+5wdeLi4VJJJKdrP//Z/+0NrFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAHHAIAAAJ20wA4QklNBCUAAAAAABBnd0wWL4aT3lJz7CVsl7H5OEJJTQPtAAAAAAAQAJYAAAABAAEAlgAAAAEAAThCSU0EJgAAAAAADgAAAAAAAAAAAAA/gAAAOEJJTQQNAAAAAAAEAAAAHjhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAAAAAAAAEAOEJJTQQKAAAAAAABAAA4QklNJxAAAAAAAAoAAQAAAAAAAAACOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAANTAAAABgAAAAAAAAAAAAAAOQAAAEsAAAAPAGsAZQB5AF8AdABvAHAAaQBjAF8AaQBjAG8AbgAxAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAABLAAAAOQAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAbnVsbAAAAAIAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGGxvbmcAAAAAAAAAAEJ0b21sb25nAAAAOQAAAABSZ2h0bG9uZwAAAEsAAAAGc2xpY2VzVmxMcwAAAAFPYmpjAAAAAQAAAAAABXNsaWNlAAAAEgAAAAdzbGljZUlEbG9uZwAAAAAAAAAHZ3JvdXBJRGxvbmcAAAAAAAAABm9yaWdpbmVudW0AAAAMRVNsaWNlT3JpZ2luAAAADWF1dG9HZW5lcmF0ZWQAAAAAVHlwZWVudW0AAAAKRVNsaWNlVHlwZQAAAABJbWcgAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0MQAAAAQAAAAAVG9wIGxvbmcAAAAAAAAAAExlZnRsb25nAAAAAAAAAABCdG9tbG9uZwAAADkAAAAAodGxvbmcAAABLAAAAA3VybFRFWFQAAAABAAAAAAAAbnVsbFRFWFQAAAABAAAAAAAATXNnZVRFWFQAAAABAAAAAAAGYWx0VGFnVEVYVAAAAAEAAAAAAA5jZWxsVGV4dElzSFRNTGJvb2wBAAAACGNlbGxUZXh0VEVYVAAAAAEAAAAAAAlob3J6QWxpZ25lbnVtAAAAD0VTbGljZUhvcnpBbGlnbgAAAAdkZWZhdWx0AAAACXZlcnRBbGlnbmVudW0AAAAPRVNsaWNlVmVydEFsaWduAAAAB2RlZmF1bHQAAAALDb2xvclR5cGVlbnVtAAAAEUVTbGljZUJHQ29sb3JUeXBlAAAAAE5vbmUAAAAJdG9wT3V0c2V0bG9uZwAAAAAAAAAKbGE91dHNldGxvbmcAAAAAAAAADGJvdHRvbU91dHNldGxvbmcAAAAAAAAAC3JpZ2h0T3V0c2V0bG9uZwAAAAAAOEJJTQQoAAAAAAAMAAAAAT/wAAAAAAAAOEJJTQQRAAAAAAABAQA4QklNBBQAAAAAAAQAAAABOEJJTQQMAAAAAAfHAAAAAQAAAEsAAAA5AAAA5AAAMsQAAAerABgAAf/Y/+AAEEpGSUYAAQIAAEgASAAA/+0ADEFkb2JlX0NNAAL/7gAOQWRvYmUAZIAAAAAB/9sAhAAMCAgICQgMCQkMEQsKCxEVDwwMDxUYExMVExMYEQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQ0LCw0ODRAODhAUDg4OFBQODg4OFBEMDAwMDBERDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAA5AEsDASIAAhEBAxEB/90ABAAF/8QBPwAAAQUBAQEBAQEAAAAAAAAAAwABAgQFBgcICQoLAQABBQEBAQEBAQAAAAAAAAABAAIDBAUGBwgJCgsQAAEEAQMCBAIFBwYIBQMMMwEAAhEDBCESMQVBUWETInGBMgYUkaGxQiMkFVLBYjM0coLRQwclklPw4fFjczUWorKDJkSTVGRFwqN0NhfSVeJl8rOEw9N14/NGJ5SkhbSVxNTk9KW1xdXl9VoaWprbG1ub2N0dXZ3eHl6e3x9fn9xEAAgIBAgQEAwQFBgcHBgU1AQACEQMhMRIEQVFhcSITBTKBkRShsUIjwVLR8DMkYuFygpJDUxVjczTxJQYWorKDByY1wtJEk1SjF2RFVTZ0ZeLys4TD03Xj80aUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9ic3R1dnd4eXp7fH/9oADAMBAAIRAxEAPwDf6/17Ktyn0UPLKmGNO6yP2hm/6Zy1ejgH60sn96z/AM9uWnkYmL0nKyutZwFj32H7HSPE8O/rf+e1lzGXIZz9wxjGcoHWowhD9J14HDijDH7QnKWOM46CUsmSf6LzH2/N/wBM5N+0M3/TOV6jHzvrDnW3WPbW1g3WWH6FbfzWNapZPQaxh2ZmBlszaqP54NEOaO7uXblDWcgyjKZjrR4uEyEdzwcTYvlwRGcIRnpYEeKMZS+WPHwuf+0M3/TOS/aGb/pnK51DoVuIcT0rRkMzYFTwI1O3b3d++g9X6aOmZf2X1hc8NDnkDbE8N5d+amy+8RvilIcNA+r975Ux+7S4RGMDxAkej9z0y/RQ/tDN/wBM5a/Qev5VWUyi95sqsMa9lgqx0/8Ap1H9cI4M+UZYeuRuQBBN6FHMcviOKfoiKiSDECJuIfTEkw4TrbcB/9Db6XZXV9ZmvtcGMDny5xAA9ju5WgOs4t+L6i5tuDdYRTbOjJ49/7n7j/wAxZFdfS7OpZI6lY+qoasLBJLtP5L/zVqZHQ/q3jY1WVdkXNpvj03czI3cCv91ZkTk9fCYcIyTlLil+ifRwzj+668hi/V8YnxHFCEOCP6UfXxQl+8y6O7G6Vk5fT35FTmZIDsbIlrmGA5uy3Xa13u/OUsvJysPp95yMzED7AWMox6wS+Rt93ubt5XPO6ffbZa7BotvxWucK7AwmWg+0nT91Arxr7XObVU97mfTDWkkf1oUX3iUY8AgQPUIUZfpf9Nl+7QlLjMwT6TkuMbuP/pN636tX4+X0tjcnV3S7N7Sezdrix39lrnrlc3KdmZl2U7m15cB4D8xv9lq0X53U8fowxG4Zx8ewRZk7CC8E/nOj85V8nEwq+lY+TWbftNhizc0iuPd/Nv2hruP30MsjPHCA/wAnHinfp4v0Y/3uFOGAhknM/wCUnwQEfXw/pS+X5eOTQVjp/wDTqP64TDp+e6n1xjWmqJ3hhiPHhP0/+nUf1wosQIyY7BFyj/0mbKQcWSiDUZbf3X0scJ0w4Treecf/0bHUP6bd/WW91wNPQOkhxhp2Bx8tmqxOqVPqz7mvEHdKbI6lmZONVi3PDqaI9NsARA28j+SsWUxCWeJBuZIH+PxO9HGZw5aUSKgBI/4nDo9J17L6hhZ2Dj9OLq8fa0VsrHtcd23Y7+xtWlVXUz6w5DqgBY/Fa6wD97e4NJ/rNXJY31i6vi0toruBYwQze0OIHg1zlc+rvVqqs7KyeoXw+6sAWPkkun+SFYx8zCWQan1SEvXpDFwx/Ra2TlckcR0HpiY+izPNxT/Tb31ey+oZ1mfT1Iuso2neLBAa4khzG/u+1PVXTZ0fold0Gp17QQeDpbtB/rOWJkfWLq+Rjux7Lv0bhDi1oa5w/lOaq1nUsy3Eqw3v/QUEOqaAAQRP54935yj+8wAA9U6iRxT/AEuKcZ8J/q+ll+6ZDIy9OO5A8MNo8MJQ4h6Y+r1PQ5/Ueu1/WF1GGC9oA9LHI/RubtkvP0fzvztyxALR1v8ATVtqt9Y762fRa4/Sa3lFH1n60KvT9ccRvLWl8f14VbprbLuo1RL3l+5xOpPmUDlGTLDhlOV5BKpbRs/LFIxSx4snFGEaxGFw+afCPml8r6QOE6ZOtdxH/9L0PqfQcLqJ32DbZ+8Fn/8AMvB/0rv9f7S6JJQZPu3F+s9vi/rcPE2cX3vh/Ve5wdODi4Xnf+ZeD/pXf6/2kv8AmXg/6V3+v9pdEkmf0P8A1X/NX/0//Xf8553/AJl4P+ld/r/aS/5l4P8ApXf6/wBpdEkl/Q/9V/zVf0//AF3/ADnnf+ZeD/pXf6/2lf6b0HC6c7fWN9n7xWmkn4/u3F+r9vi/q8PEsy/e+H9b7nB14uLhUkkkp2s//9kAOEJJTQQhAAAAAABVAAAAAQEAAAAPAEEAZABvAGIAZQAgAFAAaABvAHQAbwBzAGgAbwBwAAAAEwBBAGQAbwBiAGUAIABQAGgAbwB0AG8AcwBoAG8AcAAgAEMAUwAzAAAAAQA4QklNBAYAAAAAAAcACAAAAAEBAP/hDxBodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDQuMS1jMDM2IDQ2LjI3NjcyMCwgTW9uIEZlYiAxOSAyMDA3IDIyOjQwOjA4ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4YXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4YXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4YXA6Q3JlYXRlRGF0ZT0iMjAxOS0wOC0yM1QxMTowOToyOSswNTozMCIgeGFwOk1vZGlmeURhdGU9IjIwMTktMDgtMjNUMTE6MDk6MjkrMDU6MzAiIHhhcDpNZXRhZGF0YURhdGU9IjIwMTktMDgtMjNUMTE6MDk6MjkrMDU6MzAiIHhhcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTMyBXaW5kb3dzIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpIaXN0b3J5PSIiIHhhcE1NOkluc3RhbmNlSUQ9InV1aWQ6OTU2RkExNUY2OEM1RTkxMTg3QzdBQzlFOEVCOUREMjQiIHhhcE1NOkRvY3VtZW50SUQ9InV1aWQ6OTQ2RkExNUY2OEM1RTkxMTg3QzdBQzlFOEVCOUREMjQiIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjE1MDAwMDAvMTAwMDAiIHRpZmY6WVJlc29sdXRpb249IjE1MDAwMDAvMTAwMDAiIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiIHRpZmY6TmF0aXZlRGlnZXN0PSIyNTYsMjU3LDI1OCwyNTksMjYyLDI3NCwyNzcsMjg0LDUzMCw1MzEsMjgyLDI4MywyOTYsMzAxLDMxOCwzMTksNTI5LDUzMiwzMDYsMjcwLDI3MSwyNzIsMzA1LDMxNSwzMzQzMjsyNzZENjlGQUEzOTUzMjAwNTc2QTQ5MTgzRkM0QjhBNSIgZXhpZjpQaXhlbFhEaW1lbnNpb249Ijc1IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iNTciIGV4aWY6Q29sb3JTcGFjZT0iLTEiIGV4aWY6TmF0aXZlRGlnZXN0PSIzNjg2NCw0MDk2MCw0MDk2MSwzNzEyMSwzNzEyMiw0MDk2Miw0MDk2MywzNzUxMCw0MDk2NCwzNjg2NywzNjg2OCwzMzQzNCwzMzQzNywzNDg1MCwzNDg1MiwzNDg1NSwzNDg1NiwzNzM3NywzNzM3OCwzNzM3OSwzNzM4MCwzNzM4MSwzNzM4MiwzNzM4MywzNzM4NCwzNzM4NSwzNzM4NiwzNzM5Niw0MTQ4Myw0MTQ4NCw0MTQ4Niw0MTQ4Nyw0MTQ4OCw0MTQ5Miw0MTQ5Myw0MTQ5NSw0MTcyOCw0MTcyOSw0MTczMCw0MTk4NSw0MTk4Niw0MTk4Nyw0MTk4OCw0MTk4OSw0MTk5MCw0MTk5MSw0MTk5Miw0MTk5Myw0MTk5NCw0MTk5NSw0MTk5Niw0MjAxNiwwLDIsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMjAsMjIsMjMsMjQsMjUsMjYsMjcsMjgsMzA7MUYxN0M2OEVDRUNGRDI0MTFEQzRDREI4Rjk2N0E2QTEiPiA8eGFwTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/Pv/uAA5BZG9iZQBkQAAAAAH/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQECAgICAgICAgICAgMDAwMDAwMDAwMBAQEBAQEBAQEBAQICAQICAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA//AABEIADkASwMBEQACEQEDEQH/3QAEAAr/xAGiAAAABgIDAQAAAAAAAAAAAAAHCAYFBAkDCgIBAAsBAAAGAwEBAQAAAAAAAAAAAAYFBAMHAggBCQAKCxAAAgEDBAEDAwIDAwMCBgl1AQIDBB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" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8e4fc7df5904779c06dfaa4aa9147391"><img alt="Key Topic." class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="data:image/jpeg;base64,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iB4Nc5XPq71aqrOysnqF8PurAFj5JLp/khWMfMwlkGp9UhL16QxcMf0Wtk5XJHEdB6YmPoszzcU/0299XsvqGdZn09SLrKNp3iwQGuJIcxv7vtT1V02dH6JXdBqde0EHg6W7Qf6zliZH1i6vkY7sey79G4Q4taGucP5TmqtZ1LMtxKsN7/0FBDqmgAEET+ePd+co/vMAAPVOokcU/wBLinGfCf6vpZfumQyMvTjuQPDDaPDCUOIemPq9T0Of1Hrtf1hdRhgvaAPSxyP0bm7ZLz9H8787csQC0db/AE1barfWO+tn0WuP0mt5RR9Z+tCr0/XHEby1pfH9eFW6a2y7qNUS95fucTqT5lA5Rkyw4ZTleQSqW0bPyxSMUseLJxRhGsRhcPmnwj5pfK+kDhOmTrXcR//S9D6n0HC6id9g22fvBZ//ADLwf9K7/X+0uiSUGT7txfrPb4v63DxNnF974f1XucHTg4uF53/mXg/6V3+v9pL/AJl4P+ld/r/aXRJJn9D/ANV/zV/9P/13/Oed/wCZeD/pXf6/2kv+ZeD/AKV3+v8AaXRJJf0P/Vf81X9P/wBd/wA553/mXg/6V3+v9pX+m9BwunO31jfZ+8VppJ+P7txfq/b4v6vDxLMv3vh/W+5wdeLi4VJJJKdrP//Z/+0NrFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAHHAIAAAJ20wA4QklNBCUAAAAAABBnd0wWL4aT3lJz7CVsl7H5OEJJTQPtAAAAAAAQAJYAAAABAAEAlgAAAAEAAThCSU0EJgAAAAAADgAAAAAAAAAAAAA/gAAAOEJJTQQNAAAAAAAEAAAAHjhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAAAAAAAAEAOEJJTQQKAAAAAAABAAA4QklNJxAAAAAAAAoAAQAAAAAAAAACOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////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ZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4YXA6Q3JlYXRlRGF0ZT0iMjAxOS0wOC0yM1QxMTowOToyOSswNTozMCIgeGFwOk1vZGlmeURhdGU9IjIwMTktMDgtMjNUMTE6MDk6MjkrMDU6MzAiIHhhcDpNZXRhZGF0YURhdGU9IjIwMTktMDgtMjNUMTE6MDk6MjkrMDU6MzAiIHhhcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTMyBXaW5kb3dzIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpIaXN0b3J5PSIiIHhhcE1NOkluc3RhbmNlSUQ9InV1aWQ6OTU2RkExNUY2OEM1RTkxMTg3QzdBQzlFOEVCOUREMjQiIHhhcE1NOkRvY3VtZW50SUQ9InV1aWQ6OTQ2RkExNUY2OEM1RTkxMTg3QzdBQzlFOEVCOUREMjQiIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjE1MDAwMDAvMTAwMDAiIHRpZmY6WVJlc29sdXRpb249IjE1MDAwMDAvMTAwMDAiIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiIHRpZmY6TmF0aXZlRGlnZXN0PSIyNTYsMjU3LDI1OCwyNTksMjYyLDI3NCwyNzcsMjg0LDUzMCw1MzEsMjgyLDI4MywyOTYsMzAxLDMxOCwzMTksNTI5LDUzMiwzMDYsMjcwLDI3MSwyNzIsMzA1LDMxNSwzMzQzMjsyNzZENjlGQUEzOTUzMjAwNTc2QTQ5MTgzRkM0QjhBNSIgZXhpZjpQaXhlbFhEaW1lbnNpb249Ijc1IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iNTciIGV4aWY6Q29sb3JTcGFjZT0iLTEiIGV4aWY6TmF0aXZlRGlnZXN0PSIzNjg2NCw0MDk2MCw0MDk2MSwzNzEyMSwzNzEyMiw0MDk2Miw0MDk2MywzNzUxMCw0MDk2NCwzNjg2NywzNjg2OCwzMzQzNCwzMzQzNywzNDg1MCwzNDg1MiwzNDg1NSwzNDg1NiwzNzM3NywzNzM3OCwzNzM3OSwzNzM4MCwzNzM4MSwzNzM4MiwzNzM4MywzNzM4NCwzNzM4NSwzNzM4NiwzNzM5Niw0MTQ4Myw0MTQ4NCw0MTQ4Niw0MTQ4Nyw0MTQ4OCw0MTQ5Miw0MTQ5Myw0MTQ5NSw0MTcyOCw0MTcyOSw0MTczMCw0MTk4NSw0MTk4Niw0MTk4Nyw0MTk4OCw0MTk4OSw0MTk5MCw0MTk5MSw0MTk5Miw0MTk5Myw0MTk5NCw0MTk5NSw0MTk5Niw0MjAxNiwwLDIsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMjAsMjIsMjMsMjQsMjUsMjYsMjcsMjgsMzA7MUYxN0M2OEVDRUNGRDI0MTFEQzRDREI4Rjk2N0E2QTEiPiA8eGFwTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/Pv/uAA5BZG9iZQBkQAAAAAH/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQECAgICAgICAgICAgMDAwMDAwMDAwMBAQEBAQEBAQEBAQICAQICAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA//AABEIADkASwMBEQACEQEDEQH/3QAEAAr/xAGiAAAABgIDAQAAAAAAAAAAAAAHCAYFBAkDCgIBAAsBAAAGAwEBAQAAAAAAAAAAAAYFBAMHAggBCQAKCxAAAgEDBAEDAwIDAwMCBgl1AQIDBB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"></a></p>
<ul>
<li>
<p>For ip route commands that list an outgoing interface, that interface must be in an up/up state.</p>
</li>
<li>
<p>For ip route commands that list a next-hop IP address, the local router must have a route to reach that next-hop address.</p>
</li>
<li>
<p>You can configure a static route so that IOS ignores these basic checks, always putting the IP route in the routing table. To do so, just use the permanent keyword on the ip route command. For example, by adding the permanent keyword to the end of the two commands as demonstrated in <a href="https://learning.oreilly.com/library/view/ccna-200-301-official/9780136755562/vol1_ch16.xhtml#ch16ex7" rel="external" target="_blank">Example 16-7</a>, R1 would now add these routes, regardless of whether the two WAN links were up.</p>
</li>
<li>
<p>The route is in the routing table and is correct, but the packets do not arrive at the destination host.</p>
</li>
</ul>
<p>Many legitimate router features can cause these multiple routes to appear in a router’s routing table, including</p>
<ul>
<li>Static routes</li>
<li>Route autosummarization</li>
<li>Manual route summarization</li>
</ul>
<p>When a particular destination IP address matches more than one route in a router’s IPv4 routing table, the router uses the most specific route—in other words, the route with the longest prefix length mask.</p>
<p>A second way to identify the route a router will use, one that does not require any subnetting math, is the show ip route address command. The last parameter on this command is the IP address of an assumed IP packet. The router replies by listing the route it would use to route a packet sent to that address.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="switch-interfaces">Switch Interfaces</h1>

<p>1.0 Network Fundamentals</p>
<p>1.1 Explain the role and function of network components</p>
<p>1.1.b L2 and L3 switches</p>
<p>1.4 Describe switching concepts</p>
<p>Configuring Speed, Duplex, and Description</p>
<ul>
<li>
<p>autonegotiate</p>
</li>
<li>
<p>What speed to use</p>
</li>
<li>
<p>enabled by default</p>
</li>
</ul>
<p>duplex {auto | full | half} and speed {auto | 10 | 100 | 1000}</p>
<ul>
<li>configure the speed and duplex settings</li>
</ul>
<p>(config-int) # description text</p>
<ul>
<li>add a text description to the interface</li>
</ul>
<p>show interfaces status</p>
<ul>
<li>lists port #, Name, status, vlan, duplex, speed, and type</li>
</ul>
<p>a-full and a-100</p>
<p>a- means that the listed speed and duplex values were autonegotiated.</p>
<p>Autonegotiation</p>
<p>IEEE autonegotiation (IEEE standard 802.3u)</p>
<ul>
<li>
<p>each node states what it can do, and</p>
</li>
<li>
<p>then each node picks the best options that both nodes support:</p>
</li>
<li>
<p>the fastest speed and the best duplex setting, with full duplex being better than half duplex.</p>
</li>
<li>
<p>disable autonegotiation</p>
</li>
<li>
<p>Configure both the speed and duplex on a  switch interface</p>
</li>
<li>
<p>when a node tries to use autonegotiation but hears nothing from the device.</p>
</li>
</ul>
<p>Speed: Use your slowest supported speed (often 10 Mbps).</p>
<p>Duplex: If your speed = 10 or 100, use half duplex; otherwise, use full duplex.</p>
<p>Cisco switches can actually sense the speed used by other nodes, even without IEEE autonegotiation.</p>
<ul>
<li>
<p>Cisco switches use this slightly different logic to choose the speed when autonegotiation fails:</p>
</li>
<li>
<p>Speed: Sense the speed (without using autonegotiation), but if that fails, use the IEEE default (slowest supported speed, often 10 Mbps).</p>
</li>
<li>
<p>Duplex: Use the IEEE defaults: If speed = 10 or 100, use half duplex; otherwise, use full duplex.</p>
</li>
<li>
<p>Ethernet interfaces using speeds faster than 1 Gbps always use full duplex.</p>
</li>
<li>
<p>hubs do not react to autonegotiation messages</p>
</li>
</ul>
<p> show interfaces and show interfaces description</p>
<p>Shutdown command is configured</p>
<ul>
<li>Line status = administratively down</li>
<li>Protocol status = down</li>
<li>Interface status = disabled</li>
</ul>
<p>Cable, speed mismatch, neighbor device is off, shutdown, or err-disabled</p>
<ul>
<li>Line status = down</li>
<li>Protocol status = down</li>
<li>Interface status = notconnect</li>
</ul>
<p>Not expected on LAN switch physical interfaces</p>
<ul>
<li>Line status = up</li>
<li>Protocol status = down</li>
<li>Interface status = notconnect</li>
</ul>
<p>Port security has disabled the interface</p>
<ul>
<li>Line status = down</li>
<li>Protocol status = down (err-disabled)</li>
<li>Interface status = err-disabled</li>
</ul>
<p>the interface is working</p>
<ul>
<li>Line status = up</li>
<li>Protocol status = up</li>
<li>Interface status = connected</li>
</ul>
<p>show interfaces fa0/13 (without the status option)</p>
<ul>
<li>lists the speed and duplex for interface Fast Ethernet 0/13</li>
<li>with nothing implying that the values were learned through autonegotiation.</li>
</ul>
<p>speed manually set 10 Mbps on one switch and 100 Mbps on the other</p>
<ul>
<li>both switches would list the port in a down/down or notconnect state</li>
</ul>
<p>if the duplex settings do not match</p>
<ul>
<li>the switch interface will still be in a connected (up/up) or connected state.</li>
</ul>
<p>How to identify duplex mismatch problems,</p>
<ul>
<li>check the duplex setting on each end of the link to see if the values mismatch.</li>
<li>watch for incrementing collision and late collision counters</li>
</ul>
<p>Common Layer 1 problems</p>
<ul>
<li>receiving device might receive a frame whose bits have changed values.</li>
<li>These frames do not pass the error detection logic as implemented in the FCS field in the Ethernet trailer,</li>
<li>The receiving device discards the frame and counts it as some kind of input error.</li>
<li>Cisco switches list this error as a CRC error</li>
</ul>
<p>Runts:</p>
<ul>
<li>
<p>Frames that did not meet the minimum frame size requirement</p>
</li>
<li>
<p>(64 bytes, including the 18-byte destination MAC, source MAC, type, and FCS).</p>
</li>
<li>
<p>Can be caused by collisions.</p>
</li>
</ul>
<p>Giants:</p>
<ul>
<li>
<p>Frames that exceed the maximum frame size requirement</p>
</li>
<li>
<p>(1518 bytes, including the 18-byte destination MAC, source MAC, type, and FCS)</p>
</li>
</ul>
<p>Input Errors:</p>
<ul>
<li>A total of many counters, including runts, giants, no buffer, CRC, frame, overrun, and ignored counts.</li>
</ul>
<p>CRC:</p>
<ul>
<li>Received frames that did not pass the FCS math</li>
<li>can be caused by collisions</li>
</ul>
<p>Frame:</p>
<ul>
<li>
<p>Received frames that have an illegal format</p>
</li>
<li>
<p>(like ending with a partial byte)</p>
</li>
<li>
<p>can be caused by collisions.</p>
</li>
</ul>
<p>Packets Output:</p>
<ul>
<li>Total number of packets (frames) forwarded out the interface.</li>
</ul>
<p>Output Errors:</p>
<ul>
<li>Total number of packets (frames) that the switch port tried to transmit, but for which some problem occurred.</li>
</ul>
<p>Collisions:</p>
<ul>
<li>Counter of all collisions that occur when the interface is transmitting a frame</li>
</ul>
<p>Late Collisions:</p>
<ul>
<li>
<p>The subset of all collisions that happen after the 64th byte</p>
</li>
<li>
<p>(In a properly working Ethernet LAN, collisions should occur within the first 64 bytes</p>
</li>
<li>
<p>Often point to a duplex mismatch</p>
</li>
</ul>
<p>Collisions occur as a normal part of the half-duplex logic imposed by CSMA/CD</p>
<p>a switch interface with an increasing collisions counter might not even have a problem.</p>
<ul>
<li>if the CRC errors grow, but the collisions counters do not, the problem might simply be interference on the cable.</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="switchport-security-configuration">Switchport Security Configuration</h1>

<p>5.0 Security Fundamentals</p>
<p>5.7 Configure Layer 2 security features (DHCP snooping, dynamic ARP inspection, and port security)</p>
<p>Port Security Concepts and Configuration</p>
<ul>
<li>identifies devices based on the source MAC address of Ethernet frames that the devices send.</li>
<li>no restrictions on whether the frame came from a local device or was forwarded through other switches</li>
<li>examines frames received on the interface to determine if a violation has occurred.</li>
<li>defines a maximum number of unique source MAC addresses allowed for all frames coming in the interface.</li>
<li>keeps a list and counter of all unique source MAC addresses on the interface.</li>
<li>monitors newly learned MAC addresses, considering those MAC addresses to cause a violation if the newly learned MAC address would push the total number of MAC table entries for the interface past the configured maximum allowed MAC addresses for that port.</li>
<li>takes action to discard frames from the violating MAC addresses, plus other actions depending on the configured violation mode.</li>
</ul>
<p>Other port security options</p>
<ul>
<li>Define a maximum of three MAC addresses, defining all three specific MAC addresses.</li>
<li>Define a maximum of three MAC addresses but allow those addresses to be dynamically learned, allowing the first three MAC addresses learned.</li>
<li>Define a maximum of three MAC addresses, predefining one specific MAC address, and allowing two more to be dynamically learned.</li>
</ul>
<p>sticky secure MAC addresses.</p>
<ul>
<li>port security learns the MAC addresses off each port so that you do not have to preconfigure the values. It also adds the learned MAC addresses to the port security configuration (in the running-config file).</li>
</ul>
<p>Configuring Port Security</p>
<ul>
<li>works on both access ports and trunk ports</li>
</ul>
<p>requires you to statically configure the port as a trunk or an access port.</p>
<ul>
<li>
<p>Use the switchport mode access or the switchport mode trunk interface subcommands</p>
</li>
<li>
<p>Use the switchport port-security interface subcommand to enable port security on the interface.</p>
</li>
<li>
<p>(Optional)</p>
</li>
<li>
<p>switchport port-security maximum number</p>
</li>
<li>
<p>override the default maximum number of allowed MAC addresses associated with the interface (1).</p>
</li>
</ul>
<p>(Optional)</p>
<ul>
<li>
<p>switchport port-security violation {protect | restrict | shutdown}</p>
</li>
<li>
<p>override the default action to take upon a security violation (shutdown).</p>
</li>
</ul>
<p>(Optional)</p>
<ul>
<li>
<p>switchport port-security mac-address mac-address</p>
</li>
<li>
<p>predefine any allowed source MAC addresses for this interface.</p>
</li>
</ul>
<p>(Optional)</p>
<ul>
<li>
<p>switchport port-security mac-address sticky</p>
</li>
<li>
<p>tell the switch to “sticky learn” dynamically learned MAC addresses.</p>
</li>
</ul>
<p>switchport port-security</p>
<ul>
<li>enables port security, with all defaults</li>
</ul>
<p>switchport port-security mac-address 0200.1111.1111</p>
<ul>
<li>defines a specific source MAC address. With the default maximum source address setting of 1</li>
</ul>
<p>default violation action</p>
<p>disable the interface.</p>
<ul>
<li>
<p>Port security does not save the configuration of the sticky addresses</p>
</li>
<li>
<p>use the copy running-config startup-config command if desired.</p>
</li>
</ul>
<p>voice ports and EtherChannels</p>
<ul>
<li>
<p>voice ports</p>
</li>
<li>
<p>make sure to configure the maximum MAC address to at least two (one for the phone, or for a PC connected to the phone)</p>
</li>
<li>
<p>EtherChannels</p>
</li>
<li>
<p>the port security configuration should be placed on the port-channel interface, rather than the individual physical interfaces in the channel.</p>
</li>
</ul>
<p>Verifying Port Security</p>
<p>Show port-security interface</p>
<ul>
<li>
<p>provides the most insight to how port security operates</p>
</li>
<li>
<p>lists the configuration settings for port security on an interface</p>
</li>
<li>
<p>includes information about any security violations</p>
</li>
<li>
<p>Port Security: Enabled</p>
</li>
<li>
<p>Port Status: Secure-shutdown</p>
</li>
<li>
<p>Violation mode: shutdown</p>
</li>
<li>
<p>Maximum MAC Addresses : 1</p>
</li>
<li>
<p>Last source Address:VLAN: 0013:197b:5004 1</p>
</li>
</ul>
<p>Show port-security interface fastEthernet 0/2</p>
<ul>
<li>Port Security: Enabled</li>
<li>Port Status: Secure-shutdown</li>
<li>Violation Mode: Shutdown</li>
<li>Maximum MAC Addresses: 1</li>
<li>Sticky MAC Addresses: 1</li>
<li>Last Source Address: Vlan 0013:197b:5004 1</li>
</ul>
<p>secure-shutdown state</p>
<ul>
<li>the interface has been disabled because of port security</li>
</ul>
<p>Port Security MAC Addresses</p>
<ul>
<li>
<p>Port security ports</p>
</li>
<li>
<p>No longer listed as dynamic entries</p>
</li>
<li>
<p>Do not show up in the results from show mac address-table dynamic EXEC command.</p>
</li>
<li>
<p>you need to use one of these options to see the MAC table entries associated with ports using port security:</p>
</li>
</ul>
<p>show mac address-table secure:</p>
<ul>
<li>Lists MAC addresses associated with ports that use port security</li>
</ul>
<p>show mac address-table static:</p>
<ul>
<li>Lists MAC addresses associated with ports that use port security, as well as any other statically defined MAC addresses</li>
</ul>
<p>show mac address-table secure interface F0/2</p>
<p>Port Security Violation Modes</p>
<p>(All three options cause the switch to discard the offending frame)</p>
<p>Protect</p>
<ul>
<li>Discard frame</li>
</ul>
<p>Restrict</p>
<ul>
<li>Discard frame</li>
<li>Send log and snmp messages</li>
<li>increment violation counter</li>
</ul>
<p>Shutdown</p>
<ul>
<li>Discard frame</li>
<li>Send log and snmp messages</li>
<li>increment violation counter</li>
<li>Puts interface into err-disabled state, discarding all traffic</li>
</ul>
<p>Shutdown Mode</p>
<ul>
<li>
<p>recover from an err-disabled state</p>
</li>
<li>
<p>interface must be shut down with the shutdown command and then enabled with the no shutdown command.</p>
</li>
<li>
<p>automatically recover from the err-disabled state:</p>
</li>
</ul>
<p>errdisable recovery cause psecure-violation</p>
<ul>
<li>automatic recovery for interfaces in an err-disabled state caused by port security</li>
</ul>
<p>errdisable recovery interval seconds</p>
<ul>
<li>set the time to wait before recovering the interface</li>
</ul>
<p>show port-security interface</p>
<ul>
<li>lists the current port-security status (secure-shutdown) as well as the configured mode (shutdown)</li>
<li>last line of output lists the number of violations that caused the interface to fail to an err-disabled state</li>
<li>second-to-last line identifies the MAC address and VLAN of the device that caused the violation.</li>
</ul>
<p>violations counter</p>
<ul>
<li>notes the number of times the interface has been moved to the err-disabled (secure-shutdown) state.</li>
<li>while err-disabled, many frames can arrive, but the counter remains at 1.</li>
<li>after shutdown/no shutdown, another violation that causes the interface to fail to an err-disabled state will cause the counter to increment to 2.</li>
</ul>
<p>Protect and Restrict Modes</p>
<ul>
<li>still discard offending traffic, but the interface remains in a connected (up/up) state and in a port security state of secure-up.</li>
<li>port continues to forward good traffic but discards offending traffic.</li>
</ul>
<p>protect</p>
<ul>
<li>discard the frame.</li>
<li>does not change the port to an err-disabled state</li>
<li>does not generate messages</li>
<li>does not even increment the violations counter</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="tcpudp">TCP/UDP</h1>

<p>Chapter 1. Introduction to TCP/IP Transport and Applications</p>
<p>This chapter covers the following exam topics:</p>
<p>1.0 Network Fundamentals</p>
<p>1.5 Compare TCP to UDP</p>
<p>4.0 IP Services</p>
<p>4.3 Explain the role of DHCP and DNS in the network</p>
<p>TCP/IP Layer 4 Protocols: TCP and UDP</p>
<ul>
<li>TCP provides retransmission (error recovery) and</li>
<li>TCP helps to avoid congestion (flow control),</li>
<li>UDP needs fewer bytes in its header (less overhead)</li>
<li>UDP software does not slow down data transfer</li>
<li>TCP can purposefully slow down data transfer</li>
<li>Voice over IP (VoIP) and video over IP, do not need error recovery, so they use UDP</li>
</ul>
<p>UDP Supports:</p>
<ul>
<li>Multiplexing using ports</li>
</ul>
<p>TCP Supports:</p>
<ul>
<li>
<p>Multiplexing using ports</p>
</li>
<li>
<p>Error recovery (reliability)</p>
</li>
<li>
<p>numbering and acknowledging data with sequence and acknowledgment header fields</p>
</li>
<li>
<p>Flow control using windowing</p>
</li>
<li>
<p>use window sizes to protect buffer space</p>
</li>
<li>
<p>Connection establishment and termination</p>
</li>
<li>
<p>initialize port numbers and sequence and acknowledgment fields</p>
</li>
<li>
<p>Ordered data transfer and segmentation</p>
</li>
</ul>
<p>Transmission Control Protocol</p>
<ul>
<li>
<p>TCP header is 20 bytes (without options)</p>
</li>
<li>
<p>source port/ destination port</p>
</li>
<li>
<p>Sequence Number</p>
</li>
<li>
<p>Acknowledgement Number</p>
</li>
<li>
<p>Offset, Reserved, Flag bits, Window</p>
</li>
<li>
<p>Checksum, Urgent</p>
</li>
</ul>
<p>*TCP segment, Layer 4 PDU, or L4PDU</p>
<p>Multiplexing</p>
<p>example</p>
<p>All open on one computer:</p>
<p>Port 80 Web Server</p>
<p>Port 800 Ad Server</p>
<p>Port 9876 Wire Application</p>
<p>Socket</p>
<ul>
<li>
<p>Includes IP address, transport protocol, and port number</p>
</li>
<li>
<p>(10.1.1.2, TCP, port 80)</p>
</li>
</ul>
<p>Well Known (System) Ports:</p>
<ul>
<li>0 to 1023</li>
</ul>
<p>User (Registered) Ports:</p>
<ul>
<li>1024 to 49151</li>
</ul>
<p>Ephemeral (Dynamic, Private) Ports:</p>
<ul>
<li>
<p>49152 to 65535,</p>
</li>
<li>
<p>not assigned</p>
</li>
<li>
<p>Servers use well-known ports (or user ports), whereas clients use dynamic ports</p>
</li>
<li>
<p>uses the same port number for all connections. For example,</p>
</li>
<li>
<p>web server with 100 clients would have only one socket (one port number)</p>
</li>
<li>
<p>server looks at source port of received TCP segments.</p>
</li>
</ul>
<p>Popular TCP/IP Applications</p>
<p>Simple Network Management Protocol (SNMP)</p>
<ul>
<li>query, compile, store, and display information about a network’s operation</li>
<li>Cisco Prime software</li>
</ul>
<p>FTP/ TFTP</p>
<ul>
<li>FTP allows many more features</li>
<li>TFTPis very simple, good tools for embedded parts of networking devices.</li>
</ul>
<p>SMTP/ POP3</p>
<ul>
<li>Simple Mail Transfer Protocol (SMTP) and Post Office Protocol version 3 (POP3)</li>
<li>both used for transferring mail (TCP).</li>
</ul>
<p>Port numbers and protocols</p>
<ul>
<li>FTP Data TCP 20</li>
<li>FTP Control TCP 21</li>
<li>SSH TCP 22</li>
<li>Telnet TCP 23</li>
<li>SMTP TCP 25</li>
<li>DNS UDP/TCP 53</li>
<li>DHCP Server UDP 67</li>
<li>DHCP Client UDP 68</li>
<li>TFTP UDP 69</li>
<li>HTTP TCP 80</li>
<li>POP2 TCP 110</li>
<li>SNMP UDP 161</li>
<li>SSL TCP 443</li>
<li>Syslog UDP 514</li>
</ul>
<p>Connection Establishment and Termination</p>
<p>TCP connection establishment (3 way handshake) occurs 1st</p>
<ul>
<li>
<p>SYN, DPORT=80, SPORT=49145</p>
</li>
<li>
<p>SYN ACK , DPORT= 49145, SPORT=80</p>
</li>
<li>
<p>ACK DPORT=80, SPORT=49145</p>
</li>
<li>
<p>initializing Sequence and Acknowledgment fields</p>
</li>
<li>
<p>agreeing on the port numbers</p>
</li>
<li>
<p>2 bits inside the flag fields of the TCP header. Called the SYN and ACK flags</p>
</li>
</ul>
<p>TCP connection termination. (four-way)</p>
<p>- uses an additional flag, called the FIN bit</p>
<ul>
<li>ACK, FIN &gt;</li>
<li>&lt; ACK</li>
<li>ACK, FIN &lt;</li>
<li>&lt; ACK</li>
</ul>
<p>Error Recovery and Reliability</p>
<ul>
<li>
<p>reliability in both directions</p>
</li>
<li>
<p>Sequence Number field of one direction and Acknowledgment field in the other direction</p>
</li>
<li>
<p>1000 bytes, Seq = 1000 &gt;</p>
</li>
<li>
<p>1000 bytes, Seq = 2000 &gt;</p>
</li>
<li>
<p>1000 bytes, Seq = 3000 &gt;</p>
</li>
<li>
<p>&lt; no data, ACK = 4000</p>
</li>
<li>
<p>received all data with sequence numbers up through one less than 4000</p>
</li>
<li>
<p>ready to receive your byte 4000 next.</p>
</li>
<li>
<p>ack by listing the next expected byte (forward acknowledgment)</p>
</li>
<li>
<p>sequence number field identifies the data (sender)</p>
</li>
<li>
<p>forward acknowledgments acknowledge the data (receiver)</p>
</li>
<li>
<p>Sequence and Acknowledgment fields let the receiving host can notice lost data</p>
</li>
<li>
<p>ask the sending host to resend</p>
</li>
<li>
<p>acknowledge that the re-sent data arrived</p>
</li>
<li>
<p>1000 bytes, SEQ 1000 &gt;</p>
</li>
<li>
<p>1000 bytes, SEQ 2000 X &gt;</p>
</li>
<li>
<p>1000 bytes, SEQ 3000 &gt;</p>
</li>
<li>
<p>&lt; no data, ACK = 2000</p>
</li>
<li>
<p>(received 1000 - 1999 and 3000 - 3999, asking for 2000)</p>
</li>
<li>
<p>1000 bytes, SEQ 2000 &gt;</p>
</li>
<li>
<p>&lt; no data, ACK 4000</p>
</li>
<li>
<p>Retransmission timer</p>
</li>
<li>
<p>Sender may wait a few moments to make sure no other acknowledgments arrive</p>
</li>
</ul>
<p>Flow Control Using Windowing</p>
<p>Sliding window (dynamic window</p>
<ul>
<li>
<p>Receiver slides the window size up and down</p>
</li>
<li>
<p>&lt; ACK=1000, Window=3000</p>
</li>
<li>
<p>SEQ=1000, SEQ=2000, SEQ=3000 &gt;</p>
</li>
<li>
<p>&lt; ACK=4000, Window=4000</p>
</li>
</ul>
<p>User Datagram Protocol</p>
<ul>
<li>
<p>connectionless</p>
</li>
<li>
<p>no reliability,</p>
</li>
<li>
<p>no windowing,</p>
</li>
<li>
<p>no reordering of the received data, and</p>
</li>
<li>
<p>no segmentation of large chunks of data into the right size for transmission</p>
</li>
<li>
<p>provides data transfer and multiplexing using port numbers</p>
</li>
<li>
<p>Less overhead and processing than TCP.</p>
</li>
<li>
<p>no reordering or recovery</p>
</li>
<li>
<p>DNS requests use UDP, user will retry an operation if the DNS resolution fails</p>
</li>
<li>
<p>Network File System (NFS), a remote file system application, performs recovery with application layer code, so UDP features are acceptable to NFS.</p>
</li>
<li>
<p>8 byte header</p>
</li>
<li>
<p>Source port, Destination Port</p>
</li>
<li>
<p>Length, Checksum</p>
</li>
</ul>
<p>TCP/IP Applications</p>
<p>Uniform Resource Identifiers (URI)</p>
<ul>
<li>
<p>clicking a link and typing a URI—refer to a URI</p>
</li>
<li>
<p>referred to as web address or  Universal (uniform) Resource Locator [URL]</p>
</li>
<li>
<p>three key components</p>
</li>
<li>
<p>before the :// identifies the protocol</p>
</li>
<li>
<p>between the // and / identifies the server by name</p>
</li>
<li>
<p>after the / identifies the web page.</p>
</li>
<li>
<p>http:// (Scheme)</p>
</li>
<li>
<p><a href="http://www.certskills.com" rel="external" target="_blank">www.certskills.com</a> (Authority)</p>
</li>
<li>
<p>/blog (path)</p>
</li>
</ul>
<p>DNS</p>
<ul>
<li>
<p>&lt; Name Resolution Request (IP Header, UDP Header, DNS Request)</p>
</li>
<li>
<p>Name resolution Reply (Ip Header, UDP Header, DNS Request (IP address) &gt;</p>
</li>
<li>
<p>&lt; TCP connection to requested web server</p>
</li>
<li>
<p>DNS requests can be cached by hosts and servers</p>
</li>
<li>
<p>Local DNS may need to ask for help</p>
</li>
<li>
<p>The enterprise DNS acts as a recursive DNS server</p>
</li>
<li>
<p>Sends repeated DNS messages to find the authoritative DNS server.</p>
</li>
<li>
<p>Recursive DNS lookup</p>
</li>
<li>
<p>host &gt; Enterprise DNS &gt;</p>
</li>
<li>
<p>Root DNS</p>
</li>
<li>
<p>.com TLD DNS</p>
</li>
<li>
<p>Authoritative cisco.com DNS</p>
</li>
</ul>
<p>Transferring Files with HTTP</p>
<ul>
<li>
<p>HTTP GET request lists file it needs</p>
</li>
<li>
<p>HTTP GET response from server with a return code of 200 (meaning OK) and file’s contents.</p>
</li>
<li>
<p>Server may issue a return code of 404, (file not found)</p>
</li>
<li>
<p>Web pages consist of multiple files, called objects</p>
</li>
<li>
<p>Objects are stored as different files on the web server</p>
</li>
<li>
<p>Web browser gets the first file which can include references to other URIs that the browser also requests</p>
</li>
<li>
<p>&lt; HTTP GET /go/ccna</p>
</li>
<li>
<p>HTTP OK data &gt;</p>
</li>
<li>
<p>&lt; HTTP GET /graphics/logo1.gif</p>
</li>
<li>
<p>HTTP OK data &gt;</p>
</li>
<li>
<p>&lt; HTTP GET /graphics/ad1.gif</p>
</li>
<li>
<p>HTTP OK data &gt;</p>
</li>
<li>
<p>Flow over one or more TCP connection between the client and the server.</p>
</li>
</ul>
<p>Identifying the Correct Receiving Application</p>
<ul>
<li>tracks which port opened which request</li>
</ul>
<p>Fields that identify next header</p>
<p>&lt; Ethernet (Type) (0x0800)</p>
<p>&lt; IPv4 (Protocol) (6)</p>
<p>&lt; TCP (Destination port) (49124)</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="troubleshooting-routing">Troubleshooting Routing</h1>

<p>Problem Isolation Using the ping Command</p>
<p>functions as part of Layer 3, as a control protocol to assist IP by helping manage the IP network functions.</p>
<p>Ping options</p>
<p>The name or IP address of the destination,</p>
<p>how many times the command should send an echo request,</p>
<p>how long the command should wait (timeout) for an echo reply,</p>
<p>how big to make the packets, and many other options.</p>
<p>Extended ping allows R1’s ping command to use R1’s LAN IP address from within subnet 172.16.1.0/24.</p>
<p>This same command could have been issued from the command line as ping 172.16.2.101 source 172.16.1.1.</p>
<p>R1# ping</p>
<p>Protocol [ip]:</p>
<p>Target IP address: 172.16.2.101</p>
<p>Repeat count [5]:</p>
<p>Datagram size [100]:</p>
<p>Timeout in seconds [2]:</p>
<p>Extended commands [n]: y</p>
<p>Source address or interface: 172.16.1.1</p>
<p>Type of service [0]:</p>
<p>Set DF bit in IP header? [no]:</p>
<p>Validate reply data? [no]:</p>
<p>Data pattern [0xABCD]:</p>
<p>Loose, Strict, Record, Timestamp, Verbose[none]:</p>
<p>Sweep range of sizes [n]:</p>
<p>Type escape sequence to abort.</p>
<p>Sending 5, 100-byte ICMP Echos to 172.16.2.101, timeout is 2 seconds:</p>
<p>Packet sent with a source address of 172.16.1.1</p>
<p>!!!!!</p>
<p>Success rate is 100 percent (5/5), round-trip min/avg/max = 1/2/4 ms</p>
<p>Problems to test. ( ping from router or from host?)</p>
<ul>
<li>IP ACLs that discard packets based on host A’s IP address but allow packets that match the router’s IP address</li>
<li>LAN switch port security that filters A’s frames (based on A’s MAC address)</li>
<li>IP routes on routers that happen to match host A’s 172.16.1.51 address, with different routes that match R1’s 172.16.1.1 address</li>
<li>Problems with host A’s default router setting</li>
</ul>
<p>If the ping works, it confirms the following, which rules out some potential issues:</p>
<p>The host with address 172.16.1.51 replied.</p>
<p>The LAN can pass unicast frames from R1 to host 172.16.1.51 and vice versa.</p>
<p>You can reasonably assume that the switches learned the MAC addresses of the router and the host, adding those to the MAC address tables.</p>
<p>Host A and Router R1 completed the ARP process and list each other in their respective Address Resolution Protocol (ARP) tables.</p>
<ul>
<li>IP addressing problem: Host A could be statically configured with the wrong IP address.</li>
<li>DHCP problems: If you are using Dynamic Host Configuration Protocol (DHCP), many problems could exist. </li>
<li>VLAN trunking problems: The router could be configured for 802.1Q trunking, when the switch is not (or vice versa).</li>
<li>LAN problems: A wide variety of issues could exist with the Layer 2 switches, preventing any frames from flowing between host A and the router.</li>
</ul>
<p>Testing LAN Neighbors with Extended Ping</p>
<p>an extended ping can test the host’s default router setting. Both tests can be useful, especially for problem isolation, because</p>
<ul>
<li>If a standard ping of a local LAN host works…</li>
<li>But an extended ping of the same LAN host fails…</li>
<li>The problem likely relates somehow to the host’s default router setting.</li>
</ul>
<p>Testing WAN Neighbors with Standard Ping</p>
<p>A successful ping of the IP address on the other end of an Ethernet WAN link that sits between two routers confirms several specific facts, such as the following:</p>
<p>Both routers’ WAN interfaces are in an up/up state.</p>
<p>The Layer 1 and 2 features of the link work.</p>
<p>The routers believe that the neighboring router’s IP address is in the same subnet.</p>
<p>Inbound ACLs on both routers do not filter the incoming packets, respectively.</p>
<p>The remote router is configured with the expected IP address (172.16.4.2 in this case).</p>
<p>Using Ping with Names and with IP Addresses</p>
<p>Problem Isolation Using the traceroute Command</p>
<p>ping vs Tracert</p>
<ul>
<li>Both send messages in the network to test connectivity.</li>
<li>Both rely on other devices to send back a reply.</li>
<li>Both have wide support on many different operating systems.</li>
<li>Both can use a hostname or an IP address to identify the destination.</li>
<li>On routers, both have a standard and extended version, allowing better testing of the reverse route.</li>
</ul>
<p>Standard and Extended traceroute</p>
<p>a standard traceroute command chooses an IP address based on the outgoing interface for the packet sent by the command. So, in this example, the packets sent by R1 come from source IP address 172.16.4.1, R1’s G0/0/0 IP address.</p>
<p>Host OS traceroute commands usually create ICMP echo requests. The Cisco IOS traceroute command instead creates IP packets with a UDP header. This bit of information may seem trivial at this point. However, note that an ACL may actually filter the traffic from a host’s traceroute messages but not the router traceroute command, or vice versa.</p>
<p>Telnet and SSH</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="vlans">VLANs</h1>

<h2 id="virtual-lan-vlan-concepts">Virtual LAN (VLAN) Concepts</h2>
<p>Using VLANs creates smaller broadcast domains. There are many reasons why you would want to do this. You reduce CPU overhead on each device. And reduce security risks by using different security policies on each VLAN.</p>
<p>You can also use more flexible designs that group users by department instead of by physical location. Using VLANs helps you solve problems more quickly. As the failure point for many problems would include devices in a single broadcast domain.</p>
<ul>
<li>
<p>reduce the workload for the Spanning Tree Protocol (STP)</p>
</li>
<li>
<p>by limiting a VLAN to a single access switch</p>
</li>
</ul>
<p>802.1q and ISL</p>
<p>802.1Q</p>
<ul>
<li>inserts a 4-byte 802.1Q VLAN header into the  Ethernet header</li>
</ul>
<p>12-bit VLAN ID field inside the 802.1Q header</p>
<ul>
<li>
<p>supports a theoretical maximum of 212 (4096) VLANs, but in practice it supports a maximum of 4094.</p>
</li>
<li>
<p>Both 802.1Q and ISL use 12 bits to tag the VLAN ID, with two reserved values [0 and 4095].</p>
</li>
<li>
<p>802.1q header includes Type, priority, Flag, Vlan ID</p>
</li>
<li>
<p>Cisco switches break the range of VLAN IDs (1–4094) into the normal range and the extended range.</p>
</li>
</ul>
<p>normal-range</p>
<ul>
<li>1 to 1005.</li>
<li>all switches can use</li>
</ul>
<p>Extended range</p>
<p>Only some switches can use</p>
<p>1006 to 4094</p>
<p>depends on the configuration of the VLAN Trunking Protocol (VTP)</p>
<p>231852+</p>
<ul>
<li>802.1Q simply does not add an 802.1Q header to frames in the native VLAN</li>
</ul>
<p>#show vlan brief</p>
<p>VLAN Trunking Protocol (VTP)</p>
<p>vtp mode transparent</p>
<p>vtp mode off</p>
<p>show vtp status</p>
<p>If your switch uses VTP server or client mode</p>
<ul>
<li>The server switches can configure VLANs in the standard range only (1–1005).</li>
<li>The client switches cannot configure VLANs.</li>
<li>Both servers and clients may be learning new VLANs from other switches and seeing their VLANs deleted by other switches because of VTP.</li>
</ul>
<p>show running-config</p>
<ul>
<li>
<p>does not list any vlan commands</p>
</li>
<li>
<p>If possible in the lab, switch to disable VTP and ignore VTP for your switch configuration practice until you decide to learn more about VTP for other purposes.</p>
</li>
</ul>
<p>VLAN Trunking Configuration</p>
<p>Dynamic Trunking Protocol (DTP).</p>
<ul>
<li>
<p>negotiate ISL or 802.1q</p>
</li>
<li>
<p>If both switches support both protocols, they use ISL;</p>
</li>
<li>
<p>otherwise, they use the protocol that both support.</p>
</li>
</ul>
<p>switchport trunk encapsulation {dot1q | isl | negotiate}</p>
<ul>
<li>configure the type or allow DTP to negotiate the type.</li>
</ul>
<p>Access</p>
<ul>
<li>always access</li>
</ul>
<p>trunk</p>
<ul>
<li>always trunk</li>
</ul>
<p>dynamic desirable</p>
<ul>
<li>initiates negotiation messages and responds to negotiation messages</li>
<li>Access if other side is access, otherwise trunk</li>
</ul>
<p>dynamic auto</p>
<ul>
<li>
<p>passively waits to receive trunk negotiation messages</p>
</li>
<li>
<p>default setting</p>
</li>
<li>
<p>access if both ends use this</p>
</li>
<li>
<p>trunk if other end is trunk or Dynamic desirable</p>
</li>
<li>
<p>On a switch that supports both ISL and 802.1Q, this value would by default list “negotiate,” to mean that the type of encapsulation is negotiated.</p>
</li>
<li>
<p>Cisco recommends disabling trunk negotiation on most ports for better security</p>
</li>
</ul>
<p>(config-if) switchport nonegotiate</p>
<p>Disable DTP</p>
<p>Data and Voice VLAN Concepts</p>
<p>switchport voice vlan 11</p>
<ul>
<li>
<p>can configure on the same access port that has a normal vlan assigned</p>
</li>
<li>
<p>CDP must be enabled*</p>
</li>
<li>
<p>Voice Data is tagged with 802.1Q header</p>
</li>
</ul>
<p>show interfaces FastEthernet 0/4 switchport</p>
<ul>
<li>see the voice vlan</li>
<li>administrative and operational mode</li>
<li>access mode vlan</li>
</ul>
<p>show interfaces trunk</p>
<p>show interfaces f0/4 trunk</p>
<ul>
<li>
<p>vlans allowed on trunk</p>
</li>
<li>
<p>1-4094</p>
</li>
<li>
<p>minus vlans removed by the switchport trunk allowed command</p>
</li>
<li>
<p>vlans allowed and active in management domain</p>
</li>
<li>
<p>the first list minus vlans that are not configured</p>
</li>
<li>
<p>minus vlans that are shutdown</p>
</li>
<li>
<p>vlans in spanning tree forwarding state and not (VTP) pruned</p>
</li>
<li>
<p>minus vlans that are in a STP blocking state</p>
</li>
<li>
<p>minus vlans that are VTP pruned</p>
</li>
<li>
<p>Show interfaces trunk will not show the voice VLAN as a trunk, it will only show it if you specify the interface.</p>
</li>
</ul>
<p>Troubleshooting VLANS and VLAN  trunks<br>
 </p>
<p>Confirm that all VLANs are both defined and active.</p>
<p>show vlan</p>
<p>Show vlan brief</p>
<p>Check the allowed VLAN lists on both ends of each trunk</p>
<p>show interfaces interface-id trunk</p>
<ul>
<li>lists information about currently operational trunks</li>
</ul>
<p>#switchport trunk allowed vlan</p>
<p>Show vlan</p>
<ul>
<li>
<p>(does the vlan exist and is it active?</p>
</li>
<li>
<p>Has the vlan been vtp pruned?</p>
</li>
<li>
<p>Is the vlan in an STP forwarding state?</p>
</li>
</ul>
<p>#show spanning-tree vlan 2</p>
<p>Check for incorrect trunk configuration settings that result in one switch operating as a trunk, with the neighboring switch not operating as a trunk.</p>
<p>#show interfaces trunk</p>
<p>#show interfaces switchport.</p>
<ul>
<li>
<p>check administrative and operational modes</p>
</li>
<li>
<p>The trunk is in an STP forwarding state in that VLAN (as also seen in the show spanning-tree vlan vlan-id command).</p>
</li>
</ul>
<p>#switchport trunk allowed vlan</p>
<ul>
<li>DTP on one switch but not the other</li>
</ul>
<p>Check the native VLAN settings on both ends</p>
<ul>
<li>Native vlan must match on both switches.</li>
</ul>
<p>#switchport trunk native vlan 2</p>
<ul>
<li>vlan hopping</li>
</ul>
<p>a frame being sent in one vlan but then being believed to be in a different vlan</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="wan-architecture">WAN Architecture</h1>

<p>Network Fundamentals</p>
<ul>
<li>network topology architecture</li>
<li>WAN</li>
<li>Security Fundamentals</li>
<li>remote access and site-to-site VPNs</li>
</ul>
<p>Metro Ethernet</p>
<p>Customer Router
SWI
Customer Router
Layer
2
Customer Router
Customer Router</p>
<p>customers connect to a Metro Ethernet service with either routers or Layer 3 switches</p>
<h3 id="metro-ethernet-physical-design-and-topology">Metro Ethernet Physical Design and Topology</h3>
<p>a device physically near to customer sites is called a point of presence (PoP)</p>
<p>UNI
Ethernet
Access Link
Network
SP Network -
Details Hidden
Located in SP
Point of Presence (POP)
Distances Set
by Ethernet Standards
Ethernet
Access Link
UNI
Ethernet
Access Link
UNI
R2</p>
<p>the physical link between the customer and the SP is called an access link</p>
<p>when using Ethernet specifically, an Ethernet access link. Everything that happens on that link falls within the definition of the user network interface, or UNI.</p>
<p>the switch will look at the Ethernet header’s MAC address fields and at 802.1Q trunking headers for VLAN tags, but the details inside the network remain hidden.</p>
<p>Name
1 OOBASE-LXIO
IOOOBASE-LX
IOOOBASE-LXIO
IOOOBASE-ZX
IOGBASE-LR
IOGBASE-ER
Speed
100 Mbps
1 Gbps
1 Gbps
1 Gbps
10 Gbps
10 Gbps
Distance
10 Km
10 Km
100 Km
10 Km
40 Km &ldquo;&gt;</p>
<h3 id="ethernet-wan-services-and-topologies">Ethernet WAN Services and Topologies</h3>
<p>MEP
Service
Name
Ethernet
Line
Service
Ethernet
LAN
Service
Ethernet
Tree
Service
MEP
Short
Name
E-Line
E-LAN
E-Tree
Topology Terms
Point-to-point
Full mesh
Hub and spoke;
partial mesh;
point-to-
multipoint
Description
Two customer premise equip-
ment (CPE) devices can ex-
change Ethernet frames, simi-
lar in concept to a leased line.
This service acts like a LAN, in
that all devices can send
frames to all other devices.
A central site can communicate
to a defined set of remote sites,
but the remote sites cannot
communicate directly. &ldquo;&gt;</p>
<p>E-Line (point-to-point), E-LAN (full mesh), and E-Tree (point-to-multipoint, hub and spoke)</p>
<p>Virtual Private Wire Service (VPWS) used for what MEF defines as E-Line service, and Virtual Private LAN Service (VPLS) used for what MEF defines as E-LAN service and Ethernet over MPLS (EoMPLS) refer to cases in which the SP uses MPLS internally to create what the customer sees as an Ethernet WAN service.</p>
<h3 id="ethernet-line-service-point-to-point">Ethernet Line Service (Point-to-Point)</h3>
<p>The customer connects two sites with access links. Then the MetroE service allows the two customer devices to send Ethernet frames to each other.</p>
<p>Metro Ethernet
Ethernet Virtual Circuit (EVC)</p>
<ul>
<li>
<p>The routers would use physical Ethernet interfaces.</p>
</li>
<li>
<p>The routers would configure IP addresses in the same subnet as each other.</p>
</li>
<li>
<p>Their routing protocols would become neighbors and exchange routes.</p>
</li>
</ul>
<p>Ethernet Virtual Connection, or EVC, to define which user (customer) devices can communicate with which</p>
<p>creates a point-to-point EVC, meaning that the service allows two endpoints to communicate.</p>
<p>One 10 Gbps
Access Link
Three Different E-Lines
Using Multiple E-Lines, One for Each Remote Site &ldquo;&gt;</p>
<p>With MetroE, the LAN and WAN are both Ethernet, so an Ethernet switch becomes an option.</p>
<h3 id="ethernet-lan-service-full-mesh">Ethernet LAN Service (Full Mesh)</h3>
<p>allows all devices connected to that service to send Ethernet frames directly to every other device</p>
<p>An E-LAN service connects the sites in a full mesh</p>
<h3 id="ethernet-tree-service-hub-and-spoke">Ethernet Tree Service (Hub and Spoke)</h3>
<p>(E-Tree) creates a WAN topology in which the central site device can send Ethernet frames directly to each remote (leaf) site, but the remote (leaf) sites can send only to the central site</p>
<p>E-Tree Root
RI</p>
<p>partial mesh, hub and spoke, and point-to-multipoint</p>
<p>works well for designs with a central site plus many remote sites.</p>
<h3 id="layer-3-design-using-metro-ethernet">Layer 3 Design Using Metro Ethernet</h3>
<p>Layer 3 Design with E-Line Service</p>
<p>Two E-Lines (Point-to-Point)</p>
<p>10.1.1.0/24
RI
Subnet 10.1.12.O /24
Subnet 10.1.13.0124
Next-Hop for Routes
10.1.2.0/24
.2
GO,&lsquo;I .13
GO/2
.3
R3 Routing Table
Code Subnet
o
o
o
c
c
10.1.1.0/24
10.1.2.0/24
10.1.12.0/24
10.1.3.0/24
10.1.13.0/24
Interface
GO/I .13
GO/I .13
60/1.13
60/2
GO/I .13
10.1.3.0/24
Next-hop
10.1.13.1
10.1.13.1
10.1.13.1
N/A
N/A</p>
<p>Layer 3 Design with E-LAN Service</p>
<p>10.1.1.0/24
RI
R4
10.1.4.0/24
Subnet
10.1.99.0/24
GO/I .99
.4
MetroE E-LAN Service
.2
.3
10.1.2.0/24
10.1.3.0/24
R3 Routing Table (OSPF Routes only)
Subnet
10.1.2.0/24
10.1.1.0,24
10.1.4.0/24
Interface
GO/I .99
GO/I .99
GO,&lsquo;I .99
10.1.99.2
10.1.99.1
10.1.99.4</p>
<h2 id="multiprotocol-label-switching-mpls">Multiprotocol Label Switching (MPLS)</h2>
<p>o
10.1.1.0/24
10.1.40/24
o
10.1.2.0/24
R2
10.1.3.0/24</p>
<p>a WAN service that routes IP packets between customer sites</p>
<p>the middle four routers could represent the SP’s MPLS network, with the numbered routers on the edges being routers owned by one company.</p>
<p>the SP builds its IP network to also use Multiprotocol Label Switching (MPLS), in particular MPLS VPNs</p>
<p>allow the SP to build one large MPLS network, which also creates a private IP-based WAN for each of its customers.</p>
<p>The routers on the edge of the MPLS network add and remove an MPLS header to packets as they enter and exit the MPLS network. The devices inside the MPLS network then use the label field inside that MPLS header when forwarding data across the MPLS network. The choices of the labels to use, along with other related logic, allow the MPLS VPN to create separate VPNs to keep different customers’ traffic separate.</p>
<p>layer 3 service but sometimes called a Layer 2.5 protocol because it adds the MPLS header between the data-link header (Layer 2) and the IP header (Layer 3).</p>
<p>SP’s MPLS VPN network:</p>
<ul>
<li>
<p>Will use a routing protocol to build routing protocol neighbor relationships with customer routers</p>
</li>
<li>
<p>Will learn customer subnets/routes with those routing protocols</p>
</li>
<li>
<p>Will advertise a customer’s routes with a routing protocol so that all routers that customer connects to the MPLS VPN can learn all routes as advertised through the MPLS VPN network</p>
</li>
<li>
<p>Will make decisions about MPLS VPN forwarding, including what MPLS labels to add and remove, based on the customer’s IP address space and customer IP routes</p>
</li>
</ul>
<p>MPLS VPNs create a private network by keeping customer data separate, but not by encrypting the data.</p>
<h2 id="mpls-vpn-physical-design-and-topology">MPLS VPN Physical Design and Topology</h2>
<p>two important MPLS terms in context: customer edge (CE) and provider edge (PE).</p>
<p>The customer edge device is typically a router, and it sits at a customer site</p>
<p>provider edge devices sit at the edge of the SP’s network, on the other end of the access link.</p>
<p>RI
10.1.40/24
Customer
Edge
MPLS:
Hidden
Details
Provider Edge
Customer
Edge
10.1.2.024
10.1.3.0/24</p>
<p>any data-link protocol could in theory be used on MPLS access links.</p>
<p>CEI
10.1.4.0/24
Serial
(TOM)
Metro
PEI
Access Links
MPLS:
Hidden
Details
PE3
4G/5G
CE2
10.1.2.0/24
10.1.3.0/24
Access Links</p>
<h3 id="mpls-and-quality-of-service">MPLS and Quality of Service</h3>
<p>The MPLS WAN provider would then configure its QoS tools to react for packets that have that marking, typically sending that packet as soon as possible.</p>
<p>VolP as DSCP EF
Forward DSCP EF Now for
Low: Delay, Jitter, Loss
PE2
CE2
MPLS</p>
<p>the enterprise will want to work with the SP to define other features of the service. The customer and SP will need to work through the details of some Layer 3 design choices (as discussed in more depth in the next section). The customer will also likely want to ask for QoS services from the MPLS provider and define those details.</p>
<h3 id="layer-3-with-mpls-vpn">Layer 3 with MPLS VPN</h3>
<p>MPLS must be aware of the customer IP addressing. The SP will even use routing protocols and advertise those customer routes across the WAN</p>
<p>CE routers need to exchange routes with the PE routers in the MPLS network. Additionally, all the CE routers need to learn routes from the other CE routers—a process that relies on the PE routers.</p>
<p>MPLS allows for many familiar routing protocols on the edge of the MPLS network: RIPv2, EIGRP, OSPF, and even eBGP</p>
<p>OSPF
CEI
PEI
10.1.2.0/24
OSPF
CE2
10.1.3.0/24
OSPF
CE3
10.1.4.0/24
O SPF
CE4</p>
<ul>
<li>
<p>A CE router does become neighbors with the PE router on the other end of the access link.</p>
</li>
<li>
<p>A CE router does not become neighbors with other CE routers.</p>
</li>
<li>
<p>The MPLS network does advertise the customer’s routes between the various PE routers so that the CE routers can learn all customer routes through their PE-CE routing protocol neighbor relationship.</p>
</li>
</ul>
<p>To advertise the customer routes between the PE routers, the PE routers use another routing protocol along with a process called route redistribution. Route redistribution happens inside one router, taking routes from one routing protocol process and injecting them into another. MPLS does route redistribution in the PE routers between the routing protocol used by the customer and a variation of BGP called Multiprotocol BGP (MPBGP). (Redistribution is needed when the PE-CE routing protocol is not BGP.</p>
<p>Redistribution
PEI
Redistribution
MPBGP
CEI
CE3</p>
<p>MPBGP can advertise routes from multiple customers while keeping the routes logically separated</p>
<h2 id="internet-vpns">Internet VPNs</h2>
<h3 id="internet-access">Internet Access</h3>
<p>Sites
Routers
TOM (13,
Internet</p>
<ul>
<li>Delivers XP Packets
vpN
Metro Ethernet
les of Internet Access Links for companies &ldquo;&gt;</li>
</ul>
<p>Digital Subscriber Line</p>
<p>earlier Internet access technologies</p>
<p>(analog modems and Integrated Services Digital Network, or ISDN).</p>
<p>DSL modem sends and receives the data, as digital signals, at higher frequencies, over the same local loop</p>
<p>Phone
Cable
Telephone
Line
psTN
Switch
DSLAM
Modem
Home
Telco CO
Internet</p>
<p>Cable Internet</p>
<p>Like DSL, cable Internet uses asymmetric speeds, sending data faster downstream than upstream</p>
<p>co
Ethernet Cable
CATV
Cable
Modem
Home
Internet &ldquo;&gt;</p>
<p>Wireless WAN (3G, 4G, LTE, 5G)</p>
<p>Mobile
Provider
Internet
ISP</p>
<p>Fiber (Ethernet) Internet Access</p>
<p>Internet VPN Fundamentals</p>
<p>Internet VPNs can provide important security features, such as the following:</p>
<ul>
<li>
<p>Confidentiality (privacy): Preventing anyone in the middle of the Internet (man in the middle) from being able to read the data</p>
</li>
<li>
<p>Authentication: Verifying that the sender of the VPN packet is a legitimate device and not a device used by an attacker</p>
</li>
<li>
<p>Data integrity: Verifying that the packet was not changed as the packet transited the Internet</p>
</li>
<li>
<p>Anti-replay: Preventing a man in the middle from copying and later replaying the packets sent by a legitimate user, for the purpose of appearing to be a legitimate user</p>
</li>
</ul>
<p>site-to-site VPN</p>
<p>connects two sites of a company.</p>
<p>source = 10.222
Destination 10.1.1.1
IP packet
Enterprise
Central Site
128.107.1.1
source 64.100.9.9
Destination = 128.107.1.1
64.100.9.9
Internet
source
Destination z 10.1.1.1
PCI
10.2.2.2
Branch Office</p>
<ol>
<li>
<p>Host PC1 (10.2.2.2) on the right sends a packet to the web server (10.1.1.1), just as it would without a VPN.</p>
</li>
<li>
<p>The router encrypts the packet, adds some VPN headers, adds another IP header (with public IP addresses), and forwards the packet.</p>
</li>
<li>
<p>An attacker in the Internet copies the packet (called a man-in-the-middle attack). However, the attacker cannot change the packet without being noticed and cannot read the contents of the original packet.</p>
</li>
<li>
<p>Firewall FW1 receives the packet, confirms the authenticity of the sender, confirms that the packet has not been changed, and then decrypts the original packet.</p>
</li>
<li>
<p>Server S1 receives the unencrypted packet.</p>
</li>
</ol>
<p>tunnel refers to any protocol’s packet that is sent by encapsulating the packet inside another packet. The term VPN tunnel may or may not imply that the tunnel also uses encryption.</p>
<p>Site-to-Site VPNs with Ipsec</p>
<p>an architecture or framework for security services for IP networks</p>
<p>more generally called IP Security</p>
<p>IPsec defines how two devices, both of which connect to the Internet, can achieve the main goals of a VPN as listed at the beginning of this section: confidentiality, authentication, data integrity, and anti-replay</p>
<p>its role as an architecture allows it to be added to and changed over time as improvements to individual security functions are made.</p>
<p>IPsec encryption uses a pair of encryption algorithms, which are essentially math formulas, to meet a couple of requirements</p>
<p>One to hide (encrypt) the data</p>
<p>Another to re-create (decrypt) the original data based on the encrypted data</p>
<p>if an attacker did happen to decrypt one packet, that information would not give the attacker any advantages in decrypting the other packets.</p>
<p>process for encrypting data for an IPsec VPN</p>
<p>the encryption key is also known as the session key, shared key, or shared session key.</p>
<p>Session Key
F&rsquo; (Encrypted-data, Session-key)
Original
IP Packet
Clear-text Data
Sending Host
Session Key
Original
IP Packet
F(IP Packet, Session-key) Encrypted Data
IP Header VPN Header Encrypted Data</p>
<p>The sending device encapsulates the encrypted data into a packet, which includes the new IP header and VPN header.</p>
<p>The receiving VPN device runs the corresponding decryption formula, using the encrypted data and session key—the same key value as was used on the sending VPN device—to decrypt the data.</p>
<p>devices use some related VPN technology like Generic Routing Encapsulation (GRE) to create the concept of a tunnel (a virtual link between the routers),</p>
<p>Without IPsec, each GRE tunnel could be used to forward unencrypted traffic over the Internet. IPsec adds the security features to the data that flows over the tunnel</p>
<p>the figure shows IPsec and GRE, but IPsec teams with other VPN technologies as well</p>
<p>RI
GRE Tunnel wi IPsec
GRE Tunnel w/ IPsec
GRE Tunnel w/ IPsec
Any Internet
Access Technology</p>
<p>Remote Access VPNs with TLS</p>
<p>remote access VPNs often use the Transport Layer Security (TLS) protocol to create a secure VPN session.</p>
<p>TLS provides the security features of HTTP Secure (HTTPS). Today’s web browsers support HTTPS (with TLS) as a way to dynamically create a secure connection from the web browser to a web server,</p>
<p>To do so, the browser creates a TCP connection to server well-known port 443 (default) and then initializes a TLS session. TLS encrypts data sent between the browser and the server and authenticating the user. Then, the HTTP messages flow over the TLS VPN connection.</p>
<p>SSL has been deprecated (see RFC 7568) and has been replaced by TLS.</p>
<p>each session secures only the data sent in that session</p>
<p>can be used to create a client VPN that secures all packets from the device to a site by using a Cisco VPN client</p>
<p>Cisco AnyConnect Secure Mobility Client (or AnyConnect Client for short) is software that sits on a user’s PC and uses TLS to create one end of a VPN remote-access tunnel</p>
<p>Cisco AnyConnect
Secure Mobility Client
TLS
H-rrps
Web Browser
Internet
For All Traffic to the Ente rise
Firewall
LS For a Sin le Web Browser Session</p>
<p>while the figure shows a firewall used at the main enterprise site, many types of devices can be used on the server side of a TLS connection as well.</p>
<p>VPN Comparisons</p>
<p>Table 14-4 Comparisons of Site-to-Site and Remote Access VPNs
Typical security protocol
Devices supported by one VPN (one or
many)
Typical use: on-demand or permanent
Remote
Access
TLS
One
On-demand
Site-to-Site
IPsec
Many
Permanent &ldquo;&gt;</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="wans-and-ip-routing">WANs and IP Routing</h1>

<p>1.0 Network Fundamentals</p>
<p>1.1 Explain the role and function of network components</p>
<p>1.1.a Routers</p>
<p>1.2 Describe characteristics of network topology architectures</p>
<p>1.2.d WAN</p>
<p>Leased-Line WANs</p>
<p>Physical Details of Leased Lines</p>
<ul>
<li>predetermined speed</li>
<li>Full Duplex</li>
<li>Uses two pairs of wires one for each direction</li>
<li>Conceptually crossover</li>
</ul>
<p>Leased Circuit</p>
<ul>
<li>Electrical circuit (line) between 2 endpoints</li>
</ul>
<p>Serial Link (line)</p>
<ul>
<li>Bits flow serially</li>
<li>Routers use serial interfaces</li>
</ul>
<p>Point to point link (line)</p>
<ul>
<li>two points only</li>
</ul>
<p>T1</p>
<ul>
<li>1.544 Mbps</li>
</ul>
<p>WAN link</p>
<ul>
<li>General term</li>
</ul>
<p>Private Line</p>
<ul>
<li>Data is private</li>
</ul>
<p>HDLC Data-Link Details of Leased Lines</p>
<ul>
<li>Leased line specifies layer 1</li>
<li>HDLC and PPP are the most popular Layer 2 protocols used on leased lines</li>
</ul>
<p>HDLC</p>
<ul>
<li>less work than ethernet because of point to point leased line</li>
<li>has an address field, but the destination is implied</li>
<li>Cant use between cisco and non cisco</li>
<li>Cisco HDLC type field is proprietary</li>
</ul>
<p>Comparing HDLC Header Fields to Ethernet</p>
<p>HDLC Header</p>
<p>Flag</p>
<ul>
<li>Like preamble, SFD</li>
<li>1 byte</li>
</ul>
<p>Destination address</p>
<ul>
<li>1 byte</li>
</ul>
<p>Control</p>
<ul>
<li>No longer used</li>
<li>1 byte</li>
</ul>
<p>Type</p>
<ul>
<li>Type of layer 3 packet inside the frame</li>
<li>2 bytes</li>
</ul>
<p>Data</p>
<p>FCS</p>
<ul>
<li>Error detection</li>
<li>2 bytes</li>
</ul>
<p>How Router Use a WAN Data Link</p>
<p>How routers use HDLC when sending data</p>
<ul>
<li>LAN1 802.3header/IP Packet/ 802.3trailer &gt;</li>
<li>HDLC HDLCheader/IP Packet/ HDLC Trailer &gt;</li>
<li>LAN2 802.3header/Ippacket/802.3trailer &gt;</li>
</ul>
<p>Leased line negatives</p>
<ul>
<li>Higher cost and</li>
<li>long install times</li>
<li>Slow speeds</li>
</ul>
<p>Ethernet as a WAN technology</p>
<p>Customer Router</p>
<ul>
<li>CPE</li>
</ul>
<p>Service provider</p>
<ul>
<li>
<p>point of Presence (PoP)</p>
</li>
<li>
<p>Where the fiber connects at the provider</p>
</li>
</ul>
<p>Common ethernet WAN names</p>
<ul>
<li>
<p>Ethernet WAN</p>
</li>
<li>
<p>Ethernet Line Service (E-Line)</p>
</li>
<li>
<p>Ethernet emulation</p>
</li>
<li>
<p>Ethernet over MPLS (EoMPLS) (Multi protocol label switching) A technology used to create ethernet service for a customer.</p>
</li>
<li>
<p>Acts like simple ethernet link between two routers</p>
</li>
</ul>
<p>How Routers Route IP Packets Using Ethernet Emulation</p>
<p>EoMPLS WAN (Provider network simulating an ethernet link)</p>
<ul>
<li>802.3 header and trailer</li>
</ul>
<p>IP Routing</p>
<ol>
<li>
<p>Use FCS field to ensure that the frame had no errors; if errors occurred, discard the frame.</p>
</li>
<li>
<p>Discard the old data-link header and trailer, leaving the IP packet.</p>
</li>
<li>
<p>Compare the IP packet’s destination IP address to the routing table, and find the route that best matches the destination address. This route identifies the outgoing interface of the router and possibly the next-hop router IP address.</p>
</li>
<li>
<p>Encapsulate the IP packet inside a new data-link header and trailer, appropriate for the outgoing interface, and forward the frame</p>
</li>
</ol>
<p>The IP Header (20 bytes)</p>
<ul>
<li>Version, Length, DS Field, Packet Length (4 bytes)</li>
<li>Identification, Flags, Fragment Offset (4 bytes)</li>
<li>Time to Live, Protocol, Header Checksum (4 bytes)</li>
<li>Source IP (4 bytes)</li>
<li>Destination IP (4 bytes)</li>
</ul>
<p>IP Routing Protocols</p>
<ol>
<li>add route for each directly connected subnet</li>
<li>tell neighbors about routes in routing table</li>
<li>add new routes learned to routing table, with next hop as the router the address was learned from   </li>
</ol>
<p>ARP</p>
<ul>
<li>
<p>Ethernet broadcast arp request &gt;</p>
</li>
<li>
<p>Sender IP, sender MAC, Target IP, target MAC ??</p>
</li>
<li>
<p>&lt; Ethernet unicast ARP reply</p>
</li>
<li>
<p>Target IP, Target MAC, Sender IP, sender MAC</p>
</li>
</ul>
<p>arp -a</p>
<ul>
<li>to see arp cache on most operating systems</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="what-is-a-vlan">What is a VLAN?</h1>

<p>VLANs create smaller broadcast domains. Why create smaller broadcast domains?</p>
<ul>
<li>Device have to do less stuff (process less broadcasts)</li>
<li>Better security</li>
<li>Group different departments together</li>
<li>Narrow down problems</li>
<li>Less spanning tree if you reduce vlan to a single switch</li>
</ul>
<p>802.1q tagging</p>
<p>Frames are tagged with an 802.1q header as they leave the switch. So the receiving switch knows what vlan the frame is part of.</p>
<p>802.1q header</p>
<ul>
<li>4 bytes</li>
<li>Includes 12 bit vlan id field that supports 4096 vlans. (0 and 5 are reserved so make that 4094)</li>
<li>Also include type, priority, and flag fields</li>
</ul>
<p>VLAN numbers and what they mean</p>
<p>Normal range vlans are vlans 1-1005. All switches are able to use these vlan numbers.</p>
<p>Extended range vlans 1006-4094. Only some switches are able to use these</p>
<p>Native vlan are untagged. This is important. The native vlans is defaulted to 1. But you can manually set it to another number say vlan4.</p>
<p>VLAN Trunking Protocol (VTP)</p>
<p>This is a protocol for spreading VLAN settings throughout a network. A switch can be set to Transparent, client, or server.</p>
<p>Client mode: Cannot configure vlans and can learn new and deleted vlans from other switches.</p>
<p>Server Mode: Can configure VLANS is the standard range. Can learn new and deleted vlans from other switches.</p>
<p>VTP Commands:</p>
<p>Set the vtp mode</p>
<p>#vtp mode (transparent, client, server, off)</p>
<p>Show vtp settings</p>
<p>#show vtp status</p>
<p>Dynamic trunking protocol</p>
<p>Will negotiate ISL or 802.1q trunking with other switches</p>
<p>Switches will default to ISL if they both know that protocol. Otherwise they will use DTP if they both support it. This is because the default setting reads “negotiate”. Or negotiate the protocol used.</p>
<p>You should disable negotiation of trunks for better security.</p>
<p>Switchport settings for DTP</p>
<p>Access: Statically set as access</p>
<p>Trunk: statically set as trunk</p>
<p>Dynamic desirable: Initiates and responds to negotiation messages.</p>
<p>Dynamic auto: responds to negotiation messages only. This is the default setting. If both ends use dynamic auto mode then both ends will be configured as access ports. If the other end is set as Dynamic desirable, then both ports will be set as trunk ports.</p>
<p>Trunking commands:</p>
<p>Setting the encapsulation mode</p>
<p>#switchport trunk encapsulation (dot1q | isl | negotiate)</p>
<p>Disable DTP</p>
<p>#switchport no negotiate</p>
<p>Voice vlans</p>
<p>Only time you can configure two vlans on an access port is if you add a voice vlan to it. This is because phones are often on the same port as user pcs and voice traffic is often prioritized differently than other traffic.</p>
<p>CDP protocol must be enabled for voic vlan to work. Also, voice traffic is tagged with an 802.1q header.</p>
<p>Setting the voice vlan</p>
<p>#switchport voice vlan 12</p>
<p>Showing vlan information and troubleshooting</p>
<p>You will want to see what vlans are configured on what ports. What trunks are allowed on what ports. Verify VTP and DTP settings, etc.</p>
<p>Show trunk info</p>
<p>#Show interfaces interface-id trunk</p>
<p>Choose what vlans are allowed on a trunk</p>
<p># Switchport trunk allowed vlan</p>
<p>From &lt;https://d.docs.live.net/6e78e2c308bddf6e/Documents/VLANs%20create%20smaller%20broadcast%20domains.docx</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="what-to-learn-after-ccna">What to Learn After CCNA</h1>

<p>It&rsquo;s easy to get overwhelmed with options after completing your CCNA. What do you learn next? If you are trying to get a job as a Network Engineer, you will want to check this out.</p>
<p>I went through dozens of job listings that mentioned CCNA. Then, tallied up the main devices/vendors, certifications, and technologies mentioned. And left out anything that wasn&rsquo;t mentioned more than twice.</p>
<p>Core CCNA technologies such as LAN, WAN, OSPF, Spanning Tree, VLANs, etc. have been left out. The point here is to target the most sought after technologies and skills by employers. I also left out soft skills and any job that wasn&rsquo;t a networking specific role.</p>
<h2 id="devices-vendors">Devices/ Vendors</h2>
<p>Palo Alto is huge! I&rsquo;m not suprised by this. Depending on the company, a network engineer may be responsible for firewall configuration and troubleshooting. It also looks like Network Engineers with a wide variety of skills are saught after.</p>
<table>
<thead>
<tr>
<th>Device/Vendor</th>
<th>Times Mentioned</th>
</tr>
</thead>
<tbody>
<tr>
<td>Palo Alto</td>
<td>9</td>
</tr>
<tr>
<td>Cisco ASA</td>
<td>6</td>
</tr>
<tr>
<td>Juniper</td>
<td>6</td>
</tr>
<tr>
<td>Office 365</td>
<td>5</td>
</tr>
<tr>
<td>Meraki</td>
<td>4</td>
</tr>
<tr>
<td>Vmware</td>
<td>4</td>
</tr>
<tr>
<td>Linux</td>
<td>4</td>
</tr>
<tr>
<td>Ansible</td>
<td>4</td>
</tr>
<tr>
<td>AWS</td>
<td>3</td>
</tr>
<tr>
<td>Wireshark</td>
<td>3</td>
</tr>
</tbody>
</table>
<h2 id="technologies">Technologies</h2>
<p>Firewall comes in first again. Followed closely by VPN skills. Every interview I had for a Network Engineer position asked if I knew how to configure and troubleshoot VPNs.</p>
<table>
<thead>
<tr>
<th>Technology</th>
<th>Times Mentioned</th>
</tr>
</thead>
<tbody>
<tr>
<td>Firewall</td>
<td>19</td>
</tr>
<tr>
<td>VPN</td>
<td>16</td>
</tr>
<tr>
<td>Wireless</td>
<td>12</td>
</tr>
<tr>
<td>BGP</td>
<td>12</td>
</tr>
<tr>
<td>Security</td>
<td>12</td>
</tr>
<tr>
<td>MPLS</td>
<td>10</td>
</tr>
<tr>
<td>Load balancers</td>
<td>8</td>
</tr>
<tr>
<td>Ipsec</td>
<td>7</td>
</tr>
<tr>
<td>ISE</td>
<td>6</td>
</tr>
<tr>
<td>DNS</td>
<td>5</td>
</tr>
<tr>
<td>SDWAN</td>
<td>5</td>
</tr>
<tr>
<td>Cloud</td>
<td>4</td>
</tr>
<tr>
<td>TACACS+</td>
<td>4</td>
</tr>
<tr>
<td>ACL</td>
<td>4</td>
</tr>
<tr>
<td>SIEM</td>
<td>4</td>
</tr>
<tr>
<td>IDS/IPS</td>
<td>4</td>
</tr>
<tr>
<td>RADIUS</td>
<td>3</td>
</tr>
<tr>
<td>ITIL</td>
<td>3</td>
</tr>
<tr>
<td>Ipam</td>
<td>3</td>
</tr>
<tr>
<td>VOIP</td>
<td>3</td>
</tr>
<tr>
<td>EIGRP</td>
<td>3</td>
</tr>
<tr>
<td>Python</td>
<td>3</td>
</tr>
</tbody>
</table>
<h2 id="certifications">Certifications</h2>
<p>CCNP blew every other cert out of the water. Companies will be very interested if you are working towards this cert. Security + comes highly recommended as well.</p>
<table>
<thead>
<tr>
<th>Certification</th>
<th>Times Mentioned</th>
</tr>
</thead>
<tbody>
<tr>
<td>CCNP</td>
<td>18</td>
</tr>
<tr>
<td>Security+</td>
<td>6</td>
</tr>
<tr>
<td>JNCIA</td>
<td>4</td>
</tr>
<tr>
<td>JNCIP</td>
<td>4</td>
</tr>
<tr>
<td>Network +</td>
<td>4</td>
</tr>
<tr>
<td>CCIE</td>
<td>4</td>
</tr>
<tr>
<td>PCNSA</td>
<td>3</td>
</tr>
</tbody>
</table>
<h2 id="so-what-do-you-do-after-ccna">So what do you do after CCNA?</h2>
<p>It depends&hellip;</p>
<p>Are you trying to get a new job ASAP? Are there opportunities at your current role that you can use your new skills to leverage? Do you have some study time before you are ready to take the next step?</p>
<p>CCNP Enterprise is a good bet if you really want to stand out in Network Engineering interviews.</p>
<h2 id="dont-want-to-be-a-network-engineer">Don&rsquo;t want to be a Network engineer?</h2>
<p>Continue to build a good base of IT skills. This will open you up to a larger variety of jobs and open skill paths that you need a good foundation to unlock.</p>
<p>Core skills include:</p>
<ul>
<li>Linux/ Operating systems</li>
<li>Networking</li>
<li>General Cybersecurity</li>
<li>Programming/ Scripting</li>
</ul>
<p>A good Linux certification like the RHCSA would be great to learn more about Linux, scripting, and operating systems. Security + would be good if you want to get a solid foundation of cyber security. And Python skills will give you a gold star in any IT interview.</p>
<h2 id="dont-get-paralyzed-by-choices">Don&rsquo;t get paralyzed by choices.</h2>
<p>Pick something that interests you and go for it. That is the only way to get it right. Doing what you enjoy is better than not doing anything at all because you can&rsquo;t decide the best path.</p>
<p>Hopefully we can revisit this post after learning Python to get a much bigger sample size.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="wireless-architectures">Wireless Architectures</h1>

<p>This chapter covers the following exam topics:</p>
<p>2.0 Network Access</p>
<p>2.6 Compare Cisco Wireless Architectures and AP modes</p>
<p>Autonomous AP Architecture</p>
<p>VLANs must be trunked from the distribution layer switch (where routing commonly takes place) to the access layer, where they are extended further over a trunk link to the AP.</p>
<p>Two wireless users that are associated to the same autonomous AP can reach each other through the AP without having to pass up into the wired network</p>
<p>An autonomous AP must also be configured with a management IP address so that you can remotely manage it.</p>
<p>configure SSIDs, VLANs, and many RF parameters like the channel and transmit power to be used.</p>
<p>management address is not normally part of any of the data VLANs, so a dedicated management VLAN (i.e., VLAN 10) must be added to the trunk links to reach the AP.</p>
<p>Each AP must be configured and maintained individually unless you leverage a management platform such as Cisco Prime Infrastructure or Cisco DNA Center.</p>
<p>That might sound straightforward until you have to add a new VLAN and configure every switch and AP in your network to carry and support it.</p>
<p>Cloud-based AP Architecture</p>
<p>Cisco Meraki is cloud-based and offers centralized management of wireless, switched, and security networks built from Meraki products. For example, through the cloud networking service, you can configure and manage APs, monitor wireless performance and activity, generate reports, and so on.</p>
<p>Cisco Meraki APs can be deployed automatically, once you register with the Meraki cloud. Each AP will contact the cloud when it powers up and will self-configure. From that point on, you can manage the AP through the Meraki cloud dashboard.</p>
<p>From the cloud, you can push out code upgrades and configuration changes to the APs in the enterprise</p>
<p>adds the intelligence needed to automatically instruct each AP on which channel and transmit power level to use.</p>
<p>Can also collect information from all of the APs about things such as RF interference, rogue or unexpected wireless devices that were overheard, and wireless usage statistics.</p>
<p>The data path from the wireless network to the wired network is very short; the autonomous AP links the two networks. Data to and from wireless clients does not have to travel up into the cloud and back; the cloud is used to bring management functions into the data plane.</p>
<p>the network in Figure 27-3 consists of two distinct paths—one for data traffic and another for management traffic, corresponding to the following two functions:</p>
<p>Distribution
Layer
Access Layer
Cisco Meraki
APs
Cisco Meraki
Cloud
Management
Trunk Link
Trunk Link
Data
Figure 27-3 Cisco Meraki Cloud-Based Wireless Network Architecture &ldquo;&gt;</p>
<p>A control plane: Traffic used to control, configure, manage, and monitor the AP itself</p>
<p>A data plane: End-user traffic passing through the AP</p>
<p>Split-MAC Architectures</p>
<p>The real-time processes involve sending and receiving 802.11 frames, beacons, and probe messages. 802.11 data encryption is also handled in real time, on a per-packet basis. The AP must interact with wireless clients on some low level, known as the Media Access Control (MAC) layer. These functions must stay with the AP hardware, closest to the clients.</p>
<p>The management functions are not integral to handling frames over the RF channels, but are things that should be centrally administered. Therefore, those functions can be moved to a centrally located platform away from the AP.</p>
<p>When the functions of an autonomous AP are divided, the AP hardware is known as a lightweight access point, and performs only the real-time 802.11 operation.</p>
<p>the AP is left with duties in Layers 1 and 2, where frames are moved into and out of the RF domain. The AP becomes totally dependent on the WLC for every other WLAN function, such as authenticating users, managing security policies, and even selecting RF channels and output power.</p>
<p>The lightweight AP-WLC division of labor is known as a split-MAC architecture, where the normal MAC operations are pulled apart into two distinct locations.</p>
<p>the AP and WLC can be located on the same VLAN or IP subnet, but they do not have to be</p>
<p>CAPWAP relationship actually consists of two separate tunnels, as follows:</p>
<p>CAPWAP control messages: Carries exchanges that are used to configure the AP and manage its operation. The control messages are authenticated and encrypted, so the AP is securely controlled by only the appropriate WLC, then transported over the control tunnel.</p>
<p>CAPWAP data: Used for packets traveling to and from wireless clients that are associated with the AP. Data packets are transported over the data tunnel but are not encrypted by default. When data encryption is enabled for an AP, packets are protected with Datagram Transport Layer Security (DTLS).</p>
<p>Every AP and WLC must also authenticate each other with digital certificates. An X.509 certificate is preinstalled in each device when it is purchased.</p>
<p>Notice how VLAN 100 exists at the WLC and in the air as SSID 100, near the wireless clients—but not in between the AP and the WLC</p>
<p>Because the AP sits on the access layer where its CAPWAP tunnels terminate, it can use one IP address for both management and tunneling. No trunk link is needed because all of the VLANs it supports are encapsulated and tunneled as Layer 3 IP packets, rather than individual Layer 2 VLANs.</p>
<p>As the wireless network grows, the WLC simply builds more CAPWAP tunnels to reach more Aps</p>
<p>WLC can begin offering a variety of additional functions:</p>
<p>Dynamic channel assignment: The WLC can automatically choose and configure the RF channel used by each AP, based on other active access points in the area.</p>
<p>Transmit power optimization: The WLC can automatically set the transmit power of each AP based on the coverage area needed.</p>
<p>Self-healing wireless coverage: If an AP radio dies, the coverage hole can be “healed” by turning up the transmit power of surrounding APs automatically.</p>
<p>Flexible client roaming: Clients can roam between APs with very fast roaming times.</p>
<p>Dynamic client load balancing: If two or more APs are positioned to cover the same geographic area, the WLC can associate clients with the least used AP. This distributes the client load across the APs.</p>
<p>RF monitoring: The WLC manages each AP so that it scans channels to monitor the RF usage. By listening to a channel, the WLC can remotely gather information about RF interference, noise, signals from neighboring APs, and signals from rogue APs or ad hoc clients.</p>
<p>Security management: The WLC can authenticate clients from a central service and can require wireless clients to obtain an IP address from a trusted DHCP server before allowing them to associate and access the WLAN.</p>
<p>Wireless intrusion protection system: Leveraging its central location, the WLC can monitor client data to detect and prevent malicious activity.</p>
<p>Comparing Wireless LAN Controller Deployments</p>
<p>locate the WLC in a central location so that you can maximize the number of APs joined to it. This is usually called a unified or centralized WLC deployment</p>
<p>Typical unified WLCs can support a maximum of 6000 APs</p>
<p>A WLC can also be located in a central position in the network, inside a data center in a private cloud, as shown in Figure 27-9. This is known as a cloud-based WLC deployment, where the WLC exists as a virtual machine rather than a physical device.</p>
<p>Such a controller can typically support up to 3000 APs.</p>
<p>For small campuses or distributed branch locations, where the number of APs is relatively small in each, the WLC can be co-located with a stack of switches, as shown in Figure 27-10. This is known as an embedded WLC deployment</p>
<p>Typical Cisco embedded WLCs can support up to 200 APs. The APs do not necessarily have to be connected to the switches that host the WLC</p>
<p>the WLC function can be co-located with an AP that is installed at the branch site. This is known as a Cisco Mobility Express WLC deployment</p>
<p>A Mobility Express WLC can support up to 100 APs.</p>
<p>Cisco AP Modes</p>
<p>WLC, you can also configure a lightweight AP to operate in one of the following special-purpose modes:</p>
<p>Local: The default lightweight mode that offers one or more functioning BSSs on a specific channel. During times that it is not transmitting, the AP will scan the other channels to measure the level of noise, measure interference, discover rogue devices, and match against intrusion detection system (IDS) events.</p>
<p>Monitor: The AP does not transmit at all, but its receiver is enabled to act as a dedicated sensor. The AP checks for IDS events, detects rogue access points, and determines the position of stations through location-based services.</p>
<p>FlexConnect: An AP at a remote site can locally switch traffic between an SSID and a VLAN if its CAPWAP tunnel to the WLC is down and if it is configured to do so.</p>
<p>Sniffer: An AP dedicates its radios to receiving 802.11 traffic from other sources, much like a sniffer or packet capture device. The captured traffic is then forwarded to a PC running network analyzer software such as Wildpackets OmniPeek or WireShark, where it can be analyzed further.</p>
<p>Rogue detector: An AP dedicates itself to detecting rogue devices by correlating MAC addresses heard on the wired network with those heard over the air. Rogue devices are those that appear on both networks.</p>
<p>Bridge: An AP becomes a dedicated bridge (point-to-point or point-to-multipoint) between two networks. Two APs in bridge mode can be used to link two locations separated by a distance. Multiple APs in bridge mode can form an indoor or outdoor mesh network.</p>
<p>Flex+Bridge: FlexConnect operation is enabled on a mesh AP.</p>
<p>SE-Connect: The AP dedicates its radios to spectrum analysis on all wireless channels. You can remotely connect a PC running software such as MetaGeek Chanalyzer or Cisco Spectrum Expert to the AP to collect and analyze the spectrum analysis data to discover sources of interference.</p>
<p>Remember that a lightweight AP is normally in local mode when it is providing BSSs and allowing client devices to associate to wireless LANs. When an AP is configured to operate in one of the other modes, local mode (and the BSSs) is disabled.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="wireless-lans">Wireless LANs</h1>

<p>multiple VLANs must be brought to it over a trunk link.</p>
<p>The wireless side of an AP inherently trunks 802.11 frames by marking them with the BSSID of the WLAN where they belong.</p>
<p>lightweight AP</p>
<p>Wired VLANs that terminate at the WLC can be mapped to WLANs that emerge at the AP.</p>
<p>The AP needs only an access link to connect to the network infrastructure and terminate its end of the tunnel</p>
<p>you can also use Telnet or SSH to connect to its CLI over the wired network. Autonomous APs support browser-based management sessions via HTTP and HTTPS. You can manage lightweight APs from a browser session to the WLC.</p>
<p>Trunk Link
Autonomous AP
WLC
Switched LAN
Access Link
Lightweight AP</p>
<p>you can also use Telnet or SSH to connect to its CLI over the wired network. Autonomous APs support browser-based management sessions via HTTP and HTTPS. You can manage lightweight APs from a browser session to the WLC.</p>
<p>Accessing a Cisco WLC</p>
<p>management users to log in. Users can be authenticated against an internal list of local usernames or against an authentication, authorization, and accounting (AAA) server, such as TACACS+ or RADIUS.</p>
<p>When you are successfully logged in, the WLC will display a monitoring dashboard</p>
<p>must click on the Advanced link in the upper-right corner. This will bring up the full WLC GUI</p>
<p>Monitor, WLANs, Controller, Wireless, Security, and so on.</p>
<p>Connecting a Cisco WLC</p>
<p>Cisco wireless controllers differ a bit; ports and interfaces refer to different concepts.</p>
<p>Controller ports are physical connections made to an external wired or switched network, whereas interfaces are logical connections made internally within the controller</p>
<p>Using WLC Ports</p>
<p>Service port: Used for out-of-band management, system recovery, and initial boot functions; always connects to a switch port in access mode</p>
<p>Distribution system port: Used for all normal AP and management traffic; usually connects to a switch port in 802.1Q trunk mode</p>
<p>Console port: Used for out-of-band management, system recovery, and initial boot functions; asynchronous connection to a terminal emulator (9600 baud, 8 data bits, 1 stop bit, by default)</p>
<p>Redundancy port: Used to connect to a peer controller for high availability (HA) operation</p>
<p>Controllers can have a single service port that must be connected to a switched network. Usually, the service port is assigned to a management VLAN so that you can access the controller with SSH or a web browser to perform initial configuration or for maintenance. Notice that the service port supports only a single VLAN, so the corresponding switch port must be configured for access mode only.</p>
<p>Controllers also have multiple distribution system ports that you must connect to the network. These ports carry most of the data coming to and going from the controller. For example, the CAPWAP tunnels (control and data) that extend to each of a controller’s APs pass across the distribution system ports. Client data also passes from wireless LANs to wired VLANs over the ports. In addition, any management traffic using a web browser, SSH, Simple Network Management Protocol (SNMP), Trivial File Transfer Protocol (TFTP), and so on, normally reaches the controller in-band through the ports.</p>
<p>the distribution system ports always operate in 802.1Q trunking mode.</p>
<p>The distribution system ports can operate independently, each one transporting multiple VLANs to a unique group of internal controller interfaces. For resiliency, you can configure distribution system ports in redundant pairs. One port is primarily used; if it fails, a backup port is used instead.</p>
<p>Controller distribution system ports can be configured as a link aggregation group (LAG) such that they are bundled together to act as one larger link</p>
<p>traffic can be load-balanced across the individual ports that make up the LAG</p>
<p>LAG offers resiliency; if one individual port fails, traffic will be redirected to the remaining working ports instead.</p>
<p>Cisco WLCs do not support any link aggregation negotiation protocol, like LACP or PAgP, at all.</p>
<p>Using WLC Interfaces</p>
<p>the controller must somehow map those wired VLANs to equivalent logical wireless networks</p>
<p>VLAN must be connected to a unique wireless LAN that exists on a controller and its associated APs.</p>
<p>Cisco wireless controllers provide the necessary connectivity through internal logical interfaces, which must be configured with an IP address, subnet mask, default gateway, and a Dynamic Host Configuration Protocol (DHCP) server. Each interface is then assigned to a physical port and a VLAN ID. You can think of an interface as a Layer 3 termination on a VLAN.</p>
<p>Cisco controllers support the following interface types:</p>
<p>Management interface: Used for normal management traffic, such as RADIUS user authentication, WLC-to-WLC communication, web-based and SSH sessions, SNMP, Network Time Protocol (NTP), syslog, and so on. The management interface is also used to terminate CAPWAP tunnels between the controller and its APs.</p>
<p>Redundancy management: The management IP address of a redundant WLC that is part of a high availability pair of controllers. The active WLC uses the management interface address, while the standby WLC uses the redundancy management address.</p>
<p>Virtual interface: IP address facing wireless clients when the controller is relaying client DHCP requests, performing client web authentication, and supporting client mobility.</p>
<p>Service port interface: Bound to the service port and used for out-of-band management.</p>
<p>Dynamic interface: Used to connect a VLAN to a WLAN.</p>
<p>Switch
VLAN a
VLAN n
VLAN x
VLAN y
Dynamic
Interface
Dynamic
Interface
Management
Redundancy
Management
Service Port
WLC
WI-AN 1
WI-AN n
SSID
SSID</p>
<p>The management interface faces the switched network, where management users and APs are located. Management traffic will usually consist of protocols like HTTPS, SSH, SNMP, NTP, TFTP, and so on</p>
<p>consists of CAPWAP packets that carry control and data tunnels to and from the APs.</p>
<p>The virtual interface is used only for certain client-facing operations.</p>
<p>when a wireless client issues a request to obtain an IP address, the controller can relay the request on to an actual DHCP server that can provide the appropriate IP address</p>
<p>DHCP server appears to be the controller’s virtual interface address. Clients may see the virtual interface’s address, but that address is never used when the controller communicates with other devices on the switched network.</p>
<p>Because the virtual interface is used only for some client management functions, you should configure it with a unique, nonroutable address. For example, you might use 10.1.1.1 because it is within a private address space defined in RFC 1918.</p>
<p>The virtual interface address is also used to support client mobility.</p>
<p>every controller that exists in the same mobility group should be configured with a virtual address that is identical to the others. By using one common virtual address, all the controllers will appear to operate as a cluster as clients roam from controller to controller.</p>
<p>Dynamic interfaces map WLANs to VLANs,</p>
<p>making the logical connections between wireless and wired networks. You will configure one dynamic interface for each wireless LAN that is offered by the controller’s APs and then map the interface to the WLAN.</p>
<p>Each dynamic interface must also be configured with its own IP address and can act as a DHCP relay for wireless clients. To filter traffic passing through a dynamic interface, you can configure an optional access list.</p>
<p>Configuring a WLAN</p>
<p>192.16B.199.0/24
WLC
Interface Engineering
VI-AN 100
192.168.199.199/24
CAPWAP
W LAN V LAN</p>
<p>The controller will bind the WLAN to one of its interfaces and then push the WLAN configuration out to all of its APs by default.</p>
<p>Like VLANs, you can use WLANs to segregate wireless users and their traffic into logical networks. Users associated with one WLAN cannot cross over into another one unless their traffic is bridged or routed from one VLAN to another through the wired network infrastructure.</p>
<p>Cisco controllers support a maximum of 512 WLANs, but only 16 of them can be actively configured on an AP.</p>
<p>Advertising each WLAN to potential wireless clients uses up valuable airtime.</p>
<p>Every AP must broadcast beacon management frames at regular intervals to advertise the existence of a BSS</p>
<p>Beacons are normally sent 10 times per second, or once every 100 ms, at the lowest mandatory data rate</p>
<p>if you create too many WLANs, a channel can be starved of any usable airtime</p>
<p>always limit the number of WLANs to five or fewer; a maximum of three WLANs is best</p>
<p>Before you create a new WLAN, think about the following parameters it will need to have:</p>
<p>SSID string</p>
<p>Controller interface and VLAN number</p>
<p>Type of wireless security needed</p>
<p>you will create the appropriate dynamic controller interface to support the new WLAN; then you will enter the necessary WLAN parameters</p>
<p>Step 1. Configure a RADIUS Server</p>
<p>RADIUS server, such as WPA2-Enterprise or WPA3-Enterprise,</p>
<p>Select Security &gt; AAA &gt; RADIUS &gt; Authentication to see a list of servers that have already been configured</p>
<p>If multiple servers are defined, the controller will try them in sequential order. Click New to create a new server.</p>
<p>S AutNnOcaOon Servers
10
EAP
• web</p>
<p>Next, enter the server’s IP address, shared secret key, and port number Because the controller already had two other RADIUS servers configured, the server at 192.168.200.30 will be index number 3. Be sure to set the server status to Enabled so that the controller can begin using it. At the bottom of the page, you can select the type of user that will be authenticated with the server. Check Network User to authenticate wireless clients or Management to authenticate wireless administrators that will access the controller’s management functions. Click Apply to complete the server configuration.</p>
<p>Sec urity
• uo:us
MONITOR
WLANs WIRELESS SECURITY
RADIUS Authentication Servers &gt; New
MANAGE&quot; go
HELP EEEOBACK
Index (priority)
She re
ded
Net
MAC
C lie ts
rd
EAP
Advanced EAP
priornv Order
Certificate
ACROSS Control L istS
Win P
web Auth
policies
192.168.200.30
ASCII
r for FIPS Map
enabled &ldquo;&gt;</p>
<p>Step 2. Create a Dynamic Interface</p>
<p>create a new dynamic interface, navigate to Controller &gt; Interfaces. You should see a list of all the controller interfaces that are currently configured</p>
<p>CISCO</p>
<p>CISCO
ess
secuurv</p>
<p>Next, enter the IP address, subnet mask, and gateway address for the interface. You should also define primary and secondary DHCP server addresses that the controller will use when it relays DHCP requests from clients that are bound to the interface</p>
<p>Click the Apply button to complete the interface configuration and return to the list of interfaces.</p>
<p>c Isco
Conu</p>
<p>Step 3. Create a New WLAN</p>
<p>selecting WLANs from the top menu bar (displays current WLANs)</p>
<p>You can create a new WLAN by selecting Create New from the drop-down menu and then clicking the Go button.</p>
<p>Next, enter a descriptive name as the profile name and the SSID text string.</p>
<p>The ID number is used as an index into the list of WLANs that are defined on the controller. The ID number becomes useful when you use templates in Prime Infrastructure (PI) to configure WLANs on multiple controllers at the same time.</p>
<p>CISCO
KLAN s</p>
<p>WLAN templates are applied to specific WLAN ID numbers on controllers. The WLAN ID is only locally significant and is not passed between controllers. As a rule, you should keep the sequence of WLAN names and IDs consistent across multiple controllers so that any configuration templates you use in the future will be applied to the same WLANs on each controller.</p>
<p>Click the Apply button to create the new WLAN. The next page will allow you to edit four categories of parameters, corresponding to the tabs across the top</p>
<p>WLANS •Enginering</p>
<p>You can control whether the WLAN is enabled or disabled with the Status check box</p>
<p>Under Radio Policy, select the type of radio that will offer the WLAN. By default, the WLAN will be offered on all radios that are joined with the controller. You can select a more specific policy with 802.11a only, 802.11a/g only, 802.11g only, or 802.11b/g only.</p>
<p>Next, select which of the controller’s dynamic interfaces will be bound to the WLAN. By default, the management interface is selected. The drop-down list contains all the interface names that are available</p>
<p>Finally, use the Broadcast SSID check box to select whether the APs should broadcast the SSID name in the beacons they transmit.</p>
<p>Hiding the SSID name, by not broadcasting it, does not really provide any worthwhile security</p>
<p>Configuring WLAN Security</p>
<p>Select the Security tab to configure the security settings. By default, the Layer 2 Security tab is selected. From the Layer 2 Security drop-down menu, select the appropriate security scheme to use. Table 29-2 lists the types that are available.</p>
<p>Option
None
WPA+WPA2
802.1x
Static WEP
Static WEP + 802.1x
CKIP
None + EAP
Passthrough
Description
Open authentication
Wi-Fi protected access YVPA or YVPA2
EAP authentication with dynamic WEP
WEP key security
EAP authentication or static WEP
Cisco Key Integrity Protocol
Open authentication with remote EAP
authentication &ldquo;&gt;</p>
<p>Further down the screen, you can select which specific WPA, WPA2, and WPA3 methods to support on the WLAN</p>
<p>MAN. Edit •Engin..nng•</p>
<p>To use WPA2-Enterprise, the 802.1X option would be selected. In that case, 802.1x and EAP would be used to authenticate wireless clients against one or more RADIUS servers.</p>
<p>To specify which servers the WLAN should use, you would select the Security tab and then the AAA Servers tab in the WLAN edit screen. You can identify up to six specific RADIUS servers in the WLAN configuration. Beside each server, select a specific server IP address from the drop-down menu of globally defined servers. The servers are tried in sequential order until one of them responds</p>
<p>凹 ONIT ( 浓
MANAGEMENT
0 OS
0 Be , h
〔 De 〔 K BC-me
WLANS &gt;
Radius ~ ,
、 0 「
「 ENbÄ•d
Fi , re2g -17s e - RAD TSSe &quot; ” - r Ⅵ 4 Ⅳ Au a 0 &ldquo;&gt;</p>
<p>By default, a controller will contact a RADIUS server from its management interface. You can override this behavior by checking the box next to Radius Server Overwrite Interface so that the controller sources RADIUS requests from the dynamic interface that is associated with the WLAN.</p>
<p>Configuring WLAN QoS</p>
<p>Select the QoS tab to configure quality of service settings for the WLAN</p>
<p>By default, the controller will consider all frames in the WLAN to be normal data, to be handled in a “best effort” manner. You can set the Quality of Service (QoS) drop-down menu to classify all frames in one of the following ways:</p>
<p>Platinum (voice)</p>
<p>Gold (video)</p>
<p>Silver (best effort)</p>
<p>Bronze (background)</p>
<p>You can also set the Wi-Fi Multimedia (WMM) policy, call admission control (CAC) policies, and bandwidth parameters on the QoS page</p>
<p>Configuring Advanced WLAN Settings</p>
<p>Advanced Tab</p>
<p>can enable functions such as coverage hole detection, peer-to-peer blocking, client exclusion, client load limits, and so on.</p>
<p>Cisco
m. N s CONTROWFA
WLANs Edit •Engin
Pap
ESS
_u</p>
<p>By default, client sessions with the WLAN are limited to 1800 seconds (30 minutes). Once that session time expires, a client will be required to reauthenticate. This setting is controlled by the Enable Session Timeout check box and the Timeout field.</p>
<p>all clients are subject to the policies configured under Security &gt; Wireless Protection Policies &gt; Client Exclusion Policies. These policies include excessive 802.11 association failures, 802.11 authentication failures, 802.1x authentication failures, web authentication failures, and IP address theft or reuse. Offending clients will be automatically excluded or blocked for 60 seconds, as a deterrent to attacks on the wireless network.</p>
<p>Finalizing WLAN Configuration</p>
<p>c Isco
KLAN.
WI RECESS
secuRm</p>
<p>by default, a controller will not allow management traffic that is initiated from a WLAN. That means you (or anybody else) cannot access the controller GUI or CLI from a wireless device that is associated to the WLAN. This is considered to be a good security practice because the controller is kept isolated from networks that might be easily accessible or where someone might eavesdrop on the management session traffic</p>
<p>CISCO
Management
SNMP
serial port
WLAKs
Management Via Wireless
wtRELESS
SEuRr
FEE D SACK
Enable t. O
Software</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="wireless-principles">Wireless Principles</h1>

<p>This chapter covers the following exam topics:</p>
<p>1.0 Network Fundamentals</p>
<p>1.1 Explain the role and function of network components</p>
<p>1.1.d Access Points</p>
<p>1.11 Describe wireless principles</p>
<p>1.11.a Nonoverlapping Wi-Fi channels</p>
<p>1.11.b SSID</p>
<p>1.11.c RF</p>
<p>Comparing Wired and Wireless Networks</p>
<p>Wireless devices must adhere to a common standard (IEEE 802.11).</p>
<p>Wireless coverage must exist in the area where devices are expected to use it.</p>
<p>Wireless LAN Topologies</p>
<p>IEEE 802.11 WLANs are always half duplex because transmissions between stations use the same frequency or channel.</p>
<p>Basic Service Set</p>
<p>before a device can participate, it must advertise its capabilities and then be granted permission to join. The 802.11 standard calls this a basic service set (BSS). At the heart of every BSS is a wireless access point (AP),</p>
<p>The AP operates in infrastructure mode, which means it offers the services that are necessary to form the infrastructure of a wireless network. The AP also establishes its BSS over a single wireless channel. The AP and the members of the BSS must all use the same channel to communicate properly.</p>
<p>the operation of a BSS hinges on the AP, the BSS is bounded by the area where the AP’s signal is usable. This is known as the basic service area (BSA) or cell.</p>
<p>the cell is shown as a simple shaded circular area that centers around the AP itself.</p>
<p>It advertises the existence of the BSS so that devices can find it and try to join. To do that, the AP uses a unique BSS identifier (BSSID) that is based on the AP’s own radio MAC address.</p>
<p>Wireless devices must also have unique MAC addresses to send wireless frames at Layer 2 over the air.</p>
<p>the AP advertises the wireless network with a Service Set Identifier (SSID), which is a text string containing a logical name. Think of the BSSID as a machine-readable name tag that uniquely identifies the BSS ambassador (the AP), and the SSID as a nonunique, human-readable name tag that identifies the wireless service.</p>
<p>Membership with the BSS is called an association. A wireless device must send an association request to the AP and the AP must either grant or deny the request. Once associated, a device becomes a client, or an 802.11 station (STA), of the BSS.</p>
<p>As long as a wireless client remains associated with a BSS, most communications to and from the client must pass through the AP,</p>
<p>By using the BSSID as a source or destination address, data frames can be relayed to or from the AP.</p>
<p>SSID.
• &lsquo;MyNetwork&quot;
BSSID: &ldquo;&gt;</p>
<p>By sending data through the AP first, the BSS remains stable and under control.</p>
<p>Distribution System</p>
<p>The 802.11 standard refers to the upstream wired Ethernet as the distribution system (DS) for the wireless BSS,</p>
<p>the AP is in charge of mapping a virtual local-area network (VLAN) to an SSID.</p>
<p>SSID. &quot;
• MyNetwork&quot;
BSS
BSSID:</p>
<p>The AP must be connected to the switch by a trunk link that carries the VLANs.</p>
<p>The AP uses the 802.1Q tag to map the VLAN numbers to the appropriate SSIDs.</p>
<p>VLANs 10, 20, 30
SSID: &lsquo;MyNetwork&quot;
SSID: &quot;YourNetwork&quot;
BSSID:
SSID: &lsquo;Guest&quot;
BSSID:
BSSID:
F igure 26-7 Supporting Multiple SSIDs on One AP &ldquo;&gt;</p>
<p>The AP then appears as multiple logical APs—one per BSS—with a unique BSSID for each. With Cisco APs, this is usually accomplished by incrementing the last digit of the radio’s MAC address for each SSID.</p>
<p>Even though wireless clients can be distributed across many SSIDs, all of those clients must share the same AP’s hardware and must contend for airtime on the same channel.</p>
<p>Extended Service Set</p>
<p>When APs are placed at different geographic locations, they can all be interconnected by a switched infrastructure. The 802.11 standard calls this an extended service set (ESS),</p>
<p>Ideally, any SSIDs that are defined on one AP should be defined on all the APs in an ESS</p>
<p>BSS-I
AP-I
BSSID:
SSID: &quot;
My Network&quot;
BSS-2
AP-2
BSSID:
SSID: &quot;MyNetwork&quot;</p>
<p>Passing from one AP to another is called roaming</p>
<p>Each AP offers its own BSS on its own channel, to prevent interference between the APs. As a client device roams from one AP to another, it must scan the available channels to find a new AP (and BSS) to roam toward.</p>
<p>Independent Basic Service Set</p>
<p>The 802.11 standard allows two or more wireless clients to communicate directly with each other, with no other means of network connectivity. This is known as an ad hoc wireless network, or an independent basic service set (IBSS),</p>
<p>One of the devices must take the lead and begin advertising a network name and the necessary radio parameters, much like an AP would do.</p>
<p>Other Wireless Topologies</p>
<p>Repeater</p>
<p>A wireless repeater takes the signal it receives and repeats or retransmits it in a new cell area around the repeater.</p>
<p>Client A
Repeater
Client B &ldquo;&gt;</p>
<p>Some repeaters can use two transmitters and receivers to keep the original and repeated signals isolated on different channels. One transmitter and receiver pair is dedicated to signals in the AP’s cell, while the other pair is dedicated to signals in the repeater’s own cell.</p>
<p>Workgroup Bridge</p>
<p>WGB acts as an external wireless network adapter for a device that has none.</p>
<p>Client A
WGB
Cliente</p>
<p>You might encounter two types of workgroup bridges:</p>
<p>Universal workgroup bridge (uWGB): A single wired device can be bridged to a wireless network.</p>
<p>Workgroup bridge (WGB): A Cisco-proprietary implementation that allows multiple wired devices to be bridged to a wireless network.</p>
<p>Outdoor Bridge</p>
<p>act as a bridge to form a single wireless link from one LAN to another over a long distance.</p>
<p>One AP configured in bridge mode is needed on each end of the wireless link. Special purpose antennas are normally used with the bridges to focus their signals in one direction</p>
<p>Bridge
LAN В &ldquo;&gt;</p>
<p>A point-to-multipoint bridged link allows a central site to be bridged to several other sites</p>
<p>00
V NVI &ldquo;&gt;</p>
<p>Mesh Network</p>
<p>In a mesh topology, wireless traffic is bridged from AP to AP, in a daisy-chain fashion, using another wireless channel.</p>
<p>Mesh APs can leverage dual radios—one using a channel in one range of frequencies and one a different range. Each mesh AP usually maintains a BSS on one channel, with which wireless clients can associate. Client traffic is then usually bridged from AP to AP over other channels as a backhaul network.</p>
<p>The mesh network runs its own dynamic routing protocol to work out the best path for backhaul traffic to take across the mesh APs.</p>
<p>RF Overview</p>
<p>Electromagnetic waves do not travel in a straight line. Instead, they travel by expanding in all directions away from the antenna.</p>
<p>frequency of the wave, or the number of times the signal makes one complete up and down cycle in 1 second</p>
<p>1 Second
Frequency = 4 cycles/second
= 4 Hertz</p>
<p>A hertz (Hz) is the most commonly used frequency unit and is nothing other than one cycle per second.</p>
<p>Unit
Hertz
Kilohertz
Megahertz
Gigahertz
Abbreviation
kHz
MHz
GHz
Meaning
Cycles per second
1000 Hz &ldquo;&gt;</p>
<p>3 kHz to 300 GHz is commonly called radio frequency (RF).</p>
<p>Wireless Bands and Channels</p>
<p>Because a range of frequencies might be used for the same purpose, it is customary to refer to the range as a band of frequencies.</p>
<p>the range from 530 kHz to around 1710 kHz is used by AM radio stations; therefore, it is commonly called the AM band or the AM broadcast band.</p>
<p>One of the two main frequency ranges used for wireless LAN communication lies between 2.400 and 2.4835 GHz. This is usually called the 2.4-GHz band, even though it does not encompass the entire range between 2.4 and 2.5 GHz</p>
<p>The other wireless LAN range is usually called the 5-GHz band because it lies between 5.150 and 5.825 GHz. The 5-GHz band actually contains the following four separate and distinct bands:</p>
<p>5.150 to 5.250 GHz</p>
<p>5.250 to 5.350 GHz</p>
<p>5.470 to 5.725 GHz</p>
<p>5.725 to 5.825 GHz</p>
<p>Gap between 5.350 and 5.470</p>
<p>this gap exists and cannot be used for wireless LANs.</p>
<p>Do not worry about memorizing the band names or exact frequency ranges; just be aware of the two main bands at 2.4 and 5 GHz.</p>
<p>A frequency band contains a continuous range of frequencies.</p>
<p>bands are usually divided into a number of distinct channels. Each channel is known by a channel number and is assigned to a specific frequency.</p>
<p>2.412
2.417
2.422
2427
6
2432 2437 2.442
Dsss: 22 MHz
OFDM: 20 MHz
2.44?
2,452
2457
11
2462 2467 2.472
2484</p>
<p>Channel
U-Nll-2
U-Nll-2 Extended
112 116 124 128132 136 140
5.700
U-Nll-3
149153157161
36 40 44 48 52 56 60 64
GHz
5180 5240 5260 5.320
5.745
5825 &ldquo;&gt;</p>
<p>In the 5-GHz band, this is the case because each channel is allocated a frequency range that does not encroach on or overlap the frequencies allocated for any other channel. In other words, the 5-GHz band consists of nonoverlapping channels.</p>
<p>APs and Wireless Standards</p>
<p>Amend-
ment
802.11-
1997
802.11b
802.118
802.11a
802.11n
802.11ac
802.11ax
2.4
GHz
Yes
Yes
Yes
No
Yes
No
Yes
GHz
No
No
No
Yes
Yes
Yes
Yes
Max Data
Rate
2 Mbps
11 Mbps
54 Mbps
54 Mbps
600 Mbps
6.93 Gbps
4x
802.11ac
Notes
The original 802.11 standard rati-
fied in 1997
Introduced in 1999
Introduced in 2003
Introduced in 1999
HT (high throughput), introduced
in 2009
VHT (very high throughput), in-
troduced in 2013
High Efficiency Wireless, Wi-Fi6;
expected late 2019; will operate
on other bands too, as they be-
come available &ldquo;&gt;</p>
<p>Wireless client devices and APs can be compatible with one or more amendments;</p>
<p>APs can usually operate on both bands simultaneously to support any clients that might be present on each band.</p>
<p>wireless clients typically associate with an AP on one band at a time, while scanning for potential APs on both bands. The band used to connect to an AP is chosen according to the operating system, wireless adapter driver, and other internal configuration.</p>
<p>Cisco APs have dual radios (sets of transmitters and receivers) to support BSSs on one 2.4-GHz channel and other BSSs on one 5-GHz channel simultaneously. Some models also have two 5-GHz radios that can be configured to operate BSSs on two different channels at the same time, providing wireless coverage to higher densities of users that are located in the same vicinity.</p>
<p>RF signals propagate or reach further on the 2.4-GHz band than on the 5-GHz band. They also tend to penetrate indoor walls and objects easier at 2.4 GHz than 5 GHz. However, the 2.4-GHz band is commonly more crowded with wireless devices. Remember that only three nonoverlapping channels are available, so the chances of other neighboring APs using the same channels is greater. In contrast, the 5-GHz band has many more channels available to use, making channels less crowded and experiencing less interference.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="wireless-security">Wireless Security</h1>

<p>This chapter covers the following exam topics:</p>
<p>1.0 Network Fundamentals</p>
<p>1.11 Describe wireless principles</p>
<p>1.11.d Encryption</p>
<p>5.0 Security Fundamentals</p>
<p>5.9 Describe wireless security protocols (WPA, WPA2, and WPA3)</p>
<p>A comprehensive approach to wireless security focuses on the following areas:</p>
<p>Identifying the endpoints of a wireless connection</p>
<p>Identifying the end user (authentication)</p>
<p>Protecting the wireless data from eavesdroppers (encryption)</p>
<p>Protecting the wireless data from tampering (integrity)</p>
<p>Authentication</p>
<p>To use a wireless network, clients must first discover a basic service set (BSS) and then request permission to associate with it. Clients should be authenticated by some means before they can become functioning members of the wireless LAN.</p>
<p>A fake AP could also send spoofed management frames to disassociate or deauthenticate legitimate and active clients, just to disrupt normal network operation.</p>
<p>To prevent this type of man-in-the-middle attack, the client should authenticate the AP before the client itself is authenticated</p>
<p>Message Privacy</p>
<p>data should be encrypted for its journey through free space. This is accomplished by encrypting the data payload in each wireless frame just prior to being transmitted, then decrypting it as it is received. The idea is to use an encryption method that the transmitter and receiver share, so the data can be encrypted and decrypted successfully.</p>
<p>the AP should securely negotiate a unique encryption key to use for each associated client.</p>
<p>No other device should know about or be able to use the same keys to eavesdrop and decrypt the data.</p>
<p>The AP also maintains a “group key” that it uses when it needs to send encrypted data to all clients in its cell at one time. Each of the associated clients uses the same group key to decrypt the data.</p>
<p>Message Integrity</p>
<p>what if someone managed to alter the contents along the way? The recipient would have a very difficult time discovering that the original data had been modified.</p>
<p>A message integrity check (MIC) is a security tool that can protect against data tampering.</p>
<p>a way for the sender to add a secret stamp inside the encrypted data frame. The stamp is based on the contents of the data bits to be transmitted. Once the recipient decrypts the frame, it can compare the secret stamp to its own idea of what the stamp should be, based on the data bits that were received. If the two stamps are identical, the recipient can safely assume that the data has not been tampered with.</p>
<p>![1. Original Data
2. Compute MIC
nihaol 23
nihao 123
6. Compare MICs
5. Compute MIC
3. Encrypt Data + MIC
Client
4. Decrypt
niha0123
741 fcb64901d</p>
<p>Wireless Client Authentication Methods</p>
<ol>
<li>Open Authentication</li>
</ol>
<p>original 802.11 standard offered only two choices to authenticate a client: open authentication and WEP.</p>
<p>Open authentication is true to its name; it offers open access to a WLAN. The only requirement is that a client must use an 802.11 authentication request before it attempts to associate with an AP. No other credentials are needed.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="console-into-a-juniper-mx80-from-linux">Console into a Juniper MX80 from Linux</h1>

<p>Plug console cable in</p>
<p>find out what your serial line name is:</p>
<p>$ dmesg | grep -i FTDI</p>
<p>Open putty &gt; change to serial &gt; change the tty line name</p>
<p>Make sure your serial settings are correct</p>
<p><a href="https://www.juniper.net/documentation/us/en/hardware/mx5-mx10-mx40-mx80/topics/task/management-devices-mx5-mx10-mx40-mx80-connecting.html" rel="external" target="_blank">https://www.juniper.net/documentation/us/en/hardware/mx5-mx10-mx40-mx80/topics/task/management-devices-mx5-mx10-mx40-mx80-connecting.html</a></p>
<p>Press open &gt; when terminal appears press enter</p>
<p>Juniper Password recovery</p>
<p>ttps://www.juniper.net/documentation/en_US/junos/topics/task/configuration/authentication-root-password-recovering-mx80.html</p>
<p><a href="https://www.juniper.net/documentation/us/en/software/junos/junos-install-upgrade/topics/topic-map/rescue-and-recovery-config-file.html#load-commit-configuration" rel="external" target="_blank">https://www.juniper.net/documentation/us/en/software/junos/junos-install-upgrade/topics/topic-map/rescue-and-recovery-config-file.html#load-commit-configuration</a></p>
<p>accidentally deleted the wrong line in Juniper.conf file ? failing over to juniper.conf</p>
<p><a href="https://www.juniper.net/documentation/en_US/junos/topics/concept/junos-configuration-files.html" rel="external" target="_blank">https://www.juniper.net/documentation/en_US/junos/topics/concept/junos-configuration-files.html</a></p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="how-to-copy-and-paste-a-junos-config">How to Copy and Paste a Junos Config</h1>

<p>cli
top
delete
configure
load set terminal
ctrl+shift +D to exit
commit check
commit and-quit</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="how-to-toggle-poe-on-a-juniper-switch">How to Toggle POE on a Juniper Switch</h1>

<p>Configure</p>
<p>set poe interface ge-0/0/0 disable</p>
<p>commit</p>
<p>rollback 1</p>
<p>commit</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="juniper-cli-basics">Juniper CLI Basics</h1>

<p>Connection Methods</p>
<p>Factory default:</p>
<p>User: root</p>
<p>No password</p>
<p>Fxpo = ethernet management interface</p>
<p>SSH, FTP. Telnet, http(s)</p>
<p>Cannot route traffic</p>
<p>Management purposes only</p>
<p>Initial Login</p>
<p>Logging for the First Time<br>
• Nonroot users are placed into the CLI automatically<br>
• Root user SSH login requires explicit config<br>
router (ttyu0)<br>
Serial console<br>
login :<br>
user<br>
Password:</p>
<ul>
<li>JUNOS 15.1X49-DIOO.6 built 2017-06-28 07:33:31 UTC<br>
• The root user must start the CLI from the shell<br>
• Remember to exit the root shell after logging out of the CLI!<br>
router (ttyuO)</li>
<li>JUNOS 15.1X49-DIOO<br>
2017-06-28<br>
UTC<br>
login:<br>
Password:<br>
root@router&gt;<br>
.6 built<br>
cli<br>
Shell Prompt<br>
CLI Prompt &ldquo;&gt;</li>
</ul>
<p>CLI Modes</p>
<p>configure</p>
<p>Configure mode . New candidate config file</p>
<h1 id="configure-private-best-practice">configure private (best practice)</h1>
<p>Configure mode with a private candidate file</p>
<p>Other users logged in will not make changes to this file</p>
<p>Private Files comitted are merged into active config</p>
<p>Whoever commits last wins if there are matching commands</p>
<p>Can&rsquo;t commit until you are at the top of the configuration (in private mode)</p>
<h1 id="configure-exclusive">configure exclusive</h1>
<p>Locks config database</p>
<p>Can be killed by admin</p>
<p>No other user can edit config while you are in this mode</p>
<h1 id="edit-top">(edit) top</h1>
<p>Goes back to the top of the configuration tree</p>
<p>Candidate Config Files</p>
<h1 id="commit">commit</h1>
<p>Turns candidate config file into active</p>
<p>Warning will show if candidate config is already being edited</p>
<p>Commiting Configurations</p>
<p>Rollback files are last three Active configurations and stored in /config/(the current active are stored here as well)</p>
<p>4-49 are stores in /var/config/</p>
<p>Shows timestamp for the last time the file was active</p>
<h1 id="rollback-1">rollback 1</h1>
<p>Places rollback file one into the candidate config, must commit to make it active</p>
<p>CLI Help, Auto complete</p>
<p>Can type ? To show available commands</p>
<p>#&gt; Show version brief</p>
<p>Show version info, hostname, and model</p>
<p>#&gt;Configure</p>
<p>goes into configure mode</p>
<h1 id="set-system-host-name-hostname">set system host-name hostname</h1>
<p>set&rsquo;s hostname</p>
<h1 id="delete-system-host-name">delete system host-name</h1>
<p>deletes set hostname</p>
<h1 id="edit-routing-options-static">edit routing-options static</h1>
<p>edit routing options mode</p>
<h1 id="exit">exit</h1>
<p>exit</p>
<p>Junos will let you know that config hasn&rsquo;t been committed and ask if you want to commit</p>
<h1 id="rollback-0">rollback 0</h1>
<p>throwaway all changes to active candidate</p>
<p>#&gt; help topic routing-options static</p>
<p>shows info page for topic specified</p>
<p>#&gt; help references routing-options static</p>
<p>syntax and hierarchy of commands</p>
<p>Keyboard Shortcuts</p>
<p>Command completion</p>
<p>Space</p>
<p>auto complete commands built into system, Does not autocomplete things you named</p>
<p>tab</p>
<p>autocomplete user defined commands in the system</p>
<p>?</p>
<p>will show user defined options for autocomplete as well</p>
<p>Navigating Configuration Mode</p>
<p>When you go into config mode the running config is copied into a candidate file that you will be working on</p>
<h1 id="show">show</h1>
<p>if in configure mode, displays the entire candidate configuration</p>
<h1 id="edit">edit</h1>
<p>similar to cd</p>
<h1 id="edit-protocols-ospf">edit protocols ospf</h1>
<p>goes to the protocols/ospf heirarchy config mode</p>
<p>if you run show commend it will show the contents of hierarchy from wherever you are.</p>
<h1 id="top">top</h1>
<p>goes to the top of the hierarchy. Like cd to / in Linux</p>
<p>must be at the top to commit changes</p>
<h1 id="show-protocols-ospf">show protocols ospf</h1>
<p>selects which part of the hierarchy to show</p>
<p>will only see this if you are above the option you want to show in the hierarchy</p>
<p>can bypass this with:</p>
<h1 id="top-show-routing-options-static">top show routing-options static</h1>
<p>same thing happens with the edit command</p>
<h1 id="top-edit-routing-options">top edit routing-options</h1>
<p>same fix</p>
<p>Editing, Renaming, and Comparing Configuration</p>
<h1 id="up">up</h1>
<p>moves up one level in the hierarchy</p>
<p>there is a protion in this video wioth vlan and interface configuration, come back if this isn&rsquo;t covered elsewhere</p>
<h1 id="up-2">up 2</h1>
<p>jump up 2 levels</p>
<h1 id="rollback-">rollback ?</h1>
<p>shows all the rollback files on the system</p>
<h1 id="run-show-system-uptime">run show system uptime</h1>
<p>run is like &ldquo;do&rdquo; in cisco, can run command from anywhere</p>
<h1 id="rollback-1-1">rollback 1</h1>
<p>rolls config back to rollback 1 file</p>
<h1 id="show--compare">show | compare</h1>
<p>show things to be removed added with - or +</p>
<h1 id="exit-1">exit</h1>
<p>Also brings you to the top of config file</p>
<p>Replace, Copy, or annotate Configuration</p>
<h1 id="copy-ge-001-to-ge-002">copy ge-0/0/1 to ge-0/0/2</h1>
<p>makes a copy of the config</p>
<h1 id="show-ge-000">show ge-0/0/0</h1>
<h1 id="edit-ge-000">edit ge-0/0/0</h1>
<p>Edit interfaces mode</p>
<p>#(int) replace pattern 0.101 with 200.102</p>
<p>Replaces the pattern of the ip address</p>
<p>#(int) replace pattern /24 with /25</p>
<p>Replace mask</p>
<p>If using replace commands don&rsquo;t commit the config without running the #top show | compare command to verify. You may have run the compare command from one place.</p>
<h1 id="top-edit-protocols-ospf">top edit protocols ospf</h1>
<p>Go into ospf edit</p>
<h1 id="deactivate-interface-ge-0000">deactivate interface ge-0/0/0.0</h1>
<p>Remove interface from ospf</p>
<h1 id="annotate-interface-ge-000-took-down-due-to-flapping">annotate interface ge-0/0/0 &ldquo;took down due to flapping&rdquo;</h1>
<p>C style programming comment</p>
<p>Load merge Configuration</p>
<h1 id="run-file-list">run file list</h1>
<p>ls -l basically</p>
<h1 id="run-file-show-top-int-config">run file show top-int-config</h1>
<p>Display contents of top-int-config</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="/js/clipboard.min.js?1715876283" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1715876283" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/d3/d3-color.min.js?1715876283" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1715876283" defer></script>
    <script src="/js/d3/d3-drag.min.js?1715876283" defer></script>
    <script src="/js/d3/d3-ease.min.js?1715876283" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1715876283" defer></script>
    <script src="/js/d3/d3-selection.min.js?1715876283" defer></script>
    <script src="/js/d3/d3-timer.min.js?1715876283" defer></script>
    <script src="/js/d3/d3-transition.min.js?1715876283" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1715876283" defer></script>
    <script src="/js/js-yaml.min.js?1715876283" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/theme.js?1715876283" defer></script>
  </body>
</html>
