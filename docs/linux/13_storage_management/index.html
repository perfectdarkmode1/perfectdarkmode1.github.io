<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.124.1">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="Identify and understand disk partitions
The concept of thin provisioning, and its benefits
Create and delete partition on MBR disk
Create and delete partition on GPT disk
Describe Logical Volume Manager and its components
Understand various Logical Volume Manager management operations
Know Logical Volume Manager administration commands
Overview of Virtual Data Optimizer and how it conserves storage
Create and confirm physical volumes, volume groups, LVM logical volumes, and VDO logical volumes">
    <meta name="author" content="David">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="Identify and understand disk partitions
The concept of thin provisioning, and its benefits
Create and delete partition on MBR disk
Create and delete partition on GPT disk
Describe Logical Volume Manager and its components
Understand various Logical Volume Manager management operations
Know Logical Volume Manager administration commands
Overview of Virtual Data Optimizer and how it conserves storage
Create and confirm physical volumes, volume groups, LVM logical volumes, and VDO logical volumes">
    <meta property="og:url" content="http://perfectdarkmode.com/linux/13_storage_management/">
    <meta property="og:site_name" content="Perfect Dark Mode">
    <meta property="og:description" content="Identify and understand disk partitions
The concept of thin provisioning, and its benefits
Create and delete partition on MBR disk
Create and delete partition on GPT disk
Describe Logical Volume Manager and its components
Understand various Logical Volume Manager management operations
Know Logical Volume Manager administration commands
Overview of Virtual Data Optimizer and how it conserves storage
Create and confirm physical volumes, volume groups, LVM logical volumes, and VDO logical volumes">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Linux">
    <meta itemprop="description" content="Identify and understand disk partitions
The concept of thin provisioning, and its benefits
Create and delete partition on MBR disk
Create and delete partition on GPT disk
Describe Logical Volume Manager and its components
Understand various Logical Volume Manager management operations
Know Logical Volume Manager administration commands
Overview of Virtual Data Optimizer and how it conserves storage
Create and confirm physical volumes, volume groups, LVM logical volumes, and VDO logical volumes">
    <meta itemprop="wordCount" content="11492">
    <title></title>
    <link href="/css/fontawesome-all.min.css?1718846168" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1718846168" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1718846168" rel="stylesheet">
    <link href="/css/auto-complete.css?1718846168" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1718846168" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1718846168" rel="stylesheet">
    <link href="/css/fonts.css?1718846168" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1718846168" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1718846168" rel="stylesheet">
    <link href="/css/theme-zen-dark.css?1718846168" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-relearn-dark.css?1718846168" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/variant.css?1718846168" rel="stylesheet">
    <link href="/css/print.css?1718846168" rel="stylesheet" media="print">
    <script src="/js/variant.js?1718846168"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='http:\/\/perfectdarkmode.com';
      window.index_js_url="/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'zen-dark' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-23N4FSG0HM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-23N4FSG0HM');
</script>

  </head>
  <body class="mobile-support html" data-url="/linux/13_storage_management/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-back" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="history.back()" type="button" title=""><i class="fa-fw fas fa-chevron-left"></i></button>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"><nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#storage-management-overview">Storage Management Overview</a></li>
    <li><a href="#master-boot-record-mbr">Master Boot Record (MBR)</a></li>
    <li><a href="#guid-partition-table-gpt">GUID Partition Table (GPT)</a></li>
    <li><a href="#disk-partitions">Disk Partitions</a></li>
    <li><a href="#storage-management-tools">Storage Management Tools</a></li>
    <li><a href="#thin-provisioning">Thin Provisioning</a></li>
    <li><a href="#adding-storage-for-practice">Adding Storage for Practice</a></li>
    <li><a href="#exercise-13-1-add-required-storage-to-server2">Exercise 13-1: Add Required Storage to server2</a></li>
    <li><a href="#mbr-storage-management-with-parted">MBR Storage Management with parted</a></li>
    <li><a href="#exercise-13-2-create-an-mbr-partition-server2">Exercise 13-2: Create an MBR Partition (server2)</a></li>
    <li><a href="#exercise-13-3-delete-an-mbr-partition-server2">Exercise 13-3: Delete an MBR Partition (server2)</a></li>
    <li><a href="#gpt-storage-management-with-gdisk">GPT Storage Management with gdisk</a></li>
    <li><a href="#exercise-13-4-create-a-gpt-partition-server2">Exercise 13-4: Create a GPT Partition (server2)</a></li>
    <li><a href="#exercise-13-5-delete-a-gpt-partitionserver2">Exercise 13-5: Delete a GPT Partition(server2)</a></li>
    <li><a href="#logical-volume-manager-lvm">Logical Volume Manager (LVM)</a></li>
    <li><a href="#physical-volumepv">Physical Volume(PV)</a></li>
    <li><a href="#volume-group">Volume Group</a></li>
    <li><a href="#physical-extent">Physical Extent</a></li>
    <li><a href="#logical-volume">Logical Volume</a></li>
    <li><a href="#logical-extent">Logical Extent</a></li>
    <li><a href="#lvm-operations-and-commands">LVM Operations and Commands</a>
      <ul>
        <li><a href="#create-and-remove-operations">Create and Remove Operations</a></li>
        <li><a href="#extend-and-reduce-operations">Extend and Reduce Operations</a></li>
        <li><a href="#rename-operations">Rename Operations</a></li>
        <li><a href="#list-and-display-operations">List and Display Operations</a></li>
      </ul>
    </li>
    <li><a href="#exercise-13-6-create-physical-volume-and-volume-group-server2">Exercise 13-6: Create Physical Volume and Volume Group (server2)</a></li>
    <li><a href="#exercise-13-7-create-logical-volumesserver2">Exercise 13-7: Create Logical Volumes(server2)</a></li>
    <li><a href="#exercise-13-8-extend-a-volume-group-and-a-logical-volumeserver2">Exercise 13-8: Extend a Volume Group and a Logical Volume(server2)</a></li>
    <li><a href="#exercise-13-9-rename-reduce-extend-and-remove-logical-volumesserver2">Exercise 13-9: Rename, Reduce, Extend, and Remove Logical Volumes(server2)</a></li>
    <li><a href="#exercise-13-10-reduce-and-remove-a-volume-groupserver2">Exercise 13-10: Reduce and Remove a Volume Group(server2)</a></li>
    <li><a href="#exercise-13-11-uninitialize-physical-volumes-server2">Exercise 13-11: Uninitialize Physical Volumes (Server2)\</a></li>
    <li><a href="#storage-optimization-with-virtual-data-optimizer-vdo">Storage Optimization with Virtual Data Optimizer (VDO)</a></li>
    <li><a href="#how-vdo-conserves-storage">How VDO Conserves Storage</a></li>
    <li><a href="#vdo-integration-with-lvm">VDO Integration with LVM</a></li>
    <li><a href="#vdo-components">VDO Components</a></li>
    <li><a href="#exercise-13-12-create-an-lvm-vdo-volume">Exercise 13-12: Create an LVM VDO Volume</a></li>
    <li><a href="#exercise-13-13-remove-a-volume-group-and-uninitialize-physical-volumeserver2">Exercise 13-13: Remove a Volume Group and Uninitialize Physical Volume(Server2)</a></li>
    <li><a href="#review-questions">Review Questions</a></li>
    <li><a href="#do-it-yourself-challenge-labs">Do-It-Yourself Challenge Labs</a></li>
    <li><a href="#lab-13-1-create-and-remove-partitions-with-parted">Lab 13-1: Create and Remove Partitions with parted</a></li>
    <li><a href="#lab-13-2-create-and-remove-partitions-with-gdisk">Lab 13-2: Create and Remove Partitions with gdisk</a></li>
    <li><a href="#lab-13-3-create-volume-group-and-logical-volumes">Lab 13-3: Create Volume Group and Logical Volumes</a></li>
    <li><a href="#lab-13-4-expand-volume-group-and-logical-volume">Lab 13-4: Expand Volume Group and Logical Volume</a>
      <ul>
        <li><a href="#lab-13-5-add-a-vdo-logical-volume">Lab 13-5: Add a VDO Logical Volume</a></li>
      </ul>
    </li>
    <li><a href="#lab-13-6-reduce-and-remove-logical-volumes">Lab 13-6: Reduce and Remove Logical Volumes</a></li>
    <li><a href="#lab-13-7-remove-volume-group-and-physical-volumes">Lab 13-7: Remove Volume Group and Physical Volumes</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-about" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/about/" title=""><i class="fa-fw fas fa-address-card"></i> <span class="title">About</span></a>
            </div>

            <div class="topbar-button topbar-button-now" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/now/" title=""><i class="fa-fw fas fa-play"></i> <span class="title">Now</span></a>
            </div>

            <div class="topbar-button topbar-button-recommended" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/recommended/" title=""><i class="fa-fw fas fa-thumbs-up"></i> <span class="title">Recommended</span></a>
            </div>

            <div class="topbar-button topbar-button-booknotes" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/booknotes/" title=""><i class="fa-fw fas fa-file"></i> <span class="title">Book Notes</span></a>
            </div>

            <div class="topbar-button topbar-button-contact" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/contact/" title=""><i class="fa-fw fas fa-envelope"></i> <span class="title">Contact</span></a>
            </div>






          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id=""></h1>

<p>Identify and understand disk partitions</p>
<p>The concept of thin provisioning, and its benefits</p>
<p>Create and delete partition on MBR disk</p>
<p>Create and delete partition on GPT disk</p>
<p>Describe Logical Volume Manager and its components</p>
<p>Understand various Logical Volume Manager management operations</p>
<p>Know Logical Volume Manager administration commands</p>
<p>Overview of Virtual Data Optimizer and how it conserves storage</p>
<p>Create and confirm physical volumes, volume groups, LVM logical volumes, and VDO logical volumes</p>
<p>Rename, reduce, extend, and remove logical volumes</p>
<p>Extend, reduce, and remove volume groups</p>
<p>Remove physical volumes</p>
<h4 id="rhcsa-objectives">RHCSA Objectives:</h4>
<p>26. List, create, and delete partitions on MBR and GPT disks</p>
<p>27. Create and remove physical volumes</p>
<p>28. Assign physical volumes to volume groups</p>
<p>29. Create and delete logical volumes</p>
<p>31. Add new partitions and logical volumes, and swap to a system
nondestructively (the swap portion of this objective is covered in
Chapter 14 )</p>
<p>35. Extend existing logical volumes (additional coverage on this
objective is available in Chapter 14 )</p>
<ul>
<li>Data is stored on disks that are logically divided into partitions.</li>
<li>A partition can exist on a portion of a disk, on an entire disk, or it may span multiple disks.
Each partition is accessed and managed independent of other partitions and may contain a file system or swap space.
Partitioning information is stored at special disk locations that the system references at boot time.
Partitions created with a combination of most tools can coexist on a single disk.</li>
</ul>
<p>Thin provisioning is a powerful feature that guarantees an efficient use of storage space by allocating only what is needed and by storing data at adjacent locations.
Many storage management solutions incorporate thin provisioning technology in their core configuration.</p>
<p>Virtual Data Optimizer capitalizes on thin provisioning, de-duplication, and compression technologies to conserve storage space, improve data throughput, and save money.</p>
<p>The Logical Volume Manager solution sets up an abstraction layer between the operating system and the storage hardware.
It utilizes virtual objects for storage pooling and allocation, and offers a slew of
commands to carry out management operations.</p>
<h2 id="storage-management-overview">Storage Management Overview</h2>
<p>Partition information is stored on the disk in a small region, which is read by the operating system at boot time.
This region is referred to as the Master Boot Record (MBR) on the BIOS-based systems, and GUID Partition Table (GPT) on the UEFI-based systems.
At system boot, the BIOS/UEFI scans all storage devices, detects the presence of MBR/GPT areas, identifies the boot disks, loads the bootloader program in memory from the default boot disk, executes the boot code to read the partition table and identify the /boot partition, loads the kernel in memory, and passes control over to it.
Though MBR and GPT store disk partition information and the boot code.</p>
<h2 id="master-boot-record-mbr">Master Boot Record (MBR)</h2>
<p>resides on the first sector of the boot disk.
was the preferred choice for saving partition table information on x86-based
computers.
with the arrival of bigger and larger hard drives, a new firmware specification (UEFI) was introduced.
still widely used, but its use is diminishing in favor of UEFI.</p>
<p>allows the creation of three types of partition on a single disk.
primary, extended, and logical&mdash;
only primary and logical can be used for data storage
extended is a mere enclosure for holding the logical partitions and it is not meant for data storage.
supports the creation of up to four primary partitions numbered 1 through 4 at a time.
In case additional partitions are required, one of the primary partitions must be deleted and replaced with an extended
partition to be able to add logical partitions (up to 11) within that extended partition.
Numbering for logical partitions begins at 5.
supports a maximum of 14 usable partitions (3 primary and 11 logical) on a single disk.</p>
<p>Cannot address storage space beyond 2TB ue to its 32-bit nature and its 512-byte disk sector size.
non-redundant; the record it contains is not replicated, resulting in an unbootable system in the event of corruption.
If your disk is smaller than 2TB and you don&rsquo;t intend to build more than 14 usable partitions, you can use MBR
without issues.</p>
<h2 id="guid-partition-table-gpt">GUID Partition Table (GPT)</h2>
<p>ability to construct up to 128 partitions (no concept of extended or logical partitions)
utilize disks larger than 2TB
use 4KB sector size
store a copy of the partition information before the end of the disk for redundancy</p>
<p>allows a BIOS-based system to boot from a GPT disk using the bootloader program stored in a protective MBR at the first disk sector
UEFI firmware also supports the secure boot feature, which only allows signed binaries to boot</p>
<h2 id="disk-partitions">Disk Partitions</h2>
<p>Care must be taken when adding a new partition to elude data corruption with overlapping an extant partition or wasting storage by leaving unused space between adjacent partitions.</p>
<p>disk allocated at the time of installation is recognized as sda (s for SATA, SAS, or SCSI device) disk a,
first partition identified as sda1 and the second partition as sda2.
Any subsequent disks added to the system will be known as sdb, sdc, sdd, and so on, and will use 1, 2, 3,
etc. for partition numbering.</p>
<p>RHEL offers a command called <code>lsblk</code> to list disk and partition information.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server1 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk</span>
</span></span><span style="display:flex;"><span>NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda             8:0    <span style="color:#ff9f43">0</span>   10G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>├─sda1          8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part /boot
</span></span><span style="display:flex;"><span>└─sda2          8:2    <span style="color:#ff9f43">0</span>    9G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  ├─rhel-root 253:0    <span style="color:#ff9f43">0</span>    8G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  └─rhel-swap 253:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sr0            11:0    <span style="color:#ff9f43">1</span>  9.8G  <span style="color:#ff9f43">0</span> rom  /mnt</span></span></code></pre></div><p>sr0 represents the ISO image mounted as an optical medium</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server1 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo fdisk -l</span>
</span></span><span style="display:flex;"><span>Disk /dev/sda: <span style="color:#ff9f43">10</span> GiB, <span style="color:#ff9f43">10737418240</span> bytes, <span style="color:#ff9f43">20971520</span> sectors
</span></span><span style="display:flex;"><span>Disk model: VBOX HARDDISK   
</span></span><span style="display:flex;"><span>Units: sectors of <span style="color:#ff9f43">1</span> * <span style="color:#ff5c57">512</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">512</span> bytes / <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>I/O size <span style="color:#ff6ac1">(</span>minimum/optimal<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">512</span> bytes / <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>Disklabel type: dos
</span></span><span style="display:flex;"><span>Disk identifier: 0xfc8b3804
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Device     Boot   Start      End  Sectors Size Id Type
</span></span><span style="display:flex;"><span>/dev/sda1  *       <span style="color:#ff9f43">2048</span>  <span style="color:#ff9f43">2099199</span>  <span style="color:#ff9f43">2097152</span>   1G <span style="color:#ff9f43">83</span> Linux
</span></span><span style="display:flex;"><span>/dev/sda2       <span style="color:#ff9f43">2099200</span> <span style="color:#ff9f43">20971519</span> <span style="color:#ff9f43">18872320</span>   9G 8e Linux LVM
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Disk /dev/mapper/rhel-root: <span style="color:#ff9f43">8</span> GiB, <span style="color:#ff9f43">8585740288</span> bytes, <span style="color:#ff9f43">16769024</span> sectors
</span></span><span style="display:flex;"><span>Units: sectors of <span style="color:#ff9f43">1</span> * <span style="color:#ff5c57">512</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">512</span> bytes / <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>I/O size <span style="color:#ff6ac1">(</span>minimum/optimal<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">512</span> bytes / <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Disk /dev/mapper/rhel-swap: <span style="color:#ff9f43">1</span> GiB, <span style="color:#ff9f43">1073741824</span> bytes, <span style="color:#ff9f43">2097152</span> sectors
</span></span><span style="display:flex;"><span>Units: sectors of <span style="color:#ff9f43">1</span> * <span style="color:#ff5c57">512</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">512</span> bytes / <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>I/O size <span style="color:#ff6ac1">(</span>minimum/optimal<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">512</span> bytes / <span style="color:#ff9f43">512</span> bytes</span></span></code></pre></div><p>identifiers 83 and 8e are hexadecimal values for the partition types</p>
<h2 id="storage-management-tools">Storage Management Tools</h2>
<p>parted, gdisk, and LVM
Partitions created with a combination of most of these tools and toolsets can coexist on the same disk.</p>
<p>parted
understands both MBR and GPT formats.</p>
<p>gdisk
idesigned to support the GPT format only
may be used as a replacement of parted.</p>
<p>LVM
feature-rich logical volume management solution that gives flexibility in storage management.</p>
<h2 id="thin-provisioning">Thin Provisioning</h2>
<p>allows for an economical allocation and utilization of storage space by moving arbitrary data blocks to contiguous locations, which results in empty block elimination.
can create a thin pool of storage space and assign volumes much larger storage space than the physical capacity of the pool.
Workloads begin consuming the actual allocated space for data writing.
When a preset custom threshold (80%, for instance) on the actual consumption of the physical storage in the pool is reached, expand the pool dynamically by adding more physical storage to it.
The volumes will automatically start exploiting the new space right away.
helps prevent spending more money upfront.</p>
<h2 id="adding-storage-for-practice">Adding Storage for Practice</h2>
<h2 id="exercise-13-1-add-required-storage-to-server2">Exercise 13-1: Add Required Storage to server2</h2>
<p>In this exercise, you will start VirtualBox and add 4x250MB and 1x5GB
disks to server2 in preparation for exercises in this and the next
chapter.</p>
<p>1. Start VirtualBox on your Windows/Mac computer and highlight the RHEL9-VM2 virtual machine that you created in Lab 1-1. See Figure 13-1.</p>
<p><a href="#R-image-c26091a11da445168352800966359fb3" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="image-KEGS1BT1.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c26091a11da445168352800966359fb3"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="image-KEGS1BT1.jpg"></a></p>
<p>2. Click Settings at the top and then Storage on the window that pops
up. Click on &ldquo;Controller: SATA&rdquo; to select it. Figure 13-2.</p>
<p><a href="#R-image-4d9b6a77994deda2e14d35179b9fe7db" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="image-KWA12KXW.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4d9b6a77994deda2e14d35179b9fe7db"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="image-KWA12KXW.jpg"></a></p>
<p>3. Click on the right-side icon next to &ldquo;Controller: SATA&rdquo; to add a hard disk and then click Create (on the Medium Selector screen)
<a href="#R-image-4ec5159ed0c740a484e16a03407bfb1e" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="image-Q6NZNE81.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4ec5159ed0c740a484e16a03407bfb1e"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="image-Q6NZNE81.jpg"></a></p>
<p>4. Follow this sequence to add a 250MB disk: Click Next on the next two screens to select the two defaults for the &ldquo;VDI (Virtualization Disk Image)&rdquo; and &ldquo;Dynamically allocated&rdquo; options. Adjust the size on the third screen to 250MB.</p>
<p><a href="#R-image-d5ddd45e8137161293785bd28f806651" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="image-DPO9QA8O.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d5ddd45e8137161293785bd28f806651"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="image-DPO9QA8O.jpg"></a></p>
<p>5. Repeat step 4 three more times to create additional disks of the
same size.</p>
<p>6. Repeat step 4 one time to create a disk of size 5GB.</p>
<p>7. On the Medium Selector screen, the five new disks will appear under the Not Attached list of disks. Double-click on each one of them to add to RHEL9-VM2.</p>
<p><a href="#R-image-fbce1e9d4db7a5f1f69bc5022a5f874d" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="image-I02OKCQR.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fbce1e9d4db7a5f1f69bc5022a5f874d"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="image-I02OKCQR.jpg"></a></p>
<p>8. The final list of disks should look similar to what is shown in Figure 13-6 after the addition of all five disks (RHEL9-VM2_1 to
RHEL9-VM2_5). Disk names may vary.</p>
<p><a href="#R-image-35ef76f087ed887d0c8e5f8aebcc8ee6" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="image-38AAB6BK.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-35ef76f087ed887d0c8e5f8aebcc8ee6"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="image-38AAB6BK.jpg"></a></p>
<p>9. Click OK to return to the main VirtualBox interface.</p>
<p>10. Power on RHEL9-VM2.</p>
<p>11. When the server is booted up, log on as user1 and run the lsblk command to verify the new storage:</p>
<p>12. The five new disks added to server2 are 250MB (sdb, sdc, sdd, and sde) and 5GB (sdf).</p>
<h2 id="mbr-storage-management-with-parted">MBR Storage Management with parted</h2>
<p>parted (partition editor)</p>
<ul>
<li>
<p>can be used to partition disks</p>
</li>
<li>
<p>run interactively or directly from the command prompt.</p>
</li>
<li>
<p>understands and supports both MBR and GPT schemes</p>
</li>
<li>
<p>can be used to create up to 128 partitions on a single GPT disk</p>
</li>
<li>
<p>viewing, labeling, adding, naming, and deleting partitions.</p>
<p>Subcommand                          Description</p>
<p>print                               Displays the partition table that includes disk geometry and partition number, start and end, size, type, file system type, and relevant flags.</p>
<p>mklabel                             Applies a label to the disk. Common labels are gpt and msdos.</p>
<p>mkpart                              Makes a new partition</p>
<p>name                                Assigns a name to a partition</p>
<p>rm                                  Removes the specified partition</p>
</li>
</ul>
<p>use the print subcommand to ensure you created what you wanted.
/proc/partitions file is also updated to reflect the results of partition management operations.</p>
<h2 id="exercise-13-2-create-an-mbr-partition-server2">Exercise 13-2: Create an MBR Partition (server2)</h2>
<p>assign partition type &ldquo;msdos&rdquo; to /dev/sdb for using it as an MBR disk
create and confirm a 100MB primary partition on the disk.</p>
<p>1. Execute parted on /dev/sdb to view the current partition information:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb print</span>
</span></span><span style="display:flex;"><span>Error: /dev/sdb: unrecognised disk label
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>                                           
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: unknown
</span></span><span style="display:flex;"><span>Disk Flags: </span></span></code></pre></div><p>There is an error on line 1 of the output, indicating an unrecognized label.
disk must be labeled before it can be partitioned.</p>
<p>2. Assign disk label &ldquo;msdos&rdquo; to the disk with mklabel. This operation
is performed only once on a disk.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mklabel msdos</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb print                              </span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start  End  Size  Type  File system  Flags</span></span></code></pre></div><p>To use the GPT partition table type, run &ldquo;sudo parted /dev/sdb mklabel gpt&rdquo; instead.</p>
<p>3. Create a 100MB primary partition starting at 1MB (beginning of the disk) using mkpart:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mkpart primary 1 101m</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div><p>4. Verify the new partition with print:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb print                              </span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End    Size    Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  101MB  99.6MB  primary</span></span></code></pre></div><p>Partition numbering begins at 1 by default.</p>
<p>5. Confirm the new partition with the lsblk command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk /dev/sdb</span>
</span></span><span style="display:flex;"><span>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdb      8:16   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>└─sdb1   8:17   <span style="color:#ff9f43">0</span>   95M  <span style="color:#ff9f43">0</span> part </span></span></code></pre></div><p>The device file for the first partition on the sdb disk is sdb1 as identified on the bottom line.
The partition size is 95MB.</p>
<p>Different tools will have variance in reporting partition sizes.
ignore minor differences.</p>
<p>6. Check the /proc/partitions file also:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /proc/partitions | grep sdb</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">8</span>       <span style="color:#ff9f43">16</span>     <span style="color:#ff9f43">256000</span> sdb
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">8</span>       <span style="color:#ff9f43">17</span>      <span style="color:#ff9f43">97280</span> sdb1</span></span></code></pre></div><h2 id="exercise-13-3-delete-an-mbr-partition-server2">Exercise 13-3: Delete an MBR Partition (server2)</h2>
<p>delete the sdb1 partition that was created in Exercise 13-2
confirm the deletion.</p>
<p>1. Execute parted on /dev/sdb with the rm subcommand to remove partition number 1:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb rm 1</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div><p>2. Confirm the partition deletion with print:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb print                              </span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start  End  Size  Type  File system  Flags</span></span></code></pre></div><p>3. Check the /proc/partitions file:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /proc/partitions | grep sdb</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">8</span>       <span style="color:#ff9f43">16</span>     <span style="color:#ff9f43">256000</span> sdb</span></span></code></pre></div><p>can also run the lsblk command for further verification. T</p>
<p>EXAM TIP: Knowing either parted or gdisk for the exam is enough.</p>
<h2 id="gpt-storage-management-with-gdisk">GPT Storage Management with gdisk</h2>
<p>gdisk (GPT disk)
partitions disks using the GPT format.
text-based, menu-driven program
show, add, verify, modify, and delete partitions
can create up to 128 partitions on a single disk on systems with UEFI firmware.</p>
<p>The main interface of gdisk can be invoked by specifying a disk device name such as /dev/sdc with the command.
Type help or ? (question mark) at the prompt to view available subcommands.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo gdisk /dev/sdc</span>
</span></span><span style="display:flex;"><span>GPT fdisk <span style="color:#ff6ac1">(</span>gdisk<span style="color:#ff6ac1">)</span> version 1.0.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Partition table scan:
</span></span><span style="display:flex;"><span>  MBR: not present
</span></span><span style="display:flex;"><span>  BSD: not present
</span></span><span style="display:flex;"><span>  APM: not present
</span></span><span style="display:flex;"><span>  GPT: not present
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Creating new GPT entries in memory.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: ?
</span></span><span style="display:flex;"><span>b	back up GPT data to a file
</span></span><span style="display:flex;"><span>c	change a partition<span style="color:#5af78e">&#39;s name
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">d	delete a partition
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">i	show detailed information on a partition
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">l	list known partition types
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">n	add a new partition
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">o	create a new empty GUID partition table (GPT)
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">p	print the partition table
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">q	quit without saving changes
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">r	recovery and transformation options (experts only)
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">s	sort partitions
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">t	change a partition&#39;</span>s <span style="color:#ff5c57">type</span> code
</span></span><span style="display:flex;"><span>v	verify disk
</span></span><span style="display:flex;"><span>w	write table to disk and <span style="color:#ff5c57">exit</span>
</span></span><span style="display:flex;"><span>x	extra functionality <span style="color:#ff6ac1">(</span>experts only<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>?	print this menu
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: </span></span></code></pre></div><h2 id="exercise-13-4-create-a-gpt-partition-server2">Exercise 13-4: Create a GPT Partition (server2)</h2>
<p>assign partition type &ldquo;gpt&rdquo; to /dev/sdc for using it as a GPT disk.
create and confirm a 200MB partition on the disk.</p>
<p>1. Execute gdisk on /dev/sdc to view the current partition information:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo gdisk /dev/sdc</span>
</span></span><span style="display:flex;"><span>GPT fdisk <span style="color:#ff6ac1">(</span>gdisk<span style="color:#ff6ac1">)</span> version 1.0.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Partition table scan:
</span></span><span style="display:flex;"><span>  MBR: not present
</span></span><span style="display:flex;"><span>  BSD: not present
</span></span><span style="display:flex;"><span>  APM: not present
</span></span><span style="display:flex;"><span>  GPT: not present
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Creating new GPT entries in memory.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>:</span></span></code></pre></div><p>The disk currently does not have any partition table on it.</p>
<p>2. Assign &ldquo;gpt&rdquo; as the partition table type to the disk using the o subcommand. Enter &ldquo;y&rdquo; for confirmation to proceed. This operation is
performed only once on a disk.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: o
</span></span><span style="display:flex;"><span>This option deletes all partitions and creates a new protective MBR.
</span></span><span style="display:flex;"><span>Proceed? <span style="color:#ff6ac1">(</span>Y/N<span style="color:#ff6ac1">)</span>: y</span></span></code></pre></div><p>3. Run the p subcommand to view disk information and confirm the GUID
partition table creation:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: p
</span></span><span style="display:flex;"><span>Disk /dev/sdc: <span style="color:#ff9f43">512000</span> sectors, 250.0 MiB
</span></span><span style="display:flex;"><span>Model: VBOX HARDDISK   
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512/512 bytes
</span></span><span style="display:flex;"><span>Disk identifier <span style="color:#ff6ac1">(</span>GUID<span style="color:#ff6ac1">)</span>: 9446222A-28AC-4F96-816F-518510F95019
</span></span><span style="display:flex;"><span>Partition table holds up to <span style="color:#ff9f43">128</span> entries
</span></span><span style="display:flex;"><span>Main partition table begins at sector <span style="color:#ff9f43">2</span> and ends at sector <span style="color:#ff9f43">33</span>
</span></span><span style="display:flex;"><span>First usable sector is 34, last usable sector is <span style="color:#ff9f43">511966</span>
</span></span><span style="display:flex;"><span>Partitions will be aligned on 2048-sector boundaries
</span></span><span style="display:flex;"><span>Total free space is <span style="color:#ff9f43">511933</span> sectors <span style="color:#ff6ac1">(</span>250.0 MiB<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>    End <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>  Size       Code  Name</span></span></code></pre></div><p>The output returns the assigned GUID and states that the partition table can hold up to 128 partition entries.</p>
<p>4. Create the first partition of size 200MB starting at the default
sector with default type &ldquo;Linux filesystem&rdquo; using the n subcommand:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: n
</span></span><span style="display:flex;"><span>Partition number <span style="color:#ff6ac1">(</span>1-128, default 1<span style="color:#ff6ac1">)</span>: 
</span></span><span style="display:flex;"><span>First sector <span style="color:#ff6ac1">(</span>34-511966, <span style="color:#ff5c57">default</span> <span style="color:#ff6ac1">=</span> 2048<span style="color:#ff6ac1">)</span> or <span style="color:#ff6ac1">{</span>+-<span style="color:#ff6ac1">}</span>size<span style="color:#ff6ac1">{</span>KMGTP<span style="color:#ff6ac1">}</span>: 
</span></span><span style="display:flex;"><span>Last sector <span style="color:#ff6ac1">(</span>2048-511966, <span style="color:#ff5c57">default</span> <span style="color:#ff6ac1">=</span> 511966<span style="color:#ff6ac1">)</span> or <span style="color:#ff6ac1">{</span>+-<span style="color:#ff6ac1">}</span>size<span style="color:#ff6ac1">{</span>KMGTP<span style="color:#ff6ac1">}</span>: +200M
</span></span><span style="display:flex;"><span>Current <span style="color:#ff5c57">type</span> is <span style="color:#ff9f43">8300</span> <span style="color:#ff6ac1">(</span>Linux filesystem<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Hex code or GUID <span style="color:#ff6ac1">(</span>L to show codes, <span style="color:#ff5c57">Enter</span> <span style="color:#ff6ac1">=</span> 8300<span style="color:#ff6ac1">)</span>: 
</span></span><span style="display:flex;"><span>Changed <span style="color:#ff5c57">type</span> of partition to <span style="color:#5af78e">&#39;Linux filesystem&#39;</span></span></span></code></pre></div><p>5. Verify the new partition with p:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: p
</span></span><span style="display:flex;"><span>Disk /dev/sdc: <span style="color:#ff9f43">512000</span> sectors, 250.0 MiB
</span></span><span style="display:flex;"><span>Model: VBOX HARDDISK   
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512/512 bytes
</span></span><span style="display:flex;"><span>Disk identifier <span style="color:#ff6ac1">(</span>GUID<span style="color:#ff6ac1">)</span>: 9446222A-28AC-4F96-816F-518510F95019
</span></span><span style="display:flex;"><span>Partition table holds up to <span style="color:#ff9f43">128</span> entries
</span></span><span style="display:flex;"><span>Main partition table begins at sector <span style="color:#ff9f43">2</span> and ends at sector <span style="color:#ff9f43">33</span>
</span></span><span style="display:flex;"><span>First usable sector is 34, last usable sector is <span style="color:#ff9f43">511966</span>
</span></span><span style="display:flex;"><span>Partitions will be aligned on 2048-sector boundaries
</span></span><span style="display:flex;"><span>Total free space is <span style="color:#ff9f43">102333</span> sectors <span style="color:#ff6ac1">(</span>50.0 MiB<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>    End <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>  Size       Code  Name
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">1</span>            <span style="color:#ff9f43">2048</span>          <span style="color:#ff9f43">411647</span>   200.0 MiB   <span style="color:#ff9f43">8300</span>  Linux filesystem</span></span></code></pre></div><p>6. Run w to write the partition information to the partition table and exit out of the interface. Enter &ldquo;y&rdquo; to confirm when prompted.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: w
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
</span></span><span style="display:flex;"><span>PARTITIONS!!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Do you want to proceed? <span style="color:#ff6ac1">(</span>Y/N<span style="color:#ff6ac1">)</span>: y
</span></span><span style="display:flex;"><span>OK; writing new GUID partition table <span style="color:#ff6ac1">(</span>GPT<span style="color:#ff6ac1">)</span> to /dev/sdc.
</span></span><span style="display:flex;"><span>The operation has completed successfully.</span></span></code></pre></div><p>You may need to run the partprobe command after exiting the gdisk utility to inform the kernel of partition table changes.</p>
<p>7. Verify the new partition by issuing either of the following at the command prompt:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># grep sdc /proc/partitions</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">8</span>       <span style="color:#ff9f43">32</span>     <span style="color:#ff9f43">256000</span> sdc
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">8</span>       <span style="color:#ff9f43">33</span>     <span style="color:#ff9f43">204800</span> sdc1
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk /dev/sdc</span>
</span></span><span style="display:flex;"><span>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdc      8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>└─sdc1   8:33   <span style="color:#ff9f43">0</span>  200M  <span style="color:#ff9f43">0</span> part </span></span></code></pre></div><h2 id="exercise-13-5-delete-a-gpt-partitionserver2">Exercise 13-5: Delete a GPT Partition(server2)</h2>
<p>delete the sdc1 partition that was created in Exercise 13-4 and confirm the removal.</p>
<p>1. Execute gdisk on /dev/sdc and run d1 at the utility&rsquo;s prompt to delete partition number 1:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># gdisk /dev/sdc</span>
</span></span><span style="display:flex;"><span>GPT fdisk <span style="color:#ff6ac1">(</span>gdisk<span style="color:#ff6ac1">)</span> version 1.0.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Partition table scan:
</span></span><span style="display:flex;"><span>  MBR: protective
</span></span><span style="display:flex;"><span>  BSD: not present
</span></span><span style="display:flex;"><span>  APM: not present
</span></span><span style="display:flex;"><span>  GPT: present
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Found valid GPT with protective MBR; using GPT.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: d1
</span></span><span style="display:flex;"><span>Using <span style="color:#ff9f43">1</span></span></span></code></pre></div><p>2. Confirm the partition deletion with p:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: p
</span></span><span style="display:flex;"><span>Disk /dev/sdc: <span style="color:#ff9f43">512000</span> sectors, 250.0 MiB
</span></span><span style="display:flex;"><span>Model: VBOX HARDDISK   
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512/512 bytes
</span></span><span style="display:flex;"><span>Disk identifier <span style="color:#ff6ac1">(</span>GUID<span style="color:#ff6ac1">)</span>: 9446222A-28AC-4F96-816F-518510F95019
</span></span><span style="display:flex;"><span>Partition table holds up to <span style="color:#ff9f43">128</span> entries
</span></span><span style="display:flex;"><span>Main partition table begins at sector <span style="color:#ff9f43">2</span> and ends at sector <span style="color:#ff9f43">33</span>
</span></span><span style="display:flex;"><span>First usable sector is 34, last usable sector is <span style="color:#ff9f43">511966</span>
</span></span><span style="display:flex;"><span>Partitions will be aligned on 2048-sector boundaries
</span></span><span style="display:flex;"><span>Total free space is <span style="color:#ff9f43">511933</span> sectors <span style="color:#ff6ac1">(</span>250.0 MiB<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>    End <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>  Size       Code  Name</span></span></code></pre></div><p>3. Write the updated partition information to the disk with w and quit gdisk:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: w
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
</span></span><span style="display:flex;"><span>PARTITIONS!!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Do you want to proceed? <span style="color:#ff6ac1">(</span>Y/N<span style="color:#ff6ac1">)</span>: y
</span></span><span style="display:flex;"><span>OK; writing new GUID partition table <span style="color:#ff6ac1">(</span>GPT<span style="color:#ff6ac1">)</span> to /dev/sdc.
</span></span><span style="display:flex;"><span>The operation has completed successfully.</span></span></code></pre></div><p>4. Verify the partition deletion by issuing either of the following at
the command prompt:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># grep sdc /proc/partitions</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">8</span>       <span style="color:#ff9f43">32</span>     <span style="color:#ff9f43">256000</span> sdc
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk /dev/sdc</span>
</span></span><span style="display:flex;"><span>NAME MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdc    8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk </span></span></code></pre></div><h2 id="logical-volume-manager-lvm">Logical Volume Manager (LVM)</h2>
<p>used for managing block storage in Linux.
provides an abstraction layer between the physical storage and the file system
enables the file system to be resized, span across multiple disks, use arbitrary disk space, etc.
accumulates spaces taken from partitions or entire disks (called Physical Volumes) to form a logical container (called Volume Group) which is then divided into logical partitions (called Logical Volumes).
online resizing of volume groups and logical volumes,
online data migration between logical volumes and between physical volumes
user-defined naming for volume groups and logical volumes
mirroring and striping across multiple disks
snapshotting of logical volumes.</p>
<p><a href="#R-image-31dcd649e517b4c271c747deaa1fbdae" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="image-0A8W8M1U.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-31dcd649e517b4c271c747deaa1fbdae"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="image-0A8W8M1U.jpg"></a>{</p>
<p>the LVM structure is made up of three key objects called physical volume, volume group, and logical volume.
These objects are further virtually broken down into Physical Extents (PEs) and Logical Extents (LEs).</p>
<h2 id="physical-volumepv">Physical Volume(PV)</h2>
<p>created when a block storage device such as a partition or an entire disk is initialized and brought under LVM
control. This process constructs LVM data structures on the device, including a label on the second sector and metadata shortly thereafter.</p>
<p>The label includes the UUID, size, and pointers to the locations of data and metadata areas. Given the criticality of metadata, LVM stores a copy of it at the end of the physical volume as well. The rest of the device space is available for use.</p>
<p>You can use an LVM command called pvs (physical volume scan or summary) to scan and list available physical volumes on server2:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvs</span>
</span></span><span style="display:flex;"><span>  PV         VG   Fmt  Attr PSize   PFree
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel lvm2 a--  &lt;19.00g    <span style="color:#ff9f43">0</span></span></span></code></pre></div><p>(a for allocatable under Attr)</p>
<p>Try running this command again with the -v flag to view more information
about the physical volume.</p>
<h2 id="volume-group">Volume Group</h2>
<p>A Volume Group (VG) is created when at least one physical volume is added to it.
The space from all physical volumes in a volume group is aggregated to form one large pool of storage, which is then used to
build logical volumes.
The physical volumes added to a volume group may be of varying sizes.
LVM writes volume group metadata on each physical volume that is added to it.
The volume group metadata contains its name,date and time of creation, how it was created, the extent size used, a list of physical and logical volumes, a mapping of physical and logical extents, etc.
A volume group can have a custom name assigned to it at the time of its creation.
A copy of the volume group metadata is stored and maintained at two distinct locations on each physical volume within the volume group.</p>
<p>You can use an LVM command called vgs (volume group scan or summary) to scan and list available volume groups on server2:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs</span>
</span></span><span style="display:flex;"><span>  VG   <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree</span>
</span></span><span style="display:flex;"><span>  rhel   <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g    <span style="color:#ff9f43">0</span></span></span></code></pre></div><p>status of the volume group under the Attr column (w for writeable, z for resizable, and n for normal),</p>
<p>Try running this command again with the -v flag to view more information
about the volume group.</p>
<h2 id="physical-extent">Physical Extent</h2>
<p>A physical volume is divided into several smaller logical pieces when it is added to a volume group. These logical pieces are known as Physical Extents (PE). An extent is the smallest allocatable unit of space in LVM.
At the time of volume group creation, you can either define the size of the PE or leave it to the default value of 4MB.
This implies that a 20GB physical volume would have approximately 5,000 PEs.
Any physical volumes added to this volume group thereafter will use the same PE size.</p>
<p>You can use an LVM command called vgdisplay (volume group display) on server2 and grep for &lsquo;PE Size&rsquo; to view the PE size used in the rhel volume group:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay rhel | grep &#39;PE Size&#39;</span>
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB</span></span></code></pre></div><h2 id="logical-volume">Logical Volume</h2>
<p>A volume group consists of a pool of storage taken from one or more physical volumes.
This volume group space is used to create one or more Logical Volumes (LVs).
A logical volume can be created or weeded out online, expanded or shrunk online, and can use space taken from one or
multiple physical volumes inside the volume group.</p>
<p>The default naming convention used for logical volumes is lvol0, lvol1,
lvol2, and so on
you may assign custom names to them.</p>
<p>You can use an LVM command called lvs (logical volume scan or summary) to scan and list available logical volumes on server2:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvs</span>
</span></span><span style="display:flex;"><span>  LV   VG   Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root rhel -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap rhel -wi-ao----   2.00g</span></span></code></pre></div><p>Attr column (w for writeable, i for inherited allocation policy, a for active, and o for open) and their sizes.</p>
<p>Try running this command again with the -v flag to view more information about the logical volumes.</p>
<h2 id="logical-extent">Logical Extent</h2>
<p>A logical volume is made up of Logical Extents (LE).
Logical extents point to physical extents, and they may be random or contiguous.
The larger a logical volume is, the more logical extents it will have.
Logical extents are a set of physical extents allocated to a logical volume.</p>
<p>The LE size is always the same as the PE size in a volume group.
The default LE size is 4MB, which corresponds to the default PE size of 4MB.</p>
<p>You can use an LVM command called <code>lvdisplay</code> (logical volume display) on server2 to view information about the root logical volume in the rhel volume group.</p>
<p><a href="#R-image-a053209c374797bd13574edfeac111ae" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="image-E8W3BEYL.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a053209c374797bd13574edfeac111ae"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="image-E8W3BEYL.jpg"></a></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>david@fedora:~/Documents/perfectdarkmode/perfectdarkmode1.github.io$ sudo lvdisplay /dev/rhel/root
</span></span><span style="display:flex;"><span>Place your right index finger on the fingerprint reader
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;rhel&#34;</span> not found
</span></span><span style="display:flex;"><span>  Cannot process volume group rhel</span></span></code></pre></div><p>The output does not disclose the LE size;
however, you can convert theLV size in MBs (17,000) and then divide the result by the Current LE
count (4,351) to get the LE size (which comes close to 4MB).</p>
<h2 id="lvm-operations-and-commands">LVM Operations and Commands</h2>
<p>creating and removing a physical volume, volume group, and logical volume
extending and reducing a volume group and logical volume
renaming a volume group and logical volume
listing and displaying physical volume, volume group, and logical volume
information.</p>
<h3 id="create-and-remove-operations">Create and Remove Operations</h3>
<p><strong>pvcreate/pvremove</strong>                <br>
Initializes/uninitializes a disk or partition for LVM use</p>
<p><strong>vgcreate/vgremove</strong>               <br>
Creates/removes a volume group</p>
<p><strong>lvcreate/lvremove</strong>                <br>
Creates/removes a logical volume</p>
<h3 id="extend-and-reduce-operations">Extend and Reduce Operations</h3>
<p><strong>vgextend/vgreduce</strong>                <br>
Adds/removes a physical volume to/from a volume group</p>
<p><strong>lvextend/lvreduce</strong>                <br>
Extends/reduces the size of a logical volume</p>
<p><strong>lvresize</strong>                         <br>
Resizes a logical volume. With the -r option, this command calls the fsadm command to resize the underlying file system as well.</p>
<h3 id="rename-operations">Rename Operations</h3>
<p><strong>vgrename</strong>                         <br>
Renames a volume group</p>
<p><strong>lvrename</strong>                         <br>
Renames a logical volume</p>
<h3 id="list-and-display-operations">List and Display Operations</h3>
<p><strong>pvs/pvdisplay</strong>                    <br>
Lists/displays physical volume information</p>
<p><strong>vgs/vgdisplay lvs/lvdisplay</strong>      <br>
Lists/displays volume group information Lists/displays logical volume information</p>
<p>All the tools accept the -v switch to support verbosity.</p>
<h2 id="exercise-13-6-create-physical-volume-and-volume-group-server2">Exercise 13-6: Create Physical Volume and Volume Group (server2)</h2>
<p>initialize one partition sdd1 (90MB) and one disk sde (250MB) for use in LVM.
create a volume group called vgbook and add both physical volumes to it
use the PE size of 16MB
list and display the volume group and the physical volumes.</p>
<p>1. Create a partition of size 90MB on sdd using the parted command and confirm. You need to label the disk first, as it is a new disk.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd mklabel msdos</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd mkpart primary 1 91m               </span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd print                              </span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdd: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End     Size    Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  91.2MB  90.2MB  primary</span></span></code></pre></div><p>2. Initialize the sdd1 partition and the sde disk using the <code>pvcreate</code> command. Note that there is no need to apply a disk label on sde with parted as LVM does not require it.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdd1 /dev/sde -v</span>
</span></span><span style="display:flex;"><span>  Wiping signatures on new PV /dev/sdd1.
</span></span><span style="display:flex;"><span>  Wiping signatures on new PV /dev/sde.
</span></span><span style="display:flex;"><span>  Set up physical volume <span style="color:#ff6ac1">for</span> <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span> with <span style="color:#ff9f43">176128</span> available sectors.
</span></span><span style="display:flex;"><span>  Zeroing start of device /dev/sdd1.
</span></span><span style="display:flex;"><span>  Writing physical volume data to disk <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span>.
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span> successfully created.
</span></span><span style="display:flex;"><span>  Set up physical volume <span style="color:#ff6ac1">for</span> <span style="color:#5af78e">&#34;/dev/sde&#34;</span> with <span style="color:#ff9f43">512000</span> available sectors.
</span></span><span style="display:flex;"><span>  Zeroing start of device /dev/sde.
</span></span><span style="display:flex;"><span>  Writing physical volume data to disk <span style="color:#5af78e">&#34;/dev/sde&#34;</span>.
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sde&#34;</span> successfully created.</span></span></code></pre></div><p>3. Create vgbook volume group using the vgcreate command and add the two physical volumes to it. Use the -s option to specify the PE size in
MBs.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgcreate -vs 16 vgbook /dev/sdd1 /dev/sde</span>
</span></span><span style="display:flex;"><span>  Wiping signatures on new PV /dev/sdd1.
</span></span><span style="display:flex;"><span>  Wiping signatures on new PV /dev/sde.
</span></span><span style="display:flex;"><span>  Adding physical volume <span style="color:#5af78e">&#39;/dev/sdd1&#39;</span> to volume group <span style="color:#5af78e">&#39;vgbook&#39;</span>
</span></span><span style="display:flex;"><span>  Adding physical volume <span style="color:#5af78e">&#39;/dev/sde&#39;</span> to volume group <span style="color:#5af78e">&#39;vgbook&#39;</span>
</span></span><span style="display:flex;"><span>  Creating volume group backup <span style="color:#5af78e">&#34;/etc/lvm/backup/vgbook&#34;</span> <span style="color:#ff6ac1">(</span>seqno 1<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgbook&#34;</span> successfully created</span></span></code></pre></div><p>4. List the volume group information:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs vgbook</span>
</span></span><span style="display:flex;"><span>  VG     <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree  </span>
</span></span><span style="display:flex;"><span>  vgbook   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span>   <span style="color:#ff9f43">0</span> wz--n- 320.00m 320.00m</span></span></code></pre></div><p>5. Display detailed information about the volume group and the physical volumes it contains:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay -v vgbook</span>
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgbook
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  VG Size               320.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               16.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">20</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">20</span> / 320.00 MiB
</span></span><span style="display:flex;"><span>  VG UUID               zRu1d2-ZgDL-bnzV-I9U1-0IFo-uM4x-w4bX0Q
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Physical volumes ---
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdd1     
</span></span><span style="display:flex;"><span>  PV UUID               8x8IgZ-3z5T-ODA8-dofQ-xk5s-QN7I-KwpQ1e
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">5</span> / <span style="color:#ff9f43">5</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  PV Name               /dev/sde     
</span></span><span style="display:flex;"><span>  PV UUID               xJU0Hh-W5k9-FyKO-d6Ha-1ofW-ajvh-hJSo8R
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">15</span> / <span style="color:#ff9f43">15</span></span></span></code></pre></div><p>6. List the physical volume information:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvs</span>
</span></span><span style="display:flex;"><span>  PV         VG     Fmt  Attr PSize   PFree  
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel   lvm2 a--  &lt;19.00g      <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdd1  vgbook lvm2 a--   80.00m  80.00m
</span></span><span style="display:flex;"><span>  /dev/sde   vgbook lvm2 a--  240.00m 240.00m</span></span></code></pre></div><p>The output shows the physical volumes in vgbook, along with their utilization status.</p>
<p>7. Display detailed information about the physical volumes:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvdisplay /dev/sdd1</span>
</span></span><span style="display:flex;"><span>  --- Physical volume ---
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdd1
</span></span><span style="display:flex;"><span>  VG Name               vgbook
</span></span><span style="display:flex;"><span>  PV Size               86.00 MiB / not usable 6.00 MiB
</span></span><span style="display:flex;"><span>  Allocatable           yes 
</span></span><span style="display:flex;"><span>  PE Size               16.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">5</span>
</span></span><span style="display:flex;"><span>  Free PE               <span style="color:#ff9f43">5</span>
</span></span><span style="display:flex;"><span>  Allocated PE          <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  PV UUID               8x8IgZ-3z5T-ODA8-dofQ-xk5s-QN7I-KwpQ1e</span></span></code></pre></div><p>Once a partition or disk is initialized and added to a volume group, they are treated identically within the volume group. LVM does not
prefer one over the other.</p>
<h2 id="exercise-13-7-create-logical-volumesserver2">Exercise 13-7: Create Logical Volumes(server2)</h2>
<p>create two logical volumes, lvol0 and lvbook1, in the vgbook volume group.
use 120MB for lvol0 and 192MB for lvbook1 from the available pool of space.
display the details of the volume group and the logical volumes.</p>
<p>1. Create a logical volume with the default name lvol0 using the <code>lvcreate</code> command. Use the -L option to specify the logical volume size,
120MB. You may use the -v, -vv, or -vvv option with the command for verbosity.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -vL 120 vgbook</span>
</span></span><span style="display:flex;"><span>  Rounding up size to full physical extent 128.00 MiB
</span></span><span style="display:flex;"><span>  Creating logical volume lvol0
</span></span><span style="display:flex;"><span>  Archiving volume group <span style="color:#5af78e">&#34;vgbook&#34;</span> metadata <span style="color:#ff6ac1">(</span>seqno 1<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Activating logical volume vgbook/lvol0.
</span></span><span style="display:flex;"><span>  activation/volume_list configuration setting not defined: Checking only host tags <span style="color:#ff6ac1">for</span> vgbook/lvol0.
</span></span><span style="display:flex;"><span>  Creating vgbook-lvol0
</span></span><span style="display:flex;"><span>  Loading table <span style="color:#ff6ac1">for</span> vgbook-lvol0 <span style="color:#ff6ac1">(</span>253:2<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Resuming vgbook-lvol0 <span style="color:#ff6ac1">(</span>253:2<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Wiping known signatures on logical volume vgbook/lvol0.
</span></span><span style="display:flex;"><span>  Initializing 4.00 KiB of logical volume vgbook/lvol0 with value 0.
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvol0&#34;</span> created.
</span></span><span style="display:flex;"><span>  Creating volume group backup <span style="color:#5af78e">&#34;/etc/lvm/backup/vgbook&#34;</span> <span style="color:#ff6ac1">(</span>seqno 2<span style="color:#ff6ac1">)</span>.</span></span></code></pre></div><p>The size for the logical volume may be specified in units such as MBs, GBs, TBs, or as a count of LEs; however, MB is the default if no unit is
specified (see the previous command).</p>
<p>The size of a logical volume is always in multiples of the PE size. For instance, logical volumes created in vgbook with the PE size set at 16MB can be 16MB, 32MB, 48MB,
64MB, and so on. The output above indicates that the logical volume is 128MB (16x8), and not 120MB as specified.</p>
<p>2. Create lvbook1 of size 192MB (16x12) using the lvcreate command. Use the -l switch to specify the size in logical extents and -n for the custom name.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -l 12 -n lvbook1 vgbook</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvbook1&#34;</span> created.</span></span></code></pre></div><p>3. List the logical volume information:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvs</span>
</span></span><span style="display:flex;"><span>  LV      VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel   -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel   -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvbook1 vgbook -wi-a----- 192.00m                                                    
</span></span><span style="display:flex;"><span>  lvol0   vgbook -wi-a----- 128.00m </span></span></code></pre></div><p>4. Display detailed information about the volume group including the logical volumes and the physical volumes:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay -v vgbook</span>
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgbook
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  VG Size               320.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               16.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">20</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">20</span> / 320.00 MiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               zRu1d2-ZgDL-bnzV-I9U1-0IFo-uM4x-w4bX0Q
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgbook/lvol0
</span></span><span style="display:flex;"><span>  LV Name                lvol0
</span></span><span style="display:flex;"><span>  VG Name                vgbook
</span></span><span style="display:flex;"><span>  LV UUID                9M9ahf-1L3y-c0yk-3Z2O-UzjH-0Amt-QLi4p5
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-12 02:42:51 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                128.00 MiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">8</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:2
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgbook/lvbook1
</span></span><span style="display:flex;"><span>  LV Name                lvbook1
</span></span><span style="display:flex;"><span>  VG Name                vgbook
</span></span><span style="display:flex;"><span>  LV UUID                pgd8qR-YXXK-3Idv-qmpW-w8Az-WGLR-g2d8Yn
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-12 02:45:31 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                192.00 MiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">12</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:3
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Physical volumes ---
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdd1     
</span></span><span style="display:flex;"><span>  PV UUID               8x8IgZ-3z5T-ODA8-dofQ-xk5s-QN7I-KwpQ1e
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">5</span> / <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  PV Name               /dev/sde     
</span></span><span style="display:flex;"><span>  PV UUID               xJU0Hh-W5k9-FyKO-d6Ha-1ofW-ajvh-hJSo8R
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">15</span> / <span style="color:#ff9f43">0</span></span></span></code></pre></div><p>Alternatively, you can run the following to view only the logical volume
details:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvdisplay /dev/vgbook/lvol0</span>
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgbook/lvol0
</span></span><span style="display:flex;"><span>  LV Name                lvol0
</span></span><span style="display:flex;"><span>  VG Name                vgbook
</span></span><span style="display:flex;"><span>  LV UUID                9M9ahf-1L3y-c0yk-3Z2O-UzjH-0Amt-QLi4p5
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-12 02:42:51 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                128.00 MiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">8</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:2</span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvdisplay /dev/vgbook/lvbook1</span>
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgbook/lvbook1
</span></span><span style="display:flex;"><span>  LV Name                lvbook1
</span></span><span style="display:flex;"><span>  VG Name                vgbook
</span></span><span style="display:flex;"><span>  LV UUID                pgd8qR-YXXK-3Idv-qmpW-w8Az-WGLR-g2d8Yn
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-12 02:45:31 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                192.00 MiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">12</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:3</span></span></code></pre></div><h2 id="exercise-13-8-extend-a-volume-group-and-a-logical-volumeserver2">Exercise 13-8: Extend a Volume Group and a Logical Volume(server2)</h2>
<p>add another partition sdd2 of size 158MB to vgbook to increase the pool of allocatable space
initialize the new partition prior to adding it to the volume group.
increase the size of lvbook1 to 336MB.
display basic information for the physical volumes, volume group, and logical volume.</p>
<p>1. Create a partition of size 158MB on sdd using the parted command. Display the new partition to confirm the partition number and size.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd print                              </span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdd: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End     Size    Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  91.2MB  90.2MB  primary
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">2</span>      92.3MB  250MB   157MB   primary               lvm</span></span></code></pre></div><p>2. Initialize sdd2 using the pvcreate command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdd2</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdd2&#34;</span> successfully created.</span></span></code></pre></div><p>3. Extend vgbook by adding the new physical volume to it:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgextend vgbook /dev/sdd2</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgbook&#34;</span> successfully extended</span></span></code></pre></div><p>4. List the volume group:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs</span>
</span></span><span style="display:flex;"><span>  VG     <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree  </span>
</span></span><span style="display:flex;"><span>  rhel     <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g      <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  vgbook   <span style="color:#ff9f43">3</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- 464.00m 144.00m</span></span></code></pre></div><p>5. Extend the size of lvbook1 to 340MB by adding 144MB using the lvextend command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvextend -L +144 /dev/vgbook/lvbook1</span>
</span></span><span style="display:flex;"><span>  Size of logical volume vgbook/lvbook1 changed from 192.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">12</span> extents<span style="color:#ff6ac1">)</span> to 336.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">21</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vgbook/lvbook1 successfully resized.</span></span></code></pre></div><p>EXAM TIP: Make sure the expansion of a logical volume does not affect the file system and the data it contains.</p>
<p>6. Issue vgdisplay on vgbook with the -v switch for the updated
details:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay -v vgbook</span>
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgbook
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">5</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Size               464.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               16.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">29</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">29</span> / 464.00 MiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               zRu1d2-ZgDL-bnzV-I9U1-0IFo-uM4x-w4bX0Q
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgbook/lvol0
</span></span><span style="display:flex;"><span>  LV Name                lvol0
</span></span><span style="display:flex;"><span>  VG Name                vgbook
</span></span><span style="display:flex;"><span>  LV UUID                9M9ahf-1L3y-c0yk-3Z2O-UzjH-0Amt-QLi4p5
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-12 02:42:51 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                128.00 MiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">8</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:2
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgbook/lvbook1
</span></span><span style="display:flex;"><span>  LV Name                lvbook1
</span></span><span style="display:flex;"><span>  VG Name                vgbook
</span></span><span style="display:flex;"><span>  LV UUID                pgd8qR-YXXK-3Idv-qmpW-w8Az-WGLR-g2d8Yn
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-12 02:45:31 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                336.00 MiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">21</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:3
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Physical volumes ---
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdd1     
</span></span><span style="display:flex;"><span>  PV UUID               8x8IgZ-3z5T-ODA8-dofQ-xk5s-QN7I-KwpQ1e
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">5</span> / <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  PV Name               /dev/sde     
</span></span><span style="display:flex;"><span>  PV UUID               xJU0Hh-W5k9-FyKO-d6Ha-1ofW-ajvh-hJSo8R
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">15</span> / <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdd2     
</span></span><span style="display:flex;"><span>  PV UUID               1olOnk-o8FH-uJRD-2pJf-8GCy-3K0M-gcf3pF
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">9</span> / <span style="color:#ff9f43">0</span></span></span></code></pre></div><p>7. View a summary of the physical volumes:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvs</span>
</span></span><span style="display:flex;"><span>  PV         VG     Fmt  Attr PSize   PFree
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel   lvm2 a--  &lt;19.00g    <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdd1  vgbook lvm2 a--   80.00m    <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdd2  vgbook lvm2 a--  144.00m    <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sde   vgbook lvm2 a--  240.00m    <span style="color:#ff9f43">0</span></span></span></code></pre></div><p>8. View a summary of the logical volumes:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvs</span>
</span></span><span style="display:flex;"><span>  LV      VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel   -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel   -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvbook1 vgbook -wi-a----- 336.00m                                                    
</span></span><span style="display:flex;"><span>  lvol0   vgbook -wi-a----- 128.00m </span></span></code></pre></div><h2 id="exercise-13-9-rename-reduce-extend-and-remove-logical-volumesserver2">Exercise 13-9: Rename, Reduce, Extend, and Remove Logical Volumes(server2)</h2>
<p>rename lvol0 to lvbook2.
decrease the size of lvbook2 to 50MB using the lvreduce command<br>
add 32MB with the lvresize command.
remove both logical volumes.display the summary for the volume groups, logical volumes, and
physical volumes.</p>
<p>1. Rename lvol0 to lvbook2 using the lvrename command and confirm with
lvs:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvrename vgbook lvol0 lvbook2</span>
</span></span><span style="display:flex;"><span>  Renamed <span style="color:#5af78e">&#34;lvol0&#34;</span> to <span style="color:#5af78e">&#34;lvbook2&#34;</span> in volume group <span style="color:#5af78e">&#34;vgbook&#34;</span></span></span></code></pre></div><p>2. Reduce the size of lvbook2 to 50MB with the <code>lvreduce</code> command. Specify the absolute desired size for the logical volume. Answer &ldquo;Do you
really want to reduce vgbook/lvbook2?&rdquo; in the affirmative.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvreduce -L 50 /dev/vgbook/lvbook2</span>
</span></span><span style="display:flex;"><span>  Rounding size to boundary between physical extents: 64.00 MiB.
</span></span><span style="display:flex;"><span>  No file system found on /dev/vgbook/lvbook2.
</span></span><span style="display:flex;"><span>  Size of logical volume vgbook/lvbook2 changed from 128.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">8</span> extents<span style="color:#ff6ac1">)</span> to 64.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">4</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vgbook/lvbook2 successfully resized.</span></span></code></pre></div><p>3. Add 32MB to lvbook2 with the lvresize command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvresize -L +32 /dev/vgbook/lvbook2</span>
</span></span><span style="display:flex;"><span>  Size of logical volume vgbook/lvbook2 changed from 64.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">4</span> extents<span style="color:#ff6ac1">)</span> to 96.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">6</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vgbook/lvbook2 successfully resized.</span></span></code></pre></div><p>4. Use the pvs, lvs, vgs, and vgdisplay commands to view the updated
allocation.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvs</span>
</span></span><span style="display:flex;"><span>  PV         VG     Fmt  Attr PSize   PFree 
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel   lvm2 a--  &lt;19.00g     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdd1  vgbook lvm2 a--   80.00m     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdd2  vgbook lvm2 a--  144.00m     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sde   vgbook lvm2 a--  240.00m 32.00m
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvs</span>
</span></span><span style="display:flex;"><span>  LV      VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel   -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel   -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvbook1 vgbook -wi-a----- 336.00m                                                    
</span></span><span style="display:flex;"><span>  lvbook2 vgbook -wi-a-----  96.00m  
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgs</span>
</span></span><span style="display:flex;"><span>  VG     <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree </span>
</span></span><span style="display:flex;"><span>  rhel     <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  vgbook   <span style="color:#ff9f43">3</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- 464.00m 32.00m
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgdisplay</span>
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgbook
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">8</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Size               464.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               16.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">29</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">27</span> / 432.00 MiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">2</span> / 32.00 MiB
</span></span><span style="display:flex;"><span>  VG UUID               zRu1d2-ZgDL-bnzV-I9U1-0IFo-uM4x-w4bX0Q
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               rhel
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;19.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">4863</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">4863</span> / &lt;19.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               UiK3fy-FGOc-2fnP-C1Y6-JS0l-irEe-Sq3c4h</span></span></code></pre></div><p>5. Remove both lvbook1 and lvbook2 logical volumes using the lvremove
command. Use the -f option to suppress the &ldquo;Do you really want to remove
active logical volume&rdquo; message.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvremove /dev/vgbook/lvbook1 -f</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvbook1&#34;</span> successfully removed.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvremove /dev/vgbook/lvbook2 -f</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvbook2&#34;</span> successfully removed.</span></span></code></pre></div><p>Removing a logical volume is a destructive task. You need to ensure that you perform a backup of any data in the target logical volume prior to
deleting it. You will need to unmount the file system or disable swap in the logical volume.</p>
<p><br>
6. Execute the <code>vgdisplay</code> command and grep for &ldquo;Cur LV&rdquo; to see the number of logical volumes currently available in vgbook. It should show
0, as you have removed both logical volumes.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay vgbook | grep &#39;Cur LV&#39;</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">0</span></span></span></code></pre></div><h2 id="exercise-13-10-reduce-and-remove-a-volume-groupserver2">Exercise 13-10: Reduce and Remove a Volume Group(server2)</h2>
<p>\</p>
<ul>
<li>reduce vgbook by removing the sdd1 and sde physical volumes from it</li>
<li>remove the volume group.</li>
<li>Confirm the deletion of the volume group and the logical volumes at the end.</li>
</ul>
<p>1. Remove sdd1 and sde physical volumes from vgbook by issuing the <code>vgreduce</code> command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgreduce vgbook /dev/sdd1 /dev/sde</span>
</span></span><span style="display:flex;"><span>  Removed <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span> from volume group <span style="color:#5af78e">&#34;vgbook&#34;</span>
</span></span><span style="display:flex;"><span>  Removed <span style="color:#5af78e">&#34;/dev/sde&#34;</span> from volume group <span style="color:#5af78e">&#34;vgbook&#34;</span></span></span></code></pre></div><p>2. Remove the volume group using the <code>vgremove</code> command. This will also remove the last physical volume, sdd2, from it.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgremove vgbook</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgbook&#34;</span> successfully removed</span></span></code></pre></div><p>You can also use the -f option with the vgremove command to force the volume group removal even if it contains any number of logical and physical volumes in it.</p>
<p>Remember to proceed with caution whenever you perform reduce and erase operations.</p>
<p>3. Execute the vgs and lvs commands for confirmation:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs</span>
</span></span><span style="display:flex;"><span>  VG   <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree</span>
</span></span><span style="display:flex;"><span>  rhel   <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g    <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvs</span>
</span></span><span style="display:flex;"><span>  LV   VG   Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root rhel -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap rhel -wi-ao----   2.00g    </span></span></code></pre></div><h2 id="exercise-13-11-uninitialize-physical-volumes-server2">Exercise 13-11: Uninitialize Physical Volumes (Server2)\</h2>
<ul>
<li>Uninitialize all three physical volumes&mdash;sdd1, sdd2, and sde&mdash;by deleting the LVM structural information from them.</li>
<li>Use the <code>pvs</code> command for confirmation.</li>
<li>Remove the partitions from the sdd disk and</li>
<li>verify that all disks used in Exercises 13-6 to 13-10 are now in their original raw state.</li>
</ul>
<p>1. Remove the LVM structures from sdd1, sdd2, and sde using the <code>pvremove</code> command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvremove /dev/sdd1 /dev/sdd2 /dev/sde</span>
</span></span><span style="display:flex;"><span>  Labels on physical volume <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span> successfully wiped.
</span></span><span style="display:flex;"><span>  Labels on physical volume <span style="color:#5af78e">&#34;/dev/sdd2&#34;</span> successfully wiped.
</span></span><span style="display:flex;"><span>  Labels on physical volume <span style="color:#5af78e">&#34;/dev/sde&#34;</span> successfully wiped.</span></span></code></pre></div><p>2. Confirm the removal using the <code>pvs</code> command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvs</span>
</span></span><span style="display:flex;"><span>  PV         VG   Fmt  Attr PSize   PFree
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel lvm2 a--  &lt;19.00g    <span style="color:#ff9f43">0</span> </span></span></code></pre></div><p>The partitions and the disk are now back to their raw state and can be repurposed.</p>
<p>3. Remove the partitions from sdd using the <code>parted</code> command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd rm 1 ; sudo parted /dev/sdd rm 2</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.  </span></span></code></pre></div><p>4. Verify that all disks used in previous exercises have returned to their original raw state using the lsblk command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk                                                   </span>
</span></span><span style="display:flex;"><span>NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda             8:0    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>├─sda1          8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part /boot
</span></span><span style="display:flex;"><span>└─sda2          8:2    <span style="color:#ff9f43">0</span>   19G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  ├─rhel-root 253:0    <span style="color:#ff9f43">0</span>   17G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  └─rhel-swap 253:1    <span style="color:#ff9f43">0</span>    2G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdb             8:16   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdc             8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdd             8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sde             8:64   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdf             8:80   <span style="color:#ff9f43">0</span>    5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sr0            11:0    <span style="color:#ff9f43">1</span>  9.8G  <span style="color:#ff9f43">0</span> rom  </span></span></code></pre></div><h2 id="storage-optimization-with-virtual-data-optimizer-vdo">Storage Optimization with Virtual Data Optimizer (VDO)</h2>
<p>VDO is a device driver layer that sits between the Linux kernel and the physical storage devices.
conserve disk space, improve data throughput, and save on storage cost.
VDO employs thin provisioning, de-duplication, and compression technologies to help realize the goals.</p>
<h2 id="how-vdo-conserves-storage">How VDO Conserves Storage</h2>
<p><strong>Stage 1</strong>
makes use of the thin provisioning technology to identify and eliminate empty (zero-byte) data blocks. (zero-block elimination)
removes randomization of data blocks by moving in-use data blocks to contiguous locations on the storage device.</p>
<p><a href="#R-image-88c814206cc6070c7101109868831124" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="image-XYSCLXMC.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-88c814206cc6070c7101109868831124"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="image-XYSCLXMC.jpg"></a></p>
<p><strong>Stage 2</strong>
If it detects that new data is an identical copy of some existing data, it makes an internal note of it but does not actually write the redundant data to
the disk. (de-duplication) to this end.
Implemented with the inclusion of a kernel module calledUDS (Universal De-duplication Service).
<br>
<strong>Stage 3</strong>
calls upon another kernel module called kvdo, which compresses the residual data blocks and consolidates them on a lower number of blocks.
results in a further drop in storage space utilization.</p>
<p>VDO runs in the background and processes inbound data through the three stages on VDO-enabled volumes.
VDO is not a CPU- or memory-intensive process</p>
<h2 id="vdo-integration-with-lvm">VDO Integration with LVM</h2>
<p>\</p>
<p>RHEL 9 uses an LVM VDO implementation for managing VDO logical volumes.
Unlike previous versions of RHEL, a separate set of VDO management tools are no longer necessary.
The LVM utilities have been enhanced to include options to support VDO volumes.</p>
<h2 id="vdo-components">VDO Components</h2>
<p>utilizes the concepts of pool and volume.
Pool:
is a logical volume that is created inside an LVM volume group using a deduplicated storage space.
volume:
just like a regular LVM logical volume, but it is provisioned in a pool.
needs to be formatted with file system structures before it can be used.</p>
<p><br>
<code>vdo</code> and <code>kmod-kvdo</code>
create, mount, and manage LVM VDO volumes
installed on the system by default.</p>
<p><code>vdo</code>
installs the tools necessary to support the creation and management of VDO volumes</p>
<p><code>kmod-kvdo</code>
implements fine-grained storage virtualization, thin provisioning, and compression.
Not installed by default?</p>
<h2 id="exercise-13-12-create-an-lvm-vdo-volume">Exercise 13-12: Create an LVM VDO Volume</h2>
<ul>
<li>initialize the 5GB disk (sdf) for use in LVM VDO.</li>
<li>create a volume group called vgvdo and add the physical volume to it.</li>
<li>list and display the volume group and the physical volume.</li>
<li>create a VDO volume called lvvdo with a virtual size of 20GB.</li>
</ul>
<p>\</p>
<p>1. Initialize the sdf disk using the pvcreate command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdf</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdf&#34;</span> successfully created.</span></span></code></pre></div><p>2. Create vgvdo volume group using the vgcreate command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgcreate vgvdo /dev/sdf</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgvdo&#34;</span> successfully created</span></span></code></pre></div><p>3. Display basic information about the volume group:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay vgvdo</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgvdo
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">1279</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">1279</span> / &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  VG UUID               tED1vC-Ylec-fpeR-KM8F-8FzP-eaQ4-AsFrgc</span></span></code></pre></div><p>4. Create a VDO volume called lvvdo using the <code>lvcreate</code> command. Use the -l option to specify the number of logical extents (1279) to be allocated and the -V option for the amount of virtual space.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo dnf install kmod-kvdo</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate --type vdo -l 1279 -n lvvdo -V 20G vgvdo</span>
</span></span><span style="display:flex;"><span>    The VDO volume can address <span style="color:#ff9f43">2</span> GB in <span style="color:#ff9f43">1</span> data slab.
</span></span><span style="display:flex;"><span>    It can grow to address at most <span style="color:#ff9f43">16</span> TB of physical storage in <span style="color:#ff9f43">8192</span> slabs.
</span></span><span style="display:flex;"><span>    If a larger maximum size might be needed, use bigger slabs.
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvvdo&#34;</span> created.</span></span></code></pre></div><p>5. Display detailed information about the volume group including the logical volume and the physical volume:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay -v vgvdo</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgvdo
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">1279</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">1279</span> / &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               tED1vC-Ylec-fpeR-KM8F-8FzP-eaQ4-AsFrgc
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgvdo/vpool0
</span></span><span style="display:flex;"><span>  LV Name                vpool0
</span></span><span style="display:flex;"><span>  VG Name                vgvdo
</span></span><span style="display:flex;"><span>  LV UUID                yGAsK2-MruI-QGy2-Q1IF-CDDC-XPNT-qkjJ9t
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-16 09:35:46 -0700
</span></span><span style="display:flex;"><span>  LV VDO Pool data       vpool0_vdata
</span></span><span style="display:flex;"><span>  LV VDO Pool usage      60.00%
</span></span><span style="display:flex;"><span>  LV VDO Pool saving     100.00%
</span></span><span style="display:flex;"><span>  LV VDO Operating mode  normal
</span></span><span style="display:flex;"><span>  LV VDO Index state     online
</span></span><span style="display:flex;"><span>  LV VDO Compression st  online
</span></span><span style="display:flex;"><span>  LV VDO Used size       &lt;3.00 GiB
</span></span><span style="display:flex;"><span>  LV Status              NOT available
</span></span><span style="display:flex;"><span>  LV Size                &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">1279</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgvdo/lvvdo
</span></span><span style="display:flex;"><span>  LV Name                lvvdo
</span></span><span style="display:flex;"><span>  VG Name                vgvdo
</span></span><span style="display:flex;"><span>  LV UUID                nnGTW5-tVFa-T3Cy-9nHj-sozF-2KpP-rVfnSq
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-16 09:35:47 -0700
</span></span><span style="display:flex;"><span>  LV VDO Pool name       vpool0
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                20.00 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">5120</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:4
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Physical volumes ---
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdf     
</span></span><span style="display:flex;"><span>  PV UUID               0oAXHG-C4ub-Myou-5vZf-QxIX-KVT3-ipMZCp
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">1279</span> / <span style="color:#ff9f43">0</span></span></span></code></pre></div><p>The output reflects the creation of two logical volumes: a pool called /dev/vgvdo/vpool0 and a volume called /dev/vgvdo/lvvdo.</p>
<h2 id="exercise-13-13-remove-a-volume-group-and-uninitialize-physical-volumeserver2">Exercise 13-13: Remove a Volume Group and Uninitialize Physical Volume(Server2)</h2>
<ul>
<li>remove the vgvdo volume group along with the VDO volumes</li>
<li>uninitialize the physical volume /dev/sdf.</li>
<li>confirm the deletion.</li>
</ul>
<p>1. Remove the volume group along with the VDO volumes using the vgremove command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgremove vgvdo -f</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvvdo&#34;</span> successfully removed.
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgvdo&#34;</span> successfully removed</span></span></code></pre></div><p>Remember to proceed with caution whenever you perform erase operations.</p>
<p>2. Execute <code>sudo vgs</code> and <code>sudo lvs</code> commands for confirmation.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  VG   <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree</span>
</span></span><span style="display:flex;"><span>  rhel   <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g    <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  LV   VG   Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root rhel -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap rhel -wi-ao----   2.00g  </span></span></code></pre></div><p>3. Remove the LVM structures from sdf using the <code>pvremove</code> command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvremove /dev/sdf</span>
</span></span><span style="display:flex;"><span>  Labels on physical volume <span style="color:#5af78e">&#34;/dev/sdf&#34;</span> successfully wiped.</span></span></code></pre></div><p>4. Confirm the removal by running <code>sudo pvs</code>.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  PV         VG   Fmt  Attr PSize   PFree
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel lvm2 a--  &lt;19.00g    <span style="color:#ff9f43">0</span> </span></span></code></pre></div><p>The disk is now back to its raw state and can be repurposed.</p>
<p>5. Verify that the sdf disk used in the previous exercises has returned to its original raw state using the <code>lsblk</code> command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk</span>
</span></span><span style="display:flex;"><span>NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda             8:0    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>├─sda1          8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part /boot
</span></span><span style="display:flex;"><span>└─sda2          8:2    <span style="color:#ff9f43">0</span>   19G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  ├─rhel-root 253:0    <span style="color:#ff9f43">0</span>   17G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  └─rhel-swap 253:1    <span style="color:#ff9f43">0</span>    2G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdb             8:16   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdc             8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdd             8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sde             8:64   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdf             8:80   <span style="color:#ff9f43">0</span>    5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sr0            11:0    <span style="color:#ff9f43">1</span>  9.8G  <span style="color:#ff9f43">0</span> rom </span></span></code></pre></div><p>This brings the exercise to an end.</p>
<h2 id="review-questions">Review Questions</h2>
<p>Q. Where is the partition table information stored on BIOS-based systems?
A. The partition table information is stored on the Master Boot Record.</p>
<hr>
<p>Q. What is the name of the technology that VDO employs to remove randomization of data blocks?
A. VDO employs thin provisioning technology to remove data block randomization.</p>
<hr>
<p>Q. What would sdd3 represent?
A. sdd3 represents the third partition on the fourth disk.</p>
<hr>
<p>Q. Provide the command to add physical volumes /dev/sdd1 and /dev/sdc to vg20 volume group.
A. <code>vgextend vg20 /dev/sdd1 /dev/sdc</code></p>
<hr>
<p>Q. What are the two commands that you can use to add logical extents to a logical volume?
A. The <code>lvextend</code> and <code>lvresize</code> commands.</p>
<hr>
<p>Q. Provide the command to create a volume group called vg20 on /dev/sdd disk with physical extent size 64MB.
A. <code>vgcreate -s 64 vg20 /dev/sdd</code></p>
<hr>
<p>Q. Thin provisioning technology allows us to create logical volumes of sizes larger than the actual physical storage size. True or False?
A. True.</p>
<hr>
<p>Q. What is the maximum supported number of usable partitions on a GPT disk?
A. 128.</p>
<hr>
<p>Q. Which kernel module is responsible for data block compression in VDO volumes?
A. The kvdo module is responsible for compressing data blocks in VDO volumes.</p>
<hr>
<p>Q. What are the three techniques VDO volumes employ for storage conservation?
A. VDO volumes use thin provisioning, de-duplication, and compression techniques for storage conservation.</p>
<hr>
<p>Q. What would the command <code>parted /dev/sdc mkpart pri 1 200m</code> do?
A. The command provided will create a primary partition of size 200MB on the sdc disk starting at the beginning of the disk.</p>
<hr>
<p>Q. What is the maximum number of usable partitions that can be created on an MBR disk?
A. 14.</p>
<hr>
<p>Q. The gdisk utility can be used to store partition information in MBR format. True or False?
A. False. The gdisk tool is only for GPT type tables.</p>
<hr>
<p>Q. What would the command <code>parted /dev/sdd mklabel msdos</code> do?
A. The command provided will apply msdos label to the sdd disk.</p>
<hr>
<p>Q. Which file in the /proc file system stores the in-memory partitioning information?
A. The partitions file.</p>
<hr>
<p>Q. De-duplication is the process of zero-block elimination. True or False?
A. False. De-duplication is the process of removing blocks of identical data.</p>
<hr>
<p>Q. The parted utility may be used to create LVM logical volumes. True or False?
A. False.</p>
<hr>
<p>Q. What are the two commands that you can use to reduce the number of logical extents from a logical volume?
A. The <code>lvreduce</code> and <code>lvresize</code> commands.</p>
<hr>
<p>Q. A single disk can be used by both parted and LVM solutions at the same time. True or False?
A. True. A single disk can be shared between parted-created partitions
and LVM.</p>
<hr>
<p>Q. Provide the command to erase /dev/sdd1 physical volume from vg20 volume group.
A. <code>vgreduce vg20 /dev/sdd1</code></p>
<hr>
<p>Q. Provide the command to remove vg20 along with logical and physical volumes it contains.
A. <code>vgremove -f vg20</code></p>
<hr>
<p>Q. What is the default size of a physical extent in LVM?
A. The default PE size is 4MB.</p>
<hr>
<p>Q. What is the default name for the first logical volume in a volume group?
A. lvol0 is the default name for the first logical volume created in a
volume group.</p>
<hr>
<p>Q. What is one difference between the <code>pvs</code> and <code>pvdisplay</code> commands?
A. The <code>pvs</code> command lists basic information about physical volumes
whereas the <code>pvdisplay</code> command shows the details.</p>
<hr>
<p>Q. When can a disk or partition be referred to as a physical volume?
A. After the <code>pvcreate</code> command has been executed on it successfully.</p>
<hr>
<p>Q. Provide the command to remove webvol logical volume from vg20 volume group.
A. <code>lvremove /dev/vg20/webvol</code></p>
<hr>
<p>Q. It is necessary to create file system structures in a logical volume before it can be used to store files in it. True or False?
A. True.</p>
<hr>
<p>Q. Physical and logical extents are typically of the same size. True or False?
A. True.</p>
<hr>
<p>Q. What is the purpose of the <code>pvremove</code> command?
A. The <code>pvremove</code> command is used to remove LVM information from a physical volume.</p>
<hr>
<p>Q. What would the command <code>pvcreate /dev/sdd</code> do?
A. The command provided will prepare the /dev/sdd disk for use in a volume group.</p>
<hr>
<p>Q. A disk or partition can be added to a volume group without being initialized. True or False?
A. False. A disk or partition must be initialized before it can be added to a volume group.</p>
<hr>
<p>Q. Provide the command to create a logical volume called webvol of size equal to 100 logical extents in vg20 volume group.
A. <code>lvcreate -l 100 -n webvol vg20</code></p>
<hr>
<p>Q. A volume group can be created without any physical volume in it. True or False?
A. False.</p>
<hr>
<p>Q. A partition can be used as an LVM object. True or False?
A. True.</p>
<hr>
<p>Q. Which command would you use to view the details of a volume group and its objects?
A. The <code>vgdisplay</code> command with the <code>-v</code> option.</p>
<h2 id="do-it-yourself-challenge-labs">Do-It-Yourself Challenge Labs</h2>
<h2 id="lab-13-1-create-and-remove-partitions-with-parted">Lab 13-1: Create and Remove Partitions with parted</h2>
<p>Create a 100MB primary partition on one of the available 250MB disks (lsblk) by invoking the parted utility directly at the command prompt. Apply label &ldquo;msdos&rdquo; if the disk is new.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mklabel msdos</span>
</span></span><span style="display:flex;"><span>Warning: The existing disk label on /dev/sdb will be destroyed and all data on this disk will be lost. Do you want to
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">continue</span>?
</span></span><span style="display:flex;"><span>Yes/No? yes                                                               
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mkpart primary 1 101m             </span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div><p>Create another 100MB partition by running parted interactively while ensuring that the second partition won&rsquo;t overlap the first.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdb</span>
</span></span><span style="display:flex;"><span>GNU Parted 3.5
</span></span><span style="display:flex;"><span>Using /dev/sdb
</span></span><span style="display:flex;"><span>Welcome to GNU Parted! Type <span style="color:#5af78e">&#39;help&#39;</span> to view a list of commands.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">(</span>parted<span style="color:#ff6ac1">)</span> mkpart primary <span style="color:#ff9f43">101</span> 201m                                         </span></span></code></pre></div><p>Verify the label and the partitions.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">(</span>parted<span style="color:#ff6ac1">)</span> print                                                            
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End    Size    Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  101MB  99.6MB  primary
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">2</span>      101MB   201MB  101MB   primary</span></span></code></pre></div><p>Remove both partitions at the command prompt.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb rm 1 rm 2</span></span></span></code></pre></div><h2 id="lab-13-2-create-and-remove-partitions-with-gdisk">Lab 13-2: Create and Remove Partitions with gdisk</h2>
<p>Create two 80MB partitions on one of the 250MB disks (lsblk) using the gdisk utility. Make sure the partitions won&rsquo;t overlap.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: o
</span></span><span style="display:flex;"><span>This option deletes all partitions and creates a new protective MBR.
</span></span><span style="display:flex;"><span>Proceed? <span style="color:#ff6ac1">(</span>Y/N<span style="color:#ff6ac1">)</span>: y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: p
</span></span><span style="display:flex;"><span>Disk /dev/sdb: <span style="color:#ff9f43">512000</span> sectors, 250.0 MiB
</span></span><span style="display:flex;"><span>Model: VBOX HARDDISK   
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512/512 bytes
</span></span><span style="display:flex;"><span>Disk identifier <span style="color:#ff6ac1">(</span>GUID<span style="color:#ff6ac1">)</span>: 226F7476-7F8C-4445-9025-53B6737AD1E4
</span></span><span style="display:flex;"><span>Partition table holds up to <span style="color:#ff9f43">128</span> entries
</span></span><span style="display:flex;"><span>Main partition table begins at sector <span style="color:#ff9f43">2</span> and ends at sector <span style="color:#ff9f43">33</span>
</span></span><span style="display:flex;"><span>First usable sector is 34, last usable sector is <span style="color:#ff9f43">511966</span>
</span></span><span style="display:flex;"><span>Partitions will be aligned on 2048-sector boundaries
</span></span><span style="display:flex;"><span>Total free space is <span style="color:#ff9f43">511933</span> sectors <span style="color:#ff6ac1">(</span>250.0 MiB<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>    End <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>  Size       Code  Name
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: n
</span></span><span style="display:flex;"><span>Partition number <span style="color:#ff6ac1">(</span>1-128, default 1<span style="color:#ff6ac1">)</span>: 
</span></span><span style="display:flex;"><span>First sector <span style="color:#ff6ac1">(</span>34-511966, <span style="color:#ff5c57">default</span> <span style="color:#ff6ac1">=</span> 2048<span style="color:#ff6ac1">)</span> or <span style="color:#ff6ac1">{</span>+-<span style="color:#ff6ac1">}</span>size<span style="color:#ff6ac1">{</span>KMGTP<span style="color:#ff6ac1">}</span>: 
</span></span><span style="display:flex;"><span>Last sector <span style="color:#ff6ac1">(</span>2048-511966, <span style="color:#ff5c57">default</span> <span style="color:#ff6ac1">=</span> 511966<span style="color:#ff6ac1">)</span> or <span style="color:#ff6ac1">{</span>+-<span style="color:#ff6ac1">}</span>size<span style="color:#ff6ac1">{</span>KMGTP<span style="color:#ff6ac1">}</span>: +80M
</span></span><span style="display:flex;"><span>Current <span style="color:#ff5c57">type</span> is <span style="color:#ff9f43">8300</span> <span style="color:#ff6ac1">(</span>Linux filesystem<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Hex code or GUID <span style="color:#ff6ac1">(</span>L to show codes, <span style="color:#ff5c57">Enter</span> <span style="color:#ff6ac1">=</span> 8300<span style="color:#ff6ac1">)</span>: 
</span></span><span style="display:flex;"><span>Changed <span style="color:#ff5c57">type</span> of partition to <span style="color:#5af78e">&#39;Linux filesystem&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: n
</span></span><span style="display:flex;"><span>Partition number <span style="color:#ff6ac1">(</span>2-128, default 2<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>First sector <span style="color:#ff6ac1">(</span>34-511966, <span style="color:#ff5c57">default</span> <span style="color:#ff6ac1">=</span> 165888<span style="color:#ff6ac1">)</span> or <span style="color:#ff6ac1">{</span>+-<span style="color:#ff6ac1">}</span>size<span style="color:#ff6ac1">{</span>KMGTP<span style="color:#ff6ac1">}</span>: <span style="color:#ff9f43">165888</span>
</span></span><span style="display:flex;"><span>Last sector <span style="color:#ff6ac1">(</span>165888-511966, <span style="color:#ff5c57">default</span> <span style="color:#ff6ac1">=</span> 511966<span style="color:#ff6ac1">)</span> or <span style="color:#ff6ac1">{</span>+-<span style="color:#ff6ac1">}</span>size<span style="color:#ff6ac1">{</span>KMGTP<span style="color:#ff6ac1">}</span>: +80M
</span></span><span style="display:flex;"><span>Current <span style="color:#ff5c57">type</span> is <span style="color:#ff9f43">8300</span> <span style="color:#ff6ac1">(</span>Linux filesystem<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Hex code or GUID <span style="color:#ff6ac1">(</span>L to show codes, <span style="color:#ff5c57">Enter</span> <span style="color:#ff6ac1">=</span> 8300<span style="color:#ff6ac1">)</span>: 
</span></span><span style="display:flex;"><span>Changed <span style="color:#ff5c57">type</span> of partition to <span style="color:#5af78e">&#39;Linux filesystem&#39;</span></span></span></code></pre></div><p>Verify the partitions.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: p
</span></span><span style="display:flex;"><span>Disk /dev/sdb: <span style="color:#ff9f43">512000</span> sectors, 250.0 MiB
</span></span><span style="display:flex;"><span>Model: VBOX HARDDISK   
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512/512 bytes
</span></span><span style="display:flex;"><span>Disk identifier <span style="color:#ff6ac1">(</span>GUID<span style="color:#ff6ac1">)</span>: 226F7476-7F8C-4445-9025-53B6737AD1E4
</span></span><span style="display:flex;"><span>Partition table holds up to <span style="color:#ff9f43">128</span> entries
</span></span><span style="display:flex;"><span>Main partition table begins at sector <span style="color:#ff9f43">2</span> and ends at sector <span style="color:#ff9f43">33</span>
</span></span><span style="display:flex;"><span>First usable sector is 34, last usable sector is <span style="color:#ff9f43">511966</span>
</span></span><span style="display:flex;"><span>Partitions will be aligned on 2048-sector boundaries
</span></span><span style="display:flex;"><span>Total free space is <span style="color:#ff9f43">184253</span> sectors <span style="color:#ff6ac1">(</span>90.0 MiB<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>    End <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>  Size       Code  Name
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">1</span>            <span style="color:#ff9f43">2048</span>          <span style="color:#ff9f43">165887</span>   80.0 MiB    <span style="color:#ff9f43">8300</span>  Linux filesystem
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">2</span>          <span style="color:#ff9f43">165888</span>          <span style="color:#ff9f43">329727</span>   80.0 MiB    <span style="color:#ff9f43">8300</span>  Linux filesystem</span></span></code></pre></div><p>Save</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: w
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
</span></span><span style="display:flex;"><span>PARTITIONS!!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Do you want to proceed? <span style="color:#ff6ac1">(</span>Y/N<span style="color:#ff6ac1">)</span>: y
</span></span><span style="display:flex;"><span>OK; writing new GUID partition table <span style="color:#ff6ac1">(</span>GPT<span style="color:#ff6ac1">)</span> to /dev/sdb.
</span></span><span style="display:flex;"><span>The operation has completed successfully.</span></span></code></pre></div><p>Delete the partitions</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: d  
</span></span><span style="display:flex;"><span>Partition number <span style="color:#ff6ac1">(</span>1-2<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: d
</span></span><span style="display:flex;"><span>Using <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: w
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
</span></span><span style="display:flex;"><span>PARTITIONS!!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Do you want to proceed? <span style="color:#ff6ac1">(</span>Y/N<span style="color:#ff6ac1">)</span>: y
</span></span><span style="display:flex;"><span>OK; writing new GUID partition table <span style="color:#ff6ac1">(</span>GPT<span style="color:#ff6ac1">)</span> to /dev/sdb.
</span></span><span style="display:flex;"><span>The operation has completed successfully.</span></span></code></pre></div><h2 id="lab-13-3-create-volume-group-and-logical-volumes">Lab 13-3: Create Volume Group and Logical Volumes</h2>
<p><br>
initialize 1x250MB disk for use in LVM (use lsblk to identify available disks).</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd mklabel msdos</span>
</span></span><span style="display:flex;"><span>Warning: The existing disk label on /dev/sdd will be destroyed and all data
</span></span><span style="display:flex;"><span>on this disk will be lost. Do you want to <span style="color:#ff6ac1">continue</span>?
</span></span><span style="display:flex;"><span>Yes/No? yes                                                               
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd mkpart primary 1 250m              </span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd print                              </span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdd: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End    Size   Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  250MB  249MB  primary
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdd1</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span> successfully created.</span></span></code></pre></div><p>Create volume group vg100 with PE size 16MB and add the physical volume.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgcreate -vs 15 vg100 /dev/sdd1</span>
</span></span><span style="display:flex;"><span>  Wiping signatures on new PV /dev/sdd1.
</span></span><span style="display:flex;"><span>  Adding physical volume <span style="color:#5af78e">&#39;/dev/sdd1&#39;</span> to volume group <span style="color:#5af78e">&#39;vg100&#39;</span>
</span></span><span style="display:flex;"><span>  Creating volume group backup <span style="color:#5af78e">&#34;/etc/lvm/backup/vg100&#34;</span> <span style="color:#ff6ac1">(</span>seqno 1<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vg100&#34;</span> successfully created</span></span></code></pre></div><p>Create two logical volumes lvol0 and swapvol of sizes 90MB and 120MB.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -vL 90 vg100</span>
</span></span><span style="display:flex;"><span>  Creating logical volume lvol0
</span></span><span style="display:flex;"><span>  Archiving volume group <span style="color:#5af78e">&#34;vg100&#34;</span> metadata <span style="color:#ff6ac1">(</span>seqno 1<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Activating logical volume vg100/lvol0.
</span></span><span style="display:flex;"><span>  activation/volume_list configuration setting not defined: Checking only host tags <span style="color:#ff6ac1">for</span> vg100/lvol0.
</span></span><span style="display:flex;"><span>  Creating vg100-lvol0
</span></span><span style="display:flex;"><span>  Loading table <span style="color:#ff6ac1">for</span> vg100-lvol0 <span style="color:#ff6ac1">(</span>253:2<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Resuming vg100-lvol0 <span style="color:#ff6ac1">(</span>253:2<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Wiping known signatures on logical volume vg100/lvol0.
</span></span><span style="display:flex;"><span>  Initializing 4.00 KiB of logical volume vg100/lvol0 with value 0.
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvol0&#34;</span> created.
</span></span><span style="display:flex;"><span>  Creating volume group backup <span style="color:#5af78e">&#34;/etc/lvm/backup/vg100&#34;</span> <span style="color:#ff6ac1">(</span>seqno 2<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -l 8 -n swapvol vg100</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;swapvol&#34;</span> created.</span></span></code></pre></div><p>Use the vgs, pvs, lvs, and vgdisplay commands for verification.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  LV      VG    Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel  -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel  -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvol0   vg100 -wi-a-----  90.00m                                                    
</span></span><span style="display:flex;"><span>  swapvol vg100 -wi-a----- 120.00m                                                    
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  VG    <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree </span>
</span></span><span style="display:flex;"><span>  rhel    <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  vg100   <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- 225.00m 15.00m
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  PV         VG    Fmt  Attr PSize   PFree 
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel  lvm2 a--  &lt;19.00g     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdd1  vg100 lvm2 a--  225.00m 15.00m
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgdisplay</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vg100
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">5</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               225.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               15.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">15</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">14</span> / 210.00 MiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">1</span> / 15.00 MiB
</span></span><span style="display:flex;"><span>  VG UUID               fEUf8R-nxKF-Uxud-7rmm-JvSQ-PsN1-Mrs3zc
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               rhel
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;19.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">4863</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">4863</span> / &lt;19.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               UiK3fy-FGOc-2fnP-C1Y6-JS0l-irEe-Sq3c4h</span></span></code></pre></div><h2 id="lab-13-4-expand-volume-group-and-logical-volume">Lab 13-4: Expand Volume Group and Logical Volume</h2>
<p>create a partition on an available 250MB disk and initialize it for use in LVM (use lsblk to identify available disks).</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdb mklabel msdos</span>
</span></span><span style="display:flex;"><span>Warning: The existing disk label on /dev/sdb will be destroyed and all data on this disk will be lost. Do you want to <span style="color:#ff6ac1">continue</span>?
</span></span><span style="display:flex;"><span>Yes/No? yes                                                               
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdb mkpart primary 1 250m                   </span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div><p>Add the new physical volume to vg100.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgextend vg100 /dev/sdb1</span>
</span></span><span style="display:flex;"><span>  Device /dev/sdb1 has updated name <span style="color:#ff6ac1">(</span>devices file /dev/sdd1<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdb1&#34;</span> successfully created.
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vg100&#34;</span> successfully extended</span></span></code></pre></div><p>Expand the lvol0 logical volume to size 300MB.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvextend -L +210 /dev/vg100/lvol0</span>
</span></span><span style="display:flex;"><span>  Size of logical volume vg100/lvol0 changed from 90.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">6</span> extents<span style="color:#ff6ac1">)</span> to 300.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">20</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vg100/lvol0 successfully resized.</span></span></code></pre></div><p>Use the vgs, pvs, lvs, and vgdisplay commands for verification.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  LV      VG    Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel  -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel  -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvol0   vg100 -wi-a-----  90.00m                                                    
</span></span><span style="display:flex;"><span>  swapvol vg100 -wi-a----- 120.00m<span style="color:#ff6ac1">](</span>&lt;<span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvs</span>
</span></span><span style="display:flex;"><span>  LV      VG    Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel  -wi-ao---- %3C17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel  -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvol0   vg100 -wi-a----- 300.00m                                                    
</span></span><span style="display:flex;"><span>  swapvol vg100 -wi-a----- 120.00m&gt;<span style="color:#ff6ac1">)</span>                                                  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  VG    <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree </span>
</span></span><span style="display:flex;"><span>  rhel    <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  vg100   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- 450.00m 30.00m
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  PV         VG    Fmt  Attr PSize   PFree 
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel  lvm2 a--  &lt;19.00g     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdb1  vg100 lvm2 a--  225.00m 30.00m
</span></span><span style="display:flex;"><span>  /dev/sdd1  vg100 lvm2 a--  225.00m     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  LV      VG    Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel  -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel  -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvol0   vg100 -wi-a----- 300.00m                                                    
</span></span><span style="display:flex;"><span>  swapvol vg100 -wi-a----- 120.00m                                                    
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgdisplay</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vg100
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">7</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  VG Size               450.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               15.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">30</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">28</span> / 420.00 MiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">2</span> / 30.00 MiB
</span></span><span style="display:flex;"><span>  VG UUID               fEUf8R-nxKF-Uxud-7rmm-JvSQ-PsN1-Mrs3zc
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               rhel
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;19.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">4863</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">4863</span> / &lt;19.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               UiK3fy-FGOc-2fnP-C1Y6-JS0l-irEe-Sq3c4h
</span></span><span style="display:flex;"><span>   </span></span></code></pre></div><h3 id="lab-13-5-add-a-vdo-logical-volume">Lab 13-5: Add a VDO Logical Volume</h3>
<p>initialize the sdf disk for use in LVM and add it to vgvdo1.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvcreate /dev/sdc</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdc&#34;</span> successfully created.
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgextend vgvdo1 /dev/sdc</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgvdo1&#34;</span> successfully extended</span></span></code></pre></div><p>Create a VDO logical volume named vdovol using the entire disk capacity.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvcreate --type vdo -n vdovol -l 100%FREE vgvdo1</span>
</span></span><span style="display:flex;"><span>WARNING: LVM2_member signature detected on /dev/vgvdo1/vpool0 at offset 536. Wipe it? <span style="color:#ff6ac1">[</span>y/n<span style="color:#ff6ac1">]</span>: y
</span></span><span style="display:flex;"><span>  Wiping LVM2_member signature on /dev/vgvdo1/vpool0.
</span></span><span style="display:flex;"><span>    Logical blocks defaulted to <span style="color:#ff9f43">523108</span> blocks.
</span></span><span style="display:flex;"><span>    The VDO volume can address <span style="color:#ff9f43">2</span> GB in <span style="color:#ff9f43">1</span> data slab.
</span></span><span style="display:flex;"><span>    It can grow to address at most <span style="color:#ff9f43">16</span> TB of physical storage in <span style="color:#ff9f43">8192</span> slabs.
</span></span><span style="display:flex;"><span>    If a larger maximum size might be needed, use bigger slabs.
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;vdovol&#34;</span> created.</span></span></code></pre></div><p>Use the vgs, pvs, lvs, and vgdisplay commands for verification.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB123ecea1-63467dee PVID RjcGRyHDIWY0OqAgfIHC93WT03Na1WoO last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID brKVLFEG3AoBzhWoso0Sa1gLYHgNZ4vL last seen on /dev/sdb1 not found.
</span></span><span style="display:flex;"><span>  VG     <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree  </span>
</span></span><span style="display:flex;"><span>  rhel     <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g      <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  vgvdo1   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n-  &lt;5.24g 248.00m</span></span></code></pre></div><h2 id="lab-13-6-reduce-and-remove-logical-volumes">Lab 13-6: Reduce and Remove Logical Volumes</h2>
<p><br>
reduce the size of vdovol logical volume to 80MB.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvreduce -L 80 /dev/vgvdo1/vdovol</span>
</span></span><span style="display:flex;"><span>  No file system found on /dev/vgvdo1/vdovol.
</span></span><span style="display:flex;"><span>  WARNING: /dev/vgvdo1/vdovol: Discarding 1.91 GiB at offset 83886080, please wait...
</span></span><span style="display:flex;"><span>  Size of logical volume vgvdo1/vdovol changed from 1.99 GiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">510</span> extents<span style="color:#ff6ac1">)</span> to 80.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">20</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vgvdo1/vdovol successfully resized.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB123ecea1-63467dee PVID RjcGRyHDIWY0OqAgfIHC93WT03Na1WoO last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID brKVLFEG3AoBzhWoso0Sa1gLYHgNZ4vL last seen on /dev/sdb1 not found.
</span></span><span style="display:flex;"><span>  LV     VG     Attr       LSize   Pool   Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root   rhel   -wi-ao---- &lt;17.00g                                                      
</span></span><span style="display:flex;"><span>  swap   rhel   -wi-ao----   2.00g                                                      
</span></span><span style="display:flex;"><span>  vdovol vgvdo1 vwi-a-v---  80.00m vpool0        0.00                                   
</span></span><span style="display:flex;"><span>  vpool0 vgvdo1 dwi-------  &lt;5.00g               60.00                                  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># </span></span></span></code></pre></div><p>erase logical volume vdovol.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvremove /dev/vgvdo1/vdovol</span>
</span></span><span style="display:flex;"><span>Do you really want to remove active logical volume vgvdo1/vdovol? <span style="color:#ff6ac1">[</span>y/n<span style="color:#ff6ac1">]</span>: y
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;vdovol&#34;</span> successfully removed.</span></span></code></pre></div><p>Confirm the deletion with vgs, pvs, lvs, and vgdisplay commands.</p>
<h2 id="lab-13-7-remove-volume-group-and-physical-volumes">Lab 13-7: Remove Volume Group and Physical Volumes</h2>
<p>\remove the volume group and uninitialized the physical volumes.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgremove vgvdo1</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgvdo1&#34;</span> successfully removed</span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvremove /dev/sdc</span>
</span></span><span style="display:flex;"><span>  Labels on physical volume <span style="color:#5af78e">&#34;/dev/sdc&#34;</span> successfully wiped.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvremove /dev/sdf</span>
</span></span><span style="display:flex;"><span>  Labels on physical volume <span style="color:#5af78e">&#34;/dev/sdf&#34;</span> successfully wiped.</span></span></code></pre></div><p>Confirm the deletion with vgs, pvs, lvs, and vgdisplay commands.</p>
<p>Use the lsblk command and verify that the disks used for the LVM labs no longer show LVM information.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk</span>
</span></span><span style="display:flex;"><span>NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda             8:0    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>├─sda1          8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part /boot
</span></span><span style="display:flex;"><span>└─sda2          8:2    <span style="color:#ff9f43">0</span>   19G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  ├─rhel-root 253:0    <span style="color:#ff9f43">0</span>   17G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  └─rhel-swap 253:1    <span style="color:#ff9f43">0</span>    2G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdb             8:16   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdc             8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdd             8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sde             8:64   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdf             8:80   <span style="color:#ff9f43">0</span>    5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sr0            11:0    <span style="color:#ff9f43">1</span>  9.8G  <span style="color:#ff9f43">0</span> rom  </span></span></code></pre></div>
            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation showVisitedLinks">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<img src="/images/perfectlogo.png" alt="perfect dark mode">

        </div>

        <search>
          <div class="searchbox default-animation">
            <i class="fas fa-search" title="Search (CTRL+ALT+f)"></i>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </search>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/js/auto-complete.js?1718846168" defer></script>
        <script src="/js/lunr/lunr.min.js?1718846168" defer></script>
        <script src="/js/lunr/lunr.stemmer.support.min.js?1718846168" defer></script>
        <script src="/js/lunr/lunr.multi.min.js?1718846168" defer></script>
        <script src="/js/lunr/lunr.en.min.js?1718846168" defer></script>
        <script src="/js/search.js?1718846168" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <ul>
          <li><a class="padding" href="/"><i class="fa-fw fas fa-home"></i> Home</a></li>
        </ul>
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-topics">
          <ul class="enlarge morespace collapsible-menu">
          <li data-nav-id="/linux/" class="parent "><a class="padding" href="/linux/">Linux<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-9e5aaccdf48687824ccd3b3097af8e41" class="morespace collapsible-menu">
          <li data-nav-id="/linux/13_storage_management/" class="active"><a class="padding" href="/linux/13_storage_management/"><i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/networking/" class=""><a class="padding" href="/networking/">Networking<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/tools/" class=""><a class="padding" href="/tools/">Tools<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/writing/" class=""><a class="padding" href="/writing/">Writing<i class="fa-fw fas fa-check read-icon"></i></a></li>
          </ul>
        </div>
        <div id="R-shortcuts">
          <div class="nav-title padding">More</div>
          <ul class="space">
            <li><a class="padding" href="https://github.com/perfectdarkmode1"><i class='fab fa-fw fa-github'></i> GitHub</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-language"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = this.querySelector( this.value ).dataset.url;">
                      <option id="R-select-language-en" value="#R-select-language-en" data-url="/linux/13_storage_management/" lang="en-us" selected></option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-paint-brush"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-select-variant-zen-dark" value="zen-dark" selected>Zen Dark</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks showVisitedLinks">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-history"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter">
	    <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
          </div>
        </div>
      </div>
    </aside>
    <script src="/js/clipboard.min.js?1718846168" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1718846168" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/d3/d3-color.min.js?1718846168" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1718846168" defer></script>
    <script src="/js/d3/d3-drag.min.js?1718846168" defer></script>
    <script src="/js/d3/d3-ease.min.js?1718846168" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1718846168" defer></script>
    <script src="/js/d3/d3-selection.min.js?1718846168" defer></script>
    <script src="/js/d3/d3-timer.min.js?1718846168" defer></script>
    <script src="/js/d3/d3-transition.min.js?1718846168" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1718846168" defer></script>
    <script src="/js/js-yaml.min.js?1718846168" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/theme.js?1718846168" defer></script>
  </body>
</html>
