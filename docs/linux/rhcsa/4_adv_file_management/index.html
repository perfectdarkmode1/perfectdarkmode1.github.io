<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.124.1">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="Chapter 4 RHCSA Notes - Advanced File Management Goals and Objectives ugo/rwx access permissions symbolic/octal notations for permissions permissions for file owner, owning group, and others default permissions on new files and directories special permission bits: setuid, setgid, and sticky Use setgid bit for group collaboration sticky bit on public and shared writable directories Search for files extended access controls for named users and named groups Set default extended access controls on directories RHCSA Objectives: List, set, and change standard ugo/rwx permissions Create and configure set-GID directories for collaboration Diagnose and correct file permission problems Create and use file access control lists Setting a default ACL on a directory :: Allows content sharing among user’s without having to modify access on each new file and subdirectory.">
    <meta name="author" content="David">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="Chapter 4 RHCSA Notes - Advanced File Management Goals and Objectives ugo/rwx access permissions symbolic/octal notations for permissions permissions for file owner, owning group, and others default permissions on new files and directories special permission bits: setuid, setgid, and sticky Use setgid bit for group collaboration sticky bit on public and shared writable directories Search for files extended access controls for named users and named groups Set default extended access controls on directories RHCSA Objectives: List, set, and change standard ugo/rwx permissions Create and configure set-GID directories for collaboration Diagnose and correct file permission problems Create and use file access control lists Setting a default ACL on a directory :: Allows content sharing among user’s without having to modify access on each new file and subdirectory.">
    <meta property="og:url" content="http://perfectdarkmode.com/linux/rhcsa/4_adv_file_management/">
    <meta property="og:site_name" content="Perfect Dark Mode">
    <meta property="og:description" content="Chapter 4 RHCSA Notes - Advanced File Management Goals and Objectives ugo/rwx access permissions symbolic/octal notations for permissions permissions for file owner, owning group, and others default permissions on new files and directories special permission bits: setuid, setgid, and sticky Use setgid bit for group collaboration sticky bit on public and shared writable directories Search for files extended access controls for named users and named groups Set default extended access controls on directories RHCSA Objectives: List, set, and change standard ugo/rwx permissions Create and configure set-GID directories for collaboration Diagnose and correct file permission problems Create and use file access control lists Setting a default ACL on a directory :: Allows content sharing among user’s without having to modify access on each new file and subdirectory.">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Linux">
    <meta itemprop="description" content="Chapter 4 RHCSA Notes - Advanced File Management Goals and Objectives ugo/rwx access permissions symbolic/octal notations for permissions permissions for file owner, owning group, and others default permissions on new files and directories special permission bits: setuid, setgid, and sticky Use setgid bit for group collaboration sticky bit on public and shared writable directories Search for files extended access controls for named users and named groups Set default extended access controls on directories RHCSA Objectives: List, set, and change standard ugo/rwx permissions Create and configure set-GID directories for collaboration Diagnose and correct file permission problems Create and use file access control lists Setting a default ACL on a directory :: Allows content sharing among user’s without having to modify access on each new file and subdirectory.">
    <meta itemprop="wordCount" content="3928">
    <title></title>
    <link href="/images/favicon.png?1716135451" rel="icon" type="image/png">
    <link href="/css/fontawesome-all.min.css?1716135451" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1716135451" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1716135451" rel="stylesheet">
    <link href="/css/auto-complete.css?1716135451" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1716135451" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1716135451" rel="stylesheet">
    <link href="/css/fonts.css?1716135451" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1716135451" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1716135451" rel="stylesheet">
    <link href="/css/theme-zen-dark.css?1716135451" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-relearn-dark.css?1716135451" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/variant.css?1716135451" rel="stylesheet">
    <link href="/css/print.css?1716135451" rel="stylesheet" media="print">
    <script src="/js/variant.js?1716135451"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='http:\/\/perfectdarkmode.com';
      window.index_js_url="/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'zen-dark' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
  </head>
  <body class="mobile-support html" data-url="/linux/rhcsa/4_adv_file_management/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-back" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="history.back()" type="button" title=""><i class="fa-fw fas fa-chevron-left"></i></button>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"><nav class="TableOfContents">
  <ul>
    <li><a href="#goals-and-objectives">Goals and Objectives</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#permission-classes">Permission Classes</a></li>
    <li><a href="#permission-types">Permission types</a>
      <ul>
        <li><a href="#ls-results-permissions-groupings">ls results permissions groupings</a></li>
        <li><a href="#ls-results-first-character-meaning">ls results first character meaning</a></li>
      </ul>
    </li>
    <li><a href="#modifying-access-permission-bits">Modifying Access Permission Bits</a>
      <ul>
        <li><a href="#chmod--command">chmod  command</a></li>
        <li><a href="#symbolic-notation">Symbolic notation</a></li>
        <li><a href="#octal-notation">Octal Notation</a></li>
        <li><a href="#default-permissions">Default Permissions</a></li>
        <li><a href="#umask-command">umask command</a></li>
      </ul>
    </li>
    <li><a href="#special-file-permissions">Special File Permissions</a></li>
    <li><a href="#find">Find</a></li>
    <li><a href="#access-control-lists-acls">Access Control Lists (ACLs)</a>
      <ul>
        <li><a href="#acl-commands">ACL Commands</a></li>
      </ul>
    </li>
    <li><a href="#mask-value">Mask Value</a></li>
    <li><a href="#labs">Labs</a>
      <ul>
        <li><a href="#lab-find-stuff">Lab: find stuff</a></li>
        <li><a href="#lab-display-acl-and-give-permissions">Lab: Display ACL and give permissions</a></li>
        <li><a href="#lab-identify-apply-and-erase-access-acls">Lab: Identify, Apply, and Erase Access ACLs</a></li>
        <li><a href="#lab-apply-identify-and-erase-default-acls">Lab: Apply, Identify, and erase default ACLs</a></li>
        <li><a href="#lab-modify-permission-bits-using-symbolic-form">Lab: Modify Permission Bits Using Symbolic Form</a></li>
        <li><a href="#lab-modify-permission-bits-using-octal-form">Lab: Modify Permission Bits Using Octal Form</a></li>
        <li><a href="#lab--view-suid-bit-on-su-command">Lab:  View suid bit on su command</a></li>
        <li><a href="#lab-test-the-effect-of-setuid-bit-on-executable-files">Lab: Test the Effect of setuid Bit on Executable Files</a></li>
        <li><a href="#lab-test-the-effect-of-setgid-bit-on-executable-files">Lab: Test the Effect of setgid Bit on Executable Files</a></li>
        <li><a href="#lab-set-up-shared-directory-for-group-collaboration">Lab: Set up Shared Directory for Group Collaboration</a></li>
        <li><a href="#lab-view-t-in-permissions-for-sticky-bit">Lab: View &ldquo;t&rdquo; in permissions for sticky bit</a></li>
        <li><a href="#lab-test-the-effect-of-sticky-bit">Lab: Test the effect of Sticky Bit</a></li>
        <li><a href="#lab-manipulate-file-permissions-user1">Lab: Manipulate File Permissions (user1)</a></li>
        <li><a href="#lab-configure-group-collaboration-and-prevent-file-deletion-root">Lab: Configure Group Collaboration and Prevent File Deletion (root)</a></li>
        <li><a href="#lab-find-files-root">Lab: Find Files (root)</a></li>
        <li><a href="#lab-find-files-using-different-criteria-root">Lab: Find Files Using Different Criteria (root)</a></li>
        <li><a href="#lab-apply-acl-settings-root">Lab: Apply ACL Settings (root)</a></li>
      </ul>
    </li>
    <li><a href="#review-questions">Review Questions</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-about" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/about/" title=""><i class="fa-fw fas fa-address-card"></i> <span class="title">About</span></a>
            </div>

            <div class="topbar-button topbar-button-now" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/now/" title=""><i class="fa-fw fas fa-play"></i> <span class="title">Now</span></a>
            </div>

            <div class="topbar-button topbar-button-recommended" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/recommended/" title=""><i class="fa-fw fas fa-thumbs-up"></i> <span class="title">Recommended</span></a>
            </div>

            <div class="topbar-button topbar-button-booknotes" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/booknotes/" title=""><i class="fa-fw fas fa-file"></i> <span class="title">Book Notes</span></a>
            </div>

            <div class="topbar-button topbar-button-contact" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/contact/" title=""><i class="fa-fw fas fa-envelope"></i> <span class="title">Contact</span></a>
            </div>






          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id=""></h1>

<h1 id="chapter-4-rhcsa-notes---advanced-file-management">Chapter 4 RHCSA Notes - Advanced File Management</h1>
<h2 id="goals-and-objectives">Goals and Objectives</h2>
<ul>
<li>ugo/rwx access permissions</li>
<li>symbolic/octal notations for permissions</li>
<li>permissions for file owner, owning group, and others</li>
<li>default permissions on new files and directories</li>
<li>special permission bits: setuid, setgid, and sticky</li>
<li>Use setgid bit for group collaboration</li>
<li>sticky bit on public and shared writable directories</li>
<li>Search for files</li>
<li>extended access controls for named users and named groups</li>
<li>Set default extended access controls on directories</li>
</ul>
<h4 id="rhcsa-objectives">RHCSA Objectives:</h4>
<ol start="10">
<li>List, set, and change standard ugo/rwx permissions</li>
<li>Create and configure set-GID directories for collaboration</li>
<li>Diagnose and correct file permission problems</li>
<li>Create and use file access control lists</li>
</ol>
<p>Setting a default ACL on a directory :: Allows content sharing among user&rsquo;s without having to modify access on each new file and subdirectory.</p>
<h2 id="permission-classes">Permission Classes</h2>
<ul>
<li>user (u)</li>
<li>group (g)</li>
<li>other (o) (public)</li>
<li>all (a) &lt;- all combined</li>
</ul>
<h2 id="permission-types">Permission types</h2>
<ul>
<li>r,w,x</li>
<li>works differently on files and directories</li>
<li>hyphen (-) represents no permissions set</li>
</ul>
<h3 id="ls-results-permissions-groupings">ls results permissions groupings</h3>
<ul>
<li>
<ul>
<li>rwx rw- r&ndash;
<ul>
<li>user (owner), group, and other (public)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="ls-results-first-character-meaning">ls results first character meaning</h3>
<ul>
<li>regular file
d directory
l symbolic link
c character device file
b block device file
p named pipe
s socket</li>
</ul>
<h2 id="modifying-access-permission-bits">Modifying Access Permission Bits</h2>
<hr>
<h3 id="chmod--command">chmod  command</h3>
<ul>
<li>Modify permissions using symbolic or octal notation.</li>
<li>Used by root or the file owner.</li>
</ul>
<p>Flags
chmod -v ::: Verbose.</p>
<h3 id="symbolic-notation">Symbolic notation</h3>
<ul>
<li>Letters (ugo/rwx) and symbols (+, -, =) used to add, revoke, or assign permission bits.</li>
</ul>
<h3 id="octal-notation">Octal Notation</h3>
<p>Three-digit numbering system ranging from 0 to 7.
0 &mdash;
1 &ndash;x
2 -w-
3 -wx
4 r&ndash;
5 r-x
6 rw-
7 rwx</p>
<h3 id="default-permissions">Default Permissions</h3>
<ul>
<li>Calculated based on the umask (user mask) value subtracted from the initial permissions value.</li>
</ul>
<h4 id="umask">umask</h4>
<ul>
<li>Three-digit value (octal or symbolic) that refers to read, write, and execute permissions for owner, group, and public.</li>
<li>Default umask value ::: 0022 for the root user and 0002 normal users.</li>
<li>The left-most 0 has no significance.</li>
<li>If umask is set to 000 files will get max of 666</li>
<li>If the initial permissions are 666 and the umask is 002 then the default permissions are 664. (666-002)</li>
<li>Any new files or directories creating after changing the umask will have the new default permissions set.</li>
<li>umask settings are lost when you log off. Add it to the appropriate startup file to make it permanent.</li>
</ul>
<p>Defaults</p>
<ul>
<li>files 666 rw-rw-rw-</li>
<li>directories 777 rwxrwxrwx</li>
</ul>
<h3 id="umask-command">umask command</h3>
<p>Options</p>
<ul>
<li>-S symbolic form</li>
</ul>
<h2 id="special-file-permissions">Special File Permissions</h2>
<hr>
<ul>
<li>3 types of special permission bits for executable files or directories for non root users
<ul>
<li>setuid</li>
<li>setgid</li>
<li>sticky</li>
</ul>
</li>
<li>setuid
<ul>
<li>set on exe&rsquo;s to provide non-owners the ability to run them with the privileges of the owning user</li>
<li>may be set on directories and files but will have no effect.</li>
<li>example: the su command</li>
<li>shows an &rsquo;s&rsquo; in ls -l listing at the end of owners permissions</li>
<li>If the file already has the “x” bit set for the user, the long listing will show a lowercase “s”, otherwise it will list it with an uppercase “S”.</li>
</ul>
</li>
<li>setgid
<ul>
<li>set on exe&rsquo;s to provide non-group members the ability to run them with the privileges of the owning group.</li>
<li>May be set on shared directories
<ul>
<li>allow files and subdirectories created underneath to automatically inherit the directory’s owning group.</li>
<li>saves group members who are sharing the directory contents from changing the group ID for every new file and subdirectory that they add.</li>
</ul>
</li>
<li>write command has this set by default so a member of the tty group can run it. If the file already has the “x” bit set for the group, the long listing will show a lowercase “s”, otherwise it will list it with an uppercase “S”.</li>
</ul>
</li>
<li>Sticky bit
<ul>
<li>may be set on public directories for inhibiting file deletion by non-owners</li>
<li>may be set on directories and files but will have no effect.</li>
<li>Set on /tmp and /var/tmp by default</li>
<li>Letter &ldquo;t&rdquo; in other permission feild</li>
<li>If the directory already has the “x” bit set for public, the long listing will show a lowercase “t”, otherwise it will list it with an uppercase “T”.</li>
</ul>
</li>
</ul>
<h2 id="find">Find</h2>
<ul>
<li>search files and display the full path</li>
<li>execute command on search results</li>
<li>Different search criteria
<ul>
<li>name</li>
<li>part name</li>
<li>ownership</li>
<li>owning group</li>
<li>permissions</li>
<li>inode number</li>
<li>last access</li>
<li>modification time in days or minutes</li>
<li>size</li>
<li>file type</li>
</ul>
</li>
<li>Command syntax
<ul>
<li>{find} + {path} + {search option} + {action}</li>
</ul>
</li>
<li>Options
<ul>
<li>-name / -iname (search by name)</li>
<li>-user / -group (UID / GID)</li>
<li>-perm (permissions)</li>
<li>-inum (inode)</li>
<li>-atime/amin (access time)</li>
<li>-mtime/amin (modification time)</li>
<li>-size / -type (size / type)</li>
<li></li>
</ul>
</li>
<li>Action
<ul>
<li>copy, erase, rename, change ownership, modify permissions
<ul>
<li>-exec  {} \;
<ul>
<li>replaces {} for each filename as it is found. The semicolon character (;) marks the termination of the command and it is escaped with the backslash character (\).</li>
</ul>
</li>
<li>-ok  {} \;
<ul>
<li>same as exec but requires confirmation.</li>
</ul>
</li>
</ul>
</li>
<li>-delete</li>
<li>-print &lt;- default</li>
</ul>
</li>
</ul>
<h2 id="access-control-lists-acls">Access Control Lists (ACLs)</h2>
<ul>
<li>
<p>Extra permissions that can be set on files and directories.</p>
</li>
<li>
<p>define permissions for named user and named groups.</p>
</li>
<li>
<p>Configured the same way on both files and directories.</p>
</li>
<li>
<p>Named Users</p>
<ul>
<li>May or may not be a part of the same group.</li>
</ul>
</li>
<li>
<p>2 different groups of ACLs. Default ACLs and Access ACLs.</p>
<ul>
<li>Access ACLs
<ul>
<li>Set on individual files and directories</li>
</ul>
</li>
<li>Default ACLs
<ul>
<li>Applied on directories</li>
<li>files and subdirectories inherit the ACL</li>
<li>Execute bit must be set on the directory for public.</li>
<li>Files receive the shared directory&rsquo;s default ACLs as their access ACLs - what the mask limits.</li>
<li>Subdirectories receive both default ACLs and access ACLs as they are.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>A &ldquo;+&rdquo; at the end of ls -l listing indicates ACL is set</p>
<ul>
<li>-rw-rw-r&ndash;+</li>
</ul>
</li>
</ul>
<h3 id="acl-commands">ACL Commands</h3>
<p>getfacl</p>
<ul>
<li>Display ACL settings
<ul>
<li>Displays:</li>
<li>name of file</li>
<li>owner</li>
<li>owning group</li>
<li>Permissions
<ul>
<li>colon characters save space for named user/group (or UID/GID) when extended Permissions are set.</li>
<li>Example: user:1000:r&ndash;
<ul>
<li>the named user with UID 1000, who is neither the file owner nor a member of the owning group, is allowed read-only access to this file.</li>
</ul>
</li>
<li>Example: group:dba:rw-
<ul>
<li>give the named group (dba) read and write access to the file.l
setfacl</li>
</ul>
</li>
</ul>
</li>
<li>set, modify, substitute, or delete ACL settings</li>
<li>If you want to give read and write permissions to a specific user (user1) and change the mask to read-only at the same time, the setfacl command will allocate the permissions as mentioned; however, the effective permissions for the named user will only be read-only.</li>
</ul>
</li>
</ul>
<p>u:UID:perms</p>
<ul>
<li>named user must exist in /etc/passwd</li>
<li>if no user specified, permissions are given to the owner of the file/directory</li>
</ul>
<p>g:GID:perms</p>
<ul>
<li>Named group must exist in /etc/group</li>
<li>If no group specified, permissions are given to the owning group of the file/directory</li>
</ul>
<p>o:perms</p>
<ul>
<li>Neither owner or owning group</li>
</ul>
<p>m:perms</p>
<ul>
<li>Maximum permissions for named user or named group</li>
</ul>
<p>Switches</p>
<table>
<thead>
<tr>
<th>Switch</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-b</td>
<td>Remove all Access ACLs</td>
</tr>
<tr>
<td>-d</td>
<td>Applies to default ACLs</td>
</tr>
<tr>
<td>-k</td>
<td>Removes all default ACLs</td>
</tr>
<tr>
<td>-m</td>
<td>Sets or modifies ACLs</td>
</tr>
<tr>
<td>-n</td>
<td>Prevent auto mask recalculation</td>
</tr>
<tr>
<td>-R</td>
<td>Apply Recursively to directory</td>
</tr>
<tr>
<td>-x</td>
<td>Remove Access ACL</td>
</tr>
<tr>
<td>-c</td>
<td>Display output without header</td>
</tr>
</tbody>
</table>
<h2 id="mask-value">Mask Value</h2>
<ul>
<li>Determine maximum allowable permissions for named user or named group</li>
<li>Mask value displayed on separate line in getfacl output</li>
<li>Mask is recalculated every time an ACL is modified unless value is manually entered</li>
<li>Overrides the set ACL value</li>
</ul>
<h2 id="labs">Labs</h2>
<h3 id="lab-find-stuff">Lab: find stuff</h3>
<ol>
<li>Create file 10 and search for it.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ sudo touch /root/file10
[vagrant@server1 ~]$ sudo find / -name file10 -print
/root/file10</code></pre></div><ol start="2">
<li>Perform a case insensitive search for files and directories in /dev that begin with &ldquo;usb&rdquo; followed by any characters.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ find /dev -iname usb*
/dev/usbmon0</code></pre></div><ol start="3">
<li>Find files smaller than 1MB (-1M) in size (-size) in the root user’s home directory (~).</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ find ~ -size -1M</code></pre></div><ol start="4">
<li>Search for files larger than 40MB (+40M) in size (-size) in the /usr directory:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find /usr -size +40M
/usr/share/GeoIP/GeoLite2-City.b</code></pre></div><ol start="5">
<li>Find files in the entire root file system (/) with ownership (-user) set to user daemon and owning group (-group) set to any group other than (-not or ! for negation) user1:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find / -user daemon -not -group user1</code></pre></div><ol start="6">
<li>Search for directories (-type) by the name “src” (-name) in /usr at a maximum of two subdirectory levels below (-maxdepth):</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find /usr -maxdepth 2 -type d -name src
/usr/local/src
/usr/src</code></pre></div><ol start="7">
<li>Run the above search but at least three subdirectory levels beneath /usr, substitute -maxdepth 2 with -mindepth 3.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find /usr -mindepth 3 -type d -name src
/usr/src/kernels/4.18.0-425.3.1.el8.x86_64/drivers/gpu/drm//display/dmub/src
/usr/src/kernels/4.18.0-425.3.1.el8.x86_64/tools/usb/usbip/src</code></pre></div><ol start="8">
<li>Find files in the /etc directory that were modified (-mtime) more than (the + sign) 2000 days ago:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find /etc -mtime +2000
/etc/libuser.conf
/etc/xattr.conf
/etc/whois.conf</code></pre></div><ol start="9">
<li>Run the above search for files that were modified exactly 12 days ago, replace “+2000” with “12”.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find /etc -mtime 12</code></pre></div><ol start="10">
<li>To find files in the /var/log directory that have been modified (-mmin) in the past (the - sign) 100 minutes:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find /var/log -mmin -100
/var/log/rhsm/rhsmcertd.log
/var/log/rhsm/rhsm.log
/var/log/audit/audit.log
/var/log/dnf.librepo.log
/var/log/dnf.rpm.log
/var/log/sa
/var/log/sa/sa16
/var/log/sa/sar15
/var/log/dnf.log
/var/log/hawkey.log
/var/log/cron
/var/log/messages
/var/log/secure</code></pre></div><ol start="11">
<li>Run the above search for files that have been modified exactly 25 minutes ago, replace “-100” with “25”.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find /var/log -mmin 25</code></pre></div><ol start="12">
<li>To search for block device files (-type) in the /dev directory with permissions (-perm) set to exactly 660:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find /dev -type b -perm 660
/dev/dm-1
/dev/dm-0
/dev/sda2
/dev/sda1
/dev/sda</code></pre></div><ol start="13">
<li>Search for character device files (-type) in the /dev directory with at least (-222) world writable permissions (this example would ignore checking the write and execute permissions):</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find /dev -type c -perm -222</code></pre></div><ol start="14">
<li>Find files in the /etc/systemd directory that are executable by at least their owner or group members:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find /etc/systemd -perm /110</code></pre></div><ol start="15">
<li>Search for symlinked files (-type) in /usr with permissions (-perm) set to read and write for the owner and owning group:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code> sudo find /usr -type l -perm -ug=rw</code></pre></div><ol start="16">
<li>Search for directories in the entire directory tree (/) by the name “core” (-name) and list them (ls-ld) as they are discovered without prompting for user confirmation (-exec):</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find / -name core -exec ls -ld {} \;</code></pre></div><ol start="17">
<li>Use the -ok switch to prompt for confirmation before it copies each matched file (-name) in /etc/sysconfig to /tmp:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 etc]$ sudo find /etc/sysconfig -name &#39;*.conf&#39; -ok cp {} \;
&lt; cp ... /etc/sysconfig/nftables.conf &gt; ?</code></pre></div><h3 id="lab-display-acl-and-give-permissions">Lab: Display ACL and give permissions</h3>
<ol>
<li>Create and empty file aclfile1 in /tmp and display ACLs on it:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>cd /tmp
touch aclfile1
getfacl aclfile1</code></pre></div><ol start="2">
<li>Give rw permission to user 1 but with a mask of read only and view the results.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>setfacl -m u:user1:rw,m:r aclfile1</code></pre></div><ol start="3">
<li>Promote the mask value to include write bit and verify:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>setfacl -m m:rw aclfile1
getfacl -c aclfile1</code></pre></div><h3 id="lab-identify-apply-and-erase-access-acls">Lab: Identify, Apply, and Erase Access ACLs</h3>
<ol>
<li>Switch to user1 and create file acluser1 in /tmp:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>su - user1
cd /tmp
touch acluser1</code></pre></div><ol start="2">
<li>Use ls and getfacl to check existing acl entries:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>ls -l acluser1
getfacl acluser1 -c</code></pre></div><ol start="3">
<li>Allocate rw permissions to user100 with setfacl in octal form:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>setfacl -m u:user100:6 acluser1</code></pre></div><ol start="4">
<li>Run ls (+) and getfacl to verify:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>ls -l acluser1
getfacl -c acluser1</code></pre></div><ol start="5">
<li>
<p>Open another terminal as user100 and open the file and edit it.</p>
</li>
<li>
<p>Add user200 with full rwx permissions to acluser1 using the symbolic notation and then show the updated ACL settings:</p>
</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>setfacl -m u:user200:rwx acluser1
getfacl -c acluser1</code></pre></div><ol start="7">
<li>Delete the ACL entries set for user200 and validate:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>setfacl -x u:user200 acluser1
getfacl acluser1 -c</code></pre></div><ol start="8">
<li>Delete the rest of the ACLs:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>setfacl -b acluser1</code></pre></div><ol start="9">
<li>Use the ls and getfacl commands and confirm for the ACLs removal:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>ls -l acluser1
getfacl acluser1 -c</code></pre></div><ol start="10">
<li>create group aclgroup1</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>groupadd -g 8000 aclgroup1</code></pre></div><ol start="11">
<li>add this group as a named group along with the two named users (user100 and user200).</li>
</ol>
<h3 id="lab-apply-identify-and-erase-default-acls">Lab: Apply, Identify, and erase default ACLs</h3>
<ol>
<li>Switch or log in as user1 and create a directory projects in /tmp:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>su - user1
cd /tmp
mkdir projects</code></pre></div><ol start="2">
<li>Use the getfacl command for an initial look at the permissions on the directory:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>getfacl -c projects</code></pre></div><ol start="3">
<li>Allocate default read, write, and execute permissions to user100 and user200 on the directory. Use both octal and symbolic notations and the -d (default) option with the setfacl command.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>setfacl -dm u:user100:7,u:user200:rwx projects/
getfacl -c projects/</code></pre></div><ol start="4">
<li>Create a subdirectory prjdir1 under projects and observe the ACL inheritance:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>mkdir prjdir1
getfacl -c prjdir1</code></pre></div><ol start="5">
<li>Create a file prjfile1 under projects and observe the ACL inheritance:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>touch prjfile1
getfacl -c prjfilel</code></pre></div><ol start="6">
<li>log in as one of the named users, change directory into /tmp/projects, and edit prjfile1 (add some random text). Then change into the prjdir1 and create file file100.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>su - user100
cd /tmp/projects
vim prjfile1
ls -l prjfile1
cd prjdir1
touch file100
pwd</code></pre></div><ol start="7">
<li>Delete all the default ACLs from the projects directory as user1 and confirm:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>exit
su - user1
cd /tmp
setfacl -k projects
getfacl -c projects</code></pre></div><ol start="8">
<li>create a group such as aclgroup2 by running groupadd -g 9000 aclgroup2 as the root user and repeat this exercise by adding this group as a named group along with the two named users (user100 and user200).</li>
</ol>
<h3 id="lab-modify-permission-bits-using-symbolic-form">Lab: Modify Permission Bits Using Symbolic Form</h3>
<ol>
<li>Add an execute bit for the owner and a write bit for group and public</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ chmod u+x permfile1 -v
mode of &#39;permfile1&#39; changed from 0444 (r--r--r--) to 0544 (r-xr--r--)
[vagrant@server1 ~]$ chmod -v go+w permfile1
mode of &#39;permfile1&#39; changed from 0544 (r-xr--r--) to 0566 (r-xrw-rw-)</code></pre></div><ol start="2">
<li>Revoke the write bit from public and assign read, write, and execute bits to the three user categories at the same time.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ chmod -v o-w permfile1
mode of &#39;permfile1&#39; changed from 0566 (r-xrw-rw-) to 0564 (r-xrw-r--)
[vagrant@server1 ~]$ chmod -v a=rwx permfile1
mode of &#39;permfile1&#39; changed from 0564 (r-xrw-r--) to 0777 (rwxrwxrwx)</code></pre></div><ol start="3">
<li>Revoke write from the owning group and write and execute bits from public.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ chmod g-w,o-wx permfile1 -v
mode of &#39;permfile1&#39; changed from 0777 (rwxrwxrwx) to 0754 (rwxr-xr--)</code></pre></div><h3 id="lab-modify-permission-bits-using-octal-form">Lab: Modify Permission Bits Using Octal Form</h3>
<ol>
<li>Read only for user, group, and other:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ touch permfile2
[vagrant@server1 ~]$ chmod 444 permfile2
[vagrant@server1 ~]$ ls -l permfile2
-r--r--r--. 1 vagrant vagrant 0 Feb  4 12:22 permfile2</code></pre></div><ol start="2">
<li>Add an execute bit for the owner:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ chmod -v 544 permfile2
mode of &#39;permfile2&#39; changed from 0444 (r--r--r--) to 0544 (r-xr--r--)</code></pre></div><ol start="3">
<li>Add a write permission bit for group and public:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ chmod -v 566 permfile2
mode of &#39;permfile2&#39; changed from 0544 (r-xr--r--) to 0566 (r-xrw-rw-)</code></pre></div><ol start="4">
<li>Revoke the write bit for public:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ chmod -v 564 permfile2
mode of &#39;permfile2&#39; changed from 0566 (r-xrw-rw-) to 0564 (r-xrw-r--)</code></pre></div><ol start="5">
<li>Assign read, write, and execute permission bits to all three user categories:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ chmod -v 777 permfile2
mode of &#39;permfile2&#39; changed from 0564 (r-xrw-r--) to 0777 (rwxrwxrwx)</code></pre></div><ol start="6">
<li>Run the umask command without any options and it will display the current umask value in octal notation:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ umask
0002</code></pre></div><ol start="7">
<li>Symbolic form</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ umask -S
u=rwx,g=rwx,o=rx</code></pre></div><ol start="8">
<li>Set all new files and directories to get 640 and 750 permissions,</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>umask 027
umask u=rwx,g=rx,o=</code></pre></div><ol start="9">
<li>Test new umask (666-027=640) (777-027=750)</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ touch tempfile1
[vagrant@server1 ~]$ ls -l tempfile1
-rw-r-----. 1 vagrant vagrant 0 Feb  5 12:09 tempfile1
[vagrant@server1 ~]$ mkdir tempdir1
[vagrant@server1 ~]$ ls -ld tempdir1
drwxr-x---. 2 vagrant vagrant 6 Feb  5 12:10 tempdir1</code></pre></div><h3 id="lab--view-suid-bit-on-su-command">Lab:  View suid bit on su command</h3>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ ls -l /usr/bin/su
-rwsr-xr-x. 1 root root 50152 Aug 22 10:08 /usr/bin/su</code></pre></div><h3 id="lab-test-the-effect-of-setuid-bit-on-executable-files">Lab: Test the Effect of setuid Bit on Executable Files</h3>
<ol>
<li>Open 2 terminal windows. Switch to user1 in terminal1</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ su - user1
Password:
Last login: Sun Feb  5 12:37:12 UTC 2023 on pts/1</code></pre></div><ol start="2">
<li>Switch to root on terminal2</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo su - root</code></pre></div><ol start="3">
<li>T1 Revoke the setuid bit from /usr/bin/su</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>chmod -v u-s /usr/bin/su</code></pre></div><ol start="4">
<li>T2 log off as root</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>ctrl+d</code></pre></div><ol start="5">
<li>Try to log in has root from both terminals</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[user1@server1 ~]$ su - root
Password:
su: Authentication failure</code></pre></div><ol start="6">
<li>T1 restore the setuid bit</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ sudo chmod -v +4000 /usr/bin/su
mode of &#39;/usr/bin/su&#39; changed from 0755 (rwxr-xr-x) to 4755 (rwsr-xr-x)</code></pre></div><h3 id="lab-test-the-effect-of-setgid-bit-on-executable-files">Lab: Test the Effect of setgid Bit on Executable Files</h3>
<ol>
<li>
<p>Log into two terminals
T1 root
T2 user1
Opened with ssh</p>
</li>
<li>
<p>T2 list users currently logged in</p>
</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>who</code></pre></div><ol start="3">
<li>T2 send a message to root</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>write root</code></pre></div><ol start="3">
<li>T1 revoke setgid from /usr/bin/write</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>chmod g-s /usr/bin/write -v</code></pre></div><ol start="4">
<li>Try to write root</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[user1@server1 ~]$ write root
write: effective gid does not match group of /dev/pts/0</code></pre></div><ol start="5">
<li>Restore the setgid bit on /usr/bin/write:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[root@server1 ~]# sudo chmod -v +2000 /usr/bin/write
mode of &#39;/usr/bin/write&#39; changed from 0755 (rwxr-xr-x) to 2755 (rwxr-sr-x)</code></pre></div><ol start="6">
<li>Test</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>write root</code></pre></div><h3 id="lab-set-up-shared-directory-for-group-collaboration">Lab: Set up Shared Directory for Group Collaboration</h3>
<ol>
<li>set up 2 test users</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[root@server1 ~]# adduser user100
[root@server1 ~]# adduser user200</code></pre></div><ol start="2">
<li>Add group sgrp with GID 9999 with the groupadd command:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[root@server1 ~]# groupadd -g 9999 sgrp</code></pre></div><ol start="3">
<li>Add user100 and user200 as members to sgrp using the usermod command:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[root@server1 ~]# usermod -aG sgrp user100
[root@server1 ~]# usermod -aG sgrp user200</code></pre></div><ol start="4">
<li>Create /sdir directory</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[root@server1 ~]# mkdir /sdir</code></pre></div><ol start="5">
<li>Set ownership and owning group on /sdir to root and sgrp, using the chown command:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[root@server1 ~]# chown root:sgrp /sdir</code></pre></div><ol start="6">
<li>Set the setgid bit on /sdir using the chmod command:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ sudo chmod g+s /sdir</code></pre></div><ol start="7">
<li>Add write permission to the group members on /sdir and revoke all permissions from public:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[root@server1 ~]# chmod g+w,o-rx /sdir</code></pre></div><ol start="8">
<li>Verify</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[root@server1 ~]# ls -ld /sdir
drwxrws---. 2 root sgrp 6 Feb 13 15:49 /sdir</code></pre></div><ol start="9">
<li>Switch or log in as user100 and change to the /sdir directory:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[root@server1 ~]# su - user100
[user100@server1 ~]$ cd /sdir</code></pre></div><ol start="10">
<li>Create a file and check the owner and owning group on it:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[user100@server1 sdir]$ touch file100
[user100@server1 sdir]$ ls -l file100
-rw-rw-r--. 1 user100 sgrp 0 Feb 10 22:41 file100</code></pre></div><ol start="11">
<li>Log out as user100, and switch or log in as user200 and change to the /sdir directory:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[root@server1 ~]# su - user200
[user200@server1 ~]$ cd /sdir</code></pre></div><ol start="12">
<li>Create a file and check the owner and owning group on it:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[user200@server1 sdir]$ touch file200
[user200@server1 sdir]$ ls -l file200
-rw-rw-r--. 1 user200 sgrp 0 Feb 13 16:01 file200</code></pre></div><h3 id="lab-view-t-in-permissions-for-sticky-bit">Lab: View &ldquo;t&rdquo; in permissions for sticky bit</h3>
<div class="highlight wrap-code"><pre tabindex="0"><code>[user200@server1 sdir]$ ls -l /tmp /var/tmp -d
drwxrwxrwt. 8 root root 185 Feb 13 16:12 /tmp
drwxrwxrwt. 4 root root 113 Feb 13 16:00 /var/tmp</code></pre></div><h3 id="lab-test-the-effect-of-sticky-bit">Lab: Test the effect of Sticky Bit</h3>
<ol>
<li>Switch to user100 and change to the /tmp directory</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[user100@server1 sdir]$ cd /tmp</code></pre></div><ol start="2">
<li>Create file called stckyfile</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[user100@server1 tmp]$ touch stickyfile</code></pre></div><ol start="3">
<li>Try to delete the file as user200</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[user200@server1 tmp]$ rm stickyfile
rm: remove write-protected regular empty file &#39;stickyfile&#39;? y
rm: cannot remove &#39;stickyfile&#39;: Operation not permitted</code></pre></div><ol start="4">
<li>Revoke the /tmp stickybit and confirm</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>[vagrant@server1 ~]$ sudo chmod o-t /tmp
[vagrant@server1 ~]$ ls -ld /tmp
drwxrwxrwx. 8 root root 4096 Feb 13 22:00 /tmp</code></pre></div><ol start="5">
<li>Retry the removal as user200</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>rm stickyfile</code></pre></div><ol start="6">
<li>Restore the sticky bit on /tmp</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo chmod -v +1000 /tmp</code></pre></div><h3 id="lab-manipulate-file-permissions-user1">Lab: Manipulate File Permissions (user1)</h3>
<ol>
<li>Create file file11 and directory dir11 in the home directory. Make a note of the permissions on them.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>touch file11
mkdir dir11</code></pre></div><ol start="2">
<li>Run the umask command to determine the current umask.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>umask</code></pre></div><ol start="3">
<li>Change the umask value to 0035 using symbolic notation.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>umask g=r,0=w</code></pre></div><ol start="4">
<li>Create file22 and directory dir22 in the home directory.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>touch file22
mkdir dir22</code></pre></div><ol start="5">
<li>Observe the permissions on file22 and dir22, and compare them with the permissions on file11 and dir11.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>ls -l</code></pre></div><ol start="6">
<li>Use the chmod command and modify the permissions on file11 to match those on file22.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>chmod g-w,o-r,o+w file11</code></pre></div><ol start="7">
<li>Use the chmod command and modify the permissions on dir22 to match those on dir11. Do not remove file11, file22, dir11, and dir22 yet.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>chmod g-wx,o-rx,o+w dir11</code></pre></div><h3 id="lab-configure-group-collaboration-and-prevent-file-deletion-root">Lab: Configure Group Collaboration and Prevent File Deletion (root)</h3>
<ol>
<li>create directory /sdir. Create group sgrp and create user1000 and user2000 and add them to the group:</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>mkdir /sdir
groupadd sgrp
adduser user1000 &amp;&amp; adduser user2000
usermod -a -G sgrp user1000
usermod -a -G sgrp user2000</code></pre></div><ol start="2">
<li>Set up appropriate ownership (root), owning group (sgrp), and permissions (rwx for group, &mdash; for public, s for group, and t for public) on the directory to support group collaboration and ensure non-owners cannot delete files.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>chgrp sgrp sdir
chmod g=rwx,o=--- sdir
chmod o+t sdir
chmod g+s sdir</code></pre></div><ol start="3">
<li>Log on as user100 and create a file under /sdir.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>su - user1000
cd /sdir
touch testfile</code></pre></div><ol start="4">
<li>Log on as user200 and try to edit that file. You should be able to edit the file successfully.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>su - user200
cd /sdir
vim testfile
cat testfile</code></pre></div><ol start="5">
<li>As user2000 try to delete the file. You should not be able to.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>rm testfile</code></pre></div><h3 id="lab-find-files-root">Lab: Find Files (root)</h3>
<ol>
<li>Search for all files in the entire directory structure that have been modified in the last 300 minutes and display their type.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>find /sdir -mtime -300 -exec file {} \;</code></pre></div><ol start="2">
<li>Search for named pipe and socket files.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>find / -type p
find / -type s</code></pre></div><h3 id="lab-find-files-using-different-criteria-root">Lab: Find Files Using Different Criteria (root)</h3>
<ol>
<li>Search for regular files under /usr that were accessed more than 100 days ago, are not bigger than 5MB in size, and are owned by the user root.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>find /usr -type f -mtime +100 -size -5M -user root</code></pre></div><h3 id="lab-apply-acl-settings-root">Lab: Apply ACL Settings (root)</h3>
<ol>
<li>Create file testfile under /tmp.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>touch /tmp/testfile</code></pre></div><ol start="2">
<li>Create users.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>adduser user2000
adduser user3000
adduser user4000</code></pre></div><ol start="3">
<li>Apply ACL settings on the file so that user2000 gets 7, user3000 gets 6, and user4000 gets 4 permissions.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>setfacl -m u:user2000:7 testfile
setfacl -m u:user3000:6 testfile
setfacl -m u:user4000:4 testfile</code></pre></div><ol start="4">
<li>Remove the ACLs for user2000, and verify.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>setfacl -x user2000 testfile
getfacl testfile</code></pre></div><ol start="5">
<li>Erase all remaining ACLs at once, and confirm.</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>setfacl -b testfile
getfacl testfile</code></pre></div><h2 id="review-questions">Review Questions</h2>
<p>Q. The output generated by the umask command shows the current user mask in four digits. What is the significance of the left-most digit?</p>
<p>A. The left-most digit has no significance in the umask value.</p>
<hr>
<p>Q. What would the command find /dev -type c -perm 660 do?</p>
<p>A. The find command provided will find all character device files under /dev with exact permissions of 660.</p>
<hr>
<p>Q. Default permissions are calculated by subtracting the initial permissions from the umask value. True or False?</p>
<p>A. False. Default permissions are calculated by subtracting the umask value from the initial permission values.</p>
<hr>
<p>Q. What would be the effect of the sticky bit on an executable file?</p>
<p>A. Nothing. The sticky bit is meant for directories only.</p>
<hr>
<p>Q. Name the permission classes, types, and modes.</p>
<p>A. Permission classes are user, group, and public; permission types are read, write, and execute; and permission modes are add, revoke, and assign.</p>
<hr>
<p>Q. Default ACLs are meant for directories only. True or False?</p>
<p>A. True. Default ACLs are meant for directories only.</p>
<hr>
<p>Q. The default umask for a normal user in bash shell is 0027. True or False?</p>
<p>A. False. The default umask for bash shell users is 0002.</p>
<hr>
<p>Q. What digit represents the setuid bit in the chmod command?</p>
<p>A. The digit 4 represents the setuid bit.</p>
<hr>
<p>Q. What would the command chmod g-s file1 do?</p>
<p>A. It would erase the setgid bit from file1.</p>
<hr>
<p>Q. Sticky bit is recommended for every system directory. True or False?</p>
<p>A. False.</p>
<hr>
<p>Q. What would the command setfacl -m g:dba:rw file1 do?</p>
<p>A. This command will give the users of the dba group read and write permissions on file1.</p>
<hr>
<p>Q. The setgid bit enables group members to run a command at a higher priority. True or False?</p>
<p>A. False.</p>
<hr>
<p>Q. What is the equivalent symbolic value for permissions 751?</p>
<p>A. The equivalent for octal 751 is rwxr-x&ndash;x.</p>
<hr>
<p>Q. What permissions would the owner of the file get if the chmod command is executed with 555?</p>
<p>A. The owner will get read and execute permissions.</p>
<hr>
<p>Q. What would the find / -name core -ok rm {} ; command do?</p>
<p>A. The find command provided will display all files by the name core in the entire directory hierarchy and ask for removal confirmation as it finds them.</p>
<hr>
<p>Q. Which special permission bit is set on a directory for team sharing?</p>
<p>A. The setgid bit is set for team sharing.</p>

            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation showVisitedLinks">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<img src="/images/perfectlogo.png" alt="perfect dark mode">

        </div>

        <search>
          <div class="searchbox default-animation">
            <i class="fas fa-search" title="Search (CTRL+ALT+f)"></i>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </search>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/js/auto-complete.js?1716135451" defer></script>
        <script src="/js/lunr/lunr.min.js?1716135451" defer></script>
        <script src="/js/lunr/lunr.stemmer.support.min.js?1716135451" defer></script>
        <script src="/js/lunr/lunr.multi.min.js?1716135451" defer></script>
        <script src="/js/lunr/lunr.en.min.js?1716135451" defer></script>
        <script src="/js/search.js?1716135451" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <ul>
          <li><a class="padding" href="/"><i class="fa-fw fas fa-home"></i> Home</a></li>
        </ul>
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-topics">
          <ul class="enlarge morespace collapsible-menu">
          <li data-nav-id="/linux/" class="parent "><a class="padding" href="/linux/">Linux<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-9e5aaccdf48687824ccd3b3097af8e41" class="morespace collapsible-menu">
          <li data-nav-id="/linux/fedora_setup/" class=""><a class="padding" href="/linux/fedora_setup/">Fedora Desktop Setup<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/linux/rhcsavagrantlabsetup/" class=""><a class="padding" href="/linux/rhcsavagrantlabsetup/">RHCSA Lab Using Vagrant<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/linux/rhcsanotes/" class=""><a class="padding" href="/linux/rhcsanotes/">RHCSA Notes<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/linux/rhcsa/4_adv_file_management/" class="active"><a class="padding" href="/linux/rhcsa/4_adv_file_management/"><i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/networking/" class=""><a class="padding" href="/networking/">Networking<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-ec0ce2ce30f7ea4f73b681ec6981b84f" class="morespace collapsible-menu">
          <li data-nav-id="/networking/ccna_spaced_repetition/" class=""><a class="padding" href="/networking/ccna_spaced_repetition/">How to Study for CCNA<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/networking/resources_for_passing_ccna/" class=""><a class="padding" href="/networking/resources_for_passing_ccna/">Resources I used to Pass CCNA<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/networking/things_to_learn_after_ccna/" class=""><a class="padding" href="/networking/things_to_learn_after_ccna/">What to Learn After CCNA<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/tools/" class=""><a class="padding" href="/tools/">Tools<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-cff67d57e00d6d598d882def3568f700" class="morespace collapsible-menu">
          <li data-nav-id="/tools/process-bookfusion-highlights/" class=""><a class="padding" href="/tools/process-bookfusion-highlights/">How to Process Bookfusion Highlights in Vim<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/tools/nextcloud/" class=""><a class="padding" href="/tools/nextcloud/">Nextcloud Guide<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/tools/hugorelearn/" class=""><a class="padding" href="/tools/hugorelearn/">How to Set up Hugo Relearn Theme<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/tools/buildawebsite/" class=""><a class="padding" href="/tools/buildawebsite/">Building a Minimalist Website with Hugo<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/tools/calibre-web-with-docker/" class=""><a class="padding" href="/tools/calibre-web-with-docker/">Calibre Web With Docker<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          </ul>
        </div>
        <div id="R-shortcuts">
          <div class="nav-title padding">More</div>
          <ul class="space">
            <li><a class="padding" href="https://github.com/perfectdarkmode1"><i class='fab fa-fw fa-github'></i> GitHub</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-language"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = this.querySelector( this.value ).dataset.url;">
                      <option id="R-select-language-en" value="#R-select-language-en" data-url="/linux/rhcsa/4_adv_file_management/" lang="en-us" selected></option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-paint-brush"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-select-variant-zen-dark" value="zen-dark" selected>Zen Dark</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks showVisitedLinks">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-history"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter">
	    <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
          </div>
        </div>
      </div>
    </aside>
    <script src="/js/clipboard.min.js?1716135451" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1716135451" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/d3/d3-color.min.js?1716135451" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1716135451" defer></script>
    <script src="/js/d3/d3-drag.min.js?1716135451" defer></script>
    <script src="/js/d3/d3-ease.min.js?1716135451" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1716135451" defer></script>
    <script src="/js/d3/d3-selection.min.js?1716135451" defer></script>
    <script src="/js/d3/d3-timer.min.js?1716135451" defer></script>
    <script src="/js/d3/d3-transition.min.js?1716135451" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1716135451" defer></script>
    <script src="/js/js-yaml.min.js?1716135451" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/theme.js?1716135451" defer></script>
  </body>
</html>
